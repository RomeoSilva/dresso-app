function oM(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function rC(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var iC={exports:{}},yp={},sC={exports:{}},ge={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Du=Symbol.for("react.element"),aM=Symbol.for("react.portal"),lM=Symbol.for("react.fragment"),cM=Symbol.for("react.strict_mode"),uM=Symbol.for("react.profiler"),dM=Symbol.for("react.provider"),hM=Symbol.for("react.context"),fM=Symbol.for("react.forward_ref"),pM=Symbol.for("react.suspense"),mM=Symbol.for("react.memo"),gM=Symbol.for("react.lazy"),NE=Symbol.iterator;function yM(t){return t===null||typeof t!="object"?null:(t=NE&&t[NE]||t["@@iterator"],typeof t=="function"?t:null)}var oC={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},aC=Object.assign,lC={};function vl(t,e,n){this.props=t,this.context=e,this.refs=lC,this.updater=n||oC}vl.prototype.isReactComponent={};vl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};vl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function cC(){}cC.prototype=vl.prototype;function x0(t,e,n){this.props=t,this.context=e,this.refs=lC,this.updater=n||oC}var E0=x0.prototype=new cC;E0.constructor=x0;aC(E0,vl.prototype);E0.isPureReactComponent=!0;var DE=Array.isArray,uC=Object.prototype.hasOwnProperty,T0={current:null},dC={key:!0,ref:!0,__self:!0,__source:!0};function hC(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)uC.call(e,r)&&!dC.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Du,type:t,key:s,ref:o,props:i,_owner:T0.current}}function vM(t,e){return{$$typeof:Du,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function b0(t){return typeof t=="object"&&t!==null&&t.$$typeof===Du}function wM(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var OE=/\/+/g;function Jm(t,e){return typeof t=="object"&&t!==null&&t.key!=null?wM(""+t.key):e.toString(36)}function xh(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Du:case aM:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Jm(o,0):r,DE(i)?(n="",t!=null&&(n=t.replace(OE,"$&/")+"/"),xh(i,e,n,"",function(c){return c})):i!=null&&(b0(i)&&(i=vM(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(OE,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",DE(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Jm(s,a);o+=xh(s,e,n,l,i)}else if(l=yM(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Jm(s,a++),o+=xh(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Vd(t,e,n){if(t==null)return t;var r=[],i=0;return xh(t,r,"","",function(s){return e.call(n,s,i++)}),r}function _M(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var tn={current:null},Eh={transition:null},xM={ReactCurrentDispatcher:tn,ReactCurrentBatchConfig:Eh,ReactCurrentOwner:T0};function fC(){throw Error("act(...) is not supported in production builds of React.")}ge.Children={map:Vd,forEach:function(t,e,n){Vd(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Vd(t,function(){e++}),e},toArray:function(t){return Vd(t,function(e){return e})||[]},only:function(t){if(!b0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ge.Component=vl;ge.Fragment=lM;ge.Profiler=uM;ge.PureComponent=x0;ge.StrictMode=cM;ge.Suspense=pM;ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xM;ge.act=fC;ge.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=aC({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=T0.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)uC.call(e,l)&&!dC.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Du,type:t.type,key:i,ref:s,props:r,_owner:o}};ge.createContext=function(t){return t={$$typeof:hM,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:dM,_context:t},t.Consumer=t};ge.createElement=hC;ge.createFactory=function(t){var e=hC.bind(null,t);return e.type=t,e};ge.createRef=function(){return{current:null}};ge.forwardRef=function(t){return{$$typeof:fM,render:t}};ge.isValidElement=b0;ge.lazy=function(t){return{$$typeof:gM,_payload:{_status:-1,_result:t},_init:_M}};ge.memo=function(t,e){return{$$typeof:mM,type:t,compare:e===void 0?null:e}};ge.startTransition=function(t){var e=Eh.transition;Eh.transition={};try{t()}finally{Eh.transition=e}};ge.unstable_act=fC;ge.useCallback=function(t,e){return tn.current.useCallback(t,e)};ge.useContext=function(t){return tn.current.useContext(t)};ge.useDebugValue=function(){};ge.useDeferredValue=function(t){return tn.current.useDeferredValue(t)};ge.useEffect=function(t,e){return tn.current.useEffect(t,e)};ge.useId=function(){return tn.current.useId()};ge.useImperativeHandle=function(t,e,n){return tn.current.useImperativeHandle(t,e,n)};ge.useInsertionEffect=function(t,e){return tn.current.useInsertionEffect(t,e)};ge.useLayoutEffect=function(t,e){return tn.current.useLayoutEffect(t,e)};ge.useMemo=function(t,e){return tn.current.useMemo(t,e)};ge.useReducer=function(t,e,n){return tn.current.useReducer(t,e,n)};ge.useRef=function(t){return tn.current.useRef(t)};ge.useState=function(t){return tn.current.useState(t)};ge.useSyncExternalStore=function(t,e,n){return tn.current.useSyncExternalStore(t,e,n)};ge.useTransition=function(){return tn.current.useTransition()};ge.version="18.3.1";sC.exports=ge;var _=sC.exports;const qe=rC(_),S0=oM({__proto__:null,default:qe},[_]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EM=_,TM=Symbol.for("react.element"),bM=Symbol.for("react.fragment"),SM=Object.prototype.hasOwnProperty,IM=EM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,CM={key:!0,ref:!0,__self:!0,__source:!0};function pC(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)SM.call(e,r)&&!CM.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:TM,type:t,key:s,ref:o,props:i,_owner:IM.current}}yp.Fragment=bM;yp.jsx=pC;yp.jsxs=pC;iC.exports=yp;var m=iC.exports,wy={},mC={exports:{}},Rn={},gC={exports:{}},yC={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,z){var Y=F.length;F.push(z);e:for(;0<Y;){var J=Y-1>>>1,ue=F[J];if(0<i(ue,z))F[J]=z,F[Y]=ue,Y=J;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var z=F[0],Y=F.pop();if(Y!==z){F[0]=Y;e:for(var J=0,ue=F.length,ce=ue>>>1;J<ce;){var q=2*(J+1)-1,ie=F[q],Te=q+1,st=F[Te];if(0>i(ie,Y))Te<ue&&0>i(st,ie)?(F[J]=st,F[Te]=Y,J=Te):(F[J]=ie,F[q]=Y,J=q);else if(Te<ue&&0>i(st,Y))F[J]=st,F[Te]=Y,J=Te;else break e}}return z}function i(F,z){var Y=F.sortIndex-z.sortIndex;return Y!==0?Y:F.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,h=null,f=3,p=!1,g=!1,v=!1,w=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(F){for(var z=n(c);z!==null;){if(z.callback===null)r(c);else if(z.startTime<=F)r(c),z.sortIndex=z.expirationTime,e(l,z);else break;z=n(c)}}function C(F){if(v=!1,b(F),!g)if(n(l)!==null)g=!0,K(N);else{var z=n(c);z!==null&&re(C,z.startTime-F)}}function N(F,z){g=!1,v&&(v=!1,E(S),S=-1),p=!0;var Y=f;try{for(b(z),h=n(l);h!==null&&(!(h.expirationTime>z)||F&&!O());){var J=h.callback;if(typeof J=="function"){h.callback=null,f=h.priorityLevel;var ue=J(h.expirationTime<=z);z=t.unstable_now(),typeof ue=="function"?h.callback=ue:h===n(l)&&r(l),b(z)}else r(l);h=n(l)}if(h!==null)var ce=!0;else{var q=n(c);q!==null&&re(C,q.startTime-z),ce=!1}return ce}finally{h=null,f=Y,p=!1}}var D=!1,I=null,S=-1,A=5,R=-1;function O(){return!(t.unstable_now()-R<A)}function L(){if(I!==null){var F=t.unstable_now();R=F;var z=!0;try{z=I(!0,F)}finally{z?k():(D=!1,I=null)}}else D=!1}var k;if(typeof x=="function")k=function(){x(L)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,Q=B.port2;B.port1.onmessage=L,k=function(){Q.postMessage(null)}}else k=function(){w(L,0)};function K(F){I=F,D||(D=!0,k())}function re(F,z){S=w(function(){F(t.unstable_now())},z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,K(N))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(F){switch(f){case 1:case 2:case 3:var z=3;break;default:z=f}var Y=f;f=z;try{return F()}finally{f=Y}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,z){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var Y=f;f=F;try{return z()}finally{f=Y}},t.unstable_scheduleCallback=function(F,z,Y){var J=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?J+Y:J):Y=J,F){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=Y+ue,F={id:u++,callback:z,priorityLevel:F,startTime:Y,expirationTime:ue,sortIndex:-1},Y>J?(F.sortIndex=Y,e(c,F),n(l)===null&&F===n(c)&&(v?(E(S),S=-1):v=!0,re(C,Y-J))):(F.sortIndex=ue,e(l,F),g||p||(g=!0,K(N))),F},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(F){var z=f;return function(){var Y=f;f=z;try{return F.apply(this,arguments)}finally{f=Y}}}})(yC);gC.exports=yC;var PM=gC.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AM=_,Cn=PM;function W(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var vC=new Set,Qc={};function Do(t,e){Ka(t,e),Ka(t+"Capture",e)}function Ka(t,e){for(Qc[t]=e,t=0;t<e.length;t++)vC.add(e[t])}var ti=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_y=Object.prototype.hasOwnProperty,RM=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,LE={},VE={};function kM(t){return _y.call(VE,t)?!0:_y.call(LE,t)?!1:RM.test(t)?VE[t]=!0:(LE[t]=!0,!1)}function NM(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function DM(t,e,n,r){if(e===null||typeof e>"u"||NM(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function nn(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var At={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){At[t]=new nn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];At[e]=new nn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){At[t]=new nn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){At[t]=new nn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){At[t]=new nn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){At[t]=new nn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){At[t]=new nn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){At[t]=new nn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){At[t]=new nn(t,5,!1,t.toLowerCase(),null,!1,!1)});var I0=/[\-:]([a-z])/g;function C0(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(I0,C0);At[e]=new nn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(I0,C0);At[e]=new nn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(I0,C0);At[e]=new nn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){At[t]=new nn(t,1,!1,t.toLowerCase(),null,!1,!1)});At.xlinkHref=new nn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){At[t]=new nn(t,1,!1,t.toLowerCase(),null,!0,!0)});function P0(t,e,n,r){var i=At.hasOwnProperty(e)?At[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(DM(e,n,i,r)&&(n=null),r||i===null?kM(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var hi=AM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Md=Symbol.for("react.element"),va=Symbol.for("react.portal"),wa=Symbol.for("react.fragment"),A0=Symbol.for("react.strict_mode"),xy=Symbol.for("react.profiler"),wC=Symbol.for("react.provider"),_C=Symbol.for("react.context"),R0=Symbol.for("react.forward_ref"),Ey=Symbol.for("react.suspense"),Ty=Symbol.for("react.suspense_list"),k0=Symbol.for("react.memo"),Ai=Symbol.for("react.lazy"),xC=Symbol.for("react.offscreen"),ME=Symbol.iterator;function Hl(t){return t===null||typeof t!="object"?null:(t=ME&&t[ME]||t["@@iterator"],typeof t=="function"?t:null)}var Ye=Object.assign,Zm;function pc(t){if(Zm===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Zm=e&&e[1]||""}return`
`+Zm+t}var eg=!1;function tg(t,e){if(!t||eg)return"";eg=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{eg=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?pc(t):""}function OM(t){switch(t.tag){case 5:return pc(t.type);case 16:return pc("Lazy");case 13:return pc("Suspense");case 19:return pc("SuspenseList");case 0:case 2:case 15:return t=tg(t.type,!1),t;case 11:return t=tg(t.type.render,!1),t;case 1:return t=tg(t.type,!0),t;default:return""}}function by(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case wa:return"Fragment";case va:return"Portal";case xy:return"Profiler";case A0:return"StrictMode";case Ey:return"Suspense";case Ty:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case _C:return(t.displayName||"Context")+".Consumer";case wC:return(t._context.displayName||"Context")+".Provider";case R0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case k0:return e=t.displayName||null,e!==null?e:by(t.type)||"Memo";case Ai:e=t._payload,t=t._init;try{return by(t(e))}catch{}}return null}function LM(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return by(e);case 8:return e===A0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function is(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function EC(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function VM(t){var e=EC(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function jd(t){t._valueTracker||(t._valueTracker=VM(t))}function TC(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=EC(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Zh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Sy(t,e){var n=e.checked;return Ye({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function jE(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=is(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function bC(t,e){e=e.checked,e!=null&&P0(t,"checked",e,!1)}function Iy(t,e){bC(t,e);var n=is(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Cy(t,e.type,n):e.hasOwnProperty("defaultValue")&&Cy(t,e.type,is(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function FE(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Cy(t,e,n){(e!=="number"||Zh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var mc=Array.isArray;function Oa(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+is(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Py(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(W(91));return Ye({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function UE(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(W(92));if(mc(n)){if(1<n.length)throw Error(W(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:is(n)}}function SC(t,e){var n=is(e.value),r=is(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function $E(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function IC(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ay(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?IC(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Fd,CC=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Fd=Fd||document.createElement("div"),Fd.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Fd.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Yc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ic={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},MM=["Webkit","ms","Moz","O"];Object.keys(Ic).forEach(function(t){MM.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ic[e]=Ic[t]})});function PC(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ic.hasOwnProperty(t)&&Ic[t]?(""+e).trim():e+"px"}function AC(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=PC(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var jM=Ye({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ry(t,e){if(e){if(jM[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(W(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(W(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(W(61))}if(e.style!=null&&typeof e.style!="object")throw Error(W(62))}}function ky(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ny=null;function N0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Dy=null,La=null,Va=null;function BE(t){if(t=Vu(t)){if(typeof Dy!="function")throw Error(W(280));var e=t.stateNode;e&&(e=Ep(e),Dy(t.stateNode,t.type,e))}}function RC(t){La?Va?Va.push(t):Va=[t]:La=t}function kC(){if(La){var t=La,e=Va;if(Va=La=null,BE(t),e)for(t=0;t<e.length;t++)BE(e[t])}}function NC(t,e){return t(e)}function DC(){}var ng=!1;function OC(t,e,n){if(ng)return t(e,n);ng=!0;try{return NC(t,e,n)}finally{ng=!1,(La!==null||Va!==null)&&(DC(),kC())}}function Xc(t,e){var n=t.stateNode;if(n===null)return null;var r=Ep(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(W(231,e,typeof n));return n}var Oy=!1;if(ti)try{var Gl={};Object.defineProperty(Gl,"passive",{get:function(){Oy=!0}}),window.addEventListener("test",Gl,Gl),window.removeEventListener("test",Gl,Gl)}catch{Oy=!1}function FM(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Cc=!1,ef=null,tf=!1,Ly=null,UM={onError:function(t){Cc=!0,ef=t}};function $M(t,e,n,r,i,s,o,a,l){Cc=!1,ef=null,FM.apply(UM,arguments)}function BM(t,e,n,r,i,s,o,a,l){if($M.apply(this,arguments),Cc){if(Cc){var c=ef;Cc=!1,ef=null}else throw Error(W(198));tf||(tf=!0,Ly=c)}}function Oo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function LC(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function zE(t){if(Oo(t)!==t)throw Error(W(188))}function zM(t){var e=t.alternate;if(!e){if(e=Oo(t),e===null)throw Error(W(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return zE(i),t;if(s===r)return zE(i),e;s=s.sibling}throw Error(W(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(W(189))}}if(n.alternate!==r)throw Error(W(190))}if(n.tag!==3)throw Error(W(188));return n.stateNode.current===n?t:e}function VC(t){return t=zM(t),t!==null?MC(t):null}function MC(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=MC(t);if(e!==null)return e;t=t.sibling}return null}var jC=Cn.unstable_scheduleCallback,WE=Cn.unstable_cancelCallback,WM=Cn.unstable_shouldYield,qM=Cn.unstable_requestPaint,ot=Cn.unstable_now,HM=Cn.unstable_getCurrentPriorityLevel,D0=Cn.unstable_ImmediatePriority,FC=Cn.unstable_UserBlockingPriority,nf=Cn.unstable_NormalPriority,GM=Cn.unstable_LowPriority,UC=Cn.unstable_IdlePriority,vp=null,Sr=null;function KM(t){if(Sr&&typeof Sr.onCommitFiberRoot=="function")try{Sr.onCommitFiberRoot(vp,t,void 0,(t.current.flags&128)===128)}catch{}}var tr=Math.clz32?Math.clz32:XM,QM=Math.log,YM=Math.LN2;function XM(t){return t>>>=0,t===0?32:31-(QM(t)/YM|0)|0}var Ud=64,$d=4194304;function gc(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function rf(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=gc(a):(s&=o,s!==0&&(r=gc(s)))}else o=n&~i,o!==0?r=gc(o):s!==0&&(r=gc(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-tr(e),i=1<<n,r|=t[n],e&=~i;return r}function JM(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ZM(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-tr(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=JM(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Vy(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function $C(){var t=Ud;return Ud<<=1,!(Ud&4194240)&&(Ud=64),t}function rg(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ou(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-tr(e),t[e]=n}function ej(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-tr(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function O0(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-tr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Re=0;function BC(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var zC,L0,WC,qC,HC,My=!1,Bd=[],zi=null,Wi=null,qi=null,Jc=new Map,Zc=new Map,Ni=[],tj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function qE(t,e){switch(t){case"focusin":case"focusout":zi=null;break;case"dragenter":case"dragleave":Wi=null;break;case"mouseover":case"mouseout":qi=null;break;case"pointerover":case"pointerout":Jc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zc.delete(e.pointerId)}}function Kl(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Vu(e),e!==null&&L0(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function nj(t,e,n,r,i){switch(e){case"focusin":return zi=Kl(zi,t,e,n,r,i),!0;case"dragenter":return Wi=Kl(Wi,t,e,n,r,i),!0;case"mouseover":return qi=Kl(qi,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Jc.set(s,Kl(Jc.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Zc.set(s,Kl(Zc.get(s)||null,t,e,n,r,i)),!0}return!1}function GC(t){var e=Gs(t.target);if(e!==null){var n=Oo(e);if(n!==null){if(e=n.tag,e===13){if(e=LC(n),e!==null){t.blockedOn=e,HC(t.priority,function(){WC(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Th(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=jy(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Ny=r,n.target.dispatchEvent(r),Ny=null}else return e=Vu(n),e!==null&&L0(e),t.blockedOn=n,!1;e.shift()}return!0}function HE(t,e,n){Th(t)&&n.delete(e)}function rj(){My=!1,zi!==null&&Th(zi)&&(zi=null),Wi!==null&&Th(Wi)&&(Wi=null),qi!==null&&Th(qi)&&(qi=null),Jc.forEach(HE),Zc.forEach(HE)}function Ql(t,e){t.blockedOn===e&&(t.blockedOn=null,My||(My=!0,Cn.unstable_scheduleCallback(Cn.unstable_NormalPriority,rj)))}function eu(t){function e(i){return Ql(i,t)}if(0<Bd.length){Ql(Bd[0],t);for(var n=1;n<Bd.length;n++){var r=Bd[n];r.blockedOn===t&&(r.blockedOn=null)}}for(zi!==null&&Ql(zi,t),Wi!==null&&Ql(Wi,t),qi!==null&&Ql(qi,t),Jc.forEach(e),Zc.forEach(e),n=0;n<Ni.length;n++)r=Ni[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ni.length&&(n=Ni[0],n.blockedOn===null);)GC(n),n.blockedOn===null&&Ni.shift()}var Ma=hi.ReactCurrentBatchConfig,sf=!0;function ij(t,e,n,r){var i=Re,s=Ma.transition;Ma.transition=null;try{Re=1,V0(t,e,n,r)}finally{Re=i,Ma.transition=s}}function sj(t,e,n,r){var i=Re,s=Ma.transition;Ma.transition=null;try{Re=4,V0(t,e,n,r)}finally{Re=i,Ma.transition=s}}function V0(t,e,n,r){if(sf){var i=jy(t,e,n,r);if(i===null)fg(t,e,r,of,n),qE(t,r);else if(nj(i,t,e,n,r))r.stopPropagation();else if(qE(t,r),e&4&&-1<tj.indexOf(t)){for(;i!==null;){var s=Vu(i);if(s!==null&&zC(s),s=jy(t,e,n,r),s===null&&fg(t,e,r,of,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else fg(t,e,r,null,n)}}var of=null;function jy(t,e,n,r){if(of=null,t=N0(r),t=Gs(t),t!==null)if(e=Oo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=LC(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return of=t,null}function KC(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(HM()){case D0:return 1;case FC:return 4;case nf:case GM:return 16;case UC:return 536870912;default:return 16}default:return 16}}var Fi=null,M0=null,bh=null;function QC(){if(bh)return bh;var t,e=M0,n=e.length,r,i="value"in Fi?Fi.value:Fi.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return bh=i.slice(t,1<r?1-r:void 0)}function Sh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function zd(){return!0}function GE(){return!1}function kn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?zd:GE,this.isPropagationStopped=GE,this}return Ye(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=zd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=zd)},persist:function(){},isPersistent:zd}),e}var wl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},j0=kn(wl),Lu=Ye({},wl,{view:0,detail:0}),oj=kn(Lu),ig,sg,Yl,wp=Ye({},Lu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:F0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Yl&&(Yl&&t.type==="mousemove"?(ig=t.screenX-Yl.screenX,sg=t.screenY-Yl.screenY):sg=ig=0,Yl=t),ig)},movementY:function(t){return"movementY"in t?t.movementY:sg}}),KE=kn(wp),aj=Ye({},wp,{dataTransfer:0}),lj=kn(aj),cj=Ye({},Lu,{relatedTarget:0}),og=kn(cj),uj=Ye({},wl,{animationName:0,elapsedTime:0,pseudoElement:0}),dj=kn(uj),hj=Ye({},wl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),fj=kn(hj),pj=Ye({},wl,{data:0}),QE=kn(pj),mj={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gj={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yj={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vj(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=yj[t])?!!e[t]:!1}function F0(){return vj}var wj=Ye({},Lu,{key:function(t){if(t.key){var e=mj[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Sh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?gj[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:F0,charCode:function(t){return t.type==="keypress"?Sh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Sh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),_j=kn(wj),xj=Ye({},wp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),YE=kn(xj),Ej=Ye({},Lu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:F0}),Tj=kn(Ej),bj=Ye({},wl,{propertyName:0,elapsedTime:0,pseudoElement:0}),Sj=kn(bj),Ij=Ye({},wp,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Cj=kn(Ij),Pj=[9,13,27,32],U0=ti&&"CompositionEvent"in window,Pc=null;ti&&"documentMode"in document&&(Pc=document.documentMode);var Aj=ti&&"TextEvent"in window&&!Pc,YC=ti&&(!U0||Pc&&8<Pc&&11>=Pc),XE=String.fromCharCode(32),JE=!1;function XC(t,e){switch(t){case"keyup":return Pj.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function JC(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var _a=!1;function Rj(t,e){switch(t){case"compositionend":return JC(e);case"keypress":return e.which!==32?null:(JE=!0,XE);case"textInput":return t=e.data,t===XE&&JE?null:t;default:return null}}function kj(t,e){if(_a)return t==="compositionend"||!U0&&XC(t,e)?(t=QC(),bh=M0=Fi=null,_a=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return YC&&e.locale!=="ko"?null:e.data;default:return null}}var Nj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ZE(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Nj[t.type]:e==="textarea"}function ZC(t,e,n,r){RC(r),e=af(e,"onChange"),0<e.length&&(n=new j0("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ac=null,tu=null;function Dj(t){uP(t,0)}function _p(t){var e=Ta(t);if(TC(e))return t}function Oj(t,e){if(t==="change")return e}var eP=!1;if(ti){var ag;if(ti){var lg="oninput"in document;if(!lg){var eT=document.createElement("div");eT.setAttribute("oninput","return;"),lg=typeof eT.oninput=="function"}ag=lg}else ag=!1;eP=ag&&(!document.documentMode||9<document.documentMode)}function tT(){Ac&&(Ac.detachEvent("onpropertychange",tP),tu=Ac=null)}function tP(t){if(t.propertyName==="value"&&_p(tu)){var e=[];ZC(e,tu,t,N0(t)),OC(Dj,e)}}function Lj(t,e,n){t==="focusin"?(tT(),Ac=e,tu=n,Ac.attachEvent("onpropertychange",tP)):t==="focusout"&&tT()}function Vj(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return _p(tu)}function Mj(t,e){if(t==="click")return _p(e)}function jj(t,e){if(t==="input"||t==="change")return _p(e)}function Fj(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var sr=typeof Object.is=="function"?Object.is:Fj;function nu(t,e){if(sr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!_y.call(e,i)||!sr(t[i],e[i]))return!1}return!0}function nT(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function rT(t,e){var n=nT(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=nT(n)}}function nP(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?nP(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function rP(){for(var t=window,e=Zh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Zh(t.document)}return e}function $0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Uj(t){var e=rP(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&nP(n.ownerDocument.documentElement,n)){if(r!==null&&$0(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=rT(n,s);var o=rT(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var $j=ti&&"documentMode"in document&&11>=document.documentMode,xa=null,Fy=null,Rc=null,Uy=!1;function iT(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Uy||xa==null||xa!==Zh(r)||(r=xa,"selectionStart"in r&&$0(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Rc&&nu(Rc,r)||(Rc=r,r=af(Fy,"onSelect"),0<r.length&&(e=new j0("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=xa)))}function Wd(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ea={animationend:Wd("Animation","AnimationEnd"),animationiteration:Wd("Animation","AnimationIteration"),animationstart:Wd("Animation","AnimationStart"),transitionend:Wd("Transition","TransitionEnd")},cg={},iP={};ti&&(iP=document.createElement("div").style,"AnimationEvent"in window||(delete Ea.animationend.animation,delete Ea.animationiteration.animation,delete Ea.animationstart.animation),"TransitionEvent"in window||delete Ea.transitionend.transition);function xp(t){if(cg[t])return cg[t];if(!Ea[t])return t;var e=Ea[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in iP)return cg[t]=e[n];return t}var sP=xp("animationend"),oP=xp("animationiteration"),aP=xp("animationstart"),lP=xp("transitionend"),cP=new Map,sT="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ps(t,e){cP.set(t,e),Do(e,[t])}for(var ug=0;ug<sT.length;ug++){var dg=sT[ug],Bj=dg.toLowerCase(),zj=dg[0].toUpperCase()+dg.slice(1);ps(Bj,"on"+zj)}ps(sP,"onAnimationEnd");ps(oP,"onAnimationIteration");ps(aP,"onAnimationStart");ps("dblclick","onDoubleClick");ps("focusin","onFocus");ps("focusout","onBlur");ps(lP,"onTransitionEnd");Ka("onMouseEnter",["mouseout","mouseover"]);Ka("onMouseLeave",["mouseout","mouseover"]);Ka("onPointerEnter",["pointerout","pointerover"]);Ka("onPointerLeave",["pointerout","pointerover"]);Do("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Do("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Do("onBeforeInput",["compositionend","keypress","textInput","paste"]);Do("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Do("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Do("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Wj=new Set("cancel close invalid load scroll toggle".split(" ").concat(yc));function oT(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,BM(r,e,void 0,t),t.currentTarget=null}function uP(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;oT(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;oT(i,a,c),s=l}}}if(tf)throw t=Ly,tf=!1,Ly=null,t}function Ue(t,e){var n=e[qy];n===void 0&&(n=e[qy]=new Set);var r=t+"__bubble";n.has(r)||(dP(e,t,2,!1),n.add(r))}function hg(t,e,n){var r=0;e&&(r|=4),dP(n,t,r,e)}var qd="_reactListening"+Math.random().toString(36).slice(2);function ru(t){if(!t[qd]){t[qd]=!0,vC.forEach(function(n){n!=="selectionchange"&&(Wj.has(n)||hg(n,!1,t),hg(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[qd]||(e[qd]=!0,hg("selectionchange",!1,e))}}function dP(t,e,n,r){switch(KC(e)){case 1:var i=ij;break;case 4:i=sj;break;default:i=V0}n=i.bind(null,e,n,t),i=void 0,!Oy||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function fg(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Gs(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}OC(function(){var c=s,u=N0(n),h=[];e:{var f=cP.get(t);if(f!==void 0){var p=j0,g=t;switch(t){case"keypress":if(Sh(n)===0)break e;case"keydown":case"keyup":p=_j;break;case"focusin":g="focus",p=og;break;case"focusout":g="blur",p=og;break;case"beforeblur":case"afterblur":p=og;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=KE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=lj;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=Tj;break;case sP:case oP:case aP:p=dj;break;case lP:p=Sj;break;case"scroll":p=oj;break;case"wheel":p=Cj;break;case"copy":case"cut":case"paste":p=fj;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=YE}var v=(e&4)!==0,w=!v&&t==="scroll",E=v?f!==null?f+"Capture":null:f;v=[];for(var x=c,b;x!==null;){b=x;var C=b.stateNode;if(b.tag===5&&C!==null&&(b=C,E!==null&&(C=Xc(x,E),C!=null&&v.push(iu(x,C,b)))),w)break;x=x.return}0<v.length&&(f=new p(f,g,null,n,u),h.push({event:f,listeners:v}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==Ny&&(g=n.relatedTarget||n.fromElement)&&(Gs(g)||g[ni]))break e;if((p||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,p?(g=n.relatedTarget||n.toElement,p=c,g=g?Gs(g):null,g!==null&&(w=Oo(g),g!==w||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=c),p!==g)){if(v=KE,C="onMouseLeave",E="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(v=YE,C="onPointerLeave",E="onPointerEnter",x="pointer"),w=p==null?f:Ta(p),b=g==null?f:Ta(g),f=new v(C,x+"leave",p,n,u),f.target=w,f.relatedTarget=b,C=null,Gs(u)===c&&(v=new v(E,x+"enter",g,n,u),v.target=b,v.relatedTarget=w,C=v),w=C,p&&g)t:{for(v=p,E=g,x=0,b=v;b;b=Zo(b))x++;for(b=0,C=E;C;C=Zo(C))b++;for(;0<x-b;)v=Zo(v),x--;for(;0<b-x;)E=Zo(E),b--;for(;x--;){if(v===E||E!==null&&v===E.alternate)break t;v=Zo(v),E=Zo(E)}v=null}else v=null;p!==null&&aT(h,f,p,v,!1),g!==null&&w!==null&&aT(h,w,g,v,!0)}}e:{if(f=c?Ta(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var N=Oj;else if(ZE(f))if(eP)N=jj;else{N=Vj;var D=Lj}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(N=Mj);if(N&&(N=N(t,c))){ZC(h,N,n,u);break e}D&&D(t,f,c),t==="focusout"&&(D=f._wrapperState)&&D.controlled&&f.type==="number"&&Cy(f,"number",f.value)}switch(D=c?Ta(c):window,t){case"focusin":(ZE(D)||D.contentEditable==="true")&&(xa=D,Fy=c,Rc=null);break;case"focusout":Rc=Fy=xa=null;break;case"mousedown":Uy=!0;break;case"contextmenu":case"mouseup":case"dragend":Uy=!1,iT(h,n,u);break;case"selectionchange":if($j)break;case"keydown":case"keyup":iT(h,n,u)}var I;if(U0)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else _a?XC(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(YC&&n.locale!=="ko"&&(_a||S!=="onCompositionStart"?S==="onCompositionEnd"&&_a&&(I=QC()):(Fi=u,M0="value"in Fi?Fi.value:Fi.textContent,_a=!0)),D=af(c,S),0<D.length&&(S=new QE(S,t,null,n,u),h.push({event:S,listeners:D}),I?S.data=I:(I=JC(n),I!==null&&(S.data=I)))),(I=Aj?Rj(t,n):kj(t,n))&&(c=af(c,"onBeforeInput"),0<c.length&&(u=new QE("onBeforeInput","beforeinput",null,n,u),h.push({event:u,listeners:c}),u.data=I))}uP(h,e)})}function iu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function af(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Xc(t,n),s!=null&&r.unshift(iu(t,s,i)),s=Xc(t,e),s!=null&&r.push(iu(t,s,i))),t=t.return}return r}function Zo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function aT(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Xc(n,s),l!=null&&o.unshift(iu(n,l,a))):i||(l=Xc(n,s),l!=null&&o.push(iu(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var qj=/\r\n?/g,Hj=/\u0000|\uFFFD/g;function lT(t){return(typeof t=="string"?t:""+t).replace(qj,`
`).replace(Hj,"")}function Hd(t,e,n){if(e=lT(e),lT(t)!==e&&n)throw Error(W(425))}function lf(){}var $y=null,By=null;function zy(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Wy=typeof setTimeout=="function"?setTimeout:void 0,Gj=typeof clearTimeout=="function"?clearTimeout:void 0,cT=typeof Promise=="function"?Promise:void 0,Kj=typeof queueMicrotask=="function"?queueMicrotask:typeof cT<"u"?function(t){return cT.resolve(null).then(t).catch(Qj)}:Wy;function Qj(t){setTimeout(function(){throw t})}function pg(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),eu(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);eu(e)}function Hi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function uT(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var _l=Math.random().toString(36).slice(2),yr="__reactFiber$"+_l,su="__reactProps$"+_l,ni="__reactContainer$"+_l,qy="__reactEvents$"+_l,Yj="__reactListeners$"+_l,Xj="__reactHandles$"+_l;function Gs(t){var e=t[yr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ni]||n[yr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=uT(t);t!==null;){if(n=t[yr])return n;t=uT(t)}return e}t=n,n=t.parentNode}return null}function Vu(t){return t=t[yr]||t[ni],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ta(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(W(33))}function Ep(t){return t[su]||null}var Hy=[],ba=-1;function ms(t){return{current:t}}function $e(t){0>ba||(t.current=Hy[ba],Hy[ba]=null,ba--)}function Le(t,e){ba++,Hy[ba]=t.current,t.current=e}var ss={},$t=ms(ss),un=ms(!1),oo=ss;function Qa(t,e){var n=t.type.contextTypes;if(!n)return ss;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function dn(t){return t=t.childContextTypes,t!=null}function cf(){$e(un),$e($t)}function dT(t,e,n){if($t.current!==ss)throw Error(W(168));Le($t,e),Le(un,n)}function hP(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(W(108,LM(t)||"Unknown",i));return Ye({},n,r)}function uf(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ss,oo=$t.current,Le($t,t),Le(un,un.current),!0}function hT(t,e,n){var r=t.stateNode;if(!r)throw Error(W(169));n?(t=hP(t,e,oo),r.__reactInternalMemoizedMergedChildContext=t,$e(un),$e($t),Le($t,t)):$e(un),Le(un,n)}var Ur=null,Tp=!1,mg=!1;function fP(t){Ur===null?Ur=[t]:Ur.push(t)}function Jj(t){Tp=!0,fP(t)}function gs(){if(!mg&&Ur!==null){mg=!0;var t=0,e=Re;try{var n=Ur;for(Re=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ur=null,Tp=!1}catch(i){throw Ur!==null&&(Ur=Ur.slice(t+1)),jC(D0,gs),i}finally{Re=e,mg=!1}}return null}var Sa=[],Ia=0,df=null,hf=0,Mn=[],jn=0,ao=null,Br=1,zr="";function Os(t,e){Sa[Ia++]=hf,Sa[Ia++]=df,df=t,hf=e}function pP(t,e,n){Mn[jn++]=Br,Mn[jn++]=zr,Mn[jn++]=ao,ao=t;var r=Br;t=zr;var i=32-tr(r)-1;r&=~(1<<i),n+=1;var s=32-tr(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Br=1<<32-tr(e)+i|n<<i|r,zr=s+t}else Br=1<<s|n<<i|r,zr=t}function B0(t){t.return!==null&&(Os(t,1),pP(t,1,0))}function z0(t){for(;t===df;)df=Sa[--Ia],Sa[Ia]=null,hf=Sa[--Ia],Sa[Ia]=null;for(;t===ao;)ao=Mn[--jn],Mn[jn]=null,zr=Mn[--jn],Mn[jn]=null,Br=Mn[--jn],Mn[jn]=null}var Tn=null,wn=null,ze=!1,Zn=null;function mP(t,e){var n=Fn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function fT(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Tn=t,wn=Hi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Tn=t,wn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ao!==null?{id:Br,overflow:zr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Fn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Tn=t,wn=null,!0):!1;default:return!1}}function Gy(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ky(t){if(ze){var e=wn;if(e){var n=e;if(!fT(t,e)){if(Gy(t))throw Error(W(418));e=Hi(n.nextSibling);var r=Tn;e&&fT(t,e)?mP(r,n):(t.flags=t.flags&-4097|2,ze=!1,Tn=t)}}else{if(Gy(t))throw Error(W(418));t.flags=t.flags&-4097|2,ze=!1,Tn=t}}}function pT(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Tn=t}function Gd(t){if(t!==Tn)return!1;if(!ze)return pT(t),ze=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!zy(t.type,t.memoizedProps)),e&&(e=wn)){if(Gy(t))throw gP(),Error(W(418));for(;e;)mP(t,e),e=Hi(e.nextSibling)}if(pT(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(W(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){wn=Hi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}wn=null}}else wn=Tn?Hi(t.stateNode.nextSibling):null;return!0}function gP(){for(var t=wn;t;)t=Hi(t.nextSibling)}function Ya(){wn=Tn=null,ze=!1}function W0(t){Zn===null?Zn=[t]:Zn.push(t)}var Zj=hi.ReactCurrentBatchConfig;function Xl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(W(309));var r=n.stateNode}if(!r)throw Error(W(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(W(284));if(!n._owner)throw Error(W(290,t))}return t}function Kd(t,e){throw t=Object.prototype.toString.call(e),Error(W(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function mT(t){var e=t._init;return e(t._payload)}function yP(t){function e(E,x){if(t){var b=E.deletions;b===null?(E.deletions=[x],E.flags|=16):b.push(x)}}function n(E,x){if(!t)return null;for(;x!==null;)e(E,x),x=x.sibling;return null}function r(E,x){for(E=new Map;x!==null;)x.key!==null?E.set(x.key,x):E.set(x.index,x),x=x.sibling;return E}function i(E,x){return E=Yi(E,x),E.index=0,E.sibling=null,E}function s(E,x,b){return E.index=b,t?(b=E.alternate,b!==null?(b=b.index,b<x?(E.flags|=2,x):b):(E.flags|=2,x)):(E.flags|=1048576,x)}function o(E){return t&&E.alternate===null&&(E.flags|=2),E}function a(E,x,b,C){return x===null||x.tag!==6?(x=Eg(b,E.mode,C),x.return=E,x):(x=i(x,b),x.return=E,x)}function l(E,x,b,C){var N=b.type;return N===wa?u(E,x,b.props.children,C,b.key):x!==null&&(x.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Ai&&mT(N)===x.type)?(C=i(x,b.props),C.ref=Xl(E,x,b),C.return=E,C):(C=Nh(b.type,b.key,b.props,null,E.mode,C),C.ref=Xl(E,x,b),C.return=E,C)}function c(E,x,b,C){return x===null||x.tag!==4||x.stateNode.containerInfo!==b.containerInfo||x.stateNode.implementation!==b.implementation?(x=Tg(b,E.mode,C),x.return=E,x):(x=i(x,b.children||[]),x.return=E,x)}function u(E,x,b,C,N){return x===null||x.tag!==7?(x=to(b,E.mode,C,N),x.return=E,x):(x=i(x,b),x.return=E,x)}function h(E,x,b){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Eg(""+x,E.mode,b),x.return=E,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Md:return b=Nh(x.type,x.key,x.props,null,E.mode,b),b.ref=Xl(E,null,x),b.return=E,b;case va:return x=Tg(x,E.mode,b),x.return=E,x;case Ai:var C=x._init;return h(E,C(x._payload),b)}if(mc(x)||Hl(x))return x=to(x,E.mode,b,null),x.return=E,x;Kd(E,x)}return null}function f(E,x,b,C){var N=x!==null?x.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return N!==null?null:a(E,x,""+b,C);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Md:return b.key===N?l(E,x,b,C):null;case va:return b.key===N?c(E,x,b,C):null;case Ai:return N=b._init,f(E,x,N(b._payload),C)}if(mc(b)||Hl(b))return N!==null?null:u(E,x,b,C,null);Kd(E,b)}return null}function p(E,x,b,C,N){if(typeof C=="string"&&C!==""||typeof C=="number")return E=E.get(b)||null,a(x,E,""+C,N);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Md:return E=E.get(C.key===null?b:C.key)||null,l(x,E,C,N);case va:return E=E.get(C.key===null?b:C.key)||null,c(x,E,C,N);case Ai:var D=C._init;return p(E,x,b,D(C._payload),N)}if(mc(C)||Hl(C))return E=E.get(b)||null,u(x,E,C,N,null);Kd(x,C)}return null}function g(E,x,b,C){for(var N=null,D=null,I=x,S=x=0,A=null;I!==null&&S<b.length;S++){I.index>S?(A=I,I=null):A=I.sibling;var R=f(E,I,b[S],C);if(R===null){I===null&&(I=A);break}t&&I&&R.alternate===null&&e(E,I),x=s(R,x,S),D===null?N=R:D.sibling=R,D=R,I=A}if(S===b.length)return n(E,I),ze&&Os(E,S),N;if(I===null){for(;S<b.length;S++)I=h(E,b[S],C),I!==null&&(x=s(I,x,S),D===null?N=I:D.sibling=I,D=I);return ze&&Os(E,S),N}for(I=r(E,I);S<b.length;S++)A=p(I,E,S,b[S],C),A!==null&&(t&&A.alternate!==null&&I.delete(A.key===null?S:A.key),x=s(A,x,S),D===null?N=A:D.sibling=A,D=A);return t&&I.forEach(function(O){return e(E,O)}),ze&&Os(E,S),N}function v(E,x,b,C){var N=Hl(b);if(typeof N!="function")throw Error(W(150));if(b=N.call(b),b==null)throw Error(W(151));for(var D=N=null,I=x,S=x=0,A=null,R=b.next();I!==null&&!R.done;S++,R=b.next()){I.index>S?(A=I,I=null):A=I.sibling;var O=f(E,I,R.value,C);if(O===null){I===null&&(I=A);break}t&&I&&O.alternate===null&&e(E,I),x=s(O,x,S),D===null?N=O:D.sibling=O,D=O,I=A}if(R.done)return n(E,I),ze&&Os(E,S),N;if(I===null){for(;!R.done;S++,R=b.next())R=h(E,R.value,C),R!==null&&(x=s(R,x,S),D===null?N=R:D.sibling=R,D=R);return ze&&Os(E,S),N}for(I=r(E,I);!R.done;S++,R=b.next())R=p(I,E,S,R.value,C),R!==null&&(t&&R.alternate!==null&&I.delete(R.key===null?S:R.key),x=s(R,x,S),D===null?N=R:D.sibling=R,D=R);return t&&I.forEach(function(L){return e(E,L)}),ze&&Os(E,S),N}function w(E,x,b,C){if(typeof b=="object"&&b!==null&&b.type===wa&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Md:e:{for(var N=b.key,D=x;D!==null;){if(D.key===N){if(N=b.type,N===wa){if(D.tag===7){n(E,D.sibling),x=i(D,b.props.children),x.return=E,E=x;break e}}else if(D.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Ai&&mT(N)===D.type){n(E,D.sibling),x=i(D,b.props),x.ref=Xl(E,D,b),x.return=E,E=x;break e}n(E,D);break}else e(E,D);D=D.sibling}b.type===wa?(x=to(b.props.children,E.mode,C,b.key),x.return=E,E=x):(C=Nh(b.type,b.key,b.props,null,E.mode,C),C.ref=Xl(E,x,b),C.return=E,E=C)}return o(E);case va:e:{for(D=b.key;x!==null;){if(x.key===D)if(x.tag===4&&x.stateNode.containerInfo===b.containerInfo&&x.stateNode.implementation===b.implementation){n(E,x.sibling),x=i(x,b.children||[]),x.return=E,E=x;break e}else{n(E,x);break}else e(E,x);x=x.sibling}x=Tg(b,E.mode,C),x.return=E,E=x}return o(E);case Ai:return D=b._init,w(E,x,D(b._payload),C)}if(mc(b))return g(E,x,b,C);if(Hl(b))return v(E,x,b,C);Kd(E,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,x!==null&&x.tag===6?(n(E,x.sibling),x=i(x,b),x.return=E,E=x):(n(E,x),x=Eg(b,E.mode,C),x.return=E,E=x),o(E)):n(E,x)}return w}var Xa=yP(!0),vP=yP(!1),ff=ms(null),pf=null,Ca=null,q0=null;function H0(){q0=Ca=pf=null}function G0(t){var e=ff.current;$e(ff),t._currentValue=e}function Qy(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ja(t,e){pf=t,q0=Ca=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(an=!0),t.firstContext=null)}function Bn(t){var e=t._currentValue;if(q0!==t)if(t={context:t,memoizedValue:e,next:null},Ca===null){if(pf===null)throw Error(W(308));Ca=t,pf.dependencies={lanes:0,firstContext:t}}else Ca=Ca.next=t;return e}var Ks=null;function K0(t){Ks===null?Ks=[t]:Ks.push(t)}function wP(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,K0(e)):(n.next=i.next,i.next=n),e.interleaved=n,ri(t,r)}function ri(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ri=!1;function Q0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function _P(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Yr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Gi(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,be&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,ri(t,n)}return i=r.interleaved,i===null?(e.next=e,K0(r)):(e.next=i.next,i.next=e),r.interleaved=e,ri(t,n)}function Ih(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,O0(t,n)}}function gT(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function mf(t,e,n,r){var i=t.updateQueue;Ri=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,u=c=l=null,a=s;do{var f=a.lane,p=a.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=t,v=a;switch(f=e,p=n,v.tag){case 1:if(g=v.payload,typeof g=="function"){h=g.call(p,h,f);break e}h=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=v.payload,f=typeof g=="function"?g.call(p,h,f):g,f==null)break e;h=Ye({},h,f);break e;case 2:Ri=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=p,l=h):u=u.next=p,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(1);if(u===null&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);co|=o,t.lanes=o,t.memoizedState=h}}function yT(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(W(191,i));i.call(r)}}}var Mu={},Ir=ms(Mu),ou=ms(Mu),au=ms(Mu);function Qs(t){if(t===Mu)throw Error(W(174));return t}function Y0(t,e){switch(Le(au,e),Le(ou,t),Le(Ir,Mu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ay(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ay(e,t)}$e(Ir),Le(Ir,e)}function Ja(){$e(Ir),$e(ou),$e(au)}function xP(t){Qs(au.current);var e=Qs(Ir.current),n=Ay(e,t.type);e!==n&&(Le(ou,t),Le(Ir,n))}function X0(t){ou.current===t&&($e(Ir),$e(ou))}var We=ms(0);function gf(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var gg=[];function J0(){for(var t=0;t<gg.length;t++)gg[t]._workInProgressVersionPrimary=null;gg.length=0}var Ch=hi.ReactCurrentDispatcher,yg=hi.ReactCurrentBatchConfig,lo=0,Ke=null,pt=null,Et=null,yf=!1,kc=!1,lu=0,eF=0;function Dt(){throw Error(W(321))}function Z0(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!sr(t[n],e[n]))return!1;return!0}function ew(t,e,n,r,i,s){if(lo=s,Ke=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ch.current=t===null||t.memoizedState===null?iF:sF,t=n(r,i),kc){s=0;do{if(kc=!1,lu=0,25<=s)throw Error(W(301));s+=1,Et=pt=null,e.updateQueue=null,Ch.current=oF,t=n(r,i)}while(kc)}if(Ch.current=vf,e=pt!==null&&pt.next!==null,lo=0,Et=pt=Ke=null,yf=!1,e)throw Error(W(300));return t}function tw(){var t=lu!==0;return lu=0,t}function gr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Et===null?Ke.memoizedState=Et=t:Et=Et.next=t,Et}function zn(){if(pt===null){var t=Ke.alternate;t=t!==null?t.memoizedState:null}else t=pt.next;var e=Et===null?Ke.memoizedState:Et.next;if(e!==null)Et=e,pt=t;else{if(t===null)throw Error(W(310));pt=t,t={memoizedState:pt.memoizedState,baseState:pt.baseState,baseQueue:pt.baseQueue,queue:pt.queue,next:null},Et===null?Ke.memoizedState=Et=t:Et=Et.next=t}return Et}function cu(t,e){return typeof e=="function"?e(t):e}function vg(t){var e=zn(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var r=pt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((lo&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,Ke.lanes|=u,co|=u}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,sr(r,e.memoizedState)||(an=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Ke.lanes|=s,co|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function wg(t){var e=zn(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);sr(s,e.memoizedState)||(an=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function EP(){}function TP(t,e){var n=Ke,r=zn(),i=e(),s=!sr(r.memoizedState,i);if(s&&(r.memoizedState=i,an=!0),r=r.queue,nw(IP.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Et!==null&&Et.memoizedState.tag&1){if(n.flags|=2048,uu(9,SP.bind(null,n,r,i,e),void 0,null),bt===null)throw Error(W(349));lo&30||bP(n,e,i)}return i}function bP(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ke.updateQueue,e===null?(e={lastEffect:null,stores:null},Ke.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function SP(t,e,n,r){e.value=n,e.getSnapshot=r,CP(e)&&PP(t)}function IP(t,e,n){return n(function(){CP(e)&&PP(t)})}function CP(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!sr(t,n)}catch{return!0}}function PP(t){var e=ri(t,1);e!==null&&nr(e,t,1,-1)}function vT(t){var e=gr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:cu,lastRenderedState:t},e.queue=t,t=t.dispatch=rF.bind(null,Ke,t),[e.memoizedState,t]}function uu(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ke.updateQueue,e===null?(e={lastEffect:null,stores:null},Ke.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function AP(){return zn().memoizedState}function Ph(t,e,n,r){var i=gr();Ke.flags|=t,i.memoizedState=uu(1|e,n,void 0,r===void 0?null:r)}function bp(t,e,n,r){var i=zn();r=r===void 0?null:r;var s=void 0;if(pt!==null){var o=pt.memoizedState;if(s=o.destroy,r!==null&&Z0(r,o.deps)){i.memoizedState=uu(e,n,s,r);return}}Ke.flags|=t,i.memoizedState=uu(1|e,n,s,r)}function wT(t,e){return Ph(8390656,8,t,e)}function nw(t,e){return bp(2048,8,t,e)}function RP(t,e){return bp(4,2,t,e)}function kP(t,e){return bp(4,4,t,e)}function NP(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function DP(t,e,n){return n=n!=null?n.concat([t]):null,bp(4,4,NP.bind(null,e,t),n)}function rw(){}function OP(t,e){var n=zn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Z0(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function LP(t,e){var n=zn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Z0(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function VP(t,e,n){return lo&21?(sr(n,e)||(n=$C(),Ke.lanes|=n,co|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,an=!0),t.memoizedState=n)}function tF(t,e){var n=Re;Re=n!==0&&4>n?n:4,t(!0);var r=yg.transition;yg.transition={};try{t(!1),e()}finally{Re=n,yg.transition=r}}function MP(){return zn().memoizedState}function nF(t,e,n){var r=Qi(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},jP(t))FP(e,n);else if(n=wP(t,e,n,r),n!==null){var i=Xt();nr(n,t,r,i),UP(n,e,r)}}function rF(t,e,n){var r=Qi(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(jP(t))FP(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,sr(a,o)){var l=e.interleaved;l===null?(i.next=i,K0(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=wP(t,e,i,r),n!==null&&(i=Xt(),nr(n,t,r,i),UP(n,e,r))}}function jP(t){var e=t.alternate;return t===Ke||e!==null&&e===Ke}function FP(t,e){kc=yf=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function UP(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,O0(t,n)}}var vf={readContext:Bn,useCallback:Dt,useContext:Dt,useEffect:Dt,useImperativeHandle:Dt,useInsertionEffect:Dt,useLayoutEffect:Dt,useMemo:Dt,useReducer:Dt,useRef:Dt,useState:Dt,useDebugValue:Dt,useDeferredValue:Dt,useTransition:Dt,useMutableSource:Dt,useSyncExternalStore:Dt,useId:Dt,unstable_isNewReconciler:!1},iF={readContext:Bn,useCallback:function(t,e){return gr().memoizedState=[t,e===void 0?null:e],t},useContext:Bn,useEffect:wT,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ph(4194308,4,NP.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ph(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ph(4,2,t,e)},useMemo:function(t,e){var n=gr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=gr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=nF.bind(null,Ke,t),[r.memoizedState,t]},useRef:function(t){var e=gr();return t={current:t},e.memoizedState=t},useState:vT,useDebugValue:rw,useDeferredValue:function(t){return gr().memoizedState=t},useTransition:function(){var t=vT(!1),e=t[0];return t=tF.bind(null,t[1]),gr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ke,i=gr();if(ze){if(n===void 0)throw Error(W(407));n=n()}else{if(n=e(),bt===null)throw Error(W(349));lo&30||bP(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,wT(IP.bind(null,r,s,t),[t]),r.flags|=2048,uu(9,SP.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=gr(),e=bt.identifierPrefix;if(ze){var n=zr,r=Br;n=(r&~(1<<32-tr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=lu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=eF++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},sF={readContext:Bn,useCallback:OP,useContext:Bn,useEffect:nw,useImperativeHandle:DP,useInsertionEffect:RP,useLayoutEffect:kP,useMemo:LP,useReducer:vg,useRef:AP,useState:function(){return vg(cu)},useDebugValue:rw,useDeferredValue:function(t){var e=zn();return VP(e,pt.memoizedState,t)},useTransition:function(){var t=vg(cu)[0],e=zn().memoizedState;return[t,e]},useMutableSource:EP,useSyncExternalStore:TP,useId:MP,unstable_isNewReconciler:!1},oF={readContext:Bn,useCallback:OP,useContext:Bn,useEffect:nw,useImperativeHandle:DP,useInsertionEffect:RP,useLayoutEffect:kP,useMemo:LP,useReducer:wg,useRef:AP,useState:function(){return wg(cu)},useDebugValue:rw,useDeferredValue:function(t){var e=zn();return pt===null?e.memoizedState=t:VP(e,pt.memoizedState,t)},useTransition:function(){var t=wg(cu)[0],e=zn().memoizedState;return[t,e]},useMutableSource:EP,useSyncExternalStore:TP,useId:MP,unstable_isNewReconciler:!1};function Xn(t,e){if(t&&t.defaultProps){e=Ye({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Yy(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ye({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Sp={isMounted:function(t){return(t=t._reactInternals)?Oo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Xt(),i=Qi(t),s=Yr(r,i);s.payload=e,n!=null&&(s.callback=n),e=Gi(t,s,i),e!==null&&(nr(e,t,i,r),Ih(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Xt(),i=Qi(t),s=Yr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Gi(t,s,i),e!==null&&(nr(e,t,i,r),Ih(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Xt(),r=Qi(t),i=Yr(n,r);i.tag=2,e!=null&&(i.callback=e),e=Gi(t,i,r),e!==null&&(nr(e,t,r,n),Ih(e,t,r))}};function _T(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!nu(n,r)||!nu(i,s):!0}function $P(t,e,n){var r=!1,i=ss,s=e.contextType;return typeof s=="object"&&s!==null?s=Bn(s):(i=dn(e)?oo:$t.current,r=e.contextTypes,s=(r=r!=null)?Qa(t,i):ss),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Sp,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function xT(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Sp.enqueueReplaceState(e,e.state,null)}function Xy(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Q0(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Bn(s):(s=dn(e)?oo:$t.current,i.context=Qa(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Yy(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Sp.enqueueReplaceState(i,i.state,null),mf(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Za(t,e){try{var n="",r=e;do n+=OM(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function _g(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Jy(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var aF=typeof WeakMap=="function"?WeakMap:Map;function BP(t,e,n){n=Yr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){_f||(_f=!0,lv=r),Jy(t,e)},n}function zP(t,e,n){n=Yr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Jy(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Jy(t,e),typeof r!="function"&&(Ki===null?Ki=new Set([this]):Ki.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function ET(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new aF;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=xF.bind(null,t,e,n),e.then(t,t))}function TT(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function bT(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Yr(-1,1),e.tag=2,Gi(n,e,1))),n.lanes|=1),t)}var lF=hi.ReactCurrentOwner,an=!1;function Qt(t,e,n,r){e.child=t===null?vP(e,null,n,r):Xa(e,t.child,n,r)}function ST(t,e,n,r,i){n=n.render;var s=e.ref;return ja(e,i),r=ew(t,e,n,r,s,i),n=tw(),t!==null&&!an?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ii(t,e,i)):(ze&&n&&B0(e),e.flags|=1,Qt(t,e,r,i),e.child)}function IT(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!dw(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,WP(t,e,s,r,i)):(t=Nh(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:nu,n(o,r)&&t.ref===e.ref)return ii(t,e,i)}return e.flags|=1,t=Yi(s,r),t.ref=e.ref,t.return=e,e.child=t}function WP(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(nu(s,r)&&t.ref===e.ref)if(an=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(an=!0);else return e.lanes=t.lanes,ii(t,e,i)}return Zy(t,e,n,r,i)}function qP(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Le(Aa,yn),yn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Le(Aa,yn),yn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Le(Aa,yn),yn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Le(Aa,yn),yn|=r;return Qt(t,e,i,n),e.child}function HP(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Zy(t,e,n,r,i){var s=dn(n)?oo:$t.current;return s=Qa(e,s),ja(e,i),n=ew(t,e,n,r,s,i),r=tw(),t!==null&&!an?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ii(t,e,i)):(ze&&r&&B0(e),e.flags|=1,Qt(t,e,n,i),e.child)}function CT(t,e,n,r,i){if(dn(n)){var s=!0;uf(e)}else s=!1;if(ja(e,i),e.stateNode===null)Ah(t,e),$P(e,n,r),Xy(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Bn(c):(c=dn(n)?oo:$t.current,c=Qa(e,c));var u=n.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&xT(e,o,r,c),Ri=!1;var f=e.memoizedState;o.state=f,mf(e,r,o,i),l=e.memoizedState,a!==r||f!==l||un.current||Ri?(typeof u=="function"&&(Yy(e,n,u,r),l=e.memoizedState),(a=Ri||_T(e,n,a,r,f,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,_P(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Xn(e.type,a),o.props=c,h=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Bn(l):(l=dn(n)?oo:$t.current,l=Qa(e,l));var p=n.getDerivedStateFromProps;(u=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&xT(e,o,r,l),Ri=!1,f=e.memoizedState,o.state=f,mf(e,r,o,i);var g=e.memoizedState;a!==h||f!==g||un.current||Ri?(typeof p=="function"&&(Yy(e,n,p,r),g=e.memoizedState),(c=Ri||_T(e,n,c,r,f,g,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),o.props=r,o.state=g,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return ev(t,e,n,r,s,i)}function ev(t,e,n,r,i,s){HP(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&hT(e,n,!1),ii(t,e,s);r=e.stateNode,lF.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Xa(e,t.child,null,s),e.child=Xa(e,null,a,s)):Qt(t,e,a,s),e.memoizedState=r.state,i&&hT(e,n,!0),e.child}function GP(t){var e=t.stateNode;e.pendingContext?dT(t,e.pendingContext,e.pendingContext!==e.context):e.context&&dT(t,e.context,!1),Y0(t,e.containerInfo)}function PT(t,e,n,r,i){return Ya(),W0(i),e.flags|=256,Qt(t,e,n,r),e.child}var tv={dehydrated:null,treeContext:null,retryLane:0};function nv(t){return{baseLanes:t,cachePool:null,transitions:null}}function KP(t,e,n){var r=e.pendingProps,i=We.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Le(We,i&1),t===null)return Ky(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Pp(o,r,0,null),t=to(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=nv(n),e.memoizedState=tv,t):iw(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return cF(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Yi(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Yi(a,s):(s=to(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?nv(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=tv,r}return s=t.child,t=s.sibling,r=Yi(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function iw(t,e){return e=Pp({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Qd(t,e,n,r){return r!==null&&W0(r),Xa(e,t.child,null,n),t=iw(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function cF(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=_g(Error(W(422))),Qd(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Pp({mode:"visible",children:r.children},i,0,null),s=to(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Xa(e,t.child,null,o),e.child.memoizedState=nv(o),e.memoizedState=tv,s);if(!(e.mode&1))return Qd(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(W(419)),r=_g(s,r,void 0),Qd(t,e,o,r)}if(a=(o&t.childLanes)!==0,an||a){if(r=bt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,ri(t,i),nr(r,t,i,-1))}return uw(),r=_g(Error(W(421))),Qd(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=EF.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,wn=Hi(i.nextSibling),Tn=e,ze=!0,Zn=null,t!==null&&(Mn[jn++]=Br,Mn[jn++]=zr,Mn[jn++]=ao,Br=t.id,zr=t.overflow,ao=e),e=iw(e,r.children),e.flags|=4096,e)}function AT(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Qy(t.return,e,n)}function xg(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function QP(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Qt(t,e,r.children,n),r=We.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&AT(t,n,e);else if(t.tag===19)AT(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Le(We,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&gf(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),xg(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&gf(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}xg(e,!0,n,null,s);break;case"together":xg(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ah(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ii(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),co|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(W(153));if(e.child!==null){for(t=e.child,n=Yi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Yi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function uF(t,e,n){switch(e.tag){case 3:GP(e),Ya();break;case 5:xP(e);break;case 1:dn(e.type)&&uf(e);break;case 4:Y0(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Le(ff,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Le(We,We.current&1),e.flags|=128,null):n&e.child.childLanes?KP(t,e,n):(Le(We,We.current&1),t=ii(t,e,n),t!==null?t.sibling:null);Le(We,We.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return QP(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Le(We,We.current),r)break;return null;case 22:case 23:return e.lanes=0,qP(t,e,n)}return ii(t,e,n)}var YP,rv,XP,JP;YP=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};rv=function(){};XP=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Qs(Ir.current);var s=null;switch(n){case"input":i=Sy(t,i),r=Sy(t,r),s=[];break;case"select":i=Ye({},i,{value:void 0}),r=Ye({},r,{value:void 0}),s=[];break;case"textarea":i=Py(t,i),r=Py(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=lf)}Ry(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Qc.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Qc.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Ue("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};JP=function(t,e,n,r){n!==r&&(e.flags|=4)};function Jl(t,e){if(!ze)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ot(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function dF(t,e,n){var r=e.pendingProps;switch(z0(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ot(e),null;case 1:return dn(e.type)&&cf(),Ot(e),null;case 3:return r=e.stateNode,Ja(),$e(un),$e($t),J0(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Gd(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Zn!==null&&(dv(Zn),Zn=null))),rv(t,e),Ot(e),null;case 5:X0(e);var i=Qs(au.current);if(n=e.type,t!==null&&e.stateNode!=null)XP(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(W(166));return Ot(e),null}if(t=Qs(Ir.current),Gd(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[yr]=e,r[su]=s,t=(e.mode&1)!==0,n){case"dialog":Ue("cancel",r),Ue("close",r);break;case"iframe":case"object":case"embed":Ue("load",r);break;case"video":case"audio":for(i=0;i<yc.length;i++)Ue(yc[i],r);break;case"source":Ue("error",r);break;case"img":case"image":case"link":Ue("error",r),Ue("load",r);break;case"details":Ue("toggle",r);break;case"input":jE(r,s),Ue("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ue("invalid",r);break;case"textarea":UE(r,s),Ue("invalid",r)}Ry(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Hd(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Hd(r.textContent,a,t),i=["children",""+a]):Qc.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ue("scroll",r)}switch(n){case"input":jd(r),FE(r,s,!0);break;case"textarea":jd(r),$E(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=lf)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=IC(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[yr]=e,t[su]=r,YP(t,e,!1,!1),e.stateNode=t;e:{switch(o=ky(n,r),n){case"dialog":Ue("cancel",t),Ue("close",t),i=r;break;case"iframe":case"object":case"embed":Ue("load",t),i=r;break;case"video":case"audio":for(i=0;i<yc.length;i++)Ue(yc[i],t);i=r;break;case"source":Ue("error",t),i=r;break;case"img":case"image":case"link":Ue("error",t),Ue("load",t),i=r;break;case"details":Ue("toggle",t),i=r;break;case"input":jE(t,r),i=Sy(t,r),Ue("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ye({},r,{value:void 0}),Ue("invalid",t);break;case"textarea":UE(t,r),i=Py(t,r),Ue("invalid",t);break;default:i=r}Ry(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?AC(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&CC(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Yc(t,l):typeof l=="number"&&Yc(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Qc.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Ue("scroll",t):l!=null&&P0(t,s,l,o))}switch(n){case"input":jd(t),FE(t,r,!1);break;case"textarea":jd(t),$E(t);break;case"option":r.value!=null&&t.setAttribute("value",""+is(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Oa(t,!!r.multiple,s,!1):r.defaultValue!=null&&Oa(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=lf)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ot(e),null;case 6:if(t&&e.stateNode!=null)JP(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(W(166));if(n=Qs(au.current),Qs(Ir.current),Gd(e)){if(r=e.stateNode,n=e.memoizedProps,r[yr]=e,(s=r.nodeValue!==n)&&(t=Tn,t!==null))switch(t.tag){case 3:Hd(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Hd(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[yr]=e,e.stateNode=r}return Ot(e),null;case 13:if($e(We),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ze&&wn!==null&&e.mode&1&&!(e.flags&128))gP(),Ya(),e.flags|=98560,s=!1;else if(s=Gd(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(W(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(W(317));s[yr]=e}else Ya(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ot(e),s=!1}else Zn!==null&&(dv(Zn),Zn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||We.current&1?mt===0&&(mt=3):uw())),e.updateQueue!==null&&(e.flags|=4),Ot(e),null);case 4:return Ja(),rv(t,e),t===null&&ru(e.stateNode.containerInfo),Ot(e),null;case 10:return G0(e.type._context),Ot(e),null;case 17:return dn(e.type)&&cf(),Ot(e),null;case 19:if($e(We),s=e.memoizedState,s===null)return Ot(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Jl(s,!1);else{if(mt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=gf(t),o!==null){for(e.flags|=128,Jl(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Le(We,We.current&1|2),e.child}t=t.sibling}s.tail!==null&&ot()>el&&(e.flags|=128,r=!0,Jl(s,!1),e.lanes=4194304)}else{if(!r)if(t=gf(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Jl(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!ze)return Ot(e),null}else 2*ot()-s.renderingStartTime>el&&n!==1073741824&&(e.flags|=128,r=!0,Jl(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ot(),e.sibling=null,n=We.current,Le(We,r?n&1|2:n&1),e):(Ot(e),null);case 22:case 23:return cw(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?yn&1073741824&&(Ot(e),e.subtreeFlags&6&&(e.flags|=8192)):Ot(e),null;case 24:return null;case 25:return null}throw Error(W(156,e.tag))}function hF(t,e){switch(z0(e),e.tag){case 1:return dn(e.type)&&cf(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ja(),$e(un),$e($t),J0(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return X0(e),null;case 13:if($e(We),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(W(340));Ya()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return $e(We),null;case 4:return Ja(),null;case 10:return G0(e.type._context),null;case 22:case 23:return cw(),null;case 24:return null;default:return null}}var Yd=!1,Mt=!1,fF=typeof WeakSet=="function"?WeakSet:Set,Z=null;function Pa(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){et(t,e,r)}else n.current=null}function iv(t,e,n){try{n()}catch(r){et(t,e,r)}}var RT=!1;function pF(t,e){if($y=sf,t=rP(),$0(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,h=t,f=null;t:for(;;){for(var p;h!==n||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===t)break t;if(f===n&&++c===i&&(a=o),f===s&&++u===r&&(l=o),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(By={focusedElem:t,selectionRange:n},sf=!1,Z=e;Z!==null;)if(e=Z,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Z=t;else for(;Z!==null;){e=Z;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var v=g.memoizedProps,w=g.memoizedState,E=e.stateNode,x=E.getSnapshotBeforeUpdate(e.elementType===e.type?v:Xn(e.type,v),w);E.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(W(163))}}catch(C){et(e,e.return,C)}if(t=e.sibling,t!==null){t.return=e.return,Z=t;break}Z=e.return}return g=RT,RT=!1,g}function Nc(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&iv(e,n,s)}i=i.next}while(i!==r)}}function Ip(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function sv(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function ZP(t){var e=t.alternate;e!==null&&(t.alternate=null,ZP(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[yr],delete e[su],delete e[qy],delete e[Yj],delete e[Xj])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function eA(t){return t.tag===5||t.tag===3||t.tag===4}function kT(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||eA(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ov(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=lf));else if(r!==4&&(t=t.child,t!==null))for(ov(t,e,n),t=t.sibling;t!==null;)ov(t,e,n),t=t.sibling}function av(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(av(t,e,n),t=t.sibling;t!==null;)av(t,e,n),t=t.sibling}var It=null,Jn=!1;function xi(t,e,n){for(n=n.child;n!==null;)tA(t,e,n),n=n.sibling}function tA(t,e,n){if(Sr&&typeof Sr.onCommitFiberUnmount=="function")try{Sr.onCommitFiberUnmount(vp,n)}catch{}switch(n.tag){case 5:Mt||Pa(n,e);case 6:var r=It,i=Jn;It=null,xi(t,e,n),It=r,Jn=i,It!==null&&(Jn?(t=It,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):It.removeChild(n.stateNode));break;case 18:It!==null&&(Jn?(t=It,n=n.stateNode,t.nodeType===8?pg(t.parentNode,n):t.nodeType===1&&pg(t,n),eu(t)):pg(It,n.stateNode));break;case 4:r=It,i=Jn,It=n.stateNode.containerInfo,Jn=!0,xi(t,e,n),It=r,Jn=i;break;case 0:case 11:case 14:case 15:if(!Mt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&iv(n,e,o),i=i.next}while(i!==r)}xi(t,e,n);break;case 1:if(!Mt&&(Pa(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){et(n,e,a)}xi(t,e,n);break;case 21:xi(t,e,n);break;case 22:n.mode&1?(Mt=(r=Mt)||n.memoizedState!==null,xi(t,e,n),Mt=r):xi(t,e,n);break;default:xi(t,e,n)}}function NT(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new fF),e.forEach(function(r){var i=TF.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Qn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:It=a.stateNode,Jn=!1;break e;case 3:It=a.stateNode.containerInfo,Jn=!0;break e;case 4:It=a.stateNode.containerInfo,Jn=!0;break e}a=a.return}if(It===null)throw Error(W(160));tA(s,o,i),It=null,Jn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){et(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)nA(e,t),e=e.sibling}function nA(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Qn(e,t),fr(t),r&4){try{Nc(3,t,t.return),Ip(3,t)}catch(v){et(t,t.return,v)}try{Nc(5,t,t.return)}catch(v){et(t,t.return,v)}}break;case 1:Qn(e,t),fr(t),r&512&&n!==null&&Pa(n,n.return);break;case 5:if(Qn(e,t),fr(t),r&512&&n!==null&&Pa(n,n.return),t.flags&32){var i=t.stateNode;try{Yc(i,"")}catch(v){et(t,t.return,v)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&bC(i,s),ky(a,o);var c=ky(a,s);for(o=0;o<l.length;o+=2){var u=l[o],h=l[o+1];u==="style"?AC(i,h):u==="dangerouslySetInnerHTML"?CC(i,h):u==="children"?Yc(i,h):P0(i,u,h,c)}switch(a){case"input":Iy(i,s);break;case"textarea":SC(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?Oa(i,!!s.multiple,p,!1):f!==!!s.multiple&&(s.defaultValue!=null?Oa(i,!!s.multiple,s.defaultValue,!0):Oa(i,!!s.multiple,s.multiple?[]:"",!1))}i[su]=s}catch(v){et(t,t.return,v)}}break;case 6:if(Qn(e,t),fr(t),r&4){if(t.stateNode===null)throw Error(W(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(v){et(t,t.return,v)}}break;case 3:if(Qn(e,t),fr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{eu(e.containerInfo)}catch(v){et(t,t.return,v)}break;case 4:Qn(e,t),fr(t);break;case 13:Qn(e,t),fr(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(aw=ot())),r&4&&NT(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Mt=(c=Mt)||u,Qn(e,t),Mt=c):Qn(e,t),fr(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(Z=t,u=t.child;u!==null;){for(h=Z=u;Z!==null;){switch(f=Z,p=f.child,f.tag){case 0:case 11:case 14:case 15:Nc(4,f,f.return);break;case 1:Pa(f,f.return);var g=f.stateNode;if(typeof g.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(v){et(r,n,v)}}break;case 5:Pa(f,f.return);break;case 22:if(f.memoizedState!==null){OT(h);continue}}p!==null?(p.return=f,Z=p):OT(h)}u=u.sibling}e:for(u=null,h=t;;){if(h.tag===5){if(u===null){u=h;try{i=h.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=PC("display",o))}catch(v){et(t,t.return,v)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(v){et(t,t.return,v)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Qn(e,t),fr(t),r&4&&NT(t);break;case 21:break;default:Qn(e,t),fr(t)}}function fr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(eA(n)){var r=n;break e}n=n.return}throw Error(W(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Yc(i,""),r.flags&=-33);var s=kT(t);av(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=kT(t);ov(t,a,o);break;default:throw Error(W(161))}}catch(l){et(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function mF(t,e,n){Z=t,rA(t)}function rA(t,e,n){for(var r=(t.mode&1)!==0;Z!==null;){var i=Z,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Yd;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Mt;a=Yd;var c=Mt;if(Yd=o,(Mt=l)&&!c)for(Z=i;Z!==null;)o=Z,l=o.child,o.tag===22&&o.memoizedState!==null?LT(i):l!==null?(l.return=o,Z=l):LT(i);for(;s!==null;)Z=s,rA(s),s=s.sibling;Z=i,Yd=a,Mt=c}DT(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Z=s):DT(t)}}function DT(t){for(;Z!==null;){var e=Z;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Mt||Ip(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Mt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Xn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&yT(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}yT(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&eu(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(W(163))}Mt||e.flags&512&&sv(e)}catch(f){et(e,e.return,f)}}if(e===t){Z=null;break}if(n=e.sibling,n!==null){n.return=e.return,Z=n;break}Z=e.return}}function OT(t){for(;Z!==null;){var e=Z;if(e===t){Z=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Z=n;break}Z=e.return}}function LT(t){for(;Z!==null;){var e=Z;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ip(4,e)}catch(l){et(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){et(e,i,l)}}var s=e.return;try{sv(e)}catch(l){et(e,s,l)}break;case 5:var o=e.return;try{sv(e)}catch(l){et(e,o,l)}}}catch(l){et(e,e.return,l)}if(e===t){Z=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Z=a;break}Z=e.return}}var gF=Math.ceil,wf=hi.ReactCurrentDispatcher,sw=hi.ReactCurrentOwner,Un=hi.ReactCurrentBatchConfig,be=0,bt=null,ht=null,Pt=0,yn=0,Aa=ms(0),mt=0,du=null,co=0,Cp=0,ow=0,Dc=null,on=null,aw=0,el=1/0,Fr=null,_f=!1,lv=null,Ki=null,Xd=!1,Ui=null,xf=0,Oc=0,cv=null,Rh=-1,kh=0;function Xt(){return be&6?ot():Rh!==-1?Rh:Rh=ot()}function Qi(t){return t.mode&1?be&2&&Pt!==0?Pt&-Pt:Zj.transition!==null?(kh===0&&(kh=$C()),kh):(t=Re,t!==0||(t=window.event,t=t===void 0?16:KC(t.type)),t):1}function nr(t,e,n,r){if(50<Oc)throw Oc=0,cv=null,Error(W(185));Ou(t,n,r),(!(be&2)||t!==bt)&&(t===bt&&(!(be&2)&&(Cp|=n),mt===4&&Di(t,Pt)),hn(t,r),n===1&&be===0&&!(e.mode&1)&&(el=ot()+500,Tp&&gs()))}function hn(t,e){var n=t.callbackNode;ZM(t,e);var r=rf(t,t===bt?Pt:0);if(r===0)n!==null&&WE(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&WE(n),e===1)t.tag===0?Jj(VT.bind(null,t)):fP(VT.bind(null,t)),Kj(function(){!(be&6)&&gs()}),n=null;else{switch(BC(r)){case 1:n=D0;break;case 4:n=FC;break;case 16:n=nf;break;case 536870912:n=UC;break;default:n=nf}n=dA(n,iA.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function iA(t,e){if(Rh=-1,kh=0,be&6)throw Error(W(327));var n=t.callbackNode;if(Fa()&&t.callbackNode!==n)return null;var r=rf(t,t===bt?Pt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ef(t,r);else{e=r;var i=be;be|=2;var s=oA();(bt!==t||Pt!==e)&&(Fr=null,el=ot()+500,eo(t,e));do try{wF();break}catch(a){sA(t,a)}while(1);H0(),wf.current=s,be=i,ht!==null?e=0:(bt=null,Pt=0,e=mt)}if(e!==0){if(e===2&&(i=Vy(t),i!==0&&(r=i,e=uv(t,i))),e===1)throw n=du,eo(t,0),Di(t,r),hn(t,ot()),n;if(e===6)Di(t,r);else{if(i=t.current.alternate,!(r&30)&&!yF(i)&&(e=Ef(t,r),e===2&&(s=Vy(t),s!==0&&(r=s,e=uv(t,s))),e===1))throw n=du,eo(t,0),Di(t,r),hn(t,ot()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(W(345));case 2:Ls(t,on,Fr);break;case 3:if(Di(t,r),(r&130023424)===r&&(e=aw+500-ot(),10<e)){if(rf(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Xt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Wy(Ls.bind(null,t,on,Fr),e);break}Ls(t,on,Fr);break;case 4:if(Di(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-tr(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=ot()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*gF(r/1960))-r,10<r){t.timeoutHandle=Wy(Ls.bind(null,t,on,Fr),r);break}Ls(t,on,Fr);break;case 5:Ls(t,on,Fr);break;default:throw Error(W(329))}}}return hn(t,ot()),t.callbackNode===n?iA.bind(null,t):null}function uv(t,e){var n=Dc;return t.current.memoizedState.isDehydrated&&(eo(t,e).flags|=256),t=Ef(t,e),t!==2&&(e=on,on=n,e!==null&&dv(e)),t}function dv(t){on===null?on=t:on.push.apply(on,t)}function yF(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!sr(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Di(t,e){for(e&=~ow,e&=~Cp,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-tr(e),r=1<<n;t[n]=-1,e&=~r}}function VT(t){if(be&6)throw Error(W(327));Fa();var e=rf(t,0);if(!(e&1))return hn(t,ot()),null;var n=Ef(t,e);if(t.tag!==0&&n===2){var r=Vy(t);r!==0&&(e=r,n=uv(t,r))}if(n===1)throw n=du,eo(t,0),Di(t,e),hn(t,ot()),n;if(n===6)throw Error(W(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ls(t,on,Fr),hn(t,ot()),null}function lw(t,e){var n=be;be|=1;try{return t(e)}finally{be=n,be===0&&(el=ot()+500,Tp&&gs())}}function uo(t){Ui!==null&&Ui.tag===0&&!(be&6)&&Fa();var e=be;be|=1;var n=Un.transition,r=Re;try{if(Un.transition=null,Re=1,t)return t()}finally{Re=r,Un.transition=n,be=e,!(be&6)&&gs()}}function cw(){yn=Aa.current,$e(Aa)}function eo(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Gj(n)),ht!==null)for(n=ht.return;n!==null;){var r=n;switch(z0(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&cf();break;case 3:Ja(),$e(un),$e($t),J0();break;case 5:X0(r);break;case 4:Ja();break;case 13:$e(We);break;case 19:$e(We);break;case 10:G0(r.type._context);break;case 22:case 23:cw()}n=n.return}if(bt=t,ht=t=Yi(t.current,null),Pt=yn=e,mt=0,du=null,ow=Cp=co=0,on=Dc=null,Ks!==null){for(e=0;e<Ks.length;e++)if(n=Ks[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Ks=null}return t}function sA(t,e){do{var n=ht;try{if(H0(),Ch.current=vf,yf){for(var r=Ke.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}yf=!1}if(lo=0,Et=pt=Ke=null,kc=!1,lu=0,sw.current=null,n===null||n.return===null){mt=1,du=e,ht=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Pt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=TT(o);if(p!==null){p.flags&=-257,bT(p,o,a,s,e),p.mode&1&&ET(s,c,e),e=p,l=c;var g=e.updateQueue;if(g===null){var v=new Set;v.add(l),e.updateQueue=v}else g.add(l);break e}else{if(!(e&1)){ET(s,c,e),uw();break e}l=Error(W(426))}}else if(ze&&a.mode&1){var w=TT(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),bT(w,o,a,s,e),W0(Za(l,a));break e}}s=l=Za(l,a),mt!==4&&(mt=2),Dc===null?Dc=[s]:Dc.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var E=BP(s,l,e);gT(s,E);break e;case 1:a=l;var x=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof x.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Ki===null||!Ki.has(b)))){s.flags|=65536,e&=-e,s.lanes|=e;var C=zP(s,a,e);gT(s,C);break e}}s=s.return}while(s!==null)}lA(n)}catch(N){e=N,ht===n&&n!==null&&(ht=n=n.return);continue}break}while(1)}function oA(){var t=wf.current;return wf.current=vf,t===null?vf:t}function uw(){(mt===0||mt===3||mt===2)&&(mt=4),bt===null||!(co&268435455)&&!(Cp&268435455)||Di(bt,Pt)}function Ef(t,e){var n=be;be|=2;var r=oA();(bt!==t||Pt!==e)&&(Fr=null,eo(t,e));do try{vF();break}catch(i){sA(t,i)}while(1);if(H0(),be=n,wf.current=r,ht!==null)throw Error(W(261));return bt=null,Pt=0,mt}function vF(){for(;ht!==null;)aA(ht)}function wF(){for(;ht!==null&&!WM();)aA(ht)}function aA(t){var e=uA(t.alternate,t,yn);t.memoizedProps=t.pendingProps,e===null?lA(t):ht=e,sw.current=null}function lA(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=hF(n,e),n!==null){n.flags&=32767,ht=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{mt=6,ht=null;return}}else if(n=dF(n,e,yn),n!==null){ht=n;return}if(e=e.sibling,e!==null){ht=e;return}ht=e=t}while(e!==null);mt===0&&(mt=5)}function Ls(t,e,n){var r=Re,i=Un.transition;try{Un.transition=null,Re=1,_F(t,e,n,r)}finally{Un.transition=i,Re=r}return null}function _F(t,e,n,r){do Fa();while(Ui!==null);if(be&6)throw Error(W(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(W(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(ej(t,s),t===bt&&(ht=bt=null,Pt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Xd||(Xd=!0,dA(nf,function(){return Fa(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Un.transition,Un.transition=null;var o=Re;Re=1;var a=be;be|=4,sw.current=null,pF(t,n),nA(n,t),Uj(By),sf=!!$y,By=$y=null,t.current=n,mF(n),qM(),be=a,Re=o,Un.transition=s}else t.current=n;if(Xd&&(Xd=!1,Ui=t,xf=i),s=t.pendingLanes,s===0&&(Ki=null),KM(n.stateNode),hn(t,ot()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(_f)throw _f=!1,t=lv,lv=null,t;return xf&1&&t.tag!==0&&Fa(),s=t.pendingLanes,s&1?t===cv?Oc++:(Oc=0,cv=t):Oc=0,gs(),null}function Fa(){if(Ui!==null){var t=BC(xf),e=Un.transition,n=Re;try{if(Un.transition=null,Re=16>t?16:t,Ui===null)var r=!1;else{if(t=Ui,Ui=null,xf=0,be&6)throw Error(W(331));var i=be;for(be|=4,Z=t.current;Z!==null;){var s=Z,o=s.child;if(Z.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Z=c;Z!==null;){var u=Z;switch(u.tag){case 0:case 11:case 15:Nc(8,u,s)}var h=u.child;if(h!==null)h.return=u,Z=h;else for(;Z!==null;){u=Z;var f=u.sibling,p=u.return;if(ZP(u),u===c){Z=null;break}if(f!==null){f.return=p,Z=f;break}Z=p}}}var g=s.alternate;if(g!==null){var v=g.child;if(v!==null){g.child=null;do{var w=v.sibling;v.sibling=null,v=w}while(v!==null)}}Z=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Z=o;else e:for(;Z!==null;){if(s=Z,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Nc(9,s,s.return)}var E=s.sibling;if(E!==null){E.return=s.return,Z=E;break e}Z=s.return}}var x=t.current;for(Z=x;Z!==null;){o=Z;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,Z=b;else e:for(o=x;Z!==null;){if(a=Z,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Ip(9,a)}}catch(N){et(a,a.return,N)}if(a===o){Z=null;break e}var C=a.sibling;if(C!==null){C.return=a.return,Z=C;break e}Z=a.return}}if(be=i,gs(),Sr&&typeof Sr.onPostCommitFiberRoot=="function")try{Sr.onPostCommitFiberRoot(vp,t)}catch{}r=!0}return r}finally{Re=n,Un.transition=e}}return!1}function MT(t,e,n){e=Za(n,e),e=BP(t,e,1),t=Gi(t,e,1),e=Xt(),t!==null&&(Ou(t,1,e),hn(t,e))}function et(t,e,n){if(t.tag===3)MT(t,t,n);else for(;e!==null;){if(e.tag===3){MT(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ki===null||!Ki.has(r))){t=Za(n,t),t=zP(e,t,1),e=Gi(e,t,1),t=Xt(),e!==null&&(Ou(e,1,t),hn(e,t));break}}e=e.return}}function xF(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Xt(),t.pingedLanes|=t.suspendedLanes&n,bt===t&&(Pt&n)===n&&(mt===4||mt===3&&(Pt&130023424)===Pt&&500>ot()-aw?eo(t,0):ow|=n),hn(t,e)}function cA(t,e){e===0&&(t.mode&1?(e=$d,$d<<=1,!($d&130023424)&&($d=4194304)):e=1);var n=Xt();t=ri(t,e),t!==null&&(Ou(t,e,n),hn(t,n))}function EF(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),cA(t,n)}function TF(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(W(314))}r!==null&&r.delete(e),cA(t,n)}var uA;uA=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||un.current)an=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return an=!1,uF(t,e,n);an=!!(t.flags&131072)}else an=!1,ze&&e.flags&1048576&&pP(e,hf,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ah(t,e),t=e.pendingProps;var i=Qa(e,$t.current);ja(e,n),i=ew(null,e,r,t,i,n);var s=tw();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,dn(r)?(s=!0,uf(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Q0(e),i.updater=Sp,e.stateNode=i,i._reactInternals=e,Xy(e,r,t,n),e=ev(null,e,r,!0,s,n)):(e.tag=0,ze&&s&&B0(e),Qt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ah(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=SF(r),t=Xn(r,t),i){case 0:e=Zy(null,e,r,t,n);break e;case 1:e=CT(null,e,r,t,n);break e;case 11:e=ST(null,e,r,t,n);break e;case 14:e=IT(null,e,r,Xn(r.type,t),n);break e}throw Error(W(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Xn(r,i),Zy(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Xn(r,i),CT(t,e,r,i,n);case 3:e:{if(GP(e),t===null)throw Error(W(387));r=e.pendingProps,s=e.memoizedState,i=s.element,_P(t,e),mf(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Za(Error(W(423)),e),e=PT(t,e,r,n,i);break e}else if(r!==i){i=Za(Error(W(424)),e),e=PT(t,e,r,n,i);break e}else for(wn=Hi(e.stateNode.containerInfo.firstChild),Tn=e,ze=!0,Zn=null,n=vP(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ya(),r===i){e=ii(t,e,n);break e}Qt(t,e,r,n)}e=e.child}return e;case 5:return xP(e),t===null&&Ky(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,zy(r,i)?o=null:s!==null&&zy(r,s)&&(e.flags|=32),HP(t,e),Qt(t,e,o,n),e.child;case 6:return t===null&&Ky(e),null;case 13:return KP(t,e,n);case 4:return Y0(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Xa(e,null,r,n):Qt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Xn(r,i),ST(t,e,r,i,n);case 7:return Qt(t,e,e.pendingProps,n),e.child;case 8:return Qt(t,e,e.pendingProps.children,n),e.child;case 12:return Qt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Le(ff,r._currentValue),r._currentValue=o,s!==null)if(sr(s.value,o)){if(s.children===i.children&&!un.current){e=ii(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Yr(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Qy(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(W(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Qy(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Qt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,ja(e,n),i=Bn(i),r=r(i),e.flags|=1,Qt(t,e,r,n),e.child;case 14:return r=e.type,i=Xn(r,e.pendingProps),i=Xn(r.type,i),IT(t,e,r,i,n);case 15:return WP(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Xn(r,i),Ah(t,e),e.tag=1,dn(r)?(t=!0,uf(e)):t=!1,ja(e,n),$P(e,r,i),Xy(e,r,i,n),ev(null,e,r,!0,t,n);case 19:return QP(t,e,n);case 22:return qP(t,e,n)}throw Error(W(156,e.tag))};function dA(t,e){return jC(t,e)}function bF(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fn(t,e,n,r){return new bF(t,e,n,r)}function dw(t){return t=t.prototype,!(!t||!t.isReactComponent)}function SF(t){if(typeof t=="function")return dw(t)?1:0;if(t!=null){if(t=t.$$typeof,t===R0)return 11;if(t===k0)return 14}return 2}function Yi(t,e){var n=t.alternate;return n===null?(n=Fn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Nh(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")dw(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case wa:return to(n.children,i,s,e);case A0:o=8,i|=8;break;case xy:return t=Fn(12,n,e,i|2),t.elementType=xy,t.lanes=s,t;case Ey:return t=Fn(13,n,e,i),t.elementType=Ey,t.lanes=s,t;case Ty:return t=Fn(19,n,e,i),t.elementType=Ty,t.lanes=s,t;case xC:return Pp(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case wC:o=10;break e;case _C:o=9;break e;case R0:o=11;break e;case k0:o=14;break e;case Ai:o=16,r=null;break e}throw Error(W(130,t==null?t:typeof t,""))}return e=Fn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function to(t,e,n,r){return t=Fn(7,t,r,e),t.lanes=n,t}function Pp(t,e,n,r){return t=Fn(22,t,r,e),t.elementType=xC,t.lanes=n,t.stateNode={isHidden:!1},t}function Eg(t,e,n){return t=Fn(6,t,null,e),t.lanes=n,t}function Tg(t,e,n){return e=Fn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function IF(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=rg(0),this.expirationTimes=rg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rg(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function hw(t,e,n,r,i,s,o,a,l){return t=new IF(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Fn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Q0(s),t}function CF(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:va,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function hA(t){if(!t)return ss;t=t._reactInternals;e:{if(Oo(t)!==t||t.tag!==1)throw Error(W(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(dn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(W(171))}if(t.tag===1){var n=t.type;if(dn(n))return hP(t,n,e)}return e}function fA(t,e,n,r,i,s,o,a,l){return t=hw(n,r,!0,t,i,s,o,a,l),t.context=hA(null),n=t.current,r=Xt(),i=Qi(n),s=Yr(r,i),s.callback=e??null,Gi(n,s,i),t.current.lanes=i,Ou(t,i,r),hn(t,r),t}function Ap(t,e,n,r){var i=e.current,s=Xt(),o=Qi(i);return n=hA(n),e.context===null?e.context=n:e.pendingContext=n,e=Yr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Gi(i,e,o),t!==null&&(nr(t,i,o,s),Ih(t,i,o)),o}function Tf(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function jT(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function fw(t,e){jT(t,e),(t=t.alternate)&&jT(t,e)}function PF(){return null}var pA=typeof reportError=="function"?reportError:function(t){console.error(t)};function pw(t){this._internalRoot=t}Rp.prototype.render=pw.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(W(409));Ap(t,e,null,null)};Rp.prototype.unmount=pw.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;uo(function(){Ap(null,t,null,null)}),e[ni]=null}};function Rp(t){this._internalRoot=t}Rp.prototype.unstable_scheduleHydration=function(t){if(t){var e=qC();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ni.length&&e!==0&&e<Ni[n].priority;n++);Ni.splice(n,0,t),n===0&&GC(t)}};function mw(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function kp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function FT(){}function AF(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Tf(o);s.call(c)}}var o=fA(e,r,t,0,null,!1,!1,"",FT);return t._reactRootContainer=o,t[ni]=o.current,ru(t.nodeType===8?t.parentNode:t),uo(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Tf(l);a.call(c)}}var l=hw(t,0,!1,null,null,!1,!1,"",FT);return t._reactRootContainer=l,t[ni]=l.current,ru(t.nodeType===8?t.parentNode:t),uo(function(){Ap(e,l,n,r)}),l}function Np(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Tf(o);a.call(l)}}Ap(e,o,t,i)}else o=AF(n,e,t,i,r);return Tf(o)}zC=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=gc(e.pendingLanes);n!==0&&(O0(e,n|1),hn(e,ot()),!(be&6)&&(el=ot()+500,gs()))}break;case 13:uo(function(){var r=ri(t,1);if(r!==null){var i=Xt();nr(r,t,1,i)}}),fw(t,1)}};L0=function(t){if(t.tag===13){var e=ri(t,134217728);if(e!==null){var n=Xt();nr(e,t,134217728,n)}fw(t,134217728)}};WC=function(t){if(t.tag===13){var e=Qi(t),n=ri(t,e);if(n!==null){var r=Xt();nr(n,t,e,r)}fw(t,e)}};qC=function(){return Re};HC=function(t,e){var n=Re;try{return Re=t,e()}finally{Re=n}};Dy=function(t,e,n){switch(e){case"input":if(Iy(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Ep(r);if(!i)throw Error(W(90));TC(r),Iy(r,i)}}}break;case"textarea":SC(t,n);break;case"select":e=n.value,e!=null&&Oa(t,!!n.multiple,e,!1)}};NC=lw;DC=uo;var RF={usingClientEntryPoint:!1,Events:[Vu,Ta,Ep,RC,kC,lw]},Zl={findFiberByHostInstance:Gs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},kF={bundleType:Zl.bundleType,version:Zl.version,rendererPackageName:Zl.rendererPackageName,rendererConfig:Zl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:hi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=VC(t),t===null?null:t.stateNode},findFiberByHostInstance:Zl.findFiberByHostInstance||PF,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jd.isDisabled&&Jd.supportsFiber)try{vp=Jd.inject(kF),Sr=Jd}catch{}}Rn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=RF;Rn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!mw(e))throw Error(W(200));return CF(t,e,null,n)};Rn.createRoot=function(t,e){if(!mw(t))throw Error(W(299));var n=!1,r="",i=pA;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=hw(t,1,!1,null,null,n,!1,r,i),t[ni]=e.current,ru(t.nodeType===8?t.parentNode:t),new pw(e)};Rn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(W(188)):(t=Object.keys(t).join(","),Error(W(268,t)));return t=VC(e),t=t===null?null:t.stateNode,t};Rn.flushSync=function(t){return uo(t)};Rn.hydrate=function(t,e,n){if(!kp(e))throw Error(W(200));return Np(null,t,e,!0,n)};Rn.hydrateRoot=function(t,e,n){if(!mw(t))throw Error(W(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=pA;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=fA(e,null,t,1,n??null,i,!1,s,o),t[ni]=e.current,ru(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Rp(e)};Rn.render=function(t,e,n){if(!kp(e))throw Error(W(200));return Np(null,t,e,!1,n)};Rn.unmountComponentAtNode=function(t){if(!kp(t))throw Error(W(40));return t._reactRootContainer?(uo(function(){Np(null,null,t,!1,function(){t._reactRootContainer=null,t[ni]=null})}),!0):!1};Rn.unstable_batchedUpdates=lw;Rn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!kp(n))throw Error(W(200));if(t==null||t._reactInternals===void 0)throw Error(W(38));return Np(t,e,n,!1,r)};Rn.version="18.3.1-next-f1338f8080-20240426";function mA(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(mA)}catch(t){console.error(t)}}mA(),mC.exports=Rn;var ju=mC.exports;const NF=rC(ju);var UT=ju;wy.createRoot=UT.createRoot,wy.hydrateRoot=UT.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hu(){return hu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hu.apply(this,arguments)}var $i;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})($i||($i={}));const $T="popstate";function DF(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return hv("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:yA(i)}return LF(e,n,null,t)}function ft(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function gA(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function OF(){return Math.random().toString(36).substr(2,8)}function BT(t,e){return{usr:t.state,key:t.key,idx:e}}function hv(t,e,n,r){return n===void 0&&(n=null),hu({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?xl(e):e,{state:n,key:e&&e.key||r||OF()})}function yA(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function xl(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function LF(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=$i.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(hu({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function h(){a=$i.Pop;let w=u(),E=w==null?null:w-c;c=w,l&&l({action:a,location:v.location,delta:E})}function f(w,E){a=$i.Push;let x=hv(v.location,w,E);n&&n(x,w),c=u()+1;let b=BT(x,c),C=v.createHref(x);try{o.pushState(b,"",C)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;i.location.assign(C)}s&&l&&l({action:a,location:v.location,delta:1})}function p(w,E){a=$i.Replace;let x=hv(v.location,w,E);n&&n(x,w),c=u();let b=BT(x,c),C=v.createHref(x);o.replaceState(b,"",C),s&&l&&l({action:a,location:v.location,delta:0})}function g(w){let E=i.location.origin!=="null"?i.location.origin:i.location.href,x=typeof w=="string"?w:yA(w);return x=x.replace(/ $/,"%20"),ft(E,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,E)}let v={get action(){return a},get location(){return t(i,o)},listen(w){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener($T,h),l=w,()=>{i.removeEventListener($T,h),l=null}},createHref(w){return e(i,w)},createURL:g,encodeLocation(w){let E=g(w);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:f,replace:p,go(w){return o.go(w)}};return v}var zT;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(zT||(zT={}));function VF(t,e,n){return n===void 0&&(n="/"),MF(t,e,n,!1)}function MF(t,e,n,r){let i=typeof e=="string"?xl(e):e,s=_A(i.pathname||"/",n);if(s==null)return null;let o=vA(t);jF(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=QF(s);a=GF(o[l],c,r)}return a}function vA(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(ft(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=no([r,l.relativePath]),u=n.concat(l);s.children&&s.children.length>0&&(ft(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),vA(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:qF(c,s.index),routesMeta:u})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of wA(s.path))i(s,o,l)}),e}function wA(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=wA(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function jF(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:HF(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const FF=/^:[\w-]+$/,UF=3,$F=2,BF=1,zF=10,WF=-2,WT=t=>t==="*";function qF(t,e){let n=t.split("/"),r=n.length;return n.some(WT)&&(r+=WF),e&&(r+=$F),n.filter(i=>!WT(i)).reduce((i,s)=>i+(FF.test(s)?UF:s===""?BF:zF),r)}function HF(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function GF(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,u=s==="/"?e:e.slice(s.length)||"/",h=qT({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),f=l.route;if(!h&&c&&n&&!r[r.length-1].route.index&&(h=qT({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!h)return null;Object.assign(i,h.params),o.push({params:i,pathname:no([s,h.pathname]),pathnameBase:ZF(no([s,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(s=no([s,h.pathnameBase]))}return o}function qT(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=KF(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,u,h)=>{let{paramName:f,isOptional:p}=u;if(f==="*"){let v=a[h]||"";o=s.slice(0,s.length-v.length).replace(/(.)\/+$/,"$1")}const g=a[h];return p&&!g?c[f]=void 0:c[f]=(g||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function KF(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),gA(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function QF(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return gA(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function _A(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function YF(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?xl(t):t;return{pathname:n?n.startsWith("/")?n:XF(n,e):e,search:eU(r),hash:tU(i)}}function XF(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function bg(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function JF(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function xA(t,e){let n=JF(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function EA(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=xl(t):(i=hu({},t),ft(!i.pathname||!i.pathname.includes("?"),bg("?","pathname","search",i)),ft(!i.pathname||!i.pathname.includes("#"),bg("#","pathname","hash",i)),ft(!i.search||!i.search.includes("#"),bg("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;i.pathname=f.join("/")}a=h>=0?e[h]:"/"}let l=YF(i,a),c=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const no=t=>t.join("/").replace(/\/\/+/g,"/"),ZF=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),eU=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,tU=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function nU(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const TA=["post","put","patch","delete"];new Set(TA);const rU=["get",...TA];new Set(rU);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fu(){return fu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fu.apply(this,arguments)}const gw=_.createContext(null),iU=_.createContext(null),Fu=_.createContext(null),Dp=_.createContext(null),Lo=_.createContext({outlet:null,matches:[],isDataRoute:!1}),bA=_.createContext(null);function Uu(){return _.useContext(Dp)!=null}function $u(){return Uu()||ft(!1),_.useContext(Dp).location}function SA(t){_.useContext(Fu).static||_.useLayoutEffect(t)}function Bu(){let{isDataRoute:t}=_.useContext(Lo);return t?yU():sU()}function sU(){Uu()||ft(!1);let t=_.useContext(gw),{basename:e,future:n,navigator:r}=_.useContext(Fu),{matches:i}=_.useContext(Lo),{pathname:s}=$u(),o=JSON.stringify(xA(i,n.v7_relativeSplatPath)),a=_.useRef(!1);return SA(()=>{a.current=!0}),_.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let h=EA(c,JSON.parse(o),s,u.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:no([e,h.pathname])),(u.replace?r.replace:r.push)(h,u.state,u)},[e,r,o,s,t])}function oU(t,e){return aU(t,e)}function aU(t,e,n,r){Uu()||ft(!1);let{navigator:i,static:s}=_.useContext(Fu),{matches:o}=_.useContext(Lo),a=o[o.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let u=$u(),h;if(e){var f;let E=typeof e=="string"?xl(e):e;c==="/"||(f=E.pathname)!=null&&f.startsWith(c)||ft(!1),h=E}else h=u;let p=h.pathname||"/",g=p;if(c!=="/"){let E=c.replace(/^\//,"").split("/");g="/"+p.replace(/^\//,"").split("/").slice(E.length).join("/")}let v=!s&&n&&n.matches&&n.matches.length>0?n.matches:VF(t,{pathname:g}),w=hU(v&&v.map(E=>Object.assign({},E,{params:Object.assign({},l,E.params),pathname:no([c,i.encodeLocation?i.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?c:no([c,i.encodeLocation?i.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),o,n,r);return e&&w?_.createElement(Dp.Provider,{value:{location:fu({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:$i.Pop}},w):w}function lU(){let t=gU(),e=nU(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return _.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},e),n?_.createElement("pre",{style:i},n):null,s)}const cU=_.createElement(lU,null);class uU extends _.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?_.createElement(Lo.Provider,{value:this.props.routeContext},_.createElement(bA.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function dU(t){let{routeContext:e,match:n,children:r}=t,i=_.useContext(gw);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),_.createElement(Lo.Provider,{value:e},r)}function hU(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let u=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);u>=0||ft(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let h=o[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=u),h.route.id){let{loaderData:f,errors:p}=n,g=h.route.loader&&f[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||g){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,h,f)=>{let p,g=!1,v=null,w=null;n&&(p=a&&h.route.id?a[h.route.id]:void 0,v=h.route.errorElement||cU,l&&(c<0&&f===0?(vU("route-fallback",!1),g=!0,w=null):c===f&&(g=!0,w=h.route.hydrateFallbackElement||null)));let E=e.concat(o.slice(0,f+1)),x=()=>{let b;return p?b=v:g?b=w:h.route.Component?b=_.createElement(h.route.Component,null):h.route.element?b=h.route.element:b=u,_.createElement(dU,{match:h,routeContext:{outlet:u,matches:E,isDataRoute:n!=null},children:b})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?_.createElement(uU,{location:n.location,revalidation:n.revalidation,component:v,error:p,children:x(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):x()},null)}var IA=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(IA||{}),bf=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(bf||{});function fU(t){let e=_.useContext(gw);return e||ft(!1),e}function pU(t){let e=_.useContext(iU);return e||ft(!1),e}function mU(t){let e=_.useContext(Lo);return e||ft(!1),e}function CA(t){let e=mU(),n=e.matches[e.matches.length-1];return n.route.id||ft(!1),n.route.id}function gU(){var t;let e=_.useContext(bA),n=pU(bf.UseRouteError),r=CA(bf.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function yU(){let{router:t}=fU(IA.UseNavigateStable),e=CA(bf.UseNavigateStable),n=_.useRef(!1);return SA(()=>{n.current=!0}),_.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,fu({fromRouteId:e},s)))},[t,e])}const HT={};function vU(t,e,n){!e&&!HT[t]&&(HT[t]=!0)}function wU(t,e){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function Bs(t){let{to:e,replace:n,state:r,relative:i}=t;Uu()||ft(!1);let{future:s,static:o}=_.useContext(Fu),{matches:a}=_.useContext(Lo),{pathname:l}=$u(),c=Bu(),u=EA(e,xA(a,s.v7_relativeSplatPath),l,i==="path"),h=JSON.stringify(u);return _.useEffect(()=>c(JSON.parse(h),{replace:n,state:r,relative:i}),[c,h,i,n,r]),null}function pr(t){ft(!1)}function _U(t){let{basename:e="/",children:n=null,location:r,navigationType:i=$i.Pop,navigator:s,static:o=!1,future:a}=t;Uu()&&ft(!1);let l=e.replace(/^\/*/,"/"),c=_.useMemo(()=>({basename:l,navigator:s,static:o,future:fu({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=xl(r));let{pathname:u="/",search:h="",hash:f="",state:p=null,key:g="default"}=r,v=_.useMemo(()=>{let w=_A(u,l);return w==null?null:{location:{pathname:w,search:h,hash:f,state:p,key:g},navigationType:i}},[l,u,h,f,p,g,i]);return v==null?null:_.createElement(Fu.Provider,{value:c},_.createElement(Dp.Provider,{children:n,value:v}))}function xU(t){let{children:e,location:n}=t;return oU(fv(e),n)}new Promise(()=>{});function fv(t,e){e===void 0&&(e=[]);let n=[];return _.Children.forEach(t,(r,i)=>{if(!_.isValidElement(r))return;let s=[...e,i];if(r.type===_.Fragment){n.push.apply(n,fv(r.props.children,s));return}r.type!==pr&&ft(!1),!r.props.index||!r.props.children||ft(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=fv(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const EU="6";try{window.__reactRouterVersion=EU}catch{}const TU="startTransition",GT=S0[TU];function bU(t){let{basename:e,children:n,future:r,window:i}=t,s=_.useRef();s.current==null&&(s.current=DF({window:i,v5Compat:!0}));let o=s.current,[a,l]=_.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},u=_.useCallback(h=>{c&&GT?GT(()=>l(h)):l(h)},[l,c]);return _.useLayoutEffect(()=>o.listen(u),[o,u]),_.useEffect(()=>wU(r),[r]),_.createElement(_U,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var KT;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(KT||(KT={}));var QT;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(QT||(QT={}));function PA(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=PA(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function AA(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=PA(t))&&(r&&(r+=" "),r+=e);return r}function SU(){for(var t=0,e,n,r="";t<arguments.length;)(e=arguments[t++])&&(n=RA(e))&&(r&&(r+=" "),r+=n);return r}function RA(t){if(typeof t=="string")return t;for(var e,n="",r=0;r<t.length;r++)t[r]&&(e=RA(t[r]))&&(n&&(n+=" "),n+=e);return n}var yw="-";function IU(t){var e=PU(t),n=t.conflictingClassGroups,r=t.conflictingClassGroupModifiers,i=r===void 0?{}:r;function s(a){var l=a.split(yw);return l[0]===""&&l.length!==1&&l.shift(),kA(l,e)||CU(a)}function o(a,l){var c=n[a]||[];return l&&i[a]?[].concat(c,i[a]):c}return{getClassGroupId:s,getConflictingClassGroupIds:o}}function kA(t,e){var o;if(t.length===0)return e.classGroupId;var n=t[0],r=e.nextPart.get(n),i=r?kA(t.slice(1),r):void 0;if(i)return i;if(e.validators.length!==0){var s=t.join(yw);return(o=e.validators.find(function(a){var l=a.validator;return l(s)}))==null?void 0:o.classGroupId}}var YT=/^\[(.+)\]$/;function CU(t){if(YT.test(t)){var e=YT.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}}function PU(t){var e=t.theme,n=t.prefix,r={nextPart:new Map,validators:[]},i=RU(Object.entries(t.classGroups),n);return i.forEach(function(s){var o=s[0],a=s[1];pv(a,r,o,e)}),r}function pv(t,e,n,r){t.forEach(function(i){if(typeof i=="string"){var s=i===""?e:XT(e,i);s.classGroupId=n;return}if(typeof i=="function"){if(AU(i)){pv(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(function(o){var a=o[0],l=o[1];pv(l,XT(e,a),n,r)})})}function XT(t,e){var n=t;return e.split(yw).forEach(function(r){n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n}function AU(t){return t.isThemeGetter}function RU(t,e){return e?t.map(function(n){var r=n[0],i=n[1],s=i.map(function(o){return typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(function(a){var l=a[0],c=a[1];return[e+l,c]})):o});return[r,s]}):t}function kU(t){if(t<1)return{get:function(){},set:function(){}};var e=0,n=new Map,r=new Map;function i(s,o){n.set(s,o),e++,e>t&&(e=0,r=n,n=new Map)}return{get:function(o){var a=n.get(o);if(a!==void 0)return a;if((a=r.get(o))!==void 0)return i(o,a),a},set:function(o,a){n.has(o)?n.set(o,a):i(o,a)}}}var NA="!";function NU(t){var e=t.separator||":",n=e.length===1,r=e[0],i=e.length;return function(o){for(var a=[],l=0,c=0,u,h=0;h<o.length;h++){var f=o[h];if(l===0){if(f===r&&(n||o.slice(h,h+i)===e)){a.push(o.slice(c,h)),c=h+i;continue}if(f==="/"){u=h;continue}}f==="["?l++:f==="]"&&l--}var p=a.length===0?o:o.substring(c),g=p.startsWith(NA),v=g?p.substring(1):p,w=u&&u>c?u-c:void 0;return{modifiers:a,hasImportantModifier:g,baseClassName:v,maybePostfixModifierPosition:w}}}function DU(t){if(t.length<=1)return t;var e=[],n=[];return t.forEach(function(r){var i=r[0]==="[";i?(e.push.apply(e,n.sort().concat([r])),n=[]):n.push(r)}),e.push.apply(e,n.sort()),e}function OU(t){return{cache:kU(t.cacheSize),splitModifiers:NU(t),...IU(t)}}var LU=/\s+/;function VU(t,e){var n=e.splitModifiers,r=e.getClassGroupId,i=e.getConflictingClassGroupIds,s=new Set;return t.trim().split(LU).map(function(o){var a=n(o),l=a.modifiers,c=a.hasImportantModifier,u=a.baseClassName,h=a.maybePostfixModifierPosition,f=r(h?u.substring(0,h):u),p=!!h;if(!f){if(!h)return{isTailwindClass:!1,originalClassName:o};if(f=r(u),!f)return{isTailwindClass:!1,originalClassName:o};p=!1}var g=DU(l).join(":"),v=c?g+NA:g;return{isTailwindClass:!0,modifierId:v,classGroupId:f,originalClassName:o,hasPostfixModifier:p}}).reverse().filter(function(o){if(!o.isTailwindClass)return!0;var a=o.modifierId,l=o.classGroupId,c=o.hasPostfixModifier,u=a+l;return s.has(u)?!1:(s.add(u),i(l,c).forEach(function(h){return s.add(a+h)}),!0)}).reverse().map(function(o){return o.originalClassName}).join(" ")}function MU(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r,i,s,o=a;function a(c){var u=e[0],h=e.slice(1),f=h.reduce(function(p,g){return g(p)},u());return r=OU(f),i=r.cache.get,s=r.cache.set,o=l,l(c)}function l(c){var u=i(c);if(u)return u;var h=VU(c,r);return s(c,h),h}return function(){return o(SU.apply(null,arguments))}}function Fe(t){var e=function(r){return r[t]||[]};return e.isThemeGetter=!0,e}var DA=/^\[(?:([a-z-]+):)?(.+)\]$/i,jU=/^\d+\/\d+$/,FU=new Set(["px","full","screen"]),UU=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,$U=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,BU=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function Yn(t){return Ys(t)||FU.has(t)||jU.test(t)||mv(t)}function mv(t){return Vo(t,"length",KU)}function zU(t){return Vo(t,"size",OA)}function WU(t){return Vo(t,"position",OA)}function qU(t){return Vo(t,"url",QU)}function Zd(t){return Vo(t,"number",Ys)}function Ys(t){return!Number.isNaN(Number(t))}function HU(t){return t.endsWith("%")&&Ys(t.slice(0,-1))}function ec(t){return JT(t)||Vo(t,"number",JT)}function ve(t){return DA.test(t)}function tc(){return!0}function Ei(t){return UU.test(t)}function GU(t){return Vo(t,"",YU)}function Vo(t,e,n){var r=DA.exec(t);return r?r[1]?r[1]===e:n(r[2]):!1}function KU(t){return $U.test(t)}function OA(){return!1}function QU(t){return t.startsWith("url(")}function JT(t){return Number.isInteger(Number(t))}function YU(t){return BU.test(t)}function XU(){var t=Fe("colors"),e=Fe("spacing"),n=Fe("blur"),r=Fe("brightness"),i=Fe("borderColor"),s=Fe("borderRadius"),o=Fe("borderSpacing"),a=Fe("borderWidth"),l=Fe("contrast"),c=Fe("grayscale"),u=Fe("hueRotate"),h=Fe("invert"),f=Fe("gap"),p=Fe("gradientColorStops"),g=Fe("gradientColorStopPositions"),v=Fe("inset"),w=Fe("margin"),E=Fe("opacity"),x=Fe("padding"),b=Fe("saturate"),C=Fe("scale"),N=Fe("sepia"),D=Fe("skew"),I=Fe("space"),S=Fe("translate"),A=function(){return["auto","contain","none"]},R=function(){return["auto","hidden","clip","visible","scroll"]},O=function(){return["auto",ve,e]},L=function(){return[ve,e]},k=function(){return["",Yn]},B=function(){return["auto",Ys,ve]},Q=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},K=function(){return["solid","dashed","dotted","double","none"]},re=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},F=function(){return["start","end","center","between","around","evenly","stretch"]},z=function(){return["","0",ve]},Y=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},J=function(){return[Ys,Zd]},ue=function(){return[Ys,ve]};return{cacheSize:500,theme:{colors:[tc],spacing:[Yn],blur:["none","",Ei,ve],brightness:J(),borderColor:[t],borderRadius:["none","","full",Ei,ve],borderSpacing:L(),borderWidth:k(),contrast:J(),grayscale:z(),hueRotate:ue(),invert:z(),gap:L(),gradientColorStops:[t],gradientColorStopPositions:[HU,mv],inset:O(),margin:O(),opacity:J(),padding:L(),saturate:J(),scale:J(),sepia:z(),skew:ue(),space:L(),translate:L()},classGroups:{aspect:[{aspect:["auto","square","video",ve]}],container:["container"],columns:[{columns:[Ei]}],"break-after":[{"break-after":Y()}],"break-before":[{"break-before":Y()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(Q(),[ve])}],overflow:[{overflow:R()}],"overflow-x":[{"overflow-x":R()}],"overflow-y":[{"overflow-y":R()}],overscroll:[{overscroll:A()}],"overscroll-x":[{"overscroll-x":A()}],"overscroll-y":[{"overscroll-y":A()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ec]}],basis:[{basis:O()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ve]}],grow:[{grow:z()}],shrink:[{shrink:z()}],order:[{order:["first","last","none",ec]}],"grid-cols":[{"grid-cols":[tc]}],"col-start-end":[{col:["auto",{span:["full",ec]},ve]}],"col-start":[{"col-start":B()}],"col-end":[{"col-end":B()}],"grid-rows":[{"grid-rows":[tc]}],"row-start-end":[{row:["auto",{span:[ec]},ve]}],"row-start":[{"row-start":B()}],"row-end":[{"row-end":B()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ve]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ve]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal"].concat(F())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(F(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(F(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[x]}],px:[{px:[x]}],py:[{py:[x]}],ps:[{ps:[x]}],pe:[{pe:[x]}],pt:[{pt:[x]}],pr:[{pr:[x]}],pb:[{pb:[x]}],pl:[{pl:[x]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[I]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[I]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",ve,e]}],"min-w":[{"min-w":["min","max","fit",ve,Yn]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[Ei]},Ei,ve]}],h:[{h:[ve,e,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",ve,Yn]}],"max-h":[{"max-h":[ve,e,"min","max","fit"]}],"font-size":[{text:["base",Ei,mv]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Zd]}],"font-family":[{font:[tc]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ve]}],"line-clamp":[{"line-clamp":["none",Ys,Zd]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ve,Yn]}],"list-image":[{"list-image":["none",ve]}],"list-style-type":[{list:["none","disc","decimal",ve]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[E]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[E]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(K(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",Yn]}],"underline-offset":[{"underline-offset":["auto",ve,Yn]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:L()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ve]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ve]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[E]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(Q(),[WU])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",zU]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},qU]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[g]}],"gradient-via-pos":[{via:[g]}],"gradient-to-pos":[{to:[g]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[E]}],"border-style":[{border:[].concat(K(),["hidden"])}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[E]}],"divide-style":[{divide:K()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:[""].concat(K())}],"outline-offset":[{"outline-offset":[ve,Yn]}],"outline-w":[{outline:[Yn]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:k()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[E]}],"ring-offset-w":[{"ring-offset":[Yn]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Ei,GU]}],"shadow-color":[{shadow:[tc]}],opacity:[{opacity:[E]}],"mix-blend":[{"mix-blend":re()}],"bg-blend":[{"bg-blend":re()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Ei,ve]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[h]}],saturate:[{saturate:[b]}],sepia:[{sepia:[N]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[E]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[N]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ve]}],duration:[{duration:ue()}],ease:[{ease:["linear","in","out","in-out",ve]}],delay:[{delay:ue()}],animate:[{animate:["none","spin","ping","pulse","bounce",ve]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[C]}],"scale-x":[{"scale-x":[C]}],"scale-y":[{"scale-y":[C]}],rotate:[{rotate:[ec,ve]}],"translate-x":[{"translate-x":[S]}],"translate-y":[{"translate-y":[S]}],"skew-x":[{"skew-x":[D]}],"skew-y":[{"skew-y":[D]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ve]}],accent:[{accent:["auto",t]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ve]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":L()}],"scroll-mx":[{"scroll-mx":L()}],"scroll-my":[{"scroll-my":L()}],"scroll-ms":[{"scroll-ms":L()}],"scroll-me":[{"scroll-me":L()}],"scroll-mt":[{"scroll-mt":L()}],"scroll-mr":[{"scroll-mr":L()}],"scroll-mb":[{"scroll-mb":L()}],"scroll-ml":[{"scroll-ml":L()}],"scroll-p":[{"scroll-p":L()}],"scroll-px":[{"scroll-px":L()}],"scroll-py":[{"scroll-py":L()}],"scroll-ps":[{"scroll-ps":L()}],"scroll-pe":[{"scroll-pe":L()}],"scroll-pt":[{"scroll-pt":L()}],"scroll-pr":[{"scroll-pr":L()}],"scroll-pb":[{"scroll-pb":L()}],"scroll-pl":[{"scroll-pl":L()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ve]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Yn,Zd]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var JU=MU(XU);function yt(...t){return JU(AA(t))}function me(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function ZT(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function ZU(...t){return e=>{let n=!1;const r=t.map(i=>{const s=ZT(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():ZT(t[i],null)}}}}function lt(...t){return _.useCallback(ZU(...t),t)}function e4(t,e){const n=_.createContext(e),r=s=>{const{children:o,...a}=s,l=_.useMemo(()=>a,Object.values(a));return m.jsx(n.Provider,{value:l,children:o})};r.displayName=t+"Provider";function i(s){const o=_.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${s}\` must be used within \`${t}\``)}return[r,i]}function fi(t,e=[]){let n=[];function r(s,o){const a=_.createContext(o),l=n.length;n=[...n,o];const c=h=>{var E;const{scope:f,children:p,...g}=h,v=((E=f==null?void 0:f[t])==null?void 0:E[l])||a,w=_.useMemo(()=>g,Object.values(g));return m.jsx(v.Provider,{value:w,children:p})};c.displayName=s+"Provider";function u(h,f){var v;const p=((v=f==null?void 0:f[t])==null?void 0:v[l])||a,g=_.useContext(p);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${s}\``)}return[c,u]}const i=()=>{const s=n.map(o=>_.createContext(o));return function(a){const l=(a==null?void 0:a[t])||s;return _.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return i.scopeName=t,[r,t4(i,...e)]}function t4(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const h=l(s)[`__scope${c}`];return{...a,...h}},{});return _.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function pu(t){const e=r4(t),n=_.forwardRef((r,i)=>{const{children:s,...o}=r,a=_.Children.toArray(s),l=a.find(s4);if(l){const c=l.props.children,u=a.map(h=>h===l?_.Children.count(c)>1?_.Children.only(null):_.isValidElement(c)?c.props.children:null:h);return m.jsx(e,{...o,ref:i,children:_.isValidElement(c)?_.cloneElement(c,void 0,u):null})}return m.jsx(e,{...o,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}var n4=pu("Slot");function r4(t){const e=_.forwardRef((n,r)=>{const{children:i,...s}=n,o=_.isValidElement(i)?a4(i):void 0,a=lt(o,r);if(_.isValidElement(i)){const l=o4(s,i.props);return i.type!==_.Fragment&&(l.ref=a),_.cloneElement(i,l)}return _.Children.count(i)>1?_.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var i4=Symbol("radix.slottable");function s4(t){return _.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===i4}function o4(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{const l=s(...a);return i(...a),l}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function a4(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function LA(t){const e=t+"CollectionProvider",[n,r]=fi(e),[i,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=v=>{const{scope:w,children:E}=v,x=qe.useRef(null),b=qe.useRef(new Map).current;return m.jsx(i,{scope:w,itemMap:b,collectionRef:x,children:E})};o.displayName=e;const a=t+"CollectionSlot",l=pu(a),c=qe.forwardRef((v,w)=>{const{scope:E,children:x}=v,b=s(a,E),C=lt(w,b.collectionRef);return m.jsx(l,{ref:C,children:x})});c.displayName=a;const u=t+"CollectionItemSlot",h="data-radix-collection-item",f=pu(u),p=qe.forwardRef((v,w)=>{const{scope:E,children:x,...b}=v,C=qe.useRef(null),N=lt(w,C),D=s(u,E);return qe.useEffect(()=>(D.itemMap.set(C,{ref:C,...b}),()=>void D.itemMap.delete(C))),m.jsx(f,{[h]:"",ref:N,children:x})});p.displayName=u;function g(v){const w=s(t+"CollectionConsumer",v);return qe.useCallback(()=>{const x=w.collectionRef.current;if(!x)return[];const b=Array.from(x.querySelectorAll(`[${h}]`));return Array.from(w.itemMap.values()).sort((D,I)=>b.indexOf(D.ref.current)-b.indexOf(I.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:o,Slot:c,ItemSlot:p},g,r]}var l4=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ce=l4.reduce((t,e)=>{const n=pu(`Primitive.${e}`),r=_.forwardRef((i,s)=>{const{asChild:o,...a}=i,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),m.jsx(l,{...a,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function VA(t,e){t&&ju.flushSync(()=>t.dispatchEvent(e))}function or(t){const e=_.useRef(t);return _.useEffect(()=>{e.current=t}),_.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function c4(t,e=globalThis==null?void 0:globalThis.document){const n=or(t);_.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var u4="DismissableLayer",gv="dismissableLayer.update",d4="dismissableLayer.pointerDownOutside",h4="dismissableLayer.focusOutside",eb,MA=_.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Op=_.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=t,c=_.useContext(MA),[u,h]=_.useState(null),f=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=_.useState({}),g=lt(e,I=>h(I)),v=Array.from(c.layers),[w]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),E=v.indexOf(w),x=u?v.indexOf(u):-1,b=c.layersWithOutsidePointerEventsDisabled.size>0,C=x>=E,N=p4(I=>{const S=I.target,A=[...c.branches].some(R=>R.contains(S));!C||A||(i==null||i(I),o==null||o(I),I.defaultPrevented||a==null||a())},f),D=m4(I=>{const S=I.target;[...c.branches].some(R=>R.contains(S))||(s==null||s(I),o==null||o(I),I.defaultPrevented||a==null||a())},f);return c4(I=>{x===c.layers.size-1&&(r==null||r(I),!I.defaultPrevented&&a&&(I.preventDefault(),a()))},f),_.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(eb=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),tb(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=eb)}},[u,f,n,c]),_.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),tb())},[u,c]),_.useEffect(()=>{const I=()=>p({});return document.addEventListener(gv,I),()=>document.removeEventListener(gv,I)},[]),m.jsx(Ce.div,{...l,ref:g,style:{pointerEvents:b?C?"auto":"none":void 0,...t.style},onFocusCapture:me(t.onFocusCapture,D.onFocusCapture),onBlurCapture:me(t.onBlurCapture,D.onBlurCapture),onPointerDownCapture:me(t.onPointerDownCapture,N.onPointerDownCapture)})});Op.displayName=u4;var f4="DismissableLayerBranch",jA=_.forwardRef((t,e)=>{const n=_.useContext(MA),r=_.useRef(null),i=lt(e,r);return _.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),m.jsx(Ce.div,{...t,ref:i})});jA.displayName=f4;function p4(t,e=globalThis==null?void 0:globalThis.document){const n=or(t),r=_.useRef(!1),i=_.useRef(()=>{});return _.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let l=function(){FA(d4,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=l,e.addEventListener("click",i.current,{once:!0})):l()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function m4(t,e=globalThis==null?void 0:globalThis.document){const n=or(t),r=_.useRef(!1);return _.useEffect(()=>{const i=s=>{s.target&&!r.current&&FA(h4,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function tb(){const t=new CustomEvent(gv);document.dispatchEvent(t)}function FA(t,e,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?VA(i,s):i.dispatchEvent(s)}var g4=Op,y4=jA,si=globalThis!=null&&globalThis.document?_.useLayoutEffect:()=>{},v4="Portal",vw=_.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[i,s]=_.useState(!1);si(()=>s(!0),[]);const o=n||i&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?NF.createPortal(m.jsx(Ce.div,{...r,ref:e}),o):null});vw.displayName=v4;function w4(t,e){return _.useReducer((n,r)=>e[n][r]??n,t)}var ys=t=>{const{present:e,children:n}=t,r=_4(e),i=typeof n=="function"?n({present:r.isPresent}):_.Children.only(n),s=lt(r.ref,x4(i));return typeof n=="function"||r.isPresent?_.cloneElement(i,{ref:s}):null};ys.displayName="Presence";function _4(t){const[e,n]=_.useState(),r=_.useRef(null),i=_.useRef(t),s=_.useRef("none"),o=t?"mounted":"unmounted",[a,l]=w4(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return _.useEffect(()=>{const c=eh(r.current);s.current=a==="mounted"?c:"none"},[a]),si(()=>{const c=r.current,u=i.current;if(u!==t){const f=s.current,p=eh(c);t?l("MOUNT"):p==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&f!==p?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,l]),si(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,h=p=>{const v=eh(r.current).includes(p.animationName);if(p.target===e&&v&&(l("ANIMATION_END"),!i.current)){const w=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=w)})}},f=p=>{p.target===e&&(s.current=eh(r.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:_.useCallback(c=>{r.current=c?getComputedStyle(c):null,n(c)},[])}}function eh(t){return(t==null?void 0:t.animationName)||"none"}function x4(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var E4=S0[" useInsertionEffect ".trim().toString()]||si;function El({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[i,s,o]=T4({defaultProp:e,onChange:n}),a=t!==void 0,l=a?t:i;{const u=_.useRef(t!==void 0);_.useEffect(()=>{const h=u.current;h!==a&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=a},[a,r])}const c=_.useCallback(u=>{var h;if(a){const f=b4(u)?u(t):u;f!==t&&((h=o.current)==null||h.call(o,f))}else s(u)},[a,t,s,o]);return[l,c]}function T4({defaultProp:t,onChange:e}){const[n,r]=_.useState(t),i=_.useRef(n),s=_.useRef(e);return E4(()=>{s.current=e},[e]),_.useEffect(()=>{var o;i.current!==n&&((o=s.current)==null||o.call(s,n),i.current=n)},[n,i]),[n,r,s]}function b4(t){return typeof t=="function"}var S4=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),I4="VisuallyHidden",ww=_.forwardRef((t,e)=>m.jsx(Ce.span,{...t,ref:e,style:{...S4,...t.style}}));ww.displayName=I4;var _w="ToastProvider",[xw,C4,P4]=LA("Toast"),[UA,Zne]=fi("Toast",[P4]),[A4,Lp]=UA(_w),$A=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:s=50,children:o}=t,[a,l]=_.useState(null),[c,u]=_.useState(0),h=_.useRef(!1),f=_.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${_w}\`. Expected non-empty \`string\`.`),m.jsx(xw.Provider,{scope:e,children:m.jsx(A4,{scope:e,label:n,duration:r,swipeDirection:i,swipeThreshold:s,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:_.useCallback(()=>u(p=>p+1),[]),onToastRemove:_.useCallback(()=>u(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:f,children:o})})};$A.displayName=_w;var BA="ToastViewport",R4=["F8"],yv="toast.viewportPause",vv="toast.viewportResume",zA=_.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=R4,label:i="Notifications ({hotkey})",...s}=t,o=Lp(BA,n),a=C4(n),l=_.useRef(null),c=_.useRef(null),u=_.useRef(null),h=_.useRef(null),f=lt(e,h,o.onViewportChange),p=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),g=o.toastCount>0;_.useEffect(()=>{const w=E=>{var b;r.length!==0&&r.every(C=>E[C]||E.code===C)&&((b=h.current)==null||b.focus())};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[r]),_.useEffect(()=>{const w=l.current,E=h.current;if(g&&w&&E){const x=()=>{if(!o.isClosePausedRef.current){const D=new CustomEvent(yv);E.dispatchEvent(D),o.isClosePausedRef.current=!0}},b=()=>{if(o.isClosePausedRef.current){const D=new CustomEvent(vv);E.dispatchEvent(D),o.isClosePausedRef.current=!1}},C=D=>{!w.contains(D.relatedTarget)&&b()},N=()=>{w.contains(document.activeElement)||b()};return w.addEventListener("focusin",x),w.addEventListener("focusout",C),w.addEventListener("pointermove",x),w.addEventListener("pointerleave",N),window.addEventListener("blur",x),window.addEventListener("focus",b),()=>{w.removeEventListener("focusin",x),w.removeEventListener("focusout",C),w.removeEventListener("pointermove",x),w.removeEventListener("pointerleave",N),window.removeEventListener("blur",x),window.removeEventListener("focus",b)}}},[g,o.isClosePausedRef]);const v=_.useCallback(({tabbingDirection:w})=>{const x=a().map(b=>{const C=b.ref.current,N=[C,...z4(C)];return w==="forwards"?N:N.reverse()});return(w==="forwards"?x.reverse():x).flat()},[a]);return _.useEffect(()=>{const w=h.current;if(w){const E=x=>{var N,D,I;const b=x.altKey||x.ctrlKey||x.metaKey;if(x.key==="Tab"&&!b){const S=document.activeElement,A=x.shiftKey;if(x.target===w&&A){(N=c.current)==null||N.focus();return}const L=v({tabbingDirection:A?"backwards":"forwards"}),k=L.findIndex(B=>B===S);Sg(L.slice(k+1))?x.preventDefault():A?(D=c.current)==null||D.focus():(I=u.current)==null||I.focus()}};return w.addEventListener("keydown",E),()=>w.removeEventListener("keydown",E)}},[a,v]),m.jsxs(y4,{ref:l,role:"region","aria-label":i.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:g?void 0:"none"},children:[g&&m.jsx(wv,{ref:c,onFocusFromOutsideViewport:()=>{const w=v({tabbingDirection:"forwards"});Sg(w)}}),m.jsx(xw.Slot,{scope:n,children:m.jsx(Ce.ol,{tabIndex:-1,...s,ref:f})}),g&&m.jsx(wv,{ref:u,onFocusFromOutsideViewport:()=>{const w=v({tabbingDirection:"backwards"});Sg(w)}})]})});zA.displayName=BA;var WA="ToastFocusProxy",wv=_.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...i}=t,s=Lp(WA,n);return m.jsx(ww,{"aria-hidden":!0,tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:o=>{var c;const a=o.relatedTarget;!((c=s.viewport)!=null&&c.contains(a))&&r()}})});wv.displayName=WA;var zu="Toast",k4="toast.swipeStart",N4="toast.swipeMove",D4="toast.swipeCancel",O4="toast.swipeEnd",qA=_.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:i,onOpenChange:s,...o}=t,[a,l]=El({prop:r,defaultProp:i??!0,onChange:s,caller:zu});return m.jsx(ys,{present:n||a,children:m.jsx(M4,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:or(t.onPause),onResume:or(t.onResume),onSwipeStart:me(t.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:me(t.onSwipeMove,c=>{const{x:u,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:me(t.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:me(t.onSwipeEnd,c=>{const{x:u,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),l(!1)})})})});qA.displayName=zu;var[L4,V4]=UA(zu,{onClose(){}}),M4=_.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:i,open:s,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:u,onSwipeMove:h,onSwipeCancel:f,onSwipeEnd:p,...g}=t,v=Lp(zu,n),[w,E]=_.useState(null),x=lt(e,B=>E(B)),b=_.useRef(null),C=_.useRef(null),N=i||v.duration,D=_.useRef(0),I=_.useRef(N),S=_.useRef(0),{onToastAdd:A,onToastRemove:R}=v,O=or(()=>{var Q;(w==null?void 0:w.contains(document.activeElement))&&((Q=v.viewport)==null||Q.focus()),o()}),L=_.useCallback(B=>{!B||B===1/0||(window.clearTimeout(S.current),D.current=new Date().getTime(),S.current=window.setTimeout(O,B))},[O]);_.useEffect(()=>{const B=v.viewport;if(B){const Q=()=>{L(I.current),c==null||c()},K=()=>{const re=new Date().getTime()-D.current;I.current=I.current-re,window.clearTimeout(S.current),l==null||l()};return B.addEventListener(yv,K),B.addEventListener(vv,Q),()=>{B.removeEventListener(yv,K),B.removeEventListener(vv,Q)}}},[v.viewport,N,l,c,L]),_.useEffect(()=>{s&&!v.isClosePausedRef.current&&L(N)},[s,N,v.isClosePausedRef,L]),_.useEffect(()=>(A(),()=>R()),[A,R]);const k=_.useMemo(()=>w?JA(w):null,[w]);return v.viewport?m.jsxs(m.Fragment,{children:[k&&m.jsx(j4,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:k}),m.jsx(L4,{scope:n,onClose:O,children:ju.createPortal(m.jsx(xw.ItemSlot,{scope:n,children:m.jsx(g4,{asChild:!0,onEscapeKeyDown:me(a,()=>{v.isFocusedToastEscapeKeyDownRef.current||O(),v.isFocusedToastEscapeKeyDownRef.current=!1}),children:m.jsx(Ce.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":v.swipeDirection,...g,ref:x,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:me(t.onKeyDown,B=>{B.key==="Escape"&&(a==null||a(B.nativeEvent),B.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,O()))}),onPointerDown:me(t.onPointerDown,B=>{B.button===0&&(b.current={x:B.clientX,y:B.clientY})}),onPointerMove:me(t.onPointerMove,B=>{if(!b.current)return;const Q=B.clientX-b.current.x,K=B.clientY-b.current.y,re=!!C.current,F=["left","right"].includes(v.swipeDirection),z=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,Y=F?z(0,Q):0,J=F?0:z(0,K),ue=B.pointerType==="touch"?10:2,ce={x:Y,y:J},q={originalEvent:B,delta:ce};re?(C.current=ce,th(N4,h,q,{discrete:!1})):nb(ce,v.swipeDirection,ue)?(C.current=ce,th(k4,u,q,{discrete:!1}),B.target.setPointerCapture(B.pointerId)):(Math.abs(Q)>ue||Math.abs(K)>ue)&&(b.current=null)}),onPointerUp:me(t.onPointerUp,B=>{const Q=C.current,K=B.target;if(K.hasPointerCapture(B.pointerId)&&K.releasePointerCapture(B.pointerId),C.current=null,b.current=null,Q){const re=B.currentTarget,F={originalEvent:B,delta:Q};nb(Q,v.swipeDirection,v.swipeThreshold)?th(O4,p,F,{discrete:!0}):th(D4,f,F,{discrete:!0}),re.addEventListener("click",z=>z.preventDefault(),{once:!0})}})})})}),v.viewport)})]}):null}),j4=t=>{const{__scopeToast:e,children:n,...r}=t,i=Lp(zu,e),[s,o]=_.useState(!1),[a,l]=_.useState(!1);return $4(()=>o(!0)),_.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:m.jsx(vw,{asChild:!0,children:m.jsx(ww,{...r,children:s&&m.jsxs(m.Fragment,{children:[i.label," ",n]})})})},F4="ToastTitle",HA=_.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return m.jsx(Ce.div,{...r,ref:e})});HA.displayName=F4;var U4="ToastDescription",GA=_.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return m.jsx(Ce.div,{...r,ref:e})});GA.displayName=U4;var KA="ToastAction",QA=_.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?m.jsx(XA,{altText:n,asChild:!0,children:m.jsx(Ew,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${KA}\`. Expected non-empty \`string\`.`),null)});QA.displayName=KA;var YA="ToastClose",Ew=_.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,i=V4(YA,n);return m.jsx(XA,{asChild:!0,children:m.jsx(Ce.button,{type:"button",...r,ref:e,onClick:me(t.onClick,i.onClose)})})});Ew.displayName=YA;var XA=_.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...i}=t;return m.jsx(Ce.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:e})});function JA(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),B4(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",s=r.dataset.radixToastAnnounceExclude==="";if(!i)if(s){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...JA(r))}}),e}function th(t,e,n,{discrete:r}){const i=n.originalEvent.currentTarget,s=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?VA(i,s):i.dispatchEvent(s)}var nb=(t,e,n=0)=>{const r=Math.abs(t.x),i=Math.abs(t.y),s=r>i;return e==="left"||e==="right"?s&&r>n:!s&&i>n};function $4(t=()=>{}){const e=or(t);si(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function B4(t){return t.nodeType===t.ELEMENT_NODE}function z4(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Sg(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var W4=$A,ZA=zA,eR=qA,tR=HA,nR=GA,rR=QA,iR=Ew;const rb=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,ib=AA,Tw=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return ib(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:s}=e,o=Object.keys(i).map(c=>{const u=n==null?void 0:n[c],h=s==null?void 0:s[c];if(u===null)return null;const f=rb(u)||rb(h);return i[c][f]}),a=n&&Object.entries(n).reduce((c,u)=>{let[h,f]=u;return f===void 0||(c[h]=f),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,u)=>{let{class:h,className:f,...p}=u;return Object.entries(p).every(g=>{let[v,w]=g;return Array.isArray(w)?w.includes({...s,...a}[v]):{...s,...a}[v]===w})?[...c,h,f]:c},[]);return ib(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)};var q4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const H4=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ye=(t,e)=>{const n=_.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,children:a,...l},c)=>_.createElement("svg",{ref:c,...q4,width:i,height:i,stroke:r,strokeWidth:o?Number(s)*24/Number(i):s,className:`lucide lucide-${H4(t)}`,...l},[...e.map(([u,h])=>_.createElement(u,h)),...(Array.isArray(a)?a:[a])||[]]));return n.displayName=`${t}`,n},G4=ye("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),K4=ye("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Q4=ye("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]),sR=ye("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),Y4=ye("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),X4=ye("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),J4=ye("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),Z4=ye("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),e$=ye("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z",key:"nb9nel"}]]),bw=ye("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),t$=ye("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),n$=ye("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),r$=ye("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),i$=ye("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),s$=ye("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),Sw=ye("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),o$=ye("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),a$=ye("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),Wu=ye("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),l$=ye("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),c$=ye("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),u$=ye("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),d$=ye("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),oR=ye("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),h$=ye("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Iw=ye("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),f$=ye("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]),p$=ye("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),m$=ye("Shirt",[["path",{d:"M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z",key:"1wgbhj"}]]),aR=ye("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]),g$=ye("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),tl=ye("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),sb=ye("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),ob=ye("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),lR=ye("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),y$=ye("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),qu=ye("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),v$=W4,cR=qe.forwardRef(({className:t,...e},n)=>m.jsx(ZA,{ref:n,className:yt("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));cR.displayName=ZA.displayName;const w$=Tw("data-[swipe=move]:transition-none group relative pointer-events-auto flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full data-[state=closed]:slide-out-to-right-full",{variants:{variant:{default:"bg-background border",destructive:"group destructive border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),uR=qe.forwardRef(({className:t,variant:e,...n},r)=>m.jsx(eR,{ref:r,className:yt(w$({variant:e}),t),...n}));uR.displayName=eR.displayName;const _$=qe.forwardRef(({className:t,...e},n)=>m.jsx(rR,{ref:n,className:yt("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-destructive/30 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));_$.displayName=rR.displayName;const dR=qe.forwardRef(({className:t,...e},n)=>m.jsx(iR,{ref:n,className:yt("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:m.jsx(qu,{className:"h-4 w-4"})}));dR.displayName=iR.displayName;const hR=qe.forwardRef(({className:t,...e},n)=>m.jsx(tR,{ref:n,className:yt("text-sm font-semibold",t),...e}));hR.displayName=tR.displayName;const fR=qe.forwardRef(({className:t,...e},n)=>m.jsx(nR,{ref:n,className:yt("text-sm opacity-90",t),...e}));fR.displayName=nR.displayName;const x$=1;let Ig=0;function E$(){return Ig=(Ig+1)%Number.MAX_VALUE,Ig.toString()}const Gt={state:{toasts:[]},listeners:[],getState:()=>Gt.state,setState:t=>{typeof t=="function"?Gt.state=t(Gt.state):Gt.state={...Gt.state,...t},Gt.listeners.forEach(e=>e(Gt.state))},subscribe:t=>(Gt.listeners.push(t),()=>{Gt.listeners=Gt.listeners.filter(e=>e!==t)})},pR=({...t})=>{const e=E$(),n=i=>Gt.setState(s=>({...s,toasts:s.toasts.map(o=>o.id===e?{...o,...i}:o)})),r=()=>Gt.setState(i=>({...i,toasts:i.toasts.filter(s=>s.id!==e)}));return Gt.setState(i=>({...i,toasts:[{...t,id:e,dismiss:r},...i.toasts].slice(0,x$)})),{id:e,dismiss:r,update:n}};function Hn(){const[t,e]=_.useState(Gt.getState());return _.useEffect(()=>Gt.subscribe(r=>{e(r)}),[]),_.useEffect(()=>{const n=[];return t.toasts.forEach(r=>{if(r.duration===1/0)return;const i=setTimeout(()=>{r.dismiss()},r.duration||5e3);n.push(i)}),()=>{n.forEach(r=>clearTimeout(r))}},[t.toasts]),{toast:pR,toasts:t.toasts}}function T$(){const{toasts:t}=Hn();return m.jsxs(v$,{children:[t.map(({id:e,title:n,description:r,action:i,...s})=>m.jsxs(uR,{...s,children:[m.jsxs("div",{className:"grid gap-1",children:[n&&m.jsx(hR,{children:n}),r&&m.jsx(fR,{children:r})]}),i,m.jsx(dR,{})]},e)),m.jsx(cR,{})]})}function b$(){if(console&&console.warn){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];typeof e[0]=="string"&&(e[0]=`react-i18next:: ${e[0]}`),console.warn(...e)}}const ab={};function _v(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];typeof e[0]=="string"&&ab[e[0]]||(typeof e[0]=="string"&&(ab[e[0]]=new Date),b$(...e))}const mR=(t,e)=>()=>{if(t.isInitialized)e();else{const n=()=>{setTimeout(()=>{t.off("initialized",n)},0),e()};t.on("initialized",n)}};function lb(t,e,n){t.loadNamespaces(e,mR(t,n))}function cb(t,e,n,r){typeof n=="string"&&(n=[n]),n.forEach(i=>{t.options.ns.indexOf(i)<0&&t.options.ns.push(i)}),t.loadLanguages(e,mR(t,r))}function S$(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=e.languages[0],i=e.options?e.options.fallbackLng:!1,s=e.languages[e.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const o=(a,l)=>{const c=e.services.backendConnector.state[`${a}|${l}`];return c===-1||c===2};return n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&e.services.backendConnector.backend&&e.isLanguageChangingTo&&!o(e.isLanguageChangingTo,t)?!1:!!(e.hasResourceBundle(r,t)||!e.services.backendConnector.backend||e.options.resources&&!e.options.partialBundledLanguages||o(r,t)&&(!i||o(s,t)))}function I$(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return!e.languages||!e.languages.length?(_v("i18n.languages were undefined or empty",e.languages),!0):e.options.ignoreJSONStructure!==void 0?e.hasLoadedNamespace(t,{lng:n.lng,precheck:(i,s)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&i.services.backendConnector.backend&&i.isLanguageChangingTo&&!s(i.isLanguageChangingTo,t))return!1}}):S$(t,e,n)}const C$=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,P$={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},A$=t=>P$[t],R$=t=>t.replace(C$,A$);let xv={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:R$};function k$(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};xv={...xv,...t}}function N$(){return xv}let gR;function D$(t){gR=t}function O$(){return gR}const L$={type:"3rdParty",init(t){k$(t.options.react),D$(t)}},V$=_.createContext();class M${constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const j$=(t,e)=>{const n=_.useRef();return _.useEffect(()=>{n.current=e?n.current:t},[t,e]),n.current};function wt(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{i18n:n}=e,{i18n:r,defaultNS:i}=_.useContext(V$)||{},s=n||r||O$();if(s&&!s.reportNamespaces&&(s.reportNamespaces=new M$),!s){_v("You will need to pass in an i18next instance by using initReactI18next");const b=(N,D)=>typeof D=="string"?D:D&&typeof D=="object"&&typeof D.defaultValue=="string"?D.defaultValue:Array.isArray(N)?N[N.length-1]:N,C=[b,{},!1];return C.t=b,C.i18n={},C.ready=!1,C}s.options.react&&s.options.react.wait!==void 0&&_v("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const o={...N$(),...s.options.react,...e},{useSuspense:a,keyPrefix:l}=o;let c=t||i||s.options&&s.options.defaultNS;c=typeof c=="string"?[c]:c||["translation"],s.reportNamespaces.addUsedNamespaces&&s.reportNamespaces.addUsedNamespaces(c);const u=(s.isInitialized||s.initializedStoreOnce)&&c.every(b=>I$(b,s,o));function h(){return s.getFixedT(e.lng||null,o.nsMode==="fallback"?c:c[0],l)}const[f,p]=_.useState(h);let g=c.join();e.lng&&(g=`${e.lng}${g}`);const v=j$(g),w=_.useRef(!0);_.useEffect(()=>{const{bindI18n:b,bindI18nStore:C}=o;w.current=!0,!u&&!a&&(e.lng?cb(s,e.lng,c,()=>{w.current&&p(h)}):lb(s,c,()=>{w.current&&p(h)})),u&&v&&v!==g&&w.current&&p(h);function N(){w.current&&p(h)}return b&&s&&s.on(b,N),C&&s&&s.store.on(C,N),()=>{w.current=!1,b&&s&&b.split(" ").forEach(D=>s.off(D,N)),C&&s&&C.split(" ").forEach(D=>s.store.off(D,N))}},[s,g]);const E=_.useRef(!0);_.useEffect(()=>{w.current&&!E.current&&p(h),E.current=!1},[s,l]);const x=[f,s,u];if(x.t=f,x.i18n=s,x.ready=u,u||!u&&!a)return x;throw new Promise(b=>{e.lng?cb(s,e.lng,c,()=>b()):lb(s,c,()=>b())})}const F$=_.createContext(),U$=(t=[])=>{const e=t.includes("elegant")||t.includes("formal");t.includes("casual")||t.includes("streetwear");const n=t.includes("sporty"),r=t.includes("boho")||t.includes("artistic"),i={elegant:{fontFamily:"'Playfair Display', 'Merriweather', 'Libre Baskerville', serif",colors:{primary:"navy",secondary:"burgundy",accent:"gold",background:"cream"},style:"elegant"},sporty:{fontFamily:"'Montserrat', 'Oswald', 'Roboto Bold', sans-serif",colors:{primary:"red",secondary:"black",accent:"neon",background:"white"},style:"sporty"},boho:{fontFamily:"'Quicksand', 'Dancing Script', 'Pacifico', sans-serif",colors:{primary:"olive",secondary:"coral",accent:"terra-cotta",background:"sand"},style:"boho"},casual:{fontFamily:"'Nunito', 'Open Sans', 'Lato', sans-serif",colors:{primary:"purple",secondary:"indigo",accent:"pink",background:"white"},style:"casual"}};return e?i.elegant:n?i.sporty:r?i.boho:i.casual},$$=({children:t})=>{const[e,n]=_.useState({fontFamily:"sans-serif",colors:{primary:"purple",secondary:"indigo",accent:"pink"},style:"casual"});return _.useEffect(()=>{const r=localStorage.getItem("userStyle");if(r){const{styles:i=[]}=JSON.parse(r),s=U$(i);n(s),document.documentElement.style.setProperty("--font-family",s.fontFamily),document.documentElement.style.setProperty("--color-primary",s.colors.primary),document.documentElement.style.setProperty("--color-secondary",s.colors.secondary),document.documentElement.style.setProperty("--color-accent",s.colors.accent),document.documentElement.classList.remove("theme-elegant","theme-sporty","theme-boho","theme-casual"),document.documentElement.classList.add(`theme-${s.style}`)}},[]),m.jsx(F$.Provider,{value:{theme:e,setTheme:n},children:t})};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},B$=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},vR={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,u=s>>2,h=(s&3)<<4|a>>4;let f=(a&15)<<2|c>>6,p=c&63;l||(p=64,o||(f=64)),r.push(n[u],n[h],n[f],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(yR(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):B$(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||h==null)throw new z$;const f=s<<2|a>>4;if(r.push(f),c!==64){const p=a<<4&240|c>>2;if(r.push(p),h!==64){const g=c<<6&192|h;r.push(g)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class z$ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const W$=function(t){const e=yR(t);return vR.encodeByteArray(e,!0)},Sf=function(t){return W$(t).replace(/\./g,"")},wR=function(t){try{return vR.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q$(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H$=()=>q$().__FIREBASE_DEFAULTS__,G$=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},K$=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&wR(t[1]);return e&&JSON.parse(e)},Vp=()=>{try{return H$()||G$()||K$()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},_R=t=>{var e,n;return(n=(e=Vp())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},xR=t=>{const e=_R(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},ER=()=>{var t;return(t=Vp())===null||t===void 0?void 0:t.config},TR=t=>{var e;return(e=Vp())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q${constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bR(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[Sf(JSON.stringify(n)),Sf(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Y$(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(vt())}function X$(){var t;const e=(t=Vp())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function J$(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function SR(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Z$(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function eB(){const t=vt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function IR(){return!X$()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Cw(){try{return typeof indexedDB=="object"}catch{return!1}}function CR(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function tB(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nB="FirebaseError";class Gn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=nB,Object.setPrototypeOf(this,Gn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Mo.prototype.create)}}class Mo{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?rB(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Gn(i,a,r)}}function rB(t,e){return t.replace(iB,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const iB=/\{\$([^}]+)}/g;function sB(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ho(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(ub(s)&&ub(o)){if(!ho(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function ub(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hu(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function vc(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function wc(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function oB(t,e){const n=new aB(t,e);return n.subscribe.bind(n)}class aB{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");lB(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Cg),i.error===void 0&&(i.error=Cg),i.complete===void 0&&(i.complete=Cg);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function lB(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Cg(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cB=1e3,uB=2,dB=4*60*60*1e3,hB=.5;function db(t,e=cB,n=uB){const r=e*Math.pow(n,t),i=Math.round(hB*r*(Math.random()-.5)*2);return Math.min(dB,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ke(t){return t&&t._delegate?t._delegate:t}class Wn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fB{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Q$;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(mB(e))try{this.getOrInitializeService({instanceIdentifier:Vs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Vs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Vs){return this.instances.has(e)}getOptions(e=Vs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:pB(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Vs){return this.component?this.component.multipleInstances?e:Vs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function pB(t){return t===Vs?void 0:t}function mB(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gB{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new fB(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var we;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(we||(we={}));const yB={debug:we.DEBUG,verbose:we.VERBOSE,info:we.INFO,warn:we.WARN,error:we.ERROR,silent:we.SILENT},vB=we.INFO,wB={[we.DEBUG]:"log",[we.VERBOSE]:"log",[we.INFO]:"info",[we.WARN]:"warn",[we.ERROR]:"error"},_B=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=wB[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let Mp=class{constructor(e){this.name=e,this._logLevel=vB,this._logHandler=_B,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in we))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?yB[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,we.DEBUG,...e),this._logHandler(this,we.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,we.VERBOSE,...e),this._logHandler(this,we.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,we.INFO,...e),this._logHandler(this,we.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,we.WARN,...e),this._logHandler(this,we.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,we.ERROR,...e),this._logHandler(this,we.ERROR,...e)}};const xB=(t,e)=>e.some(n=>t instanceof n);let hb,fb;function EB(){return hb||(hb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function TB(){return fb||(fb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const PR=new WeakMap,Ev=new WeakMap,AR=new WeakMap,Pg=new WeakMap,Pw=new WeakMap;function bB(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Xi(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&PR.set(n,t)}).catch(()=>{}),Pw.set(e,t),e}function SB(t){if(Ev.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Ev.set(t,e)}let Tv={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ev.get(t);if(e==="objectStoreNames")return t.objectStoreNames||AR.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Xi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function IB(t){Tv=t(Tv)}function CB(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Ag(this),e,...n);return AR.set(r,e.sort?e.sort():[e]),Xi(r)}:TB().includes(t)?function(...e){return t.apply(Ag(this),e),Xi(PR.get(this))}:function(...e){return Xi(t.apply(Ag(this),e))}}function PB(t){return typeof t=="function"?CB(t):(t instanceof IDBTransaction&&SB(t),xB(t,EB())?new Proxy(t,Tv):t)}function Xi(t){if(t instanceof IDBRequest)return bB(t);if(Pg.has(t))return Pg.get(t);const e=PB(t);return e!==t&&(Pg.set(t,e),Pw.set(e,t)),e}const Ag=t=>Pw.get(t);function RR(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Xi(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Xi(o.result),l.oldVersion,l.newVersion,Xi(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const AB=["get","getKey","getAll","getAllKeys","count"],RB=["put","add","delete","clear"],Rg=new Map;function pb(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Rg.get(e))return Rg.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=RB.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||AB.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return Rg.set(e,s),s}IB(t=>({...t,get:(e,n,r)=>pb(e,n)||t.get(e,n,r),has:(e,n)=>!!pb(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kB{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(NB(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function NB(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const bv="@firebase/app",mb="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oi=new Mp("@firebase/app"),DB="@firebase/app-compat",OB="@firebase/analytics-compat",LB="@firebase/analytics",VB="@firebase/app-check-compat",MB="@firebase/app-check",jB="@firebase/auth",FB="@firebase/auth-compat",UB="@firebase/database",$B="@firebase/data-connect",BB="@firebase/database-compat",zB="@firebase/functions",WB="@firebase/functions-compat",qB="@firebase/installations",HB="@firebase/installations-compat",GB="@firebase/messaging",KB="@firebase/messaging-compat",QB="@firebase/performance",YB="@firebase/performance-compat",XB="@firebase/remote-config",JB="@firebase/remote-config-compat",ZB="@firebase/storage",e3="@firebase/storage-compat",t3="@firebase/firestore",n3="@firebase/vertexai-preview",r3="@firebase/firestore-compat",i3="firebase",s3="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sv="[DEFAULT]",o3={[bv]:"fire-core",[DB]:"fire-core-compat",[LB]:"fire-analytics",[OB]:"fire-analytics-compat",[MB]:"fire-app-check",[VB]:"fire-app-check-compat",[jB]:"fire-auth",[FB]:"fire-auth-compat",[UB]:"fire-rtdb",[$B]:"fire-data-connect",[BB]:"fire-rtdb-compat",[zB]:"fire-fn",[WB]:"fire-fn-compat",[qB]:"fire-iid",[HB]:"fire-iid-compat",[GB]:"fire-fcm",[KB]:"fire-fcm-compat",[QB]:"fire-perf",[YB]:"fire-perf-compat",[XB]:"fire-rc",[JB]:"fire-rc-compat",[ZB]:"fire-gcs",[e3]:"fire-gcs-compat",[t3]:"fire-fst",[r3]:"fire-fst-compat",[n3]:"fire-vertex","fire-js":"fire-js",[i3]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const If=new Map,a3=new Map,Iv=new Map;function gb(t,e){try{t.container.addComponent(e)}catch(n){oi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ar(t){const e=t.name;if(Iv.has(e))return oi.debug(`There were multiple attempts to register component ${e}.`),!1;Iv.set(e,t);for(const n of If.values())gb(n,t);for(const n of a3.values())gb(n,t);return!0}function vs(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function er(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ji=new Mo("app","Firebase",l3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c3{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Wn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ji.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jo=s3;function kR(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Sv,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Ji.create("bad-app-name",{appName:String(i)});if(n||(n=ER()),!n)throw Ji.create("no-options");const s=If.get(i);if(s){if(ho(n,s.options)&&ho(r,s.config))return s;throw Ji.create("duplicate-app",{appName:i})}const o=new gB(i);for(const l of Iv.values())o.addComponent(l);const a=new c3(n,r,o);return If.set(i,a),a}function jp(t=Sv){const e=If.get(t);if(!e&&t===Sv&&ER())return kR();if(!e)throw Ji.create("no-app",{appName:t});return e}function fn(t,e,n){var r;let i=(r=o3[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),oi.warn(a.join(" "));return}ar(new Wn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u3="firebase-heartbeat-database",d3=1,mu="firebase-heartbeat-store";let kg=null;function NR(){return kg||(kg=RR(u3,d3,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(mu)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ji.create("idb-open",{originalErrorMessage:t.message})})),kg}async function h3(t){try{const n=(await NR()).transaction(mu),r=await n.objectStore(mu).get(DR(t));return await n.done,r}catch(e){if(e instanceof Gn)oi.warn(e.message);else{const n=Ji.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});oi.warn(n.message)}}}async function yb(t,e){try{const r=(await NR()).transaction(mu,"readwrite");await r.objectStore(mu).put(e,DR(t)),await r.done}catch(n){if(n instanceof Gn)oi.warn(n.message);else{const r=Ji.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});oi.warn(r.message)}}}function DR(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f3=1024,p3=30*24*60*60*1e3;class m3{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new y3(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=vb();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=p3}),this._storage.overwrite(this._heartbeatsCache))}catch(r){oi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=vb(),{heartbeatsToSend:r,unsentEntries:i}=g3(this._heartbeatsCache.heartbeats),s=Sf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return oi.warn(n),""}}}function vb(){return new Date().toISOString().substring(0,10)}function g3(t,e=f3){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),wb(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),wb(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class y3{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Cw()?CR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await h3(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return yb(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return yb(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function wb(t){return Sf(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v3(t){ar(new Wn("platform-logger",e=>new kB(e),"PRIVATE")),ar(new Wn("heartbeat",e=>new m3(e),"PRIVATE")),fn(bv,mb,t),fn(bv,mb,"esm2017"),fn("fire-js","")}v3("");var vr=function(){return vr=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},vr.apply(this,arguments)};function Gu(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function w3(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}function OR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const _3=OR,LR=new Mo("auth","Firebase",OR());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cf=new Mp("@firebase/auth");function x3(t,...e){Cf.logLevel<=we.WARN&&Cf.warn(`Auth (${jo}): ${t}`,...e)}function Dh(t,...e){Cf.logLevel<=we.ERROR&&Cf.error(`Auth (${jo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qn(t,...e){throw Rw(t,...e)}function rr(t,...e){return Rw(t,...e)}function Aw(t,e,n){const r=Object.assign(Object.assign({},_3()),{[e]:n});return new Mo("auth","Firebase",r).create(e,{appName:t.name})}function Xr(t){return Aw(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function E3(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&qn(t,"argument-error"),Aw(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Rw(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return LR.create(t,...e)}function le(t,e,...n){if(!t)throw Rw(e,...n)}function Wr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Dh(e),new Error(e)}function ai(t,e){t||Wr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function T3(){return _b()==="http:"||_b()==="https:"}function _b(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b3(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(T3()||SR()||"connection"in navigator)?navigator.onLine:!0}function S3(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(e,n){this.shortDelay=e,this.longDelay=n,ai(n>e,"Short delay should be less than long delay!"),this.isMobile=Y$()||Z$()}get(){return b3()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kw(t,e){ai(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Wr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Wr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Wr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I3={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C3=new Ku(3e4,6e4);function ws(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function pi(t,e,n,r,i={}){return MR(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Hu(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},s);return J$()||(c.referrerPolicy="no-referrer"),VR.fetch()(jR(t,t.config.apiHost,n,a),c)})}async function MR(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},I3),e);try{const i=new A3(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw nh(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw nh(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw nh(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw nh(t,"user-disabled",o);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Aw(t,u,c);qn(t,u)}}catch(i){if(i instanceof Gn)throw i;qn(t,"network-request-failed",{message:String(i)})}}async function Qu(t,e,n,r,i={}){const s=await pi(t,e,n,r,i);return"mfaPendingCredential"in s&&qn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function jR(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?kw(t.config,i):`${t.config.apiScheme}://${i}`}function P3(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class A3{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(rr(this.auth,"network-request-failed")),C3.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function nh(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=rr(t,e,r);return i.customData._tokenResponse=n,i}function xb(t){return t!==void 0&&t.enterprise!==void 0}class R3{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return P3(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function k3(t,e){return pi(t,"GET","/v2/recaptchaConfig",ws(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N3(t,e){return pi(t,"POST","/v1/accounts:delete",e)}async function FR(t,e){return pi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function D3(t,e=!1){const n=ke(t),r=await n.getIdToken(e),i=Nw(r);le(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Lc(Ng(i.auth_time)),issuedAtTime:Lc(Ng(i.iat)),expirationTime:Lc(Ng(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Ng(t){return Number(t)*1e3}function Nw(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Dh("JWT malformed, contained fewer than 3 sections"),null;try{const i=wR(n);return i?JSON.parse(i):(Dh("Failed to decode base64 JWT payload"),null)}catch(i){return Dh("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Eb(t){const e=Nw(t);return le(e,"internal-error"),le(typeof e.exp<"u","internal-error"),le(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nl(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Gn&&O3(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function O3({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L3{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Lc(this.lastLoginAt),this.creationTime=Lc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pf(t){var e;const n=t.auth,r=await t.getIdToken(),i=await nl(t,FR(n,{idToken:r}));le(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?UR(s.providerUserInfo):[],a=M3(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Pv(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function V3(t){const e=ke(t);await Pf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function M3(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function UR(t){return t.map(e=>{var{providerId:n}=e,r=Gu(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j3(t,e){const n=await MR(t,{},async()=>{const r=Hu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=jR(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",VR.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function F3(t,e){return pi(t,"POST","/v2/accounts:revokeToken",ws(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){le(e.idToken,"internal-error"),le(typeof e.idToken<"u","internal-error"),le(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Eb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){le(e.length!==0,"internal-error");const n=Eb(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(le(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await j3(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Ua;return r&&(le(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(le(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(le(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ua,this.toJSON())}_performRefresh(){return Wr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ti(t,e){le(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class qr{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Gu(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new L3(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Pv(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await nl(this,this.stsTokenManager.getToken(this.auth,e));return le(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return D3(this,e)}reload(){return V3(this)}_assign(e){this!==e&&(le(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new qr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Pf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(er(this.auth.app))return Promise.reject(Xr(this.auth));const e=await this.getIdToken();return await nl(this,N3(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,u;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,p=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,g=(o=n.photoURL)!==null&&o!==void 0?o:void 0,v=(a=n.tenantId)!==null&&a!==void 0?a:void 0,w=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,E=(c=n.createdAt)!==null&&c!==void 0?c:void 0,x=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:b,emailVerified:C,isAnonymous:N,providerData:D,stsTokenManager:I}=n;le(b&&I,e,"internal-error");const S=Ua.fromJSON(this.name,I);le(typeof b=="string",e,"internal-error"),Ti(h,e.name),Ti(f,e.name),le(typeof C=="boolean",e,"internal-error"),le(typeof N=="boolean",e,"internal-error"),Ti(p,e.name),Ti(g,e.name),Ti(v,e.name),Ti(w,e.name),Ti(E,e.name),Ti(x,e.name);const A=new qr({uid:b,auth:e,email:f,emailVerified:C,displayName:h,isAnonymous:N,photoURL:g,phoneNumber:p,tenantId:v,stsTokenManager:S,createdAt:E,lastLoginAt:x});return D&&Array.isArray(D)&&(A.providerData=D.map(R=>Object.assign({},R))),w&&(A._redirectEventId=w),A}static async _fromIdTokenResponse(e,n,r=!1){const i=new Ua;i.updateFromServerResponse(n);const s=new qr({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Pf(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];le(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?UR(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Ua;a.updateFromIdToken(r);const l=new qr({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Pv(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tb=new Map;function Hr(t){ai(t instanceof Function,"Expected a class definition");let e=Tb.get(t);return e?(ai(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Tb.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}$R.type="NONE";const bb=$R;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oh(t,e,n){return`firebase:${t}:${e}:${n}`}class $a{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Oh(this.userKey,i.apiKey,s),this.fullPersistenceKey=Oh("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?qr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new $a(Hr(bb),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Hr(bb);const o=Oh(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){const h=qr._fromJSON(e,u);c!==s&&(a=h),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new $a(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new $a(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sb(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(qR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(BR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(GR(e))return"Blackberry";if(KR(e))return"Webos";if(zR(e))return"Safari";if((e.includes("chrome/")||WR(e))&&!e.includes("edge/"))return"Chrome";if(HR(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function BR(t=vt()){return/firefox\//i.test(t)}function zR(t=vt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function WR(t=vt()){return/crios\//i.test(t)}function qR(t=vt()){return/iemobile/i.test(t)}function HR(t=vt()){return/android/i.test(t)}function GR(t=vt()){return/blackberry/i.test(t)}function KR(t=vt()){return/webos/i.test(t)}function Dw(t=vt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function U3(t=vt()){var e;return Dw(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function $3(){return eB()&&document.documentMode===10}function QR(t=vt()){return Dw(t)||HR(t)||KR(t)||GR(t)||/windows phone/i.test(t)||qR(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YR(t,e=[]){let n;switch(t){case"Browser":n=Sb(vt());break;case"Worker":n=`${Sb(vt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${jo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B3{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z3(t,e={}){return pi(t,"GET","/v2/passwordPolicy",ws(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W3=6;class q3{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:W3,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H3{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ib(this),this.idTokenSubscription=new Ib(this),this.beforeStateQueue=new B3(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=LR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Hr(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await $a.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await FR(this,{idToken:e}),r=await qr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(er(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return le(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Pf(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=S3()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(er(this.app))return Promise.reject(Xr(this));const n=e?ke(e):null;return n&&le(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&le(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return er(this.app)?Promise.reject(Xr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return er(this.app)?Promise.reject(Xr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Hr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await z3(this),n=new q3(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Mo("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await F3(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Hr(e)||this._popupRedirectResolver;le(n,this,"argument-error"),this.redirectPersistenceManager=await $a.create(this,[Hr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(le(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=YR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&x3(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function _s(t){return ke(t)}class Ib{constructor(e){this.auth=e,this.observer=null,this.addObserver=oB(n=>this.observer=n)}get next(){return le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function G3(t){Fp=t}function XR(t){return Fp.loadJS(t)}function K3(){return Fp.recaptchaEnterpriseScript}function Q3(){return Fp.gapiScript}function Y3(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const X3="recaptcha-enterprise",J3="NO_RECAPTCHA";class Z3{constructor(e){this.type=X3,this.auth=_s(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{k3(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new R3(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;xb(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(J3)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&xb(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=K3();l.length!==0&&(l+=a),XR(l).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function Cb(t,e,n,r=!1){const i=new Z3(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Av(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await Cb(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Cb(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e5(t,e){const n=vs(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(ho(s,e??{}))return i;qn(i,"already-initialized")}return n.initialize({options:e})}function t5(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Hr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function n5(t,e,n){const r=_s(t);le(r._canInitEmulator,r,"emulator-config-failed"),le(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=JR(e),{host:o,port:a}=r5(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||i5()}function JR(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function r5(t){const e=JR(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Pb(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:Pb(o)}}}function Pb(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function i5(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Wr("not implemented")}_getIdTokenResponse(e){return Wr("not implemented")}_linkToIdToken(e,n){return Wr("not implemented")}_getReauthenticationResolver(e){return Wr("not implemented")}}async function s5(t,e){return pi(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o5(t,e){return Qu(t,"POST","/v1/accounts:signInWithPassword",ws(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a5(t,e){return Qu(t,"POST","/v1/accounts:signInWithEmailLink",ws(t,e))}async function l5(t,e){return Qu(t,"POST","/v1/accounts:signInWithEmailLink",ws(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu extends Ow{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new gu(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new gu(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Av(e,n,"signInWithPassword",o5);case"emailLink":return a5(e,{email:this._email,oobCode:this._password});default:qn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Av(e,r,"signUpPassword",s5);case"emailLink":return l5(e,{idToken:n,email:this._email,oobCode:this._password});default:qn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ba(t,e){return Qu(t,"POST","/v1/accounts:signInWithIdp",ws(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c5="http://localhost";class fo extends Ow{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new fo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):qn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=Gu(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new fo(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ba(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ba(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ba(e,n)}buildRequest(){const e={requestUri:c5,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Hu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u5(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function d5(t){const e=vc(wc(t)).link,n=e?vc(wc(e)).deep_link_id:null,r=vc(wc(t)).deep_link_id;return(r?vc(wc(r)).link:null)||r||n||e||t}class Lw{constructor(e){var n,r,i,s,o,a;const l=vc(wc(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,u=(r=l.oobCode)!==null&&r!==void 0?r:null,h=u5((i=l.mode)!==null&&i!==void 0?i:null);le(c&&u&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=u,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=d5(e);try{return new Lw(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(){this.providerId=Tl.PROVIDER_ID}static credential(e,n){return gu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Lw.parseLink(n);return le(r,"argument-error"),gu._fromEmailAndCode(e,r.code,r.tenantId)}}Tl.PROVIDER_ID="password";Tl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Tl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu extends Vw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi extends Yu{constructor(){super("facebook.com")}static credential(e){return fo._fromParams({providerId:Oi.PROVIDER_ID,signInMethod:Oi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Oi.credentialFromTaggedObject(e)}static credentialFromError(e){return Oi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Oi.credential(e.oauthAccessToken)}catch{return null}}}Oi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Oi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r extends Yu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return fo._fromParams({providerId:$r.PROVIDER_ID,signInMethod:$r.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return $r.credentialFromTaggedObject(e)}static credentialFromError(e){return $r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return $r.credential(n,r)}catch{return null}}}$r.GOOGLE_SIGN_IN_METHOD="google.com";$r.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li extends Yu{constructor(){super("github.com")}static credential(e){return fo._fromParams({providerId:Li.PROVIDER_ID,signInMethod:Li.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Li.credentialFromTaggedObject(e)}static credentialFromError(e){return Li.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Li.credential(e.oauthAccessToken)}catch{return null}}}Li.GITHUB_SIGN_IN_METHOD="github.com";Li.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi extends Yu{constructor(){super("twitter.com")}static credential(e,n){return fo._fromParams({providerId:Vi.PROVIDER_ID,signInMethod:Vi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Vi.credentialFromTaggedObject(e)}static credentialFromError(e){return Vi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Vi.credential(n,r)}catch{return null}}}Vi.TWITTER_SIGN_IN_METHOD="twitter.com";Vi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h5(t,e){return Qu(t,"POST","/v1/accounts:signUp",ws(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await qr._fromIdTokenResponse(e,r,i),o=Ab(r);return new po({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=Ab(r);return new po({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function Ab(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af extends Gn{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Af.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Af(e,n,r,i)}}function ZR(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Af._fromErrorAndOperation(t,s,e,r):s})}async function f5(t,e,n=!1){const r=await nl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return po._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p5(t,e,n=!1){const{auth:r}=t;if(er(r.app))return Promise.reject(Xr(r));const i="reauthenticate";try{const s=await nl(t,ZR(r,i,e,t),n);le(s.idToken,r,"internal-error");const o=Nw(s.idToken);le(o,r,"internal-error");const{sub:a}=o;return le(t.uid===a,r,"user-mismatch"),po._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&qn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ek(t,e,n=!1){if(er(t.app))return Promise.reject(Xr(t));const r="signIn",i=await ZR(t,r,e),s=await po._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function m5(t,e){return ek(_s(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tk(t){const e=_s(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function g5(t,e,n){if(er(t.app))return Promise.reject(Xr(t));const r=_s(t),o=await Av(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",h5).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&tk(t),l}),a=await po._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function y5(t,e,n){return er(t.app)?Promise.reject(Xr(t)):m5(ke(t),Tl.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&tk(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v5(t,e){return pi(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dg(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=ke(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await nl(r,v5(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function w5(t,e,n,r){return ke(t).onIdTokenChanged(e,n,r)}function _5(t,e,n){return ke(t).beforeAuthStateChanged(e,n)}function x5(t,e,n,r){return ke(t).onAuthStateChanged(e,n,r)}function E5(t){return ke(t).signOut()}const Rf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Rf,"1"),this.storage.removeItem(Rf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T5=1e3,b5=10;class rk extends nk{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=QR(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);$3()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,b5):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},T5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}rk.type="LOCAL";const S5=rk;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik extends nk{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}ik.type="SESSION";const sk=ik;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I5(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Up(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await I5(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Up.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mw(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C5{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=Mw("",20);i.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){const f=h;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(u),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cr(){return window}function P5(t){Cr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ok(){return typeof Cr().WorkerGlobalScope<"u"&&typeof Cr().importScripts=="function"}async function A5(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function R5(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function k5(){return ok()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ak="firebaseLocalStorageDb",N5=1,kf="firebaseLocalStorage",lk="fbase_key";class Xu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function $p(t,e){return t.transaction([kf],e?"readwrite":"readonly").objectStore(kf)}function D5(){const t=indexedDB.deleteDatabase(ak);return new Xu(t).toPromise()}function Rv(){const t=indexedDB.open(ak,N5);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(kf,{keyPath:lk})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(kf)?e(r):(r.close(),await D5(),e(await Rv()))})})}async function Rb(t,e,n){const r=$p(t,!0).put({[lk]:e,value:n});return new Xu(r).toPromise()}async function O5(t,e){const n=$p(t,!1).get(e),r=await new Xu(n).toPromise();return r===void 0?null:r.value}function kb(t,e){const n=$p(t,!0).delete(e);return new Xu(n).toPromise()}const L5=800,V5=3;class ck{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Rv(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>V5)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ok()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Up._getInstance(k5()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await A5(),!this.activeServiceWorker)return;this.sender=new C5(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||R5()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Rv();return await Rb(e,Rf,"1"),await kb(e,Rf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Rb(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>O5(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>kb(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=$p(i,!1).getAll();return new Xu(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),L5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ck.type="LOCAL";const M5=ck;new Ku(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uk(t,e){return e?Hr(e):(le(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw extends Ow{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ba(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ba(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ba(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function j5(t){return ek(t.auth,new jw(t),t.bypassAuthState)}function F5(t){const{auth:e,user:n}=t;return le(n,e,"internal-error"),p5(n,new jw(t),t.bypassAuthState)}async function U5(t){const{auth:e,user:n}=t;return le(n,e,"internal-error"),f5(n,new jw(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return j5;case"linkViaPopup":case"linkViaRedirect":return U5;case"reauthViaPopup":case"reauthViaRedirect":return F5;default:qn(this.auth,"internal-error")}}resolve(e){ai(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ai(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $5=new Ku(2e3,1e4);async function B5(t,e,n){if(er(t.app))return Promise.reject(rr(t,"operation-not-supported-in-this-environment"));const r=_s(t);E3(t,e,Vw);const i=uk(r,n);return new Xs(r,"signInViaPopup",e,i).executeNotNull()}class Xs extends dk{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Xs.currentPopupAction&&Xs.currentPopupAction.cancel(),Xs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return le(e,this.auth,"internal-error"),e}async onExecution(){ai(this.filter.length===1,"Popup operations only handle one event");const e=Mw();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(rr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(rr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Xs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(rr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,$5.get())};e()}}Xs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z5="pendingRedirect",Lh=new Map;class W5 extends dk{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Lh.get(this.auth._key());if(!e){try{const r=await q5(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Lh.set(this.auth._key(),e)}return this.bypassAuthState||Lh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function q5(t,e){const n=K5(e),r=G5(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function H5(t,e){Lh.set(t._key(),e)}function G5(t){return Hr(t._redirectPersistence)}function K5(t){return Oh(z5,t.config.apiKey,t.name)}async function Q5(t,e,n=!1){if(er(t.app))return Promise.reject(Xr(t));const r=_s(t),i=uk(r,e),o=await new W5(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y5=10*60*1e3;class X5{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!J5(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!hk(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(rr(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Y5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Nb(e))}saveEventToCache(e){this.cachedEventUids.add(Nb(e)),this.lastProcessedEventTime=Date.now()}}function Nb(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function hk({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function J5(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return hk(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z5(t,e={}){return pi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ez=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,tz=/^https?/;async function nz(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Z5(t);for(const n of e)try{if(rz(n))return}catch{}qn(t,"unauthorized-domain")}function rz(t){const e=Cv(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!tz.test(n))return!1;if(ez.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iz=new Ku(3e4,6e4);function Db(){const t=Cr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function sz(t){return new Promise((e,n)=>{var r,i,s;function o(){Db(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Db(),n(rr(t,"network-request-failed"))},timeout:iz.get()})}if(!((i=(r=Cr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Cr().gapi)===null||s===void 0)&&s.load)o();else{const a=Y3("iframefcb");return Cr()[a]=()=>{gapi.load?o():n(rr(t,"network-request-failed"))},XR(`${Q3()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Vh=null,e})}let Vh=null;function oz(t){return Vh=Vh||sz(t),Vh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const az=new Ku(5e3,15e3),lz="__/auth/iframe",cz="emulator/auth/iframe",uz={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},dz=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function hz(t){const e=t.config;le(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?kw(e,cz):`https://${t.config.authDomain}/${lz}`,r={apiKey:e.apiKey,appName:t.name,v:jo},i=dz.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Hu(r).slice(1)}`}async function fz(t){const e=await oz(t),n=Cr().gapi;return le(n,t,"internal-error"),e.open({where:document.body,url:hz(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:uz,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=rr(t,"network-request-failed"),a=Cr().setTimeout(()=>{s(o)},az.get());function l(){Cr().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pz={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},mz=500,gz=600,yz="_blank",vz="http://localhost";class Ob{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function wz(t,e,n,r=mz,i=gz){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},pz),{width:r.toString(),height:i.toString(),top:s,left:o}),c=vt().toLowerCase();n&&(a=WR(c)?yz:n),BR(c)&&(e=e||vz,l.scrollbars="yes");const u=Object.entries(l).reduce((f,[p,g])=>`${f}${p}=${g},`,"");if(U3(c)&&a!=="_self")return _z(e||"",a),new Ob(null);const h=window.open(e||"",a,u);le(h,t,"popup-blocked");try{h.focus()}catch{}return new Ob(h)}function _z(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xz="__/auth/handler",Ez="emulator/auth/handler",Tz=encodeURIComponent("fac");async function Lb(t,e,n,r,i,s){le(t.config.authDomain,t,"auth-domain-config-required"),le(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:jo,eventId:i};if(e instanceof Vw){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",sB(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,h]of Object.entries(s||{}))o[u]=h}if(e instanceof Yu){const u=e.getScopes().filter(h=>h!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await t._getAppCheckToken(),c=l?`#${Tz}=${encodeURIComponent(l)}`:"";return`${bz(t)}?${Hu(a).slice(1)}${c}`}function bz({config:t}){return t.emulator?kw(t,Ez):`https://${t.authDomain}/${xz}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Og="webStorageSupport";class Sz{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=sk,this._completeRedirectFn=Q5,this._overrideRedirectResult=H5}async _openPopup(e,n,r,i){var s;ai((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await Lb(e,n,r,Cv(),i);return wz(e,o,Mw())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await Lb(e,n,r,Cv(),i);return P5(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(ai(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await fz(e),r=new X5(e);return n.register("authEvent",i=>(le(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Og,{type:Og},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Og];o!==void 0&&n(!!o),qn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=nz(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return QR()||zR()||Dw()}}const Iz=Sz;var Vb="@firebase/auth",Mb="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cz{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pz(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Az(t){ar(new Wn("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;le(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:YR(t)},c=new H3(r,i,s,l);return t5(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ar(new Wn("auth-internal",e=>{const n=_s(e.getProvider("auth").getImmediate());return(r=>new Cz(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),fn(Vb,Mb,Pz(t)),fn(Vb,Mb,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rz=5*60,kz=TR("authIdTokenMaxAge")||Rz;let jb=null;const Nz=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>kz)return;const i=n==null?void 0:n.token;jb!==i&&(jb=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Dz(t=jp()){const e=vs(t,"auth");if(e.isInitialized())return e.getImmediate();const n=e5(t,{popupRedirectResolver:Iz,persistence:[M5,S5,sk]}),r=TR("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=Nz(s.toString());_5(n,o,()=>o(n.currentUser)),w5(n,a=>o(a))}}const i=_R("auth");return i&&n5(n,`http://${i}`),n}function Oz(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}G3({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=rr("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",Oz().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Az("Browser");var Fb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ro,fk;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,S){function A(){}A.prototype=S.prototype,I.D=S.prototype,I.prototype=new A,I.prototype.constructor=I,I.C=function(R,O,L){for(var k=Array(arguments.length-2),B=2;B<arguments.length;B++)k[B-2]=arguments[B];return S.prototype[O].apply(R,k)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,S,A){A||(A=0);var R=Array(16);if(typeof S=="string")for(var O=0;16>O;++O)R[O]=S.charCodeAt(A++)|S.charCodeAt(A++)<<8|S.charCodeAt(A++)<<16|S.charCodeAt(A++)<<24;else for(O=0;16>O;++O)R[O]=S[A++]|S[A++]<<8|S[A++]<<16|S[A++]<<24;S=I.g[0],A=I.g[1],O=I.g[2];var L=I.g[3],k=S+(L^A&(O^L))+R[0]+3614090360&4294967295;S=A+(k<<7&4294967295|k>>>25),k=L+(O^S&(A^O))+R[1]+3905402710&4294967295,L=S+(k<<12&4294967295|k>>>20),k=O+(A^L&(S^A))+R[2]+606105819&4294967295,O=L+(k<<17&4294967295|k>>>15),k=A+(S^O&(L^S))+R[3]+3250441966&4294967295,A=O+(k<<22&4294967295|k>>>10),k=S+(L^A&(O^L))+R[4]+4118548399&4294967295,S=A+(k<<7&4294967295|k>>>25),k=L+(O^S&(A^O))+R[5]+1200080426&4294967295,L=S+(k<<12&4294967295|k>>>20),k=O+(A^L&(S^A))+R[6]+2821735955&4294967295,O=L+(k<<17&4294967295|k>>>15),k=A+(S^O&(L^S))+R[7]+4249261313&4294967295,A=O+(k<<22&4294967295|k>>>10),k=S+(L^A&(O^L))+R[8]+1770035416&4294967295,S=A+(k<<7&4294967295|k>>>25),k=L+(O^S&(A^O))+R[9]+2336552879&4294967295,L=S+(k<<12&4294967295|k>>>20),k=O+(A^L&(S^A))+R[10]+4294925233&4294967295,O=L+(k<<17&4294967295|k>>>15),k=A+(S^O&(L^S))+R[11]+2304563134&4294967295,A=O+(k<<22&4294967295|k>>>10),k=S+(L^A&(O^L))+R[12]+1804603682&4294967295,S=A+(k<<7&4294967295|k>>>25),k=L+(O^S&(A^O))+R[13]+4254626195&4294967295,L=S+(k<<12&4294967295|k>>>20),k=O+(A^L&(S^A))+R[14]+2792965006&4294967295,O=L+(k<<17&4294967295|k>>>15),k=A+(S^O&(L^S))+R[15]+1236535329&4294967295,A=O+(k<<22&4294967295|k>>>10),k=S+(O^L&(A^O))+R[1]+4129170786&4294967295,S=A+(k<<5&4294967295|k>>>27),k=L+(A^O&(S^A))+R[6]+3225465664&4294967295,L=S+(k<<9&4294967295|k>>>23),k=O+(S^A&(L^S))+R[11]+643717713&4294967295,O=L+(k<<14&4294967295|k>>>18),k=A+(L^S&(O^L))+R[0]+3921069994&4294967295,A=O+(k<<20&4294967295|k>>>12),k=S+(O^L&(A^O))+R[5]+3593408605&4294967295,S=A+(k<<5&4294967295|k>>>27),k=L+(A^O&(S^A))+R[10]+38016083&4294967295,L=S+(k<<9&4294967295|k>>>23),k=O+(S^A&(L^S))+R[15]+3634488961&4294967295,O=L+(k<<14&4294967295|k>>>18),k=A+(L^S&(O^L))+R[4]+3889429448&4294967295,A=O+(k<<20&4294967295|k>>>12),k=S+(O^L&(A^O))+R[9]+568446438&4294967295,S=A+(k<<5&4294967295|k>>>27),k=L+(A^O&(S^A))+R[14]+3275163606&4294967295,L=S+(k<<9&4294967295|k>>>23),k=O+(S^A&(L^S))+R[3]+4107603335&4294967295,O=L+(k<<14&4294967295|k>>>18),k=A+(L^S&(O^L))+R[8]+1163531501&4294967295,A=O+(k<<20&4294967295|k>>>12),k=S+(O^L&(A^O))+R[13]+2850285829&4294967295,S=A+(k<<5&4294967295|k>>>27),k=L+(A^O&(S^A))+R[2]+4243563512&4294967295,L=S+(k<<9&4294967295|k>>>23),k=O+(S^A&(L^S))+R[7]+1735328473&4294967295,O=L+(k<<14&4294967295|k>>>18),k=A+(L^S&(O^L))+R[12]+2368359562&4294967295,A=O+(k<<20&4294967295|k>>>12),k=S+(A^O^L)+R[5]+4294588738&4294967295,S=A+(k<<4&4294967295|k>>>28),k=L+(S^A^O)+R[8]+2272392833&4294967295,L=S+(k<<11&4294967295|k>>>21),k=O+(L^S^A)+R[11]+1839030562&4294967295,O=L+(k<<16&4294967295|k>>>16),k=A+(O^L^S)+R[14]+4259657740&4294967295,A=O+(k<<23&4294967295|k>>>9),k=S+(A^O^L)+R[1]+2763975236&4294967295,S=A+(k<<4&4294967295|k>>>28),k=L+(S^A^O)+R[4]+1272893353&4294967295,L=S+(k<<11&4294967295|k>>>21),k=O+(L^S^A)+R[7]+4139469664&4294967295,O=L+(k<<16&4294967295|k>>>16),k=A+(O^L^S)+R[10]+3200236656&4294967295,A=O+(k<<23&4294967295|k>>>9),k=S+(A^O^L)+R[13]+681279174&4294967295,S=A+(k<<4&4294967295|k>>>28),k=L+(S^A^O)+R[0]+3936430074&4294967295,L=S+(k<<11&4294967295|k>>>21),k=O+(L^S^A)+R[3]+3572445317&4294967295,O=L+(k<<16&4294967295|k>>>16),k=A+(O^L^S)+R[6]+76029189&4294967295,A=O+(k<<23&4294967295|k>>>9),k=S+(A^O^L)+R[9]+3654602809&4294967295,S=A+(k<<4&4294967295|k>>>28),k=L+(S^A^O)+R[12]+3873151461&4294967295,L=S+(k<<11&4294967295|k>>>21),k=O+(L^S^A)+R[15]+530742520&4294967295,O=L+(k<<16&4294967295|k>>>16),k=A+(O^L^S)+R[2]+3299628645&4294967295,A=O+(k<<23&4294967295|k>>>9),k=S+(O^(A|~L))+R[0]+4096336452&4294967295,S=A+(k<<6&4294967295|k>>>26),k=L+(A^(S|~O))+R[7]+1126891415&4294967295,L=S+(k<<10&4294967295|k>>>22),k=O+(S^(L|~A))+R[14]+2878612391&4294967295,O=L+(k<<15&4294967295|k>>>17),k=A+(L^(O|~S))+R[5]+4237533241&4294967295,A=O+(k<<21&4294967295|k>>>11),k=S+(O^(A|~L))+R[12]+1700485571&4294967295,S=A+(k<<6&4294967295|k>>>26),k=L+(A^(S|~O))+R[3]+2399980690&4294967295,L=S+(k<<10&4294967295|k>>>22),k=O+(S^(L|~A))+R[10]+4293915773&4294967295,O=L+(k<<15&4294967295|k>>>17),k=A+(L^(O|~S))+R[1]+2240044497&4294967295,A=O+(k<<21&4294967295|k>>>11),k=S+(O^(A|~L))+R[8]+1873313359&4294967295,S=A+(k<<6&4294967295|k>>>26),k=L+(A^(S|~O))+R[15]+4264355552&4294967295,L=S+(k<<10&4294967295|k>>>22),k=O+(S^(L|~A))+R[6]+2734768916&4294967295,O=L+(k<<15&4294967295|k>>>17),k=A+(L^(O|~S))+R[13]+1309151649&4294967295,A=O+(k<<21&4294967295|k>>>11),k=S+(O^(A|~L))+R[4]+4149444226&4294967295,S=A+(k<<6&4294967295|k>>>26),k=L+(A^(S|~O))+R[11]+3174756917&4294967295,L=S+(k<<10&4294967295|k>>>22),k=O+(S^(L|~A))+R[2]+718787259&4294967295,O=L+(k<<15&4294967295|k>>>17),k=A+(L^(O|~S))+R[9]+3951481745&4294967295,I.g[0]=I.g[0]+S&4294967295,I.g[1]=I.g[1]+(O+(k<<21&4294967295|k>>>11))&4294967295,I.g[2]=I.g[2]+O&4294967295,I.g[3]=I.g[3]+L&4294967295}r.prototype.u=function(I,S){S===void 0&&(S=I.length);for(var A=S-this.blockSize,R=this.B,O=this.h,L=0;L<S;){if(O==0)for(;L<=A;)i(this,I,L),L+=this.blockSize;if(typeof I=="string"){for(;L<S;)if(R[O++]=I.charCodeAt(L++),O==this.blockSize){i(this,R),O=0;break}}else for(;L<S;)if(R[O++]=I[L++],O==this.blockSize){i(this,R),O=0;break}}this.h=O,this.o+=S},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var S=1;S<I.length-8;++S)I[S]=0;var A=8*this.o;for(S=I.length-8;S<I.length;++S)I[S]=A&255,A/=256;for(this.u(I),I=Array(16),S=A=0;4>S;++S)for(var R=0;32>R;R+=8)I[A++]=this.g[S]>>>R&255;return I};function s(I,S){var A=a;return Object.prototype.hasOwnProperty.call(A,I)?A[I]:A[I]=S(I)}function o(I,S){this.h=S;for(var A=[],R=!0,O=I.length-1;0<=O;O--){var L=I[O]|0;R&&L==S||(A[O]=L,R=!1)}this.g=A}var a={};function l(I){return-128<=I&&128>I?s(I,function(S){return new o([S|0],0>S?-1:0)}):new o([I|0],0>I?-1:0)}function c(I){if(isNaN(I)||!isFinite(I))return h;if(0>I)return w(c(-I));for(var S=[],A=1,R=0;I>=A;R++)S[R]=I/A|0,A*=4294967296;return new o(S,0)}function u(I,S){if(I.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(I.charAt(0)=="-")return w(u(I.substring(1),S));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=c(Math.pow(S,8)),R=h,O=0;O<I.length;O+=8){var L=Math.min(8,I.length-O),k=parseInt(I.substring(O,O+L),S);8>L?(L=c(Math.pow(S,L)),R=R.j(L).add(c(k))):(R=R.j(A),R=R.add(c(k)))}return R}var h=l(0),f=l(1),p=l(16777216);t=o.prototype,t.m=function(){if(v(this))return-w(this).m();for(var I=0,S=1,A=0;A<this.g.length;A++){var R=this.i(A);I+=(0<=R?R:4294967296+R)*S,S*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(g(this))return"0";if(v(this))return"-"+w(this).toString(I);for(var S=c(Math.pow(I,6)),A=this,R="";;){var O=C(A,S).g;A=E(A,O.j(S));var L=((0<A.g.length?A.g[0]:A.h)>>>0).toString(I);if(A=O,g(A))return L+R;for(;6>L.length;)L="0"+L;R=L+R}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function g(I){if(I.h!=0)return!1;for(var S=0;S<I.g.length;S++)if(I.g[S]!=0)return!1;return!0}function v(I){return I.h==-1}t.l=function(I){return I=E(this,I),v(I)?-1:g(I)?0:1};function w(I){for(var S=I.g.length,A=[],R=0;R<S;R++)A[R]=~I.g[R];return new o(A,~I.h).add(f)}t.abs=function(){return v(this)?w(this):this},t.add=function(I){for(var S=Math.max(this.g.length,I.g.length),A=[],R=0,O=0;O<=S;O++){var L=R+(this.i(O)&65535)+(I.i(O)&65535),k=(L>>>16)+(this.i(O)>>>16)+(I.i(O)>>>16);R=k>>>16,L&=65535,k&=65535,A[O]=k<<16|L}return new o(A,A[A.length-1]&-2147483648?-1:0)};function E(I,S){return I.add(w(S))}t.j=function(I){if(g(this)||g(I))return h;if(v(this))return v(I)?w(this).j(w(I)):w(w(this).j(I));if(v(I))return w(this.j(w(I)));if(0>this.l(p)&&0>I.l(p))return c(this.m()*I.m());for(var S=this.g.length+I.g.length,A=[],R=0;R<2*S;R++)A[R]=0;for(R=0;R<this.g.length;R++)for(var O=0;O<I.g.length;O++){var L=this.i(R)>>>16,k=this.i(R)&65535,B=I.i(O)>>>16,Q=I.i(O)&65535;A[2*R+2*O]+=k*Q,x(A,2*R+2*O),A[2*R+2*O+1]+=L*Q,x(A,2*R+2*O+1),A[2*R+2*O+1]+=k*B,x(A,2*R+2*O+1),A[2*R+2*O+2]+=L*B,x(A,2*R+2*O+2)}for(R=0;R<S;R++)A[R]=A[2*R+1]<<16|A[2*R];for(R=S;R<2*S;R++)A[R]=0;return new o(A,0)};function x(I,S){for(;(I[S]&65535)!=I[S];)I[S+1]+=I[S]>>>16,I[S]&=65535,S++}function b(I,S){this.g=I,this.h=S}function C(I,S){if(g(S))throw Error("division by zero");if(g(I))return new b(h,h);if(v(I))return S=C(w(I),S),new b(w(S.g),w(S.h));if(v(S))return S=C(I,w(S)),new b(w(S.g),S.h);if(30<I.g.length){if(v(I)||v(S))throw Error("slowDivide_ only works with positive integers.");for(var A=f,R=S;0>=R.l(I);)A=N(A),R=N(R);var O=D(A,1),L=D(R,1);for(R=D(R,2),A=D(A,2);!g(R);){var k=L.add(R);0>=k.l(I)&&(O=O.add(A),L=k),R=D(R,1),A=D(A,1)}return S=E(I,O.j(S)),new b(O,S)}for(O=h;0<=I.l(S);){for(A=Math.max(1,Math.floor(I.m()/S.m())),R=Math.ceil(Math.log(A)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),L=c(A),k=L.j(S);v(k)||0<k.l(I);)A-=R,L=c(A),k=L.j(S);g(L)&&(L=f),O=O.add(L),I=E(I,k)}return new b(O,I)}t.A=function(I){return C(this,I).h},t.and=function(I){for(var S=Math.max(this.g.length,I.g.length),A=[],R=0;R<S;R++)A[R]=this.i(R)&I.i(R);return new o(A,this.h&I.h)},t.or=function(I){for(var S=Math.max(this.g.length,I.g.length),A=[],R=0;R<S;R++)A[R]=this.i(R)|I.i(R);return new o(A,this.h|I.h)},t.xor=function(I){for(var S=Math.max(this.g.length,I.g.length),A=[],R=0;R<S;R++)A[R]=this.i(R)^I.i(R);return new o(A,this.h^I.h)};function N(I){for(var S=I.g.length+1,A=[],R=0;R<S;R++)A[R]=I.i(R)<<1|I.i(R-1)>>>31;return new o(A,I.h)}function D(I,S){var A=S>>5;S%=32;for(var R=I.g.length-A,O=[],L=0;L<R;L++)O[L]=0<S?I.i(L+A)>>>S|I.i(L+A+1)<<32-S:I.i(L+A);return new o(O,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,fk=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=u,ro=o}).apply(typeof Fb<"u"?Fb:typeof self<"u"?self:typeof window<"u"?window:{});var rh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var pk,_c,mk,Mh,kv,gk,yk,vk;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,y,T){return d==Array.prototype||d==Object.prototype||(d[y]=T.value),d};function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof rh=="object"&&rh];for(var y=0;y<d.length;++y){var T=d[y];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=n(this);function i(d,y){if(y)e:{var T=r;d=d.split(".");for(var P=0;P<d.length-1;P++){var V=d[P];if(!(V in T))break e;T=T[V]}d=d[d.length-1],P=T[d],y=y(P),y!=P&&y!=null&&e(T,d,{configurable:!0,writable:!0,value:y})}}function s(d,y){d instanceof String&&(d+="");var T=0,P=!1,V={next:function(){if(!P&&T<d.length){var j=T++;return{value:y(j,d[j]),done:!1}}return P=!0,{done:!0,value:void 0}}};return V[Symbol.iterator]=function(){return V},V}i("Array.prototype.values",function(d){return d||function(){return s(this,function(y,T){return T})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(d){var y=typeof d;return y=y!="object"?y:d?Array.isArray(d)?"array":y:"null",y=="array"||y=="object"&&typeof d.length=="number"}function c(d){var y=typeof d;return y=="object"&&d!=null||y=="function"}function u(d,y,T){return d.call.apply(d.bind,arguments)}function h(d,y,T){if(!d)throw Error();if(2<arguments.length){var P=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,P),d.apply(y,V)}}return function(){return d.apply(y,arguments)}}function f(d,y,T){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:h,f.apply(null,arguments)}function p(d,y){var T=Array.prototype.slice.call(arguments,1);return function(){var P=T.slice();return P.push.apply(P,arguments),d.apply(this,P)}}function g(d,y){function T(){}T.prototype=y.prototype,d.aa=y.prototype,d.prototype=new T,d.prototype.constructor=d,d.Qb=function(P,V,j){for(var G=Array(arguments.length-2),De=2;De<arguments.length;De++)G[De-2]=arguments[De];return y.prototype[V].apply(P,G)}}function v(d){const y=d.length;if(0<y){const T=Array(y);for(let P=0;P<y;P++)T[P]=d[P];return T}return[]}function w(d,y){for(let T=1;T<arguments.length;T++){const P=arguments[T];if(l(P)){const V=d.length||0,j=P.length||0;d.length=V+j;for(let G=0;G<j;G++)d[V+G]=P[G]}else d.push(P)}}class E{constructor(y,T){this.i=y,this.j=T,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function x(d){return/^[\s\xa0]*$/.test(d)}function b(){var d=a.navigator;return d&&(d=d.userAgent)?d:""}function C(d){return C[" "](d),d}C[" "]=function(){};var N=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function D(d,y,T){for(const P in d)y.call(T,d[P],P,d)}function I(d,y){for(const T in d)y.call(void 0,d[T],T,d)}function S(d){const y={};for(const T in d)y[T]=d[T];return y}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(d,y){let T,P;for(let V=1;V<arguments.length;V++){P=arguments[V];for(T in P)d[T]=P[T];for(let j=0;j<A.length;j++)T=A[j],Object.prototype.hasOwnProperty.call(P,T)&&(d[T]=P[T])}}function O(d){var y=1;d=d.split(":");const T=[];for(;0<y&&d.length;)T.push(d.shift()),y--;return d.length&&T.push(d.join(":")),T}function L(d){a.setTimeout(()=>{throw d},0)}function k(){var d=z;let y=null;return d.g&&(y=d.g,d.g=d.g.next,d.g||(d.h=null),y.next=null),y}class B{constructor(){this.h=this.g=null}add(y,T){const P=Q.get();P.set(y,T),this.h?this.h.next=P:this.g=P,this.h=P}}var Q=new E(()=>new K,d=>d.reset());class K{constructor(){this.next=this.g=this.h=null}set(y,T){this.h=y,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let re,F=!1,z=new B,Y=()=>{const d=a.Promise.resolve(void 0);re=()=>{d.then(J)}};var J=()=>{for(var d;d=k();){try{d.h.call(d.g)}catch(T){L(T)}var y=Q;y.j(d),100>y.h&&(y.h++,d.next=y.g,y.g=d)}F=!1};function ue(){this.s=this.s,this.C=this.C}ue.prototype.s=!1,ue.prototype.ma=function(){this.s||(this.s=!0,this.N())},ue.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ce(d,y){this.type=d,this.g=this.target=y,this.defaultPrevented=!1}ce.prototype.h=function(){this.defaultPrevented=!0};var q=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var d=!1,y=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const T=()=>{};a.addEventListener("test",T,y),a.removeEventListener("test",T,y)}catch{}return d}();function ie(d,y){if(ce.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var T=this.type=d.type,P=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=y,y=d.relatedTarget){if(N){e:{try{C(y.nodeName);var V=!0;break e}catch{}V=!1}V||(y=null)}}else T=="mouseover"?y=d.fromElement:T=="mouseout"&&(y=d.toElement);this.relatedTarget=y,P?(this.clientX=P.clientX!==void 0?P.clientX:P.pageX,this.clientY=P.clientY!==void 0?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:Te[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&ie.aa.h.call(this)}}g(ie,ce);var Te={2:"touch",3:"pen",4:"mouse"};ie.prototype.h=function(){ie.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var st="closure_listenable_"+(1e6*Math.random()|0),Dn=0;function hr(d,y,T,P,V){this.listener=d,this.proxy=null,this.src=y,this.type=T,this.capture=!!P,this.ha=V,this.key=++Dn,this.da=this.fa=!1}function On(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function zt(d){this.src=d,this.g={},this.h=0}zt.prototype.add=function(d,y,T,P,V){var j=d.toString();d=this.g[j],d||(d=this.g[j]=[],this.h++);var G=Vr(d,y,P,V);return-1<G?(y=d[G],T||(y.fa=!1)):(y=new hr(y,this.src,j,!!P,V),y.fa=T,d.push(y)),y};function Is(d,y){var T=y.type;if(T in d.g){var P=d.g[T],V=Array.prototype.indexOf.call(P,y,void 0),j;(j=0<=V)&&Array.prototype.splice.call(P,V,1),j&&(On(y),d.g[T].length==0&&(delete d.g[T],d.h--))}}function Vr(d,y,T,P){for(var V=0;V<d.length;++V){var j=d[V];if(!j.da&&j.listener==y&&j.capture==!!T&&j.ha==P)return V}return-1}var Ko="closure_lm_"+(1e6*Math.random()|0),Nl={};function vd(d,y,T,P,V){if(P&&P.once)return Cs(d,y,T,P,V);if(Array.isArray(y)){for(var j=0;j<y.length;j++)vd(d,y[j],T,P,V);return null}return T=Lm(T),d&&d[st]?d.K(y,T,c(P)?!!P.capture:!!P,V):wd(d,y,T,!1,P,V)}function wd(d,y,T,P,V,j){if(!y)throw Error("Invalid event type");var G=c(V)?!!V.capture:!!V,De=Dm(d);if(De||(d[Ko]=De=new zt(d)),T=De.add(y,T,P,G,j),T.proxy)return T;if(P=km(),T.proxy=P,P.src=d,P.listener=T,d.addEventListener)q||(V=G),V===void 0&&(V=!1),d.addEventListener(y.toString(),P,V);else if(d.attachEvent)d.attachEvent(Vx(y.toString()),P);else if(d.addListener&&d.removeListener)d.addListener(P);else throw Error("addEventListener and attachEvent are unavailable.");return T}function km(){function d(T){return y.call(d.src,d.listener,T)}const y=DV;return d}function Cs(d,y,T,P,V){if(Array.isArray(y)){for(var j=0;j<y.length;j++)Cs(d,y[j],T,P,V);return null}return T=Lm(T),d&&d[st]?d.L(y,T,c(P)?!!P.capture:!!P,V):wd(d,y,T,!0,P,V)}function Lx(d,y,T,P,V){if(Array.isArray(y))for(var j=0;j<y.length;j++)Lx(d,y[j],T,P,V);else P=c(P)?!!P.capture:!!P,T=Lm(T),d&&d[st]?(d=d.i,y=String(y).toString(),y in d.g&&(j=d.g[y],T=Vr(j,T,P,V),-1<T&&(On(j[T]),Array.prototype.splice.call(j,T,1),j.length==0&&(delete d.g[y],d.h--)))):d&&(d=Dm(d))&&(y=d.g[y.toString()],d=-1,y&&(d=Vr(y,T,P,V)),(T=-1<d?y[d]:null)&&Nm(T))}function Nm(d){if(typeof d!="number"&&d&&!d.da){var y=d.src;if(y&&y[st])Is(y.i,d);else{var T=d.type,P=d.proxy;y.removeEventListener?y.removeEventListener(T,P,d.capture):y.detachEvent?y.detachEvent(Vx(T),P):y.addListener&&y.removeListener&&y.removeListener(P),(T=Dm(y))?(Is(T,d),T.h==0&&(T.src=null,y[Ko]=null)):On(d)}}}function Vx(d){return d in Nl?Nl[d]:Nl[d]="on"+d}function DV(d,y){if(d.da)d=!0;else{y=new ie(y,this);var T=d.listener,P=d.ha||d.src;d.fa&&Nm(d),d=T.call(P,y)}return d}function Dm(d){return d=d[Ko],d instanceof zt?d:null}var Om="__closure_events_fn_"+(1e9*Math.random()>>>0);function Lm(d){return typeof d=="function"?d:(d[Om]||(d[Om]=function(y){return d.handleEvent(y)}),d[Om])}function Rt(){ue.call(this),this.i=new zt(this),this.M=this,this.F=null}g(Rt,ue),Rt.prototype[st]=!0,Rt.prototype.removeEventListener=function(d,y,T,P){Lx(this,d,y,T,P)};function Wt(d,y){var T,P=d.F;if(P)for(T=[];P;P=P.F)T.push(P);if(d=d.M,P=y.type||y,typeof y=="string")y=new ce(y,d);else if(y instanceof ce)y.target=y.target||d;else{var V=y;y=new ce(P,d),R(y,V)}if(V=!0,T)for(var j=T.length-1;0<=j;j--){var G=y.g=T[j];V=_d(G,P,!0,y)&&V}if(G=y.g=d,V=_d(G,P,!0,y)&&V,V=_d(G,P,!1,y)&&V,T)for(j=0;j<T.length;j++)G=y.g=T[j],V=_d(G,P,!1,y)&&V}Rt.prototype.N=function(){if(Rt.aa.N.call(this),this.i){var d=this.i,y;for(y in d.g){for(var T=d.g[y],P=0;P<T.length;P++)On(T[P]);delete d.g[y],d.h--}}this.F=null},Rt.prototype.K=function(d,y,T,P){return this.i.add(String(d),y,!1,T,P)},Rt.prototype.L=function(d,y,T,P){return this.i.add(String(d),y,!0,T,P)};function _d(d,y,T,P){if(y=d.i.g[String(y)],!y)return!0;y=y.concat();for(var V=!0,j=0;j<y.length;++j){var G=y[j];if(G&&!G.da&&G.capture==T){var De=G.listener,St=G.ha||G.src;G.fa&&Is(d.i,G),V=De.call(St,P)!==!1&&V}}return V&&!P.defaultPrevented}function Mx(d,y,T){if(typeof d=="function")T&&(d=f(d,T));else if(d&&typeof d.handleEvent=="function")d=f(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:a.setTimeout(d,y||0)}function jx(d){d.g=Mx(()=>{d.g=null,d.i&&(d.i=!1,jx(d))},d.l);const y=d.h;d.h=null,d.m.apply(null,y)}class OV extends ue{constructor(y,T){super(),this.m=y,this.l=T,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:jx(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Dl(d){ue.call(this),this.h=d,this.g={}}g(Dl,ue);var Fx=[];function Ux(d){D(d.g,function(y,T){this.g.hasOwnProperty(T)&&Nm(y)},d),d.g={}}Dl.prototype.N=function(){Dl.aa.N.call(this),Ux(this)},Dl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Vm=a.JSON.stringify,LV=a.JSON.parse,VV=class{stringify(d){return a.JSON.stringify(d,void 0)}parse(d){return a.JSON.parse(d,void 0)}};function Mm(){}Mm.prototype.h=null;function $x(d){return d.h||(d.h=d.i())}function Bx(){}var Ol={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function jm(){ce.call(this,"d")}g(jm,ce);function Fm(){ce.call(this,"c")}g(Fm,ce);var Ps={},zx=null;function xd(){return zx=zx||new Rt}Ps.La="serverreachability";function Wx(d){ce.call(this,Ps.La,d)}g(Wx,ce);function Ll(d){const y=xd();Wt(y,new Wx(y))}Ps.STAT_EVENT="statevent";function qx(d,y){ce.call(this,Ps.STAT_EVENT,d),this.stat=y}g(qx,ce);function qt(d){const y=xd();Wt(y,new qx(y,d))}Ps.Ma="timingevent";function Hx(d,y){ce.call(this,Ps.Ma,d),this.size=y}g(Hx,ce);function Vl(d,y){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){d()},y)}function Ml(){this.g=!0}Ml.prototype.xa=function(){this.g=!1};function MV(d,y,T,P,V,j){d.info(function(){if(d.g)if(j)for(var G="",De=j.split("&"),St=0;St<De.length;St++){var Se=De[St].split("=");if(1<Se.length){var kt=Se[0];Se=Se[1];var Nt=kt.split("_");G=2<=Nt.length&&Nt[1]=="type"?G+(kt+"="+Se+"&"):G+(kt+"=redacted&")}}else G=null;else G=j;return"XMLHTTP REQ ("+P+") [attempt "+V+"]: "+y+`
`+T+`
`+G})}function jV(d,y,T,P,V,j,G){d.info(function(){return"XMLHTTP RESP ("+P+") [ attempt "+V+"]: "+y+`
`+T+`
`+j+" "+G})}function Qo(d,y,T,P){d.info(function(){return"XMLHTTP TEXT ("+y+"): "+UV(d,T)+(P?" "+P:"")})}function FV(d,y){d.info(function(){return"TIMEOUT: "+y})}Ml.prototype.info=function(){};function UV(d,y){if(!d.g)return y;if(!y)return null;try{var T=JSON.parse(y);if(T){for(d=0;d<T.length;d++)if(Array.isArray(T[d])){var P=T[d];if(!(2>P.length)){var V=P[1];if(Array.isArray(V)&&!(1>V.length)){var j=V[0];if(j!="noop"&&j!="stop"&&j!="close")for(var G=1;G<V.length;G++)V[G]=""}}}}return Vm(T)}catch{return y}}var Ed={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Gx={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Um;function Td(){}g(Td,Mm),Td.prototype.g=function(){return new XMLHttpRequest},Td.prototype.i=function(){return{}},Um=new Td;function vi(d,y,T,P){this.j=d,this.i=y,this.l=T,this.R=P||1,this.U=new Dl(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Kx}function Kx(){this.i=null,this.g="",this.h=!1}var Qx={},$m={};function Bm(d,y,T){d.L=1,d.v=Cd(Mr(y)),d.m=T,d.P=!0,Yx(d,null)}function Yx(d,y){d.F=Date.now(),bd(d),d.A=Mr(d.v);var T=d.A,P=d.R;Array.isArray(P)||(P=[String(P)]),uE(T.i,"t",P),d.C=0,T=d.j.J,d.h=new Kx,d.g=PE(d.j,T?y:null,!d.m),0<d.O&&(d.M=new OV(f(d.Y,d,d.g),d.O)),y=d.U,T=d.g,P=d.ca;var V="readystatechange";Array.isArray(V)||(V&&(Fx[0]=V.toString()),V=Fx);for(var j=0;j<V.length;j++){var G=vd(T,V[j],P||y.handleEvent,!1,y.h||y);if(!G)break;y.g[G.key]=G}y=d.H?S(d.H):{},d.m?(d.u||(d.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,y)):(d.u="GET",d.g.ea(d.A,d.u,null,y)),Ll(),MV(d.i,d.u,d.A,d.l,d.R,d.m)}vi.prototype.ca=function(d){d=d.target;const y=this.M;y&&jr(d)==3?y.j():this.Y(d)},vi.prototype.Y=function(d){try{if(d==this.g)e:{const Nt=jr(this.g);var y=this.g.Ba();const Jo=this.g.Z();if(!(3>Nt)&&(Nt!=3||this.g&&(this.h.h||this.g.oa()||yE(this.g)))){this.J||Nt!=4||y==7||(y==8||0>=Jo?Ll(3):Ll(2)),zm(this);var T=this.g.Z();this.X=T;t:if(Xx(this)){var P=yE(this.g);d="";var V=P.length,j=jr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){As(this),jl(this);var G="";break t}this.h.i=new a.TextDecoder}for(y=0;y<V;y++)this.h.h=!0,d+=this.h.i.decode(P[y],{stream:!(j&&y==V-1)});P.length=0,this.h.g+=d,this.C=0,G=this.h.g}else G=this.g.oa();if(this.o=T==200,jV(this.i,this.u,this.A,this.l,this.R,Nt,T),this.o){if(this.T&&!this.K){t:{if(this.g){var De,St=this.g;if((De=St.g?St.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(De)){var Se=De;break t}}Se=null}if(T=Se)Qo(this.i,this.l,T,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Wm(this,T);else{this.o=!1,this.s=3,qt(12),As(this),jl(this);break e}}if(this.P){T=!0;let Kn;for(;!this.J&&this.C<G.length;)if(Kn=$V(this,G),Kn==$m){Nt==4&&(this.s=4,qt(14),T=!1),Qo(this.i,this.l,null,"[Incomplete Response]");break}else if(Kn==Qx){this.s=4,qt(15),Qo(this.i,this.l,G,"[Invalid Chunk]"),T=!1;break}else Qo(this.i,this.l,Kn,null),Wm(this,Kn);if(Xx(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Nt!=4||G.length!=0||this.h.h||(this.s=1,qt(16),T=!1),this.o=this.o&&T,!T)Qo(this.i,this.l,G,"[Invalid Chunked Response]"),As(this),jl(this);else if(0<G.length&&!this.W){this.W=!0;var kt=this.j;kt.g==this&&kt.ba&&!kt.M&&(kt.j.info("Great, no buffering proxy detected. Bytes received: "+G.length),Ym(kt),kt.M=!0,qt(11))}}else Qo(this.i,this.l,G,null),Wm(this,G);Nt==4&&As(this),this.o&&!this.J&&(Nt==4?bE(this.j,this):(this.o=!1,bd(this)))}else iM(this.g),T==400&&0<G.indexOf("Unknown SID")?(this.s=3,qt(12)):(this.s=0,qt(13)),As(this),jl(this)}}}catch{}finally{}};function Xx(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function $V(d,y){var T=d.C,P=y.indexOf(`
`,T);return P==-1?$m:(T=Number(y.substring(T,P)),isNaN(T)?Qx:(P+=1,P+T>y.length?$m:(y=y.slice(P,P+T),d.C=P+T,y)))}vi.prototype.cancel=function(){this.J=!0,As(this)};function bd(d){d.S=Date.now()+d.I,Jx(d,d.I)}function Jx(d,y){if(d.B!=null)throw Error("WatchDog timer not null");d.B=Vl(f(d.ba,d),y)}function zm(d){d.B&&(a.clearTimeout(d.B),d.B=null)}vi.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(FV(this.i,this.A),this.L!=2&&(Ll(),qt(17)),As(this),this.s=2,jl(this)):Jx(this,this.S-d)};function jl(d){d.j.G==0||d.J||bE(d.j,d)}function As(d){zm(d);var y=d.M;y&&typeof y.ma=="function"&&y.ma(),d.M=null,Ux(d.U),d.g&&(y=d.g,d.g=null,y.abort(),y.ma())}function Wm(d,y){try{var T=d.j;if(T.G!=0&&(T.g==d||qm(T.h,d))){if(!d.K&&qm(T.h,d)&&T.G==3){try{var P=T.Da.g.parse(y)}catch{P=null}if(Array.isArray(P)&&P.length==3){var V=P;if(V[0]==0){e:if(!T.u){if(T.g)if(T.g.F+3e3<d.F)Dd(T),kd(T);else break e;Qm(T),qt(18)}}else T.za=V[1],0<T.za-T.T&&37500>V[2]&&T.F&&T.v==0&&!T.C&&(T.C=Vl(f(T.Za,T),6e3));if(1>=tE(T.h)&&T.ca){try{T.ca()}catch{}T.ca=void 0}}else ks(T,11)}else if((d.K||T.g==d)&&Dd(T),!x(y))for(V=T.Da.g.parse(y),y=0;y<V.length;y++){let Se=V[y];if(T.T=Se[0],Se=Se[1],T.G==2)if(Se[0]=="c"){T.K=Se[1],T.ia=Se[2];const kt=Se[3];kt!=null&&(T.la=kt,T.j.info("VER="+T.la));const Nt=Se[4];Nt!=null&&(T.Aa=Nt,T.j.info("SVER="+T.Aa));const Jo=Se[5];Jo!=null&&typeof Jo=="number"&&0<Jo&&(P=1.5*Jo,T.L=P,T.j.info("backChannelRequestTimeoutMs_="+P)),P=T;const Kn=d.g;if(Kn){const Ld=Kn.g?Kn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ld){var j=P.h;j.g||Ld.indexOf("spdy")==-1&&Ld.indexOf("quic")==-1&&Ld.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(Hm(j,j.h),j.h=null))}if(P.D){const Xm=Kn.g?Kn.g.getResponseHeader("X-HTTP-Session-Id"):null;Xm&&(P.ya=Xm,je(P.I,P.D,Xm))}}T.G=3,T.l&&T.l.ua(),T.ba&&(T.R=Date.now()-d.F,T.j.info("Handshake RTT: "+T.R+"ms")),P=T;var G=d;if(P.qa=CE(P,P.J?P.ia:null,P.W),G.K){nE(P.h,G);var De=G,St=P.L;St&&(De.I=St),De.B&&(zm(De),bd(De)),P.g=G}else EE(P);0<T.i.length&&Nd(T)}else Se[0]!="stop"&&Se[0]!="close"||ks(T,7);else T.G==3&&(Se[0]=="stop"||Se[0]=="close"?Se[0]=="stop"?ks(T,7):Km(T):Se[0]!="noop"&&T.l&&T.l.ta(Se),T.v=0)}}Ll(4)}catch{}}var BV=class{constructor(d,y){this.g=d,this.map=y}};function Zx(d){this.l=d||10,a.PerformanceNavigationTiming?(d=a.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function eE(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function tE(d){return d.h?1:d.g?d.g.size:0}function qm(d,y){return d.h?d.h==y:d.g?d.g.has(y):!1}function Hm(d,y){d.g?d.g.add(y):d.h=y}function nE(d,y){d.h&&d.h==y?d.h=null:d.g&&d.g.has(y)&&d.g.delete(y)}Zx.prototype.cancel=function(){if(this.i=rE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function rE(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let y=d.i;for(const T of d.g.values())y=y.concat(T.D);return y}return v(d.i)}function zV(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(l(d)){for(var y=[],T=d.length,P=0;P<T;P++)y.push(d[P]);return y}y=[],T=0;for(P in d)y[T++]=d[P];return y}function WV(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(l(d)||typeof d=="string"){var y=[];d=d.length;for(var T=0;T<d;T++)y.push(T);return y}y=[],T=0;for(const P in d)y[T++]=P;return y}}}function iE(d,y){if(d.forEach&&typeof d.forEach=="function")d.forEach(y,void 0);else if(l(d)||typeof d=="string")Array.prototype.forEach.call(d,y,void 0);else for(var T=WV(d),P=zV(d),V=P.length,j=0;j<V;j++)y.call(void 0,P[j],T&&T[j],d)}var sE=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function qV(d,y){if(d){d=d.split("&");for(var T=0;T<d.length;T++){var P=d[T].indexOf("="),V=null;if(0<=P){var j=d[T].substring(0,P);V=d[T].substring(P+1)}else j=d[T];y(j,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function Rs(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof Rs){this.h=d.h,Sd(this,d.j),this.o=d.o,this.g=d.g,Id(this,d.s),this.l=d.l;var y=d.i,T=new $l;T.i=y.i,y.g&&(T.g=new Map(y.g),T.h=y.h),oE(this,T),this.m=d.m}else d&&(y=String(d).match(sE))?(this.h=!1,Sd(this,y[1]||"",!0),this.o=Fl(y[2]||""),this.g=Fl(y[3]||"",!0),Id(this,y[4]),this.l=Fl(y[5]||"",!0),oE(this,y[6]||"",!0),this.m=Fl(y[7]||"")):(this.h=!1,this.i=new $l(null,this.h))}Rs.prototype.toString=function(){var d=[],y=this.j;y&&d.push(Ul(y,aE,!0),":");var T=this.g;return(T||y=="file")&&(d.push("//"),(y=this.o)&&d.push(Ul(y,aE,!0),"@"),d.push(encodeURIComponent(String(T)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.s,T!=null&&d.push(":",String(T))),(T=this.l)&&(this.g&&T.charAt(0)!="/"&&d.push("/"),d.push(Ul(T,T.charAt(0)=="/"?KV:GV,!0))),(T=this.i.toString())&&d.push("?",T),(T=this.m)&&d.push("#",Ul(T,YV)),d.join("")};function Mr(d){return new Rs(d)}function Sd(d,y,T){d.j=T?Fl(y,!0):y,d.j&&(d.j=d.j.replace(/:$/,""))}function Id(d,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);d.s=y}else d.s=null}function oE(d,y,T){y instanceof $l?(d.i=y,XV(d.i,d.h)):(T||(y=Ul(y,QV)),d.i=new $l(y,d.h))}function je(d,y,T){d.i.set(y,T)}function Cd(d){return je(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function Fl(d,y){return d?y?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Ul(d,y,T){return typeof d=="string"?(d=encodeURI(d).replace(y,HV),T&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function HV(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var aE=/[#\/\?@]/g,GV=/[#\?:]/g,KV=/[#\?]/g,QV=/[#\?@]/g,YV=/#/g;function $l(d,y){this.h=this.g=null,this.i=d||null,this.j=!!y}function wi(d){d.g||(d.g=new Map,d.h=0,d.i&&qV(d.i,function(y,T){d.add(decodeURIComponent(y.replace(/\+/g," ")),T)}))}t=$l.prototype,t.add=function(d,y){wi(this),this.i=null,d=Yo(this,d);var T=this.g.get(d);return T||this.g.set(d,T=[]),T.push(y),this.h+=1,this};function lE(d,y){wi(d),y=Yo(d,y),d.g.has(y)&&(d.i=null,d.h-=d.g.get(y).length,d.g.delete(y))}function cE(d,y){return wi(d),y=Yo(d,y),d.g.has(y)}t.forEach=function(d,y){wi(this),this.g.forEach(function(T,P){T.forEach(function(V){d.call(y,V,P,this)},this)},this)},t.na=function(){wi(this);const d=Array.from(this.g.values()),y=Array.from(this.g.keys()),T=[];for(let P=0;P<y.length;P++){const V=d[P];for(let j=0;j<V.length;j++)T.push(y[P])}return T},t.V=function(d){wi(this);let y=[];if(typeof d=="string")cE(this,d)&&(y=y.concat(this.g.get(Yo(this,d))));else{d=Array.from(this.g.values());for(let T=0;T<d.length;T++)y=y.concat(d[T])}return y},t.set=function(d,y){return wi(this),this.i=null,d=Yo(this,d),cE(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[y]),this.h+=1,this},t.get=function(d,y){return d?(d=this.V(d),0<d.length?String(d[0]):y):y};function uE(d,y,T){lE(d,y),0<T.length&&(d.i=null,d.g.set(Yo(d,y),v(T)),d.h+=T.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],y=Array.from(this.g.keys());for(var T=0;T<y.length;T++){var P=y[T];const j=encodeURIComponent(String(P)),G=this.V(P);for(P=0;P<G.length;P++){var V=j;G[P]!==""&&(V+="="+encodeURIComponent(String(G[P]))),d.push(V)}}return this.i=d.join("&")};function Yo(d,y){return y=String(y),d.j&&(y=y.toLowerCase()),y}function XV(d,y){y&&!d.j&&(wi(d),d.i=null,d.g.forEach(function(T,P){var V=P.toLowerCase();P!=V&&(lE(this,P),uE(this,V,T))},d)),d.j=y}function JV(d,y){const T=new Ml;if(a.Image){const P=new Image;P.onload=p(_i,T,"TestLoadImage: loaded",!0,y,P),P.onerror=p(_i,T,"TestLoadImage: error",!1,y,P),P.onabort=p(_i,T,"TestLoadImage: abort",!1,y,P),P.ontimeout=p(_i,T,"TestLoadImage: timeout",!1,y,P),a.setTimeout(function(){P.ontimeout&&P.ontimeout()},1e4),P.src=d}else y(!1)}function ZV(d,y){const T=new Ml,P=new AbortController,V=setTimeout(()=>{P.abort(),_i(T,"TestPingServer: timeout",!1,y)},1e4);fetch(d,{signal:P.signal}).then(j=>{clearTimeout(V),j.ok?_i(T,"TestPingServer: ok",!0,y):_i(T,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(V),_i(T,"TestPingServer: error",!1,y)})}function _i(d,y,T,P,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),P(T)}catch{}}function eM(){this.g=new VV}function tM(d,y,T){const P=T||"";try{iE(d,function(V,j){let G=V;c(V)&&(G=Vm(V)),y.push(P+j+"="+encodeURIComponent(G))})}catch(V){throw y.push(P+"type="+encodeURIComponent("_badmap")),V}}function Pd(d){this.l=d.Ub||null,this.j=d.eb||!1}g(Pd,Mm),Pd.prototype.g=function(){return new Ad(this.l,this.j)},Pd.prototype.i=function(d){return function(){return d}}({});function Ad(d,y){Rt.call(this),this.D=d,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}g(Ad,Rt),t=Ad.prototype,t.open=function(d,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=y,this.readyState=1,zl(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(y.body=d),(this.D||a).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Bl(this)),this.readyState=0},t.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,zl(this)),this.g&&(this.readyState=3,zl(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;dE(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function dE(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}t.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var y=d.value?d.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!d.done}))&&(this.response=this.responseText+=y)}d.done?Bl(this):zl(this),this.readyState==3&&dE(this)}},t.Ra=function(d){this.g&&(this.response=this.responseText=d,Bl(this))},t.Qa=function(d){this.g&&(this.response=d,Bl(this))},t.ga=function(){this.g&&Bl(this)};function Bl(d){d.readyState=4,d.l=null,d.j=null,d.v=null,zl(d)}t.setRequestHeader=function(d,y){this.u.append(d,y)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],y=this.h.entries();for(var T=y.next();!T.done;)T=T.value,d.push(T[0]+": "+T[1]),T=y.next();return d.join(`\r
`)};function zl(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Ad.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function hE(d){let y="";return D(d,function(T,P){y+=P,y+=":",y+=T,y+=`\r
`}),y}function Gm(d,y,T){e:{for(P in T){var P=!1;break e}P=!0}P||(T=hE(T),typeof d=="string"?T!=null&&encodeURIComponent(String(T)):je(d,y,T))}function Xe(d){Rt.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}g(Xe,Rt);var nM=/^https?$/i,rM=["POST","PUT"];t=Xe.prototype,t.Ha=function(d){this.J=d},t.ea=function(d,y,T,P){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);y=y?y.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Um.g(),this.v=this.o?$x(this.o):$x(Um),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(y,String(d),!0),this.B=!1}catch(j){fE(this,j);return}if(d=T||"",T=new Map(this.headers),P)if(Object.getPrototypeOf(P)===Object.prototype)for(var V in P)T.set(V,P[V]);else if(typeof P.keys=="function"&&typeof P.get=="function")for(const j of P.keys())T.set(j,P.get(j));else throw Error("Unknown input type for opt_headers: "+String(P));P=Array.from(T.keys()).find(j=>j.toLowerCase()=="content-type"),V=a.FormData&&d instanceof a.FormData,!(0<=Array.prototype.indexOf.call(rM,y,void 0))||P||V||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,G]of T)this.g.setRequestHeader(j,G);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{gE(this),this.u=!0,this.g.send(d),this.u=!1}catch(j){fE(this,j)}};function fE(d,y){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=y,d.m=5,pE(d),Rd(d)}function pE(d){d.A||(d.A=!0,Wt(d,"complete"),Wt(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,Wt(this,"complete"),Wt(this,"abort"),Rd(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Rd(this,!0)),Xe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?mE(this):this.bb())},t.bb=function(){mE(this)};function mE(d){if(d.h&&typeof o<"u"&&(!d.v[1]||jr(d)!=4||d.Z()!=2)){if(d.u&&jr(d)==4)Mx(d.Ea,0,d);else if(Wt(d,"readystatechange"),jr(d)==4){d.h=!1;try{const G=d.Z();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var T;if(!(T=y)){var P;if(P=G===0){var V=String(d.D).match(sE)[1]||null;!V&&a.self&&a.self.location&&(V=a.self.location.protocol.slice(0,-1)),P=!nM.test(V?V.toLowerCase():"")}T=P}if(T)Wt(d,"complete"),Wt(d,"success");else{d.m=6;try{var j=2<jr(d)?d.g.statusText:""}catch{j=""}d.l=j+" ["+d.Z()+"]",pE(d)}}finally{Rd(d)}}}}function Rd(d,y){if(d.g){gE(d);const T=d.g,P=d.v[0]?()=>{}:null;d.g=null,d.v=null,y||Wt(d,"ready");try{T.onreadystatechange=P}catch{}}}function gE(d){d.I&&(a.clearTimeout(d.I),d.I=null)}t.isActive=function(){return!!this.g};function jr(d){return d.g?d.g.readyState:0}t.Z=function(){try{return 2<jr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(d){if(this.g){var y=this.g.responseText;return d&&y.indexOf(d)==0&&(y=y.substring(d.length)),LV(y)}};function yE(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function iM(d){const y={};d=(d.g&&2<=jr(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let P=0;P<d.length;P++){if(x(d[P]))continue;var T=O(d[P]);const V=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const j=y[V]||[];y[V]=j,j.push(T)}I(y,function(P){return P.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Wl(d,y,T){return T&&T.internalChannelParams&&T.internalChannelParams[d]||y}function vE(d){this.Aa=0,this.i=[],this.j=new Ml,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Wl("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Wl("baseRetryDelayMs",5e3,d),this.cb=Wl("retryDelaySeedMs",1e4,d),this.Wa=Wl("forwardChannelMaxRetries",2,d),this.wa=Wl("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new Zx(d&&d.concurrentRequestLimit),this.Da=new eM,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=vE.prototype,t.la=8,t.G=1,t.connect=function(d,y,T,P){qt(0),this.W=d,this.H=y||{},T&&P!==void 0&&(this.H.OSID=T,this.H.OAID=P),this.F=this.X,this.I=CE(this,null,this.W),Nd(this)};function Km(d){if(wE(d),d.G==3){var y=d.U++,T=Mr(d.I);if(je(T,"SID",d.K),je(T,"RID",y),je(T,"TYPE","terminate"),ql(d,T),y=new vi(d,d.j,y),y.L=2,y.v=Cd(Mr(T)),T=!1,a.navigator&&a.navigator.sendBeacon)try{T=a.navigator.sendBeacon(y.v.toString(),"")}catch{}!T&&a.Image&&(new Image().src=y.v,T=!0),T||(y.g=PE(y.j,null),y.g.ea(y.v)),y.F=Date.now(),bd(y)}IE(d)}function kd(d){d.g&&(Ym(d),d.g.cancel(),d.g=null)}function wE(d){kd(d),d.u&&(a.clearTimeout(d.u),d.u=null),Dd(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&a.clearTimeout(d.s),d.s=null)}function Nd(d){if(!eE(d.h)&&!d.s){d.s=!0;var y=d.Ga;re||Y(),F||(re(),F=!0),z.add(y,d),d.B=0}}function sM(d,y){return tE(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=y.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=Vl(f(d.Ga,d,y),SE(d,d.B)),d.B++,!0)}t.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const V=new vi(this,this.j,d);let j=this.o;if(this.S&&(j?(j=S(j),R(j,this.S)):j=this.S),this.m!==null||this.O||(V.H=j,j=null),this.P)e:{for(var y=0,T=0;T<this.i.length;T++){t:{var P=this.i[T];if("__data__"in P.map&&(P=P.map.__data__,typeof P=="string")){P=P.length;break t}P=void 0}if(P===void 0)break;if(y+=P,4096<y){y=T;break e}if(y===4096||T===this.i.length-1){y=T+1;break e}}y=1e3}else y=1e3;y=xE(this,V,y),T=Mr(this.I),je(T,"RID",d),je(T,"CVER",22),this.D&&je(T,"X-HTTP-Session-Id",this.D),ql(this,T),j&&(this.O?y="headers="+encodeURIComponent(String(hE(j)))+"&"+y:this.m&&Gm(T,this.m,j)),Hm(this.h,V),this.Ua&&je(T,"TYPE","init"),this.P?(je(T,"$req",y),je(T,"SID","null"),V.T=!0,Bm(V,T,null)):Bm(V,T,y),this.G=2}}else this.G==3&&(d?_E(this,d):this.i.length==0||eE(this.h)||_E(this))};function _E(d,y){var T;y?T=y.l:T=d.U++;const P=Mr(d.I);je(P,"SID",d.K),je(P,"RID",T),je(P,"AID",d.T),ql(d,P),d.m&&d.o&&Gm(P,d.m,d.o),T=new vi(d,d.j,T,d.B+1),d.m===null&&(T.H=d.o),y&&(d.i=y.D.concat(d.i)),y=xE(d,T,1e3),T.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),Hm(d.h,T),Bm(T,P,y)}function ql(d,y){d.H&&D(d.H,function(T,P){je(y,P,T)}),d.l&&iE({},function(T,P){je(y,P,T)})}function xE(d,y,T){T=Math.min(d.i.length,T);var P=d.l?f(d.l.Na,d.l,d):null;e:{var V=d.i;let j=-1;for(;;){const G=["count="+T];j==-1?0<T?(j=V[0].g,G.push("ofs="+j)):j=0:G.push("ofs="+j);let De=!0;for(let St=0;St<T;St++){let Se=V[St].g;const kt=V[St].map;if(Se-=j,0>Se)j=Math.max(0,V[St].g-100),De=!1;else try{tM(kt,G,"req"+Se+"_")}catch{P&&P(kt)}}if(De){P=G.join("&");break e}}}return d=d.i.splice(0,T),y.D=d,P}function EE(d){if(!d.g&&!d.u){d.Y=1;var y=d.Fa;re||Y(),F||(re(),F=!0),z.add(y,d),d.v=0}}function Qm(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=Vl(f(d.Fa,d),SE(d,d.v)),d.v++,!0)}t.Fa=function(){if(this.u=null,TE(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=Vl(f(this.ab,this),d)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,qt(10),kd(this),TE(this))};function Ym(d){d.A!=null&&(a.clearTimeout(d.A),d.A=null)}function TE(d){d.g=new vi(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var y=Mr(d.qa);je(y,"RID","rpc"),je(y,"SID",d.K),je(y,"AID",d.T),je(y,"CI",d.F?"0":"1"),!d.F&&d.ja&&je(y,"TO",d.ja),je(y,"TYPE","xmlhttp"),ql(d,y),d.m&&d.o&&Gm(y,d.m,d.o),d.L&&(d.g.I=d.L);var T=d.g;d=d.ia,T.L=1,T.v=Cd(Mr(y)),T.m=null,T.P=!0,Yx(T,d)}t.Za=function(){this.C!=null&&(this.C=null,kd(this),Qm(this),qt(19))};function Dd(d){d.C!=null&&(a.clearTimeout(d.C),d.C=null)}function bE(d,y){var T=null;if(d.g==y){Dd(d),Ym(d),d.g=null;var P=2}else if(qm(d.h,y))T=y.D,nE(d.h,y),P=1;else return;if(d.G!=0){if(y.o)if(P==1){T=y.m?y.m.length:0,y=Date.now()-y.F;var V=d.B;P=xd(),Wt(P,new Hx(P,T)),Nd(d)}else EE(d);else if(V=y.s,V==3||V==0&&0<y.X||!(P==1&&sM(d,y)||P==2&&Qm(d)))switch(T&&0<T.length&&(y=d.h,y.i=y.i.concat(T)),V){case 1:ks(d,5);break;case 4:ks(d,10);break;case 3:ks(d,6);break;default:ks(d,2)}}}function SE(d,y){let T=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(T*=2),T*y}function ks(d,y){if(d.j.info("Error code "+y),y==2){var T=f(d.fb,d),P=d.Xa;const V=!P;P=new Rs(P||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Sd(P,"https"),Cd(P),V?JV(P.toString(),T):ZV(P.toString(),T)}else qt(2);d.G=0,d.l&&d.l.sa(y),IE(d),wE(d)}t.fb=function(d){d?(this.j.info("Successfully pinged google.com"),qt(2)):(this.j.info("Failed to ping google.com"),qt(1))};function IE(d){if(d.G=0,d.ka=[],d.l){const y=rE(d.h);(y.length!=0||d.i.length!=0)&&(w(d.ka,y),w(d.ka,d.i),d.h.i.length=0,v(d.i),d.i.length=0),d.l.ra()}}function CE(d,y,T){var P=T instanceof Rs?Mr(T):new Rs(T);if(P.g!="")y&&(P.g=y+"."+P.g),Id(P,P.s);else{var V=a.location;P=V.protocol,y=y?y+"."+V.hostname:V.hostname,V=+V.port;var j=new Rs(null);P&&Sd(j,P),y&&(j.g=y),V&&Id(j,V),T&&(j.l=T),P=j}return T=d.D,y=d.ya,T&&y&&je(P,T,y),je(P,"VER",d.la),ql(d,P),P}function PE(d,y,T){if(y&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=d.Ca&&!d.pa?new Xe(new Pd({eb:T})):new Xe(d.pa),y.Ha(d.J),y}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function AE(){}t=AE.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Od(){}Od.prototype.g=function(d,y){return new gn(d,y)};function gn(d,y){Rt.call(this),this.g=new vE(y),this.l=d,this.h=y&&y.messageUrlParams||null,d=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(d?d["X-WebChannel-Content-Type"]=y.messageContentType:d={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(d?d["X-WebChannel-Client-Profile"]=y.va:d={"X-WebChannel-Client-Profile":y.va}),this.g.S=d,(d=y&&y.Sb)&&!x(d)&&(this.g.m=d),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!x(y)&&(this.g.D=y,d=this.h,d!==null&&y in d&&(d=this.h,y in d&&delete d[y])),this.j=new Xo(this)}g(gn,Rt),gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){Km(this.g)},gn.prototype.o=function(d){var y=this.g;if(typeof d=="string"){var T={};T.__data__=d,d=T}else this.u&&(T={},T.__data__=Vm(d),d=T);y.i.push(new BV(y.Ya++,d)),y.G==3&&Nd(y)},gn.prototype.N=function(){this.g.l=null,delete this.j,Km(this.g),delete this.g,gn.aa.N.call(this)};function RE(d){jm.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var y=d.__sm__;if(y){e:{for(const T in y){d=T;break e}d=void 0}(this.i=d)&&(d=this.i,y=y!==null&&d in y?y[d]:void 0),this.data=y}else this.data=d}g(RE,jm);function kE(){Fm.call(this),this.status=1}g(kE,Fm);function Xo(d){this.g=d}g(Xo,AE),Xo.prototype.ua=function(){Wt(this.g,"a")},Xo.prototype.ta=function(d){Wt(this.g,new RE(d))},Xo.prototype.sa=function(d){Wt(this.g,new kE)},Xo.prototype.ra=function(){Wt(this.g,"b")},Od.prototype.createWebChannel=Od.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,vk=function(){return new Od},yk=function(){return xd()},gk=Ps,kv={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ed.NO_ERROR=0,Ed.TIMEOUT=8,Ed.HTTP_ERROR=6,Mh=Ed,Gx.COMPLETE="complete",mk=Gx,Bx.EventType=Ol,Ol.OPEN="a",Ol.CLOSE="b",Ol.ERROR="c",Ol.MESSAGE="d",Rt.prototype.listen=Rt.prototype.K,_c=Bx,Xe.prototype.listenOnce=Xe.prototype.L,Xe.prototype.getLastError=Xe.prototype.Ka,Xe.prototype.getLastErrorCode=Xe.prototype.Ba,Xe.prototype.getStatus=Xe.prototype.Z,Xe.prototype.getResponseJson=Xe.prototype.Oa,Xe.prototype.getResponseText=Xe.prototype.oa,Xe.prototype.send=Xe.prototype.ea,Xe.prototype.setWithCredentials=Xe.prototype.Ha,pk=Xe}).apply(typeof rh<"u"?rh:typeof self<"u"?self:typeof window<"u"?window:{});const Ub="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Tt.UNAUTHENTICATED=new Tt(null),Tt.GOOGLE_CREDENTIALS=new Tt("google-credentials-uid"),Tt.FIRST_PARTY=new Tt("first-party-uid"),Tt.MOCK_USER=new Tt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bl="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mo=new Mp("@firebase/firestore");function ha(){return mo.logLevel}function $(t,...e){if(mo.logLevel<=we.DEBUG){const n=e.map(Fw);mo.debug(`Firestore (${bl}): ${t}`,...n)}}function at(t,...e){if(mo.logLevel<=we.ERROR){const n=e.map(Fw);mo.error(`Firestore (${bl}): ${t}`,...n)}}function os(t,...e){if(mo.logLevel<=we.WARN){const n=e.map(Fw);mo.warn(`Firestore (${bl}): ${t}`,...n)}}function Fw(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ee(t="Unexpected state"){const e=`FIRESTORE (${bl}) INTERNAL ASSERTION FAILED: `+t;throw at(e),new Error(e)}function ne(t,e){t||ee()}function te(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class H extends Gn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Lz{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Tt.UNAUTHENTICATED))}shutdown(){}}class Vz{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Mz{constructor(e){this.t=e,this.currentUser=Tt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ne(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Pr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Pr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{$("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):($("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Pr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?($("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ne(typeof r.accessToken=="string"),new wk(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ne(e===null||typeof e=="string"),new Tt(e)}}class jz{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Tt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Fz{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new jz(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Tt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Uz{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $z{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){ne(this.o===void 0);const r=s=>{s.error!=null&&$("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,$("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{$("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):$("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ne(typeof n.token=="string"),this.R=n.token,new Uz(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bz(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=Bz(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function he(t,e){return t<e?-1:t>e?1:0}function rl(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function xk(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new H(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new H(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new H(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new H(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Qe.fromMillis(Date.now())}static fromDate(e){return Qe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Qe(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?he(this.nanoseconds,e.nanoseconds):he(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.timestamp=e}static fromTimestamp(e){return new se(e)}static min(){return new se(new Qe(0,0))}static max(){return new se(new Qe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{constructor(e,n,r){n===void 0?n=0:n>e.length&&ee(),r===void 0?r=e.length-n:r>e.length-n&&ee(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return yu.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof yu?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ie extends yu{construct(e,n,r){return new Ie(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new H(U.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Ie(n)}static emptyPath(){return new Ie([])}}const zz=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class He extends yu{construct(e,n,r){return new He(e,n,r)}static isValidIdentifier(e){return zz.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),He.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new He(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new H(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new H(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new H(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new H(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new He(n)}static emptyPath(){return new He([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.path=e}static fromPath(e){return new X(Ie.fromString(e))}static fromName(e){return new X(Ie.fromString(e).popFirst(5))}static empty(){return new X(Ie.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ie.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ie.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new X(new Ie(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function Nv(t){return t.fields.find(e=>e.kind===2)}function Ms(t){return t.fields.filter(e=>e.kind!==2)}Nf.UNKNOWN_ID=-1;class jh{constructor(e,n){this.fieldPath=e,this.kind=n}}class vu{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new vu(0,Pn.min())}}function Ek(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=se.fromTimestamp(r===1e9?new Qe(n+1,0):new Qe(n,r));return new Pn(i,X.empty(),e)}function Tk(t){return new Pn(t.readTime,t.key,-1)}class Pn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Pn(se.min(),X.empty(),-1)}static max(){return new Pn(se.max(),X.empty(),-1)}}function Uw(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=X.comparator(t.documentKey,e.documentKey),n!==0?n:he(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Sk{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xs(t){if(t.code!==U.FAILED_PRECONDITION||t.message!==bk)throw t;$("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ee(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new M((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof M?n:M.resolve(n)}catch(n){return M.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):M.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):M.reject(n)}static resolve(e){return new M((n,r)=>{n(e)})}static reject(e){return new M((n,r)=>{r(e)})}static waitFor(e){return new M((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=M.resolve(!1);for(const r of e)n=n.next(i=>i?M.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new M((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(u=>{o[c]=u,++a,a===s&&r(o)},u=>i(u))}})}static doWhile(e,n){return new M((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Pr,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Vc(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=$w(r.target.error);this.V.reject(new Vc(e,i))}}static open(e,n,r,i){try{return new Bp(n,e.transaction(i,r))}catch(s){throw new Vc(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||($("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new qz(n)}}class Zi{constructor(e,n,r){this.name=e,this.version=n,this.p=r,Zi.S(vt())===12.2&&at("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return $("SimpleDb","Removing database:",e),zs(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Cw())return!1;if(Zi.v())return!0;const e=vt(),n=Zi.S(e),r=0<n&&n<10,i=Ik(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}async M(e){return this.db||($("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new Vc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new H(U.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new H(U.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Vc(e,o))},i.onupgradeneeded=s=>{$("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.p.O(o,i.transaction,s.oldVersion,this.version).next(()=>{$("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.M(e);const a=Bp.open(this.db,e,s?"readonly":"readwrite",r),l=i(a).next(c=>(a.g(),c)).catch(c=>(a.abort(c),M.reject(c))).toPromise();return l.catch(()=>{}),await a.m,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if($("SimpleDb","Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function Ik(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class Wz{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return zs(this.B.delete())}}class Vc extends H{constructor(e,n){super(U.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Es(t){return t.name==="IndexedDbTransactionError"}class qz{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?($("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):($("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),zs(r)}add(e){return $("SimpleDb","ADD",this.store.name,e,e),zs(this.store.add(e))}get(e){return zs(this.store.get(e)).next(n=>(n===void 0&&(n=null),$("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return $("SimpleDb","DELETE",this.store.name,e),zs(this.store.delete(e))}count(){return $("SimpleDb","COUNT",this.store.name),zs(this.store.count())}U(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new M((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{const s=this.cursor(r),o=[];return this.W(s,(a,l)=>{o.push(l)}).next(()=>o)}}G(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new M((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,n){$("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.H=!1;const i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.W(i,n)}Y(e){const n=this.cursor({});return new M((r,i)=>{n.onerror=s=>{const o=$w(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,n){const r=[];return new M((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new Wz(a),c=n(a.primaryKey,a.value,l);if(c instanceof M){const u=c.catch(h=>(l.done(),M.reject(h)));r.push(u)}l.isDone?i():l.K===null?a.continue():a.continue(l.K)}}).next(()=>M.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function zs(t){return new M((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=$w(r.target.error);n(i)}})}let $b=!1;function $w(t){const e=Zi.S(vt());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new H("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return $b||($b=!0,setTimeout(()=>{throw r},0)),r}}return t}class Hz{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){$("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{$("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(n){Es(n)?$("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):await xs(n)}await this.X(6e4)})}}class Gz{constructor(e,n){this.localStore=e,this.persistence=n}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))}te(e,n){const r=new Set;let i=n,s=!0;return M.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return $("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}ne(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>($("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}re(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=Tk(s);Uw(o,r)>0&&(r=o)}),new Pn(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}ln.oe=-1;function zp(t){return t==null}function wu(t){return t===0&&1/t==-1/0}function Ck(t){return typeof t=="number"&&Number.isInteger(t)&&!wu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Bb(e)),e=Kz(t.get(n),e);return Bb(e)}function Kz(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function Bb(t){return t+""}function xr(t){const e=t.length;if(ne(e>=2),e===2)return ne(t.charAt(0)===""&&t.charAt(1)===""),Ie.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf("",s);switch((o<0||o>n)&&ee(),t.charAt(o+1)){case"":const a=t.substring(s,o);let l;i.length===0?l=a:(i+=a,l=i,i=""),r.push(l);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:ee()}s=o+2}return new Ie(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zb=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fh(t,e){return[t,Jt(e)]}function Pk(t,e,n){return[t,Jt(e),n]}const Qz={},Yz=["prefixPath","collectionGroup","readTime","documentId"],Xz=["prefixPath","collectionGroup","documentId"],Jz=["collectionGroup","readTime","prefixPath","documentId"],Zz=["canonicalId","targetId"],e6=["targetId","path"],t6=["path","targetId"],n6=["collectionId","parent"],r6=["indexId","uid"],i6=["uid","sequenceNumber"],s6=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],o6=["indexId","uid","orderedDocumentKey"],a6=["userId","collectionPath","documentId"],l6=["userId","collectionPath","largestBatchId"],c6=["userId","collectionGroup","largestBatchId"],Ak=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],u6=[...Ak,"documentOverlays"],Rk=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],kk=Rk,Bw=[...kk,"indexConfiguration","indexState","indexEntries"],d6=Bw,h6=[...Bw,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dv extends Sk{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}}function _t(t,e){const n=te(t);return Zi.F(n._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wb(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Fo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Nk(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e,n){this.comparator=e,this.root=n||Ct.EMPTY}insert(e,n){return new Me(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ct.BLACK,null,null))}remove(e){return new Me(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ct.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ih(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ih(this.root,e,this.comparator,!1)}getReverseIterator(){return new ih(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ih(this.root,e,this.comparator,!0)}}class ih{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ct{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Ct.RED,this.left=i??Ct.EMPTY,this.right=s??Ct.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Ct(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ct.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Ct.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ct.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ct.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ee();const e=this.left.check();if(e!==this.right.check())throw ee();return e+(this.isRed()?0:1)}}Ct.EMPTY=null,Ct.RED=!0,Ct.BLACK=!1;Ct.EMPTY=new class{constructor(){this.size=0}get key(){throw ee()}get value(){throw ee()}get color(){throw ee()}get left(){throw ee()}get right(){throw ee()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Ct(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e){this.comparator=e,this.data=new Me(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new qb(this.data.getIterator())}getIteratorFrom(e){return new qb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ne)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ne(this.comparator);return n.data=e,n}}class qb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ea(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.fields=e,e.sort(He.comparator)}static empty(){return new cn([])}unionWith(e){let n=new Ne(He.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new cn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return rl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Dk("Invalid base64 string: "+s):s}}(e);return new ct(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new ct(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return he(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ct.EMPTY_BYTE_STRING=new ct("");const f6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function li(t){if(ne(!!t),typeof t=="string"){let e=0;const n=f6.exec(t);if(ne(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Be(t.seconds),nanos:Be(t.nanos)}}function Be(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function as(t){return typeof t=="string"?ct.fromBase64String(t):ct.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zw(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Ww(t){const e=t.mapValue.fields.__previous_value__;return zw(e)?Ww(e):e}function _u(t){const e=li(t.mapValue.fields.__local_write_time__.timestampValue);return new Qe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p6{constructor(e,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class go{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new go("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof go&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bi={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Uh={nullValue:"NULL_VALUE"};function yo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?zw(t)?4:Ok(t)?9007199254740991:Wp(t)?10:11:ee()}function kr(t,e){if(t===e)return!0;const n=yo(t);if(n!==yo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return _u(t).isEqual(_u(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=li(i.timestampValue),a=li(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return as(i.bytesValue).isEqual(as(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Be(i.geoPointValue.latitude)===Be(s.geoPointValue.latitude)&&Be(i.geoPointValue.longitude)===Be(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Be(i.integerValue)===Be(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Be(i.doubleValue),a=Be(s.doubleValue);return o===a?wu(o)===wu(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return rl(t.arrayValue.values||[],e.arrayValue.values||[],kr);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Wb(o)!==Wb(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!kr(o[l],a[l])))return!1;return!0}(t,e);default:return ee()}}function xu(t,e){return(t.values||[]).find(n=>kr(n,e))!==void 0}function ls(t,e){if(t===e)return 0;const n=yo(t),r=yo(e);if(n!==r)return he(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return he(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Be(s.integerValue||s.doubleValue),l=Be(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return Hb(t.timestampValue,e.timestampValue);case 4:return Hb(_u(t),_u(e));case 5:return he(t.stringValue,e.stringValue);case 6:return function(s,o){const a=as(s),l=as(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=he(a[c],l[c]);if(u!==0)return u}return he(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=he(Be(s.latitude),Be(o.latitude));return a!==0?a:he(Be(s.longitude),Be(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Gb(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,u;const h=s.fields||{},f=o.fields||{},p=(a=h.value)===null||a===void 0?void 0:a.arrayValue,g=(l=f.value)===null||l===void 0?void 0:l.arrayValue,v=he(((c=p==null?void 0:p.values)===null||c===void 0?void 0:c.length)||0,((u=g==null?void 0:g.values)===null||u===void 0?void 0:u.length)||0);return v!==0?v:Gb(p,g)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Bi.mapValue&&o===Bi.mapValue)return 0;if(s===Bi.mapValue)return 1;if(o===Bi.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let h=0;h<l.length&&h<u.length;++h){const f=he(l[h],u[h]);if(f!==0)return f;const p=ls(a[l[h]],c[u[h]]);if(p!==0)return p}return he(l.length,u.length)}(t.mapValue,e.mapValue);default:throw ee()}}function Hb(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return he(t,e);const n=li(t),r=li(e),i=he(n.seconds,r.seconds);return i!==0?i:he(n.nanos,r.nanos)}function Gb(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=ls(n[i],r[i]);if(s)return s}return he(n.length,r.length)}function il(t){return Ov(t)}function Ov(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=li(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return as(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return X.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Ov(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Ov(n.fields[o])}`;return i+"}"}(t.mapValue):ee()}function Eu(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Lv(t){return!!t&&"integerValue"in t}function Tu(t){return!!t&&"arrayValue"in t}function Kb(t){return!!t&&"nullValue"in t}function Qb(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function $h(t){return!!t&&"mapValue"in t}function Wp(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Mc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Fo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Mc(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Mc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Ok(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const Lk={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function m6(t){return"nullValue"in t?Uh:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Eu(go.empty(),X.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Wp(t)?Lk:{mapValue:{}}:ee()}function g6(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Eu(go.empty(),X.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?Lk:"mapValue"in t?Wp(t)?{mapValue:{}}:Bi:ee()}function Yb(t,e){const n=ls(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function Xb(t,e){const n=ls(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.value=e}static empty(){return new jt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!$h(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Mc(n)}setAll(e){let n=He.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Mc(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());$h(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return kr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];$h(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Fo(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new jt(Mc(this.value))}}function Vk(t){const e=[];return Fo(t.fields,(n,r)=>{const i=new He([n]);if($h(r)){const s=Vk(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new cn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new tt(e,0,se.min(),se.min(),se.min(),jt.empty(),0)}static newFoundDocument(e,n,r,i){return new tt(e,1,n,se.min(),r,i,0)}static newNoDocument(e,n){return new tt(e,2,n,se.min(),se.min(),jt.empty(),0)}static newUnknownDocument(e,n){return new tt(e,3,n,se.min(),se.min(),jt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof tt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new tt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(e,n){this.position=e,this.inclusive=n}}function Jb(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=X.comparator(X.fromName(o.referenceValue),n.key):r=ls(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Zb(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!kr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(e,n="asc"){this.field=e,this.dir=n}}function y6(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk{}class _e extends Mk{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new v6(e,n,r):n==="array-contains"?new x6(e,r):n==="in"?new zk(e,r):n==="not-in"?new E6(e,r):n==="array-contains-any"?new T6(e,r):new _e(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new w6(e,r):new _6(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ls(n,this.value)):n!==null&&yo(this.value)===yo(n)&&this.matchesComparison(ls(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ee()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ae extends Mk{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Ae(e,n)}matches(e){return ol(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function ol(t){return t.op==="and"}function Vv(t){return t.op==="or"}function qw(t){return jk(t)&&ol(t)}function jk(t){for(const e of t.filters)if(e instanceof Ae)return!1;return!0}function Mv(t){if(t instanceof _e)return t.field.canonicalString()+t.op.toString()+il(t.value);if(qw(t))return t.filters.map(e=>Mv(e)).join(",");{const e=t.filters.map(n=>Mv(n)).join(",");return`${t.op}(${e})`}}function Fk(t,e){return t instanceof _e?function(r,i){return i instanceof _e&&r.op===i.op&&r.field.isEqual(i.field)&&kr(r.value,i.value)}(t,e):t instanceof Ae?function(r,i){return i instanceof Ae&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&Fk(o,i.filters[a]),!0):!1}(t,e):void ee()}function Uk(t,e){const n=t.filters.concat(e);return Ae.create(n,t.op)}function $k(t){return t instanceof _e?function(n){return`${n.field.canonicalString()} ${n.op} ${il(n.value)}`}(t):t instanceof Ae?function(n){return n.op.toString()+" {"+n.getFilters().map($k).join(" ,")+"}"}(t):"Filter"}class v6 extends _e{constructor(e,n,r){super(e,n,r),this.key=X.fromName(r.referenceValue)}matches(e){const n=X.comparator(e.key,this.key);return this.matchesComparison(n)}}class w6 extends _e{constructor(e,n){super(e,"in",n),this.keys=Bk("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class _6 extends _e{constructor(e,n){super(e,"not-in",n),this.keys=Bk("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Bk(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>X.fromName(r.referenceValue))}class x6 extends _e{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Tu(n)&&xu(n.arrayValue,this.value)}}class zk extends _e{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&xu(this.value.arrayValue,n)}}class E6 extends _e{constructor(e,n){super(e,"not-in",n)}matches(e){if(xu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!xu(this.value.arrayValue,n)}}class T6 extends _e{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Tu(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>xu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b6{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function jv(t,e=null,n=[],r=[],i=null,s=null,o=null){return new b6(t,e,n,r,i,s,o)}function vo(t){const e=te(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Mv(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),zp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>il(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>il(r)).join(",")),e.ue=n}return e.ue}function Ju(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!y6(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Fk(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Zb(t.startAt,e.startAt)&&Zb(t.endAt,e.endAt)}function Df(t){return X.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Of(t,e){return t.filters.filter(n=>n instanceof _e&&n.field.isEqual(e))}function e1(t,e,n){let r=Uh,i=!0;for(const s of Of(t,e)){let o=Uh,a=!0;switch(s.op){case"<":case"<=":o=m6(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=Uh}Yb({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];Yb({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function t1(t,e,n){let r=Bi,i=!0;for(const s of Of(t,e)){let o=Bi,a=!0;switch(s.op){case">=":case">":o=g6(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Bi}Xb({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];Xb({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Wk(t,e,n,r,i,s,o,a){return new Sl(t,e,n,r,i,s,o,a)}function Zu(t){return new Sl(t)}function n1(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function qk(t){return t.collectionGroup!==null}function jc(t){const e=te(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ne(He.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new bu(s,r))}),n.has(He.keyField().canonicalString())||e.ce.push(new bu(He.keyField(),r))}return e.ce}function bn(t){const e=te(t);return e.le||(e.le=S6(e,jc(t))),e.le}function S6(t,e){if(t.limitType==="F")return jv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new bu(i.field,s)});const n=t.endAt?new sl(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new sl(t.startAt.position,t.startAt.inclusive):null;return jv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Fv(t,e){const n=t.filters.concat([e]);return new Sl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Lf(t,e,n){return new Sl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function qp(t,e){return Ju(bn(t),bn(e))&&t.limitType===e.limitType}function Hk(t){return`${vo(bn(t))}|lt:${t.limitType}`}function fa(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>$k(i)).join(", ")}]`),zp(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>il(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>il(i)).join(",")),`Target(${r})`}(bn(t))}; limitType=${t.limitType})`}function ed(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):X.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of jc(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=Jb(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,jc(r),i)||r.endAt&&!function(o,a,l){const c=Jb(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,jc(r),i))}(t,e)}function Gk(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Kk(t){return(e,n)=>{let r=!1;for(const i of jc(t)){const s=I6(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function I6(t,e,n){const r=t.field.isKeyField()?X.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?ls(l,c):ee()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ee()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Fo(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return Nk(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C6=new Me(X.comparator);function _n(){return C6}const Qk=new Me(X.comparator);function xc(...t){let e=Qk;for(const n of t)e=e.insert(n.key,n);return e}function Yk(t){let e=Qk;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Er(){return Fc()}function Xk(){return Fc()}function Fc(){return new Ts(t=>t.toString(),(t,e)=>t.isEqual(e))}const P6=new Me(X.comparator),A6=new Ne(X.comparator);function pe(...t){let e=A6;for(const n of t)e=e.add(n);return e}const R6=new Ne(he);function Hw(){return R6}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gw(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wu(e)?"-0":e}}function Jk(t){return{integerValue:""+t}}function Zk(t,e){return Ck(e)?Jk(e):Gw(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp{constructor(){this._=void 0}}function k6(t,e,n){return t instanceof al?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&zw(s)&&(s=Ww(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof wo?tN(t,e):t instanceof _o?nN(t,e):function(i,s){const o=eN(i,s),a=r1(o)+r1(i.Pe);return Lv(o)&&Lv(i.Pe)?Jk(a):Gw(i.serializer,a)}(t,e)}function N6(t,e,n){return t instanceof wo?tN(t,e):t instanceof _o?nN(t,e):n}function eN(t,e){return t instanceof ll?function(r){return Lv(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class al extends Hp{}class wo extends Hp{constructor(e){super(),this.elements=e}}function tN(t,e){const n=rN(e);for(const r of t.elements)n.some(i=>kr(i,r))||n.push(r);return{arrayValue:{values:n}}}class _o extends Hp{constructor(e){super(),this.elements=e}}function nN(t,e){let n=rN(e);for(const r of t.elements)n=n.filter(i=>!kr(i,r));return{arrayValue:{values:n}}}class ll extends Hp{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function r1(t){return Be(t.integerValue||t.doubleValue)}function rN(t){return Tu(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(e,n){this.field=e,this.transform=n}}function D6(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof wo&&i instanceof wo||r instanceof _o&&i instanceof _o?rl(r.elements,i.elements,kr):r instanceof ll&&i instanceof ll?kr(r.Pe,i.Pe):r instanceof al&&i instanceof al}(t.transform,e.transform)}class O6{constructor(e,n){this.version=e,this.transformResults=n}}class gt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new gt}static exists(e){return new gt(void 0,e)}static updateTime(e){return new gt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Bh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Gp{}function iN(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new nd(t.key,gt.none()):new Il(t.key,t.data,gt.none());{const n=t.data,r=jt.empty();let i=new Ne(He.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new mi(t.key,r,new cn(i.toArray()),gt.none())}}function L6(t,e,n){t instanceof Il?function(i,s,o){const a=i.value.clone(),l=s1(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof mi?function(i,s,o){if(!Bh(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=s1(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(sN(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Uc(t,e,n,r){return t instanceof Il?function(s,o,a,l){if(!Bh(s.precondition,o))return a;const c=s.value.clone(),u=o1(s.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof mi?function(s,o,a,l){if(!Bh(s.precondition,o))return a;const c=o1(s.fieldTransforms,l,o),u=o.data;return u.setAll(sN(s)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(s,o,a){return Bh(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function V6(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=eN(r.transform,i||null);s!=null&&(n===null&&(n=jt.empty()),n.set(r.field,s))}return n||null}function i1(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&rl(r,i,(s,o)=>D6(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Il extends Gp{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class mi extends Gp{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function sN(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function s1(t,e,n){const r=new Map;ne(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,N6(o,a,n[i]))}return r}function o1(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,k6(s,o,e))}return r}class nd extends Gp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class oN extends Gp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&L6(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Uc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Uc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Xk();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=iN(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(se.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),pe())}isEqual(e){return this.batchId===e.batchId&&rl(this.mutations,e.mutations,(n,r)=>i1(n,r))&&rl(this.baseMutations,e.baseMutations,(n,r)=>i1(n,r))}}class Qw{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ne(e.mutations.length===r.length);let i=function(){return P6}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Qw(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yw=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M6{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ut,Ee;function j6(t){switch(t){default:return ee();case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0}}function aN(t){if(t===void 0)return at("GRPC error has no .code"),U.UNKNOWN;switch(t){case ut.OK:return U.OK;case ut.CANCELLED:return U.CANCELLED;case ut.UNKNOWN:return U.UNKNOWN;case ut.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case ut.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case ut.INTERNAL:return U.INTERNAL;case ut.UNAVAILABLE:return U.UNAVAILABLE;case ut.UNAUTHENTICATED:return U.UNAUTHENTICATED;case ut.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case ut.NOT_FOUND:return U.NOT_FOUND;case ut.ALREADY_EXISTS:return U.ALREADY_EXISTS;case ut.PERMISSION_DENIED:return U.PERMISSION_DENIED;case ut.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case ut.ABORTED:return U.ABORTED;case ut.OUT_OF_RANGE:return U.OUT_OF_RANGE;case ut.UNIMPLEMENTED:return U.UNIMPLEMENTED;case ut.DATA_LOSS:return U.DATA_LOSS;default:return ee()}}(Ee=ut||(ut={}))[Ee.OK=0]="OK",Ee[Ee.CANCELLED=1]="CANCELLED",Ee[Ee.UNKNOWN=2]="UNKNOWN",Ee[Ee.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ee[Ee.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ee[Ee.NOT_FOUND=5]="NOT_FOUND",Ee[Ee.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ee[Ee.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ee[Ee.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ee[Ee.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ee[Ee.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ee[Ee.ABORTED=10]="ABORTED",Ee[Ee.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ee[Ee.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ee[Ee.INTERNAL=13]="INTERNAL",Ee[Ee.UNAVAILABLE=14]="UNAVAILABLE",Ee[Ee.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F6(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U6=new ro([4294967295,4294967295],0);function a1(t){const e=F6().encode(t),n=new fk;return n.update(e),new Uint8Array(n.digest())}function l1(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ro([n,r],0),new ro([i,s],0)]}class Xw{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ec(`Invalid padding: ${n}`);if(r<0)throw new Ec(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ec(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ec(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=ro.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(ro.fromNumber(r)));return i.compare(U6)===1&&(i=new ro([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=a1(e),[r,i]=l1(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Xw(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=a1(e),[r,i]=l1(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ec extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,id.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new rd(se.min(),i,new Me(he),_n(),pe())}}class id{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new id(r,n,pe(),pe(),pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class lN{constructor(e,n){this.targetId=e,this.me=n}}class cN{constructor(e,n,r=ct.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class c1{constructor(){this.fe=0,this.ge=d1(),this.pe=ct.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=pe(),n=pe(),r=pe();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ee()}}),new id(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=d1()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ne(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class $6{constructor(e){this.Le=e,this.Be=new Map,this.ke=_n(),this.qe=u1(),this.Qe=new Me(he)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ee()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(Df(s))if(r===0){const o=new X(s.path);this.Ue(n,o,tt.newNoDocument(o,se.min()))}else ne(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=as(r).toUint8Array()}catch(l){if(l instanceof Dk)return os("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Xw(o,i,s)}catch(l){return os(l instanceof Ec?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&Df(a.target)){const l=new X(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,tt.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=pe();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new rd(e,n,this.Qe,this.ke,r);return this.ke=_n(),this.qe=u1(),this.Qe=new Me(he),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new c1,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Ne(he),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||$("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new c1),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function u1(){return new Me(X.comparator)}function d1(){return new Me(X.comparator)}const B6=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),z6=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),W6=(()=>({and:"AND",or:"OR"}))();class q6{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Uv(t,e){return t.useProto3Json||zp(e)?e:{value:e}}function cl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function uN(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function H6(t,e){return cl(t,e.toTimestamp())}function Zt(t){return ne(!!t),se.fromTimestamp(function(n){const r=li(n);return new Qe(r.seconds,r.nanos)}(t))}function Jw(t,e){return $v(t,e).canonicalString()}function $v(t,e){const n=function(i){return new Ie(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function dN(t){const e=Ie.fromString(t);return ne(_N(e)),e}function Vf(t,e){return Jw(t.databaseId,e.path)}function io(t,e){const n=dN(e);if(n.get(1)!==t.databaseId.projectId)throw new H(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new H(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new X(pN(n))}function hN(t,e){return Jw(t.databaseId,e)}function fN(t){const e=dN(t);return e.length===4?Ie.emptyPath():pN(e)}function Bv(t){return new Ie(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function pN(t){return ne(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function h1(t,e,n){return{name:Vf(t,e),fields:n.value.mapValue.fields}}function G6(t,e,n){const r=io(t,e.name),i=Zt(e.updateTime),s=e.createTime?Zt(e.createTime):se.min(),o=new jt({mapValue:{fields:e.fields}}),a=tt.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function K6(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ee()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,u){return c.useProto3Json?(ne(u===void 0||typeof u=="string"),ct.fromBase64String(u||"")):(ne(u===void 0||u instanceof Buffer||u instanceof Uint8Array),ct.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const u=c.code===void 0?U.UNKNOWN:aN(c.code);return new H(u,c.message||"")}(o);n=new cN(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=io(t,r.document.name),s=Zt(r.document.updateTime),o=r.document.createTime?Zt(r.document.createTime):se.min(),a=new jt({mapValue:{fields:r.document.fields}}),l=tt.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new zh(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=io(t,r.document),s=r.readTime?Zt(r.readTime):se.min(),o=tt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new zh([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=io(t,r.document),s=r.removedTargetIds||[];n=new zh([],s,i,null)}else{if(!("filter"in e))return ee();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new M6(i,s),a=r.targetId;n=new lN(a,o)}}return n}function Mf(t,e){let n;if(e instanceof Il)n={update:h1(t,e.key,e.value)};else if(e instanceof nd)n={delete:Vf(t,e.key)};else if(e instanceof mi)n={update:h1(t,e.key,e.data),updateMask:e9(e.fieldMask)};else{if(!(e instanceof oN))return ee();n={verify:Vf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof al)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof wo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof _o)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ll)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw ee()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:H6(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ee()}(t,e.precondition)),n}function zv(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?gt.updateTime(Zt(s.updateTime)):s.exists!==void 0?gt.exists(s.exists):gt.none()}(e.currentDocument):gt.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let l=null;if("setToServerValue"in a)ne(a.setToServerValue==="REQUEST_TIME"),l=new al;else if("appendMissingElements"in a){const u=a.appendMissingElements.values||[];l=new wo(u)}else if("removeAllFromArray"in a){const u=a.removeAllFromArray.values||[];l=new _o(u)}else"increment"in a?l=new ll(o,a.increment):ee();const c=He.fromServerFormat(a.fieldPath);return new td(c,l)}(t,i)):[];if(e.update){e.update.name;const i=io(t,e.update.name),s=new jt({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const c=l.fieldPaths||[];return new cn(c.map(u=>He.fromServerFormat(u)))}(e.updateMask);return new mi(i,s,o,n,r)}return new Il(i,s,n,r)}if(e.delete){const i=io(t,e.delete);return new nd(i,n)}if(e.verify){const i=io(t,e.verify);return new oN(i,n)}return ee()}function Q6(t,e){return t&&t.length>0?(ne(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Zt(i.updateTime):Zt(s);return o.isEqual(se.min())&&(o=Zt(s)),new O6(o,i.transformResults||[])}(n,e))):[]}function mN(t,e){return{documents:[hN(t,e.path)]}}function gN(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=hN(t,i);const s=function(c){if(c.length!==0)return wN(Ae.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(u=>function(f){return{field:pa(f.field),direction:X6(f.dir)}}(u))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Uv(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function yN(t){let e=fN(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ne(r===1);const u=n.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];n.where&&(s=function(h){const f=vN(h);return f instanceof Ae&&qw(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(f=>function(g){return new bu(ma(g.field),function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(h){let f;return f=typeof h=="object"?h.value:h,zp(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(h){const f=!!h.before,p=h.values||[];return new sl(p,f)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const f=!h.before,p=h.values||[];return new sl(p,f)}(n.endAt)),Wk(e,i,o,s,a,"F",l,c)}function Y6(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ee()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function vN(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ma(n.unaryFilter.field);return _e.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=ma(n.unaryFilter.field);return _e.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=ma(n.unaryFilter.field);return _e.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ma(n.unaryFilter.field);return _e.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ee()}}(t):t.fieldFilter!==void 0?function(n){return _e.create(ma(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ee()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ae.create(n.compositeFilter.filters.map(r=>vN(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ee()}}(n.compositeFilter.op))}(t):ee()}function X6(t){return B6[t]}function J6(t){return z6[t]}function Z6(t){return W6[t]}function pa(t){return{fieldPath:t.canonicalString()}}function ma(t){return He.fromServerFormat(t.fieldPath)}function wN(t){return t instanceof _e?function(n){if(n.op==="=="){if(Qb(n.value))return{unaryFilter:{field:pa(n.field),op:"IS_NAN"}};if(Kb(n.value))return{unaryFilter:{field:pa(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Qb(n.value))return{unaryFilter:{field:pa(n.field),op:"IS_NOT_NAN"}};if(Kb(n.value))return{unaryFilter:{field:pa(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:pa(n.field),op:J6(n.op),value:n.value}}}(t):t instanceof Ae?function(n){const r=n.getFilters().map(i=>wN(i));return r.length===1?r[0]:{compositeFilter:{op:Z6(n.op),filters:r}}}(t):ee()}function e9(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function _N(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(e,n,r,i,s=se.min(),o=se.min(),a=ct.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Gr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Gr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Gr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Gr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(e){this.ct=e}}function t9(t,e){let n;if(e.document)n=G6(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=X.fromSegments(e.noDocument.path),i=Eo(e.noDocument.readTime);n=tt.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return ee();{const r=X.fromSegments(e.unknownDocument.path),i=Eo(e.unknownDocument.version);n=tt.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const s=new Qe(i[0],i[1]);return se.fromTimestamp(s)}(e.readTime)),n}function f1(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:jf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:Vf(s,o.key),fields:o.data.value.mapValue.fields,updateTime:cl(s,o.version.toTimestamp()),createTime:cl(s,o.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:xo(e.version)};else{if(!e.isUnknownDocument())return ee();r.unknownDocument={path:n.path.toArray(),version:xo(e.version)}}return r}function jf(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function xo(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Eo(t){const e=new Qe(t.seconds,t.nanoseconds);return se.fromTimestamp(e)}function Ws(t,e){const n=(e.baseMutations||[]).map(s=>zv(t.ct,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>zv(t.ct,s)),i=Qe.fromMillis(e.localWriteTimeMs);return new Kw(e.batchId,i,n,r)}function Tc(t){const e=Eo(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Eo(t.lastLimboFreeSnapshotVersion):se.min();let r;return r=function(s){return s.documents!==void 0}(t.query)?function(s){return ne(s.documents.length===1),bn(Zu(fN(s.documents[0])))}(t.query):function(s){return bn(yN(s))}(t.query),new Gr(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,ct.fromBase64String(t.resumeToken))}function EN(t,e){const n=xo(e.snapshotVersion),r=xo(e.lastLimboFreeSnapshotVersion);let i;i=Df(e.target)?mN(t.ct,e.target):gN(t.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:vo(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function TN(t){const e=yN({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Lf(e,e.limit,"L"):e}function Lg(t,e){return new Yw(e.largestBatchId,zv(t.ct,e.overlayMutation))}function p1(t,e){const n=e.path.lastSegment();return[t,Jt(e.path.popLast()),n]}function m1(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:xo(r.readTime),documentKey:Jt(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n9{getBundleMetadata(e,n){return g1(e).get(n).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:Eo(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,n){return g1(e).put(function(i){return{bundleId:i.id,createTime:xo(Zt(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return y1(e).get(n).next(r=>{if(r)return function(s){return{name:s.name,query:TN(s.bundledQuery),readTime:Eo(s.readTime)}}(r)})}saveNamedQuery(e,n){return y1(e).put(function(i){return{name:i.name,readTime:xo(Zt(i.readTime)),bundledQuery:i.bundledQuery}}(n))}}function g1(t){return _t(t,"bundles")}function y1(t){return _t(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){const r=n.uid||"";return new Kp(e,r)}getOverlay(e,n){return nc(e).get(p1(this.userId,n)).next(r=>r?Lg(this.serializer,r):null)}getOverlays(e,n){const r=Er();return M.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const a=new Yw(n,o);i.push(this.ht(e,a))}),M.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(Jt(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(nc(e).j("collectionPathOverlayIndex",a))}),M.waitFor(s)}getOverlaysForCollection(e,n,r){const i=Er(),s=Jt(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return nc(e).U("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const c=Lg(this.serializer,l);i.set(c.getKey(),c)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=Er();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return nc(e).J({index:"collectionGroupOverlayIndex",range:a},(l,c,u)=>{const h=Lg(this.serializer,c);s.size()<i||h.largestBatchId===o?(s.set(h.getKey(),h),o=h.largestBatchId):u.done()}).next(()=>s)}ht(e,n){return nc(e).put(function(i,s,o){const[a,l,c]=p1(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Mf(i.ct,o.mutation)}}(this.serializer,this.userId,n))}}function nc(t){return _t(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r9{Pt(e){return _t(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?ct.fromUint8Array(r):ct.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.Pt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(Be(e.integerValue));else if("doubleValue"in e){const r=Be(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),wu(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=li(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(as(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?Ok(e)?this.dt(n,Number.MAX_SAFE_INTEGER):Wp(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):ee()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){const r=e.fields||{};this.dt(n,55);for(const i of Object.keys(r))this.Vt(i,n),this.Tt(r[i],n)}wt(e,n){var r,i;const s=e.fields||{};this.dt(n,53);const o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(n,15),n.At(Be(a)),this.Vt(o,n),this.Tt(s[o],n)}bt(e,n){const r=e.values||[];this.dt(n,50);for(const i of r)this.Tt(i,n)}yt(e,n){this.dt(n,37),X.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}}qs.vt=new qs;function i9(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function v1(t){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=i9(255&r[s]);if(i+=o,o!==8)break}return i}(t);return Math.ceil(e/8)}class s9{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ot(r.value),r=n.next();this.Nt()}Lt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=n.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const i=n.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){const n=this.qt(e),r=v1(n);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}Kt(e){const n=this.qt(e),r=v1(n);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const n=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ft(e){const n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(n)}Ot(e){const n=255&e;n===0?(this.Gt(0),this.Gt(255)):n===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class o9{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class a9{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class rc{constructor(){this.jt=new s9,this.Ht=new o9(this.jt),this.Jt=new a9(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Zt(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Hs(this.indexId,this.documentKey,this.arrayValue,r)}}function bi(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=w1(t.arrayValue,e.arrayValue),n!==0?n:(n=w1(t.directionalValue,e.directionalValue),n!==0?n:X.comparator(t.documentKey,e.documentKey)))}function w1(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{constructor(e){this.Xt=new Ne((n,r)=>He.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const n of e.filters){const r=n;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(ne(e.collectionGroup===this.collectionId),this.nn)return!1;const n=Nv(e);if(n!==void 0&&!this.sn(n))return!1;const r=Ms(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.sn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Xt.size>0){const a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const l=r[s];if(!this.on(a,l)||!this._n(this.en[o++],l))return!1}++s}for(;s<r.length;++s){const a=r[s];if(o>=this.en.length||!this._n(this.en[o++],a))return!1}return!0}an(){if(this.nn)return null;let e=new Ne(He.comparator);const n=[];for(const r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new jh(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new jh(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new jh(r.field,r.dir==="asc"?0:1)));return new Nf(Nf.UNKNOWN_ID,this.collectionId,n,vu.empty())}sn(e){for(const n of this.tn)if(this.on(n,e))return!0;return!1}on(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}_n(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bN(t){var e,n;if(ne(t instanceof _e||t instanceof Ae),t instanceof _e){if(t instanceof zk){const i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(s=>_e.create(t.field,"==",s)))||[];return Ae.create(i,"or")}return t}const r=t.filters.map(i=>bN(i));return Ae.create(r,t.op)}function l9(t){if(t.getFilters().length===0)return[];const e=Hv(bN(t));return ne(SN(e)),Wv(e)||qv(e)?[e]:e.getFilters()}function Wv(t){return t instanceof _e}function qv(t){return t instanceof Ae&&qw(t)}function SN(t){return Wv(t)||qv(t)||function(n){if(n instanceof Ae&&Vv(n)){for(const r of n.getFilters())if(!Wv(r)&&!qv(r))return!1;return!0}return!1}(t)}function Hv(t){if(ne(t instanceof _e||t instanceof Ae),t instanceof _e)return t;if(t.filters.length===1)return Hv(t.filters[0]);const e=t.filters.map(r=>Hv(r));let n=Ae.create(e,t.op);return n=Ff(n),SN(n)?n:(ne(n instanceof Ae),ne(ol(n)),ne(n.filters.length>1),n.filters.reduce((r,i)=>Zw(r,i)))}function Zw(t,e){let n;return ne(t instanceof _e||t instanceof Ae),ne(e instanceof _e||e instanceof Ae),n=t instanceof _e?e instanceof _e?function(i,s){return Ae.create([i,s],"and")}(t,e):x1(t,e):e instanceof _e?x1(e,t):function(i,s){if(ne(i.filters.length>0&&s.filters.length>0),ol(i)&&ol(s))return Uk(i,s.getFilters());const o=Vv(i)?i:s,a=Vv(i)?s:i,l=o.filters.map(c=>Zw(c,a));return Ae.create(l,"or")}(t,e),Ff(n)}function x1(t,e){if(ol(e))return Uk(e,t.getFilters());{const n=e.filters.map(r=>Zw(t,r));return Ae.create(n,"or")}}function Ff(t){if(ne(t instanceof _e||t instanceof Ae),t instanceof _e)return t;const e=t.getFilters();if(e.length===1)return Ff(e[0]);if(jk(t))return t;const n=e.map(i=>Ff(i)),r=[];return n.forEach(i=>{i instanceof _e?r.push(i):i instanceof Ae&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Ae.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c9{constructor(){this.un=new e_}addToCollectionParentIndex(e,n){return this.un.add(n),M.resolve()}getCollectionParents(e,n){return M.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return M.resolve()}deleteFieldIndex(e,n){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,n){return M.resolve()}getDocumentsMatchingTarget(e,n){return M.resolve(null)}getIndexType(e,n){return M.resolve(0)}getFieldIndexes(e,n){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,n){return M.resolve(Pn.min())}getMinOffsetFromCollectionGroup(e,n){return M.resolve(Pn.min())}updateCollectionGroup(e,n,r){return M.resolve()}updateIndexEntries(e,n){return M.resolve()}}class e_{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ne(Ie.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ne(Ie.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sh=new Uint8Array(0);class u9{constructor(e,n){this.databaseId=n,this.cn=new e_,this.ln=new Ts(r=>vo(r),(r,i)=>Ju(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.cn.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.cn.add(n)});const s={collectionId:r,parent:Jt(i)};return E1(e).put(s)}return M.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[xk(n),""],!1,!0);return E1(e).U(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(xr(o.parent))}return r})}addFieldIndex(e,n){const r=ic(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete i.indexId;const s=r.add(i);if(n.indexState){const o=na(e);return s.next(a=>{o.put(m1(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=ic(e),i=na(e),s=ta(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=ic(e),r=ta(e),i=na(e);return n.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,n){return M.forEach(this.hn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const s=new _1(r).an();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const r=ta(e);let i=!0;const s=new Map;return M.forEach(this.hn(n),o=>this.Pn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=pe();const a=[];return M.forEach(s,(l,c)=>{$("IndexedDbIndexManager",`Using index ${function(b){return`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(C=>`${C.fieldPath}:${C.kind}`).join(",")}`}(l)} to execute ${vo(n)}`);const u=function(b,C){const N=Nv(C);if(N===void 0)return null;for(const D of Of(b,N.fieldPath))switch(D.op){case"array-contains-any":return D.value.arrayValue.values||[];case"array-contains":return[D.value]}return null}(c,l),h=function(b,C){const N=new Map;for(const D of Ms(C))for(const I of Of(b,D.fieldPath))switch(I.op){case"==":case"in":N.set(D.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return N.set(D.fieldPath.canonicalString(),I.value),Array.from(N.values())}return null}(c,l),f=function(b,C){const N=[];let D=!0;for(const I of Ms(C)){const S=I.kind===0?e1(b,I.fieldPath,b.startAt):t1(b,I.fieldPath,b.startAt);N.push(S.value),D&&(D=S.inclusive)}return new sl(N,D)}(c,l),p=function(b,C){const N=[];let D=!0;for(const I of Ms(C)){const S=I.kind===0?t1(b,I.fieldPath,b.endAt):e1(b,I.fieldPath,b.endAt);N.push(S.value),D&&(D=S.inclusive)}return new sl(N,D)}(c,l),g=this.In(l,c,f),v=this.In(l,c,p),w=this.Tn(l,c,h),E=this.En(l.indexId,u,g,f.inclusive,v,p.inclusive,w);return M.forEach(E,x=>r.G(x,n.limit).next(b=>{b.forEach(C=>{const N=X.fromSegments(C.documentKey);o.has(N)||(o=o.add(N),a.push(N))})}))}).next(()=>a)}return M.resolve(null)})}hn(e){let n=this.ln.get(e);return n||(e.filters.length===0?n=[e]:n=l9(Ae.create(e.filters,"and")).map(r=>jv(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,n),n)}En(e,n,r,i,s,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,s.length),c=l/(n!=null?n.length:1),u=[];for(let h=0;h<l;++h){const f=n?this.dn(n[h/c]):sh,p=this.An(e,f,r[h%c],i),g=this.Rn(e,f,s[h%c],o),v=a.map(w=>this.An(e,f,w,!0));u.push(...this.createRange(p,g,v))}return u}An(e,n,r,i){const s=new Hs(e,X.empty(),n,r);return i?s:s.Zt()}Rn(e,n,r,i){const s=new Hs(e,X.empty(),n,r);return i?s.Zt():s}Pn(e,n){const r=new _1(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.rn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const i=this.hn(n);return M.forEach(i,s=>this.Pn(e,s).next(o=>{o?r!==0&&o.fields.length<function(l){let c=new Ne(He.comparator),u=!1;for(const h of l.filters)for(const f of h.getFlattenedFilters())f.field.isKeyField()||(f.op==="array-contains"||f.op==="array-contains-any"?u=!0:c=c.add(f.field));for(const h of l.orderBy)h.field.isKeyField()||(c=c.add(h.field));return c.size+(u?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&i.length>1&&r===2?1:r)}Vn(e,n){const r=new rc;for(const i of Ms(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const o=r.Yt(i.kind);qs.vt.It(s,o)}return r.zt()}dn(e){const n=new rc;return qs.vt.It(e,n.Yt(0)),n.zt()}mn(e,n){const r=new rc;return qs.vt.It(Eu(this.databaseId,n),r.Yt(function(s){const o=Ms(s);return o.length===0?0:o[o.length-1].kind}(e))),r.zt()}Tn(e,n,r){if(r===null)return[];let i=[];i.push(new rc);let s=0;for(const o of Ms(e)){const a=r[s++];for(const l of i)if(this.fn(n,o.fieldPath)&&Tu(a))i=this.gn(i,o,a);else{const c=l.Yt(o.kind);qs.vt.It(a,c)}}return this.pn(i)}In(e,n,r){return this.Tn(e,n,r.position)}pn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].zt();return n}gn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const l=new rc;l.seed(a.zt()),qs.vt.It(o,l.Yt(n.kind)),s.push(l)}return s}fn(e,n){return!!e.filters.find(r=>r instanceof _e&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=ic(e),i=na(e);return(n?r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.U()).next(s=>{const o=[];return M.forEach(s,a=>i.get([a.indexId,this.uid]).next(l=>{o.push(function(u,h){const f=h?new vu(h.sequenceNumber,new Pn(Eo(h.readTime),new X(xr(h.documentKey)),h.largestBatchId)):vu.empty(),p=u.fields.map(([g,v])=>new jh(He.fromServerFormat(g),v));return new Nf(u.indexId,u.collectionGroup,p,f)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:he(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=ic(e),s=na(e);return this.yn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>M.forEach(a,l=>s.put(m1(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return M.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?M.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),M.forEach(a,l=>this.wn(e,i,l).next(c=>{const u=this.Sn(s,l);return c.isEqual(u)?M.resolve():this.bn(e,s,l,c,u)}))))})}Dn(e,n,r,i){return ta(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,n.key),documentKey:n.key.path.toArray()})}vn(e,n,r,i){return ta(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,n.key),n.key.path.toArray()])}wn(e,n,r){const i=ta(e);let s=new Ne(bi);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,n)])},(o,a)=>{s=s.add(new Hs(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}Sn(e,n){let r=new Ne(bi);const i=this.Vn(n,e);if(i==null)return r;const s=Nv(n);if(s!=null){const o=e.data.field(s.fieldPath);if(Tu(o))for(const a of o.arrayValue.values||[])r=r.add(new Hs(n.indexId,e.key,this.dn(a),i))}else r=r.add(new Hs(n.indexId,e.key,sh,i));return r}bn(e,n,r,i,s){$("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(l,c,u,h,f){const p=l.getIterator(),g=c.getIterator();let v=ea(p),w=ea(g);for(;v||w;){let E=!1,x=!1;if(v&&w){const b=u(v,w);b<0?x=!0:b>0&&(E=!0)}else v!=null?x=!0:E=!0;E?(h(w),w=ea(g)):x?(f(v),v=ea(p)):(v=ea(p),w=ea(g))}}(i,s,bi,a=>{o.push(this.Dn(e,n,r,a))},a=>{o.push(this.vn(e,n,r,a))}),M.waitFor(o)}yn(e){let n=1;return na(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>bi(o,a)).filter((o,a,l)=>!a||bi(o,l[a-1])!==0);const i=[];i.push(e);for(const o of r){const a=bi(o,e),l=bi(o,n);if(a===0)i[0]=e.Zt();else if(a>0&&l<0)i.push(o),i.push(o.Zt());else if(l>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.Cn(i[o],i[o+1]))return[];const a=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,sh,[]],l=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,sh,[]];s.push(IDBKeyRange.bound(a,l))}return s}Cn(e,n){return bi(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(T1)}getMinOffset(e,n){return M.mapArray(this.hn(n),r=>this.Pn(e,r).next(i=>i||ee())).next(T1)}}function E1(t){return _t(t,"collectionParents")}function ta(t){return _t(t,"indexEntries")}function ic(t){return _t(t,"indexConfiguration")}function na(t){return _t(t,"indexState")}function T1(t){ne(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;Uw(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Pn(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class sn{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new sn(e,sn.DEFAULT_COLLECTION_PERCENTILE,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IN(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.J({range:o},(u,h,f)=>(a++,f.delete()));s.push(l.next(()=>{ne(a===1)}));const c=[];for(const u of n.mutations){const h=Pk(e,u.key.path,n.batchId);s.push(i.delete(h)),c.push(u.key)}return M.waitFor(s).next(()=>c)}function Uf(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ee();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */sn.DEFAULT_COLLECTION_PERCENTILE=10,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,sn.DEFAULT=new sn(41943040,sn.DEFAULT_COLLECTION_PERCENTILE,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),sn.DISABLED=new sn(-1,0,0);class Qp{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,n,r,i){ne(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new Qp(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Si(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=ga(e),o=Si(e);return o.add({}).next(a=>{ne(typeof a=="number");const l=new Kw(a,n,r,i),c=function(p,g,v){const w=v.baseMutations.map(x=>Mf(p.ct,x)),E=v.mutations.map(x=>Mf(p.ct,x));return{userId:g,batchId:v.batchId,localWriteTimeMs:v.localWriteTime.toMillis(),baseMutations:w,mutations:E}}(this.serializer,this.userId,l),u=[];let h=new Ne((f,p)=>he(f.canonicalString(),p.canonicalString()));for(const f of i){const p=Pk(this.userId,f.key.path,a);h=h.add(f.key.path.popLast()),u.push(o.put(c)),u.push(s.put(p,Qz))}return h.forEach(f=>{u.push(this.indexManager.addToCollectionParentIndex(e,f))}),e.addOnCommittedListener(()=>{this.Fn[a]=l.keys()}),M.waitFor(u).next(()=>l)})}lookupMutationBatch(e,n){return Si(e).get(n).next(r=>r?(ne(r.userId===this.userId),Ws(this.serializer,r)):null)}Mn(e,n){return this.Fn[n]?M.resolve(this.Fn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Fn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Si(e).J({index:"userMutationsIndex",range:i},(o,a,l)=>{a.userId===this.userId&&(ne(a.batchId>=r),s=Ws(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Si(e).J({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Si(e).U("userMutationsIndex",n).next(r=>r.map(i=>Ws(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Fh(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return ga(e).J({range:i},(o,a,l)=>{const[c,u,h]=o,f=xr(u);if(c===this.userId&&n.path.isEqual(f))return Si(e).get(h).next(p=>{if(!p)throw ee();ne(p.userId===this.userId),s.push(Ws(this.serializer,p))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ne(he);const i=[];return n.forEach(s=>{const o=Fh(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=ga(e).J({range:a},(c,u,h)=>{const[f,p,g]=c,v=xr(p);f===this.userId&&s.path.isEqual(v)?r=r.add(g):h.done()});i.push(l)}),M.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=Fh(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new Ne(he);return ga(e).J({range:o},(l,c,u)=>{const[h,f,p]=l,g=xr(f);h===this.userId&&r.isPrefixOf(g)?g.length===i&&(a=a.add(p)):u.done()}).next(()=>this.xn(e,a))}xn(e,n){const r=[],i=[];return n.forEach(s=>{i.push(Si(e).get(s).next(o=>{if(o===null)throw ee();ne(o.userId===this.userId),r.push(Ws(this.serializer,o))}))}),M.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return IN(e._e,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.On(n.batchId)}),M.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return M.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return ga(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){const l=xr(s[1]);i.push(l)}else a.done()}).next(()=>{ne(i.length===0)})})}containsKey(e,n){return CN(e,this.userId,n)}Nn(e){return PN(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function CN(t,e,n){const r=Fh(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return ga(t).J({range:s,H:!0},(a,l,c)=>{const[u,h,f]=a;u===e&&h===i&&(o=!0),c.done()}).next(()=>o)}function Si(t){return _t(t,"mutations")}function ga(t){return _t(t,"documentMutations")}function PN(t){return _t(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new To(0)}static kn(){return new To(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d9{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.qn(e).next(n=>{const r=new To(n.highestTargetId);return n.highestTargetId=r.next(),this.Qn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(n=>se.fromTimestamp(new Qe(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.Qn(e,i)))}addTargetData(e,n){return this.Kn(e,n).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(n,r),this.Qn(e,r))))}updateTargetData(e,n){return this.Kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>ra(e).delete(n.targetId)).next(()=>this.qn(e)).next(r=>(ne(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return ra(e).J((o,a)=>{const l=Tc(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(e,l)))}).next(()=>M.waitFor(s)).next(()=>i)}forEachTarget(e,n){return ra(e).J((r,i)=>{const s=Tc(i);n(s)})}qn(e){return S1(e).get("targetGlobalKey").next(n=>(ne(n!==null),n))}Qn(e,n){return S1(e).put("targetGlobalKey",n)}Kn(e,n){return ra(e).put(EN(this.serializer,n))}$n(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=vo(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return ra(e).J({range:i,index:"queryTargetsIndex"},(o,a,l)=>{const c=Tc(a);Ju(n,c.target)&&(s=c,l.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=Mi(e);return n.forEach(o=>{const a=Jt(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),M.waitFor(i)}removeMatchingKeys(e,n,r){const i=Mi(e);return M.forEach(n,s=>{const o=Jt(s.path);return M.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=Mi(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Mi(e);let s=pe();return i.J({range:r,H:!0},(o,a,l)=>{const c=xr(o[1]),u=new X(c);s=s.add(u)}).next(()=>s)}containsKey(e,n){const r=Jt(n.path),i=IDBKeyRange.bound([r],[xk(r)],!1,!0);let s=0;return Mi(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],l,c)=>{o!==0&&(s++,c.done())}).next(()=>s>0)}ot(e,n){return ra(e).get(n).next(r=>r?Tc(r):null)}}function ra(t){return _t(t,"targets")}function S1(t){return _t(t,"targetGlobal")}function Mi(t){return _t(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I1([t,e],[n,r]){const i=he(t,n);return i===0?he(e,r):i}class h9{constructor(e){this.Un=e,this.buffer=new Ne(I1),this.Wn=0}Gn(){return++this.Wn}zn(e){const n=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();I1(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class f9{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){$("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Es(n)?$("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await xs(n)}await this.Hn(3e5)})}}class p9{constructor(e,n){this.Jn=e,this.params=n}calculateTargetCount(e,n){return this.Jn.Yn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return M.resolve(ln.oe);const r=new h9(n);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?($("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(b1)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?($("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),b1):this.Xn(e,n))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,n){let r,i,s,o,a,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?($("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,o=Date.now(),this.nthSequenceNumber(e,i))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(s=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(c=Date.now(),ha()<=we.DEBUG&&$("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(c-l)+`ms
Total Duration: ${c-u}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:h})))}}function m9(t,e){return new p9(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g9{constructor(e,n){this.db=e,this.garbageCollector=m9(this,n)}Yn(e){const n=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}er(e){let n=0;return this.Zn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Zn(e,n){return this.tr(e,(r,i)=>n(i))}addReference(e,n,r){return oh(e,r)}removeReference(e,n,r){return oh(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return oh(e,n)}nr(e,n){return function(i,s){let o=!1;return PN(i).Y(a=>CN(i,a,s).next(l=>(l&&(o=!0),M.resolve(!l)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.tr(e,(o,a)=>{if(a<=n){const l=this.nr(e,o).next(c=>{if(!c)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,se.min()),Mi(e).delete(function(h){return[0,Jt(h.path)]}(o))))});i.push(l)}}).next(()=>M.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return oh(e,n)}tr(e,n){const r=Mi(e);let i,s=ln.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:c})=>{o===0?(s!==ln.oe&&n(new X(xr(i)),s),s=c,i=l):s=ln.oe}).next(()=>{s!==ln.oe&&n(new X(xr(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function oh(t,e){return Mi(t).put(function(r,i){return{targetId:0,path:Jt(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(){this.changes=new Ts(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,tt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?M.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y9{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Ns(e).put(r)}removeEntry(e,n,r){return Ns(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],jf(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.rr(e,r)))}getEntry(e,n){let r=tt.newInvalidDocument(n);return Ns(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(sc(n))},(i,s)=>{r=this.ir(n,s)}).next(()=>r)}sr(e,n){let r={size:0,document:tt.newInvalidDocument(n)};return Ns(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(sc(n))},(i,s)=>{r={document:this.ir(n,s),size:Uf(s)}}).next(()=>r)}getEntries(e,n){let r=_n();return this._r(e,n,(i,s)=>{const o=this.ir(i,s);r=r.insert(i,o)}).next(()=>r)}ar(e,n){let r=_n(),i=new Me(X.comparator);return this._r(e,n,(s,o)=>{const a=this.ir(s,o);r=r.insert(s,a),i=i.insert(s,Uf(o))}).next(()=>({documents:r,ur:i}))}_r(e,n,r){if(n.isEmpty())return M.resolve();let i=new Ne(A1);n.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(sc(i.first()),sc(i.last())),o=i.getIterator();let a=o.getNext();return Ns(e).J({index:"documentKeyIndex",range:s},(l,c,u)=>{const h=X.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&A1(a,h)<0;)r(a,null),a=o.getNext();a&&a.isEqual(h)&&(r(a,c),a=o.hasNext()?o.getNext():null),a?u.$(sc(a)):u.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),jf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ns(e).U(IDBKeyRange.bound(a,l,!0)).next(c=>{s==null||s.incrementDocumentReadCount(c.length);let u=_n();for(const h of c){const f=this.ir(X.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);f.isFoundDocument()&&(ed(n,f)||i.has(f.key))&&(u=u.insert(f.key,f))}return u})}getAllFromCollectionGroup(e,n,r,i){let s=_n();const o=P1(n,r),a=P1(n,Pn.max());return Ns(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,c,u)=>{const h=this.ir(X.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(h.key,h),s.size===i&&u.done()}).next(()=>s)}newChangeBuffer(e){return new v9(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return C1(e).get("remoteDocumentGlobalKey").next(n=>(ne(!!n),n))}rr(e,n){return C1(e).put("remoteDocumentGlobalKey",n)}ir(e,n){if(n){const r=t9(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(se.min())))return r}return tt.newInvalidDocument(e)}}function RN(t){return new y9(t)}class v9 extends AN{constructor(e,n){super(),this.cr=e,this.trackRemovals=n,this.lr=new Ts(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new Ne((s,o)=>he(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.lr.get(s);if(n.push(this.cr.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=f1(this.cr.serializer,o);i=i.add(s.path.popLast());const c=Uf(l);r+=c-a.size,n.push(this.cr.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){const l=f1(this.cr.serializer,o.convertToNoDocument(se.min()));n.push(this.cr.addEntry(e,s,l))}}),i.forEach(s=>{n.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.cr.updateMetadata(e,r)),M.waitFor(n)}getFromCache(e,n){return this.cr.sr(e,n).next(r=>(this.lr.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.cr.ar(e,n).next(({documents:r,ur:i})=>(i.forEach((s,o)=>{this.lr.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function C1(t){return _t(t,"remoteDocumentGlobal")}function Ns(t){return _t(t,"remoteDocumentsV14")}function sc(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function P1(t,e){const n=e.documentKey.path.toArray();return[t,jf(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function A1(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=he(n[s],r[s]),i)return i;return i=he(n.length,r.length),i||(i=he(n[n.length-2],r[r.length-2]),i||he(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w9{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Uc(r.mutation,i,cn.empty(),Qe.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,pe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=pe()){const i=Er();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=xc();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Er();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,pe()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=_n();const o=Fc(),a=function(){return Fc()}();return n.forEach((l,c)=>{const u=r.get(c.key);i.has(c.key)&&(u===void 0||u.mutation instanceof mi)?s=s.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),Uc(u.mutation,c,u.mutation.getFieldMask(),Qe.now())):o.set(c.key,cn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var h;return a.set(c,new w9(u,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Fc();let i=new Me((o,a)=>o-a),s=pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=r.get(l)||cn.empty();u=a.applyToLocalView(c,u),r.set(l,u);const h=(i.get(a.batchId)||pe()).add(l);i=i.insert(a.batchId,h)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,h=Xk();u.forEach(f=>{if(!s.has(f)){const p=iN(n.get(f),r.get(f));p!==null&&h.set(f,p),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return M.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return X.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):qk(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):M.resolve(Er());let a=-1,l=s;return o.next(c=>M.forEach(c,(u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(u)?M.resolve():this.remoteDocumentCache.getEntry(e,u).next(f=>{l=l.insert(u,f)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,pe())).next(u=>({batchId:a,changes:Yk(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new X(n)).next(r=>{let i=xc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=xc();return this.indexManager.getCollectionParents(e,s).next(a=>M.forEach(a,l=>{const c=function(h,f){return new Sl(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(u=>{u.forEach((h,f)=>{o=o.insert(h,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,tt.newInvalidDocument(u)))});let a=xc();return o.forEach((l,c)=>{const u=s.get(l);u!==void 0&&Uc(u.mutation,c,cn.empty(),Qe.now()),ed(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _9{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return M.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Zt(i.createTime)}}(n)),M.resolve()}getNamedQuery(e,n){return M.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:TN(i.bundledQuery),readTime:Zt(i.readTime)}}(n)),M.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x9{constructor(){this.overlays=new Me(X.comparator),this.Ir=new Map}getOverlay(e,n){return M.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Er();return M.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),M.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),M.resolve()}getOverlaysForCollection(e,n,r){const i=Er(),s=n.length+1,o=new X(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return M.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Me((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let u=s.get(c.largestBatchId);u===null&&(u=Er(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=Er(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=i)););return M.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Yw(n,r));let s=this.Ir.get(n);s===void 0&&(s=pe(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E9{constructor(){this.sessionToken=ct.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,M.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_{constructor(){this.Tr=new Ne(xt.Er),this.dr=new Ne(xt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new xt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new xt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new X(new Ie([])),r=new xt(n,e),i=new xt(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new X(new Ie([])),r=new xt(n,e),i=new xt(n,e+1);let s=pe();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new xt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class xt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return X.comparator(e.key,n.key)||he(e.wr,n.wr)}static Ar(e,n){return he(e.wr,n.wr)||X.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T9{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Ne(xt.Er)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Kw(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new xt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return M.resolve(o)}lookupMutationBatch(e,n){return M.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return M.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new xt(n,0),i=new xt(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),M.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ne(he);return n.forEach(i=>{const s=new xt(i,0),o=new xt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),M.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;X.isDocumentKey(s)||(s=s.child(""));const o=new xt(new X(s),0);let a=new Ne(he);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.wr)),!0)},o),M.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ne(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return M.forEach(n.mutations,i=>{const s=new xt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new xt(n,0),i=this.br.firstAfterOrEqual(r);return M.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b9{constructor(e){this.Mr=e,this.docs=function(){return new Me(X.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return M.resolve(r?r.document.mutableCopy():tt.newInvalidDocument(n))}getEntries(e,n){let r=_n();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():tt.newInvalidDocument(i))}),M.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=_n();const o=n.path,a=new X(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||Uw(Tk(u),r)<=0||(i.has(u.key)||ed(n,u))&&(s=s.insert(u.key,u.mutableCopy()))}return M.resolve(s)}getAllFromCollectionGroup(e,n,r,i){ee()}Or(e,n){return M.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new S9(this)}getSize(e){return M.resolve(this.size)}}class S9 extends AN{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),M.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I9{constructor(e){this.persistence=e,this.Nr=new Ts(n=>vo(n),Ju),this.lastRemoteSnapshotVersion=se.min(),this.highestTargetId=0,this.Lr=0,this.Br=new t_,this.targetCount=0,this.kr=To.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),M.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new To(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,M.resolve()}updateTargetData(e,n){return this.Kn(n),M.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),M.waitFor(s).next(()=>i)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return M.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),M.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),M.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),M.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return M.resolve(r)}containsKey(e,n){return M.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(e,n){this.qr={},this.overlays={},this.Qr=new ln(0),this.Kr=!1,this.Kr=!0,this.$r=new E9,this.referenceDelegate=e(this),this.Ur=new I9(this),this.indexManager=new c9,this.remoteDocumentCache=function(i){return new b9(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new xN(n),this.Gr=new _9(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new x9,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new T9(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){$("MemoryPersistence","Starting transaction:",e);const i=new C9(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return M.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class C9 extends Sk{constructor(e){super(),this.currentSequenceNumber=e}}class Yp{constructor(e){this.persistence=e,this.Jr=new t_,this.Yr=null}static Zr(e){return new Yp(e)}get Xr(){if(this.Yr)return this.Yr;throw ee()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),M.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),M.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.Xr,r=>{const i=X.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,se.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return M.or([()=>M.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P9{constructor(e){this.serializer=e}O(e,n,r,i){const s=new Bp("createOrUpgrade",n);r<1&&i>=1&&(function(l){l.createObjectStore("owner")}(e),function(l){l.createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",zb,{unique:!0}),l.createObjectStore("documentMutations")}(e),R1(e),function(l){l.createObjectStore("remoteDocuments")}(e));let o=M.resolve();return r<3&&i>=3&&(r!==0&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),R1(e)),o=o.next(()=>function(l){const c=l.store("targetGlobal"),u={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:se.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",u)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(l,c){return c.store("mutations").U().next(u=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",zb,{unique:!0});const h=c.store("mutations"),f=u.map(p=>h.put(p));return M.waitFor(f)})}(e,s))),o=o.next(()=>{(function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.ni(s))),r<6&&i>=6&&(o=o.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),r<7&&i>=7&&(o=o.next(()=>this.ii(s))),r<8&&i>=8&&(o=o.next(()=>this.si(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.oi(s))),r<11&&i>=11&&(o=o.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(l){const c=l.createObjectStore("documentOverlays",{keyPath:a6});c.createIndex("collectionPathOverlayIndex",l6,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",c6,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(l){const c=l.createObjectStore("remoteDocumentsV14",{keyPath:Yz});c.createIndex("documentKeyIndex",Xz),c.createIndex("collectionGroupIndex",Jz)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ai(e,s))),r<15&&i>=15&&(o=o.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:r6}).createIndex("sequenceNumberIndex",i6,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:s6}).createIndex("documentKeyIndex",o6,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),r<17&&i>=17&&(o=o.next(()=>{(function(l){l.createObjectStore("globals",{keyPath:"name"})})(e)})),o}ri(e){let n=0;return e.store("remoteDocuments").J((r,i)=>{n+=Uf(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next(i=>M.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>M.forEach(a,l=>{ne(l.userId===s.userId);const c=Ws(this.serializer,l);return IN(e,s.userId,c).next(()=>{})}))}))}ii(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((o,a)=>{const l=new Ie(o),c=function(h){return[0,Jt(h)]}(l);s.push(n.get(c).next(u=>u?M.resolve():(h=>n.put({targetId:0,path:Jt(h),sequenceNumber:i.highestListenSequenceNumber}))(l)))}).next(()=>M.waitFor(s))})}si(e,n){e.createObjectStore("collectionParents",{keyPath:n6});const r=n.store("collectionParents"),i=new e_,s=o=>{if(i.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:Jt(l)})}};return n.store("remoteDocuments").J({H:!0},(o,a)=>{const l=new Ie(o);return s(l.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([o,a,l],c)=>{const u=xr(a);return s(u.popLast())}))}oi(e){const n=e.store("targets");return n.J((r,i)=>{const s=Tc(i),o=EN(this.serializer,s);return n.put(o)})}_i(e,n){const r=n.store("remoteDocuments"),i=[];return r.J((s,o)=>{const a=n.store("remoteDocumentsV14"),l=function(h){return h.document?new X(Ie.fromString(h.document.name).popFirst(5)):h.noDocument?X.fromSegments(h.noDocument.path):h.unknownDocument?X.fromSegments(h.unknownDocument.path):ee()}(o).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(c))}).next(()=>M.waitFor(i))}ai(e,n){const r=n.store("mutations"),i=RN(this.serializer),s=new NN(Yp.Zr,this.serializer.ct);return r.U().next(o=>{const a=new Map;return o.forEach(l=>{var c;let u=(c=a.get(l.userId))!==null&&c!==void 0?c:pe();Ws(this.serializer,l).keys().forEach(h=>u=u.add(h)),a.set(l.userId,u)}),M.forEach(a,(l,c)=>{const u=new Tt(c),h=Kp.lt(this.serializer,u),f=s.getIndexManager(u),p=Qp.lt(u,this.serializer,f,s.referenceDelegate);return new kN(i,p,h,f).recalculateAndSaveOverlaysForDocumentKeys(new Dv(n,ln.oe),l).next()})})}}function R1(t){t.createObjectStore("targetDocuments",{keyPath:e6}).createIndex("documentTargetsIndex",t6,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Zz,{unique:!0}),t.createObjectStore("targetGlobal")}const Vg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class n_{constructor(e,n,r,i,s,o,a,l,c,u,h=17){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.ui=s,this.window=o,this.document=a,this.ci=c,this.li=u,this.hi=h,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=f=>Promise.resolve(),!n_.D())throw new H(U.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new g9(this,i),this.Ai=n+"main",this.serializer=new xN(l),this.Ri=new Zi(this.Ai,this.hi,new P9(this.serializer)),this.$r=new r9,this.Ur=new d9(this.referenceDelegate,this.serializer),this.remoteDocumentCache=RN(this.serializer),this.Gr=new n9,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,u===!1&&at("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new H(U.FAILED_PRECONDITION,Vg);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new ln(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>ah(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(n=>{n||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(n=>this.isPrimary&&!n?this.bi(e).next(()=>!1):!!n&&this.Di(e).next(()=>!0))).catch(e=>{if(Es(e))return $("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return $("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return oc(e).get("owner").next(n=>M.resolve(this.vi(n)))}Ci(e){return ah(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=_t(n,"clientMetadata");return r.U().next(i=>{const s=this.xi(i,18e5),o=i.filter(a=>s.indexOf(a)===-1);return M.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Vi)for(const n of e)this.Vi.removeItem(this.Oi(n.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?M.resolve(!0):oc(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)){if(this.vi(n)&&this.networkEnabled)return!0;if(!this.vi(n)){if(!n.allowTabSynchronization)throw new H(U.FAILED_PRECONDITION,Vg);return!1}}return!(!this.networkEnabled||!this.inForeground)||ah(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&$("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new Dv(e,ln.oe);return this.bi(n).next(()=>this.Ci(n))}),this.Ri.close(),this.qi()}xi(e,n){return e.filter(r=>this.Mi(r.updateTimeMs,n)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>ah(e).U().next(n=>this.xi(n,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,n){return Qp.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new u9(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Kp.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,n,r){$("IndexedDbPersistence","Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=function(l){return l===17?h6:l===16?d6:l===15?Bw:l===14?kk:l===13?Rk:l===12?u6:l===11?Ak:void ee()}(this.hi);let o;return this.Ri.runTransaction(e,i,s,a=>(o=new Dv(a,this.Qr?this.Qr.next():ln.oe),n==="readwrite-primary"?this.wi(o).next(l=>!!l||this.Si(o)).next(l=>{if(!l)throw at(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new H(U.FAILED_PRECONDITION,bk);return r(o)}).next(l=>this.Di(o).next(()=>l)):this.Ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ki(e){return oc(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)&&!this.vi(n)&&!(this.li||this.allowTabSynchronization&&n.allowTabSynchronization))throw new H(U.FAILED_PRECONDITION,Vg)})}Di(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return oc(e).put("owner",n)}static D(){return Zi.D()}bi(e){const n=oc(e);return n.get("owner").next(r=>this.vi(r)?($("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):M.resolve())}Mi(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(at(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const n=/(?:Version|Mobile)\/1[456]/;IR()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var n;try{const r=((n=this.Vi)===null||n===void 0?void 0:n.getItem(this.Oi(e)))!==null;return $("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return at("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){at("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function oc(t){return _t(t,"owner")}function ah(t){return _t(t,"clientMetadata")}function DN(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=pe(),i=pe();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new r_(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A9{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return IR()?8:Ik(vt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new A9;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(ha()<=we.DEBUG&&$("QueryEngine","SDK will not create cache indexes for query:",fa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),M.resolve()):(ha()<=we.DEBUG&&$("QueryEngine","Query:",fa(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(ha()<=we.DEBUG&&$("QueryEngine","The SDK decides to create cache indexes for query:",fa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,bn(n))):M.resolve())}Yi(e,n){if(n1(n))return M.resolve(null);let r=bn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Lf(n,null,"F"),r=bn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=pe(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(n,a);return this.ns(n,c,o,l.readTime)?this.Yi(e,Lf(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,r,i){return n1(n)||i.isEqual(se.min())?M.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?M.resolve(null):(ha()<=we.DEBUG&&$("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),fa(n)),this.rs(e,o,n,Ek(i,-1)).next(a=>a))})}ts(e,n){let r=new Ne(Kk(e));return n.forEach((i,s)=>{ed(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return ha()<=we.DEBUG&&$("QueryEngine","Using full collection scan to execute query:",fa(n)),this.Ji.getDocumentsMatchingQuery(e,n,Pn.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R9{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Me(he),this._s=new Ts(s=>vo(s),Ju),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new kN(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function LN(t,e,n,r){return new R9(t,e,n,r)}async function VN(t,e){const n=te(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=pe();for(const c of i){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function k9(t,e){const n=te(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const h=c.batch,f=h.keys();let p=M.resolve();return f.forEach(g=>{p=p.next(()=>u.getEntry(l,g)).next(v=>{const w=c.docVersions.get(g);ne(w!==null),v.version.compareTo(w)<0&&(h.applyToRemoteDocument(v,c),v.isValidDocument()&&(v.setReadTime(c.commitVersion),u.addEntry(v)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=pe();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function MN(t){const e=te(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function N9(t,e){const n=te(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((u,h)=>{const f=i.get(h);if(!f)return;a.push(n.Ur.removeMatchingKeys(s,u.removedDocuments,h).next(()=>n.Ur.addMatchingKeys(s,u.addedDocuments,h)));let p=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?p=p.withResumeToken(ct.EMPTY_BYTE_STRING,se.min()).withLastLimboFreeSnapshotVersion(se.min()):u.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(u.resumeToken,r)),i=i.insert(h,p),function(v,w,E){return v.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(f,p,u)&&a.push(n.Ur.updateTargetData(s,p))});let l=_n(),c=pe();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(D9(s,o,e.documentUpdates).next(u=>{l=u.Ps,c=u.Is})),!r.isEqual(se.min())){const u=n.Ur.getLastRemoteSnapshotVersion(s).next(h=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(u)}return M.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.os=i,s))}function D9(t,e,n){let r=pe(),i=pe();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=_n();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(se.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):$("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function O9(t,e){const n=te(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function $f(t,e){const n=te(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,M.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new Gr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function ul(t,e,n){const r=te(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Es(o))throw o;$("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function Gv(t,e,n){const r=te(t);let i=se.min(),s=pe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const h=te(l),f=h._s.get(u);return f!==void 0?M.resolve(h.os.get(f)):h.Ur.getTargetData(c,u)}(r,o,bn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:se.min(),n?s:pe())).next(a=>(UN(r,Gk(e),a),{documents:a,Ts:s})))}function jN(t,e){const n=te(t),r=te(n.Ur),i=n.os.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function FN(t,e){const n=te(t),r=n.us.get(e)||se.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.cs.getAllFromCollectionGroup(i,e,Ek(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(UN(n,e,i),i))}function UN(t,e,n){let r=t.us.get(e)||se.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}function k1(t,e){return`firestore_clients_${t}_${e}`}function N1(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Mg(t,e){return`firestore_targets_${t}_${e}`}class Bf{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Rs(e,n,r){const i=JSON.parse(r);let s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new H(i.error.code,i.error.message))),o?new Bf(e,n,i.state,s):(at("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class $c{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Rs(e,n){const r=JSON.parse(n);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new H(r.error.code,r.error.message))),s?new $c(e,r.state,i):(at("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class zf{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Rs(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=Hw();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=Ck(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new zf(e,s):(at("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class i_{constructor(e,n){this.clientId=e,this.onlineState=n}static Rs(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new i_(n.clientId,n.onlineState):(at("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Kv{constructor(){this.activeTargetIds=Hw()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class jg{constructor(e,n,r,i,s){this.window=e,this.ui=n,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Me(he),this.started=!1,this.bs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=k1(this.persistenceKey,this.ps),this.vs=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new Kv),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this.Os=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const r of e){if(r===this.ps)continue;const i=this.getItem(k1(this.persistenceKey,r));if(i){const s=zf.Rs(r,i);s&&(this.Ss=this.Ss.insert(s.clientId,s))}}this.Ns();const n=this.storage.getItem(this.xs);if(n){const r=this.Ls(n);r&&this.Bs(r)}for(const r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let n=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,n,r){this.qs(e,n,r),this.Qs(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(Mg(this.persistenceKey,e));if(i){const s=$c.Rs(e,i);s&&(r=s.state)}}return n&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Mg(this.persistenceKey,e))}updateQueryState(e,n,r){this.$s(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return $("SharedClientState","READ",e,n),n}setItem(e,n){$("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){$("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const n=e;if(n.storageArea===this.storage){if($("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ds)return void at("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.Cs.test(n.key)){if(n.newValue==null){const r=this.Gs(n.key);return this.zs(r,null)}{const r=this.js(n.key,n.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(n.key)){if(n.newValue!==null){const r=this.Hs(n.key,n.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(n.key)){if(n.newValue!==null){const r=this.Ys(n.key,n.newValue);if(r)return this.Zs(r)}}else if(n.key===this.xs){if(n.newValue!==null){const r=this.Ls(n.newValue);if(r)return this.Bs(r)}}else if(n.key===this.vs){const r=function(s){let o=ln.oe;if(s!=null)try{const a=JSON.parse(s);ne(typeof a=="number"),o=a}catch(a){at("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==ln.oe&&this.sequenceNumberHandler(r)}else if(n.key===this.Os){const r=this.Xs(n.newValue);await Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(n)})}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,n,r){const i=new Bf(this.currentUser,e,n,r),s=N1(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Vs())}Qs(e){const n=N1(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Us(e){const n={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(n))}$s(e,n,r){const i=Mg(this.persistenceKey,e),s=new $c(e,n,r);this.setItem(i,s.Vs())}Ws(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Os,n)}Gs(e){const n=this.Cs.exec(e);return n?n[1]:null}js(e,n){const r=this.Gs(e);return zf.Rs(r,n)}Hs(e,n){const r=this.Fs.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return Bf.Rs(new Tt(s),i,n)}Ys(e,n){const r=this.Ms.exec(e),i=Number(r[1]);return $c.Rs(i,n)}Ls(e){return i_.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);$("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,n){const r=n?this.Ss.insert(e,n):this.Ss.remove(e),i=this.ks(this.Ss),s=this.ks(r),o=[],a=[];return s.forEach(l=>{i.has(l)||o.push(l)}),i.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.io(o,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let n=Hw();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class $N{constructor(){this.so=new Kv,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Kv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L9{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){$("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){$("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lh=null;function Fg(){return lh===null?lh=function(){return 268435456+Math.round(2147483648*Math.random())}():lh++,"0x"+lh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V9={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M9{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lt="WebChannelConnection";class j9 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const a=Fg(),l=this.xo(n,r.toUriEncodedString());$("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(n,l,c,i).then(u=>($("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw os("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",l,"request:",i),u})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+bl}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=V9[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=Fg();return new Promise((o,a)=>{const l=new pk;l.setWithCredentials(!0),l.listenOnce(mk.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Mh.NO_ERROR:const u=l.getResponseJson();$(Lt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(u)),o(u);break;case Mh.TIMEOUT:$(Lt,`RPC '${e}' ${s} timed out`),a(new H(U.DEADLINE_EXCEEDED,"Request time out"));break;case Mh.HTTP_ERROR:const h=l.getStatus();if($(Lt,`RPC '${e}' ${s} failed with status:`,h,"response text:",l.getResponseText()),h>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const p=f==null?void 0:f.error;if(p&&p.status&&p.message){const g=function(w){const E=w.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(E)>=0?E:U.UNKNOWN}(p.status);a(new H(g,p.message))}else a(new H(U.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new H(U.UNAVAILABLE,"Connection failed."));break;default:ee()}}finally{$(Lt,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);$(Lt,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",c,r,15)})}Bo(e,n,r){const i=Fg(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=vk(),a=yk(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=s.join("");$(Lt,`Creating RPC '${e}' stream ${i}: ${u}`,l);const h=o.createWebChannel(u,l);let f=!1,p=!1;const g=new M9({Io:w=>{p?$(Lt,`Not sending because RPC '${e}' stream ${i} is closed:`,w):(f||($(Lt,`Opening RPC '${e}' stream ${i} transport.`),h.open(),f=!0),$(Lt,`RPC '${e}' stream ${i} sending:`,w),h.send(w))},To:()=>h.close()}),v=(w,E,x)=>{w.listen(E,b=>{try{x(b)}catch(C){setTimeout(()=>{throw C},0)}})};return v(h,_c.EventType.OPEN,()=>{p||($(Lt,`RPC '${e}' stream ${i} transport opened.`),g.yo())}),v(h,_c.EventType.CLOSE,()=>{p||(p=!0,$(Lt,`RPC '${e}' stream ${i} transport closed`),g.So())}),v(h,_c.EventType.ERROR,w=>{p||(p=!0,os(Lt,`RPC '${e}' stream ${i} transport errored:`,w),g.So(new H(U.UNAVAILABLE,"The operation could not be completed")))}),v(h,_c.EventType.MESSAGE,w=>{var E;if(!p){const x=w.data[0];ne(!!x);const b=x,C=b.error||((E=b[0])===null||E===void 0?void 0:E.error);if(C){$(Lt,`RPC '${e}' stream ${i} received error:`,C);const N=C.status;let D=function(A){const R=ut[A];if(R!==void 0)return aN(R)}(N),I=C.message;D===void 0&&(D=U.INTERNAL,I="Unknown error status: "+N+" with message "+C.message),p=!0,g.So(new H(D,I)),h.close()}else $(Lt,`RPC '${e}' stream ${i} received:`,x),g.bo(x)}}),v(a,gk.STAT_EVENT,w=>{w.stat===kv.PROXY?$(Lt,`RPC '${e}' stream ${i} detected buffering proxy`):w.stat===kv.NOPROXY&&$(Lt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{g.wo()},0),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BN(){return typeof window<"u"?window:null}function Wh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xp(t){return new q6(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&$("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(e,n,r,i,s,o,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new zN(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===U.RESOURCE_EXHAUSTED?(at(n.toString()),at("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new H(U.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return $("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():($("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class F9 extends WN{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=K6(this.serializer,e),r=function(s){if(!("targetChange"in s))return se.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?se.min():o.readTime?Zt(o.readTime):se.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Bv(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=Df(l)?{documents:mN(s,l)}:{query:gN(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=uN(s,o.resumeToken);const c=Uv(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(se.min())>0){a.readTime=cl(s,o.snapshotVersion.toTimestamp());const c=Uv(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=Y6(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Bv(this.serializer),n.removeTarget=e,this.a_(n)}}class U9 extends WN{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ne(!!e.streamToken),this.lastStreamToken=e.streamToken,ne(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ne(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=Q6(e.writeResults,e.commitTime),r=Zt(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Bv(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Mf(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $9 extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new H(U.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,$v(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new H(U.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,$v(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new H(U.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class B9{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(at(n),this.D_=!1):$("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z9{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{Uo(this)&&($("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=te(l);c.L_.add(4),await sd(c),c.q_.set("Unknown"),c.L_.delete(4),await Jp(c)}(this))})}),this.q_=new B9(r,i)}}async function Jp(t){if(Uo(t))for(const e of t.B_)await e(!0)}async function sd(t){for(const e of t.B_)await e(!1)}function Zp(t,e){const n=te(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),a_(n)?o_(n):Pl(n).r_()&&s_(n,e))}function dl(t,e){const n=te(t),r=Pl(n);n.N_.delete(e),r.r_()&&qN(n,e),n.N_.size===0&&(r.r_()?r.o_():Uo(n)&&n.q_.set("Unknown"))}function s_(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(se.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Pl(t).A_(e)}function qN(t,e){t.Q_.xe(e),Pl(t).R_(e)}function o_(t){t.Q_=new $6({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Pl(t).start(),t.q_.v_()}function a_(t){return Uo(t)&&!Pl(t).n_()&&t.N_.size>0}function Uo(t){return te(t).L_.size===0}function HN(t){t.Q_=void 0}async function W9(t){t.q_.set("Online")}async function q9(t){t.N_.forEach((e,n)=>{s_(t,e)})}async function H9(t,e){HN(t),a_(t)?(t.q_.M_(e),o_(t)):t.q_.set("Unknown")}async function G9(t,e,n){if(t.q_.set("Online"),e instanceof cN&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){$("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Wf(t,r)}else if(e instanceof zh?t.Q_.Ke(e):e instanceof lN?t.Q_.He(e):t.Q_.We(e),!n.isEqual(se.min()))try{const r=await MN(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=s.N_.get(c);u&&s.N_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=s.N_.get(l);if(!u)return;s.N_.set(l,u.withResumeToken(ct.EMPTY_BYTE_STRING,u.snapshotVersion)),qN(s,l);const h=new Gr(u.target,l,c,u.sequenceNumber);s_(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){$("RemoteStore","Failed to raise snapshot:",r),await Wf(t,r)}}async function Wf(t,e,n){if(!Es(e))throw e;t.L_.add(1),await sd(t),t.q_.set("Offline"),n||(n=()=>MN(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{$("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Jp(t)})}function GN(t,e){return e().catch(n=>Wf(t,n,e))}async function Cl(t){const e=te(t),n=cs(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;K9(e);)try{const i=await O9(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,Q9(e,i)}catch(i){await Wf(e,i)}KN(e)&&QN(e)}function K9(t){return Uo(t)&&t.O_.length<10}function Q9(t,e){t.O_.push(e);const n=cs(t);n.r_()&&n.V_&&n.m_(e.mutations)}function KN(t){return Uo(t)&&!cs(t).n_()&&t.O_.length>0}function QN(t){cs(t).start()}async function Y9(t){cs(t).p_()}async function X9(t){const e=cs(t);for(const n of t.O_)e.m_(n.mutations)}async function J9(t,e,n){const r=t.O_.shift(),i=Qw.from(r,e,n);await GN(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Cl(t)}async function Z9(t,e){e&&cs(t).V_&&await async function(r,i){if(function(o){return j6(o)&&o!==U.ABORTED}(i.code)){const s=r.O_.shift();cs(r).s_(),await GN(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Cl(r)}}(t,e),KN(t)&&QN(t)}async function O1(t,e){const n=te(t);n.asyncQueue.verifyOperationInProgress(),$("RemoteStore","RemoteStore received new credentials");const r=Uo(n);n.L_.add(3),await sd(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Jp(n)}async function Qv(t,e){const n=te(t);e?(n.L_.delete(2),await Jp(n)):e||(n.L_.add(2),await sd(n),n.q_.set("Unknown"))}function Pl(t){return t.K_||(t.K_=function(n,r,i){const s=te(n);return s.w_(),new F9(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:W9.bind(null,t),Ro:q9.bind(null,t),mo:H9.bind(null,t),d_:G9.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),a_(t)?o_(t):t.q_.set("Unknown")):(await t.K_.stop(),HN(t))})),t.K_}function cs(t){return t.U_||(t.U_=function(n,r,i){const s=te(n);return s.w_(),new U9(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Y9.bind(null,t),mo:Z9.bind(null,t),f_:X9.bind(null,t),g_:J9.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Cl(t)):(await t.U_.stop(),t.O_.length>0&&($("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l_{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Pr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new l_(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new H(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function c_(t,e){if(at("AsyncQueue",`${e}: ${t}`),Es(t))return new H(U.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(e){this.comparator=e?(n,r)=>e(n,r)||X.comparator(n.key,r.key):(n,r)=>X.comparator(n.key,r.key),this.keyedMap=xc(),this.sortedSet=new Me(this.comparator)}static emptySet(e){return new za(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof za)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new za;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1{constructor(){this.W_=new Me(X.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ee():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class hl{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new hl(e,n,za.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&qp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eW{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class tW{constructor(){this.queries=V1(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=te(n),s=i.queries;i.queries=V1(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new H(U.ABORTED,"Firestore shutting down"))}}function V1(){return new Ts(t=>Hk(t),qp)}async function u_(t,e){const n=te(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new eW,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=c_(o,`Initialization of query '${fa(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&h_(n)}async function d_(t,e){const n=te(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function nW(t,e){const n=te(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&h_(n)}function rW(t,e,n){const r=te(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function h_(t){t.Y_.forEach(e=>{e.next()})}var Yv,M1;(M1=Yv||(Yv={})).ea="default",M1.Cache="cache";class f_{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new hl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=hl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Yv.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{constructor(e){this.key=e}}class XN{constructor(e){this.key=e}}class iW{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=pe(),this.mutatedKeys=pe(),this.Aa=Kk(e),this.Ra=new za(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new L1,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,h)=>{const f=i.get(u),p=ed(this.query,h)?h:null,g=!!f&&this.mutatedKeys.has(f.key),v=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let w=!1;f&&p?f.data.isEqual(p.data)?g!==v&&(r.track({type:3,doc:p}),w=!0):this.ga(f,p)||(r.track({type:2,doc:p}),w=!0,(l&&this.Aa(p,l)>0||c&&this.Aa(p,c)<0)&&(a=!0)):!f&&p?(r.track({type:0,doc:p}),w=!0):f&&!p&&(r.track({type:1,doc:f}),w=!0,(l||c)&&(a=!0)),w&&(p?(o=o.add(p),s=v?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((u,h)=>function(p,g){const v=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ee()}};return v(p)-v(g)}(u.type,h.type)||this.Aa(u.doc,h.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new hl(this.query,e.Ra,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new L1,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=pe(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new XN(r))}),this.da.forEach(r=>{e.has(r)||n.push(new YN(r))}),n}ba(e){this.Ta=e.Ts,this.da=pe();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return hl.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class sW{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class oW{constructor(e){this.key=e,this.va=!1}}class aW{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Ts(a=>Hk(a),qp),this.Ma=new Map,this.xa=new Set,this.Oa=new Me(X.comparator),this.Na=new Map,this.La=new t_,this.Ba={},this.ka=new Map,this.qa=To.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function lW(t,e,n=!0){const r=em(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await JN(r,e,n,!0),i}async function cW(t,e){const n=em(t);await JN(n,e,!0,!1)}async function JN(t,e,n,r){const i=await $f(t.localStore,bn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await p_(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&Zp(t.remoteStore,i),a}async function p_(t,e,n,r,i){t.Ka=(h,f,p)=>async function(v,w,E,x){let b=w.view.ma(E);b.ns&&(b=await Gv(v.localStore,w.query,!1).then(({documents:I})=>w.view.ma(I,b)));const C=x&&x.targetChanges.get(w.targetId),N=x&&x.targetMismatches.get(w.targetId)!=null,D=w.view.applyChanges(b,v.isPrimaryClient,C,N);return Xv(v,w.targetId,D.wa),D.snapshot}(t,h,f,p);const s=await Gv(t.localStore,e,!0),o=new iW(e,s.Ts),a=o.ma(s.documents),l=id.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);Xv(t,n,c.wa);const u=new sW(e,n,o);return t.Fa.set(e,u),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function uW(t,e,n){const r=te(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!qp(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await ul(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&dl(r.remoteStore,i.targetId),fl(r,i.targetId)}).catch(xs)):(fl(r,i.targetId),await ul(r.localStore,i.targetId,!0))}async function dW(t,e){const n=te(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),dl(n.remoteStore,r.targetId))}async function hW(t,e,n){const r=v_(t);try{const i=await function(o,a){const l=te(o),c=Qe.now(),u=a.reduce((p,g)=>p.add(g.key),pe());let h,f;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let g=_n(),v=pe();return l.cs.getEntries(p,u).next(w=>{g=w,g.forEach((E,x)=>{x.isValidDocument()||(v=v.add(E))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,g)).next(w=>{h=w;const E=[];for(const x of a){const b=V6(x,h.get(x.key).overlayedDocument);b!=null&&E.push(new mi(x.key,b,Vk(b.value.mapValue),gt.exists(!0)))}return l.mutationQueue.addMutationBatch(p,c,E,a)}).next(w=>{f=w;const E=w.applyToLocalDocumentSet(h,v);return l.documentOverlayCache.saveOverlays(p,w.batchId,E)})}).then(()=>({batchId:f.batchId,changes:Yk(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new Me(he)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(r,i.batchId,n),await bs(r,i.changes),await Cl(r.remoteStore)}catch(i){const s=c_(i,"Failed to persist write");n.reject(s)}}async function ZN(t,e){const n=te(t);try{const r=await N9(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(ne(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?ne(o.va):i.removedDocuments.size>0&&(ne(o.va),o.va=!1))}),await bs(n,r,e)}catch(r){await xs(r)}}function j1(t,e,n){const r=te(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=te(o);l.onlineState=a;let c=!1;l.queries.forEach((u,h)=>{for(const f of h.j_)f.Z_(a)&&(c=!0)}),c&&h_(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function fW(t,e,n){const r=te(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new Me(X.comparator);o=o.insert(s,tt.newNoDocument(s,se.min()));const a=pe().add(s),l=new rd(se.min(),new Map,new Me(he),o,a);await ZN(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),y_(r)}else await ul(r.localStore,e,!1).then(()=>fl(r,e,n)).catch(xs)}async function pW(t,e){const n=te(t),r=e.batch.batchId;try{const i=await k9(n.localStore,e);g_(n,r,null),m_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await bs(n,i)}catch(i){await xs(i)}}async function mW(t,e,n){const r=te(t);try{const i=await function(o,a){const l=te(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(ne(h!==null),u=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(r.localStore,e);g_(r,e,n),m_(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await bs(r,i)}catch(i){await xs(i)}}function m_(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function g_(t,e,n){const r=te(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function fl(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||eD(t,r)})}function eD(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(dl(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),y_(t))}function Xv(t,e,n){for(const r of n)r instanceof YN?(t.La.addReference(r.key,e),gW(t,r)):r instanceof XN?($("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||eD(t,r.key)):ee()}function gW(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||($("SyncEngine","New document in limbo: "+n),t.xa.add(r),y_(t))}function y_(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new X(Ie.fromString(e)),r=t.qa.next();t.Na.set(r,new oW(n)),t.Oa=t.Oa.insert(n,r),Zp(t.remoteStore,new Gr(bn(Zu(n.path)),r,"TargetPurposeLimboResolution",ln.oe))}}async function bs(t,e,n){const r=te(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(c=>{var u;if((c||n)&&r.isPrimaryClient){const h=c?!c.fromCache:(u=n==null?void 0:n.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){i.push(c);const h=r_.Wi(l.targetId,c);s.push(h)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(l,c){const u=te(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>M.forEach(c,f=>M.forEach(f.$i,p=>u.persistence.referenceDelegate.addReference(h,f.targetId,p)).next(()=>M.forEach(f.Ui,p=>u.persistence.referenceDelegate.removeReference(h,f.targetId,p)))))}catch(h){if(!Es(h))throw h;$("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const f=h.targetId;if(!h.fromCache){const p=u.os.get(f),g=p.snapshotVersion,v=p.withLastLimboFreeSnapshotVersion(g);u.os=u.os.insert(f,v)}}}(r.localStore,s))}async function yW(t,e){const n=te(t);if(!n.currentUser.isEqual(e)){$("SyncEngine","User change. New user:",e.toKey());const r=await VN(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new H(U.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await bs(n,r.hs)}}function vW(t,e){const n=te(t),r=n.Na.get(e);if(r&&r.va)return pe().add(r.key);{let i=pe();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}async function wW(t,e){const n=te(t),r=await Gv(n.localStore,e.query,!0),i=e.view.ba(r);return n.isPrimaryClient&&Xv(n,e.targetId,i.wa),i}async function _W(t,e){const n=te(t);return FN(n.localStore,e).then(r=>bs(n,r))}async function xW(t,e,n,r){const i=te(t),s=await function(a,l){const c=te(a),u=te(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",h=>u.Mn(h,l).next(f=>f?c.localDocuments.getDocuments(h,f):M.resolve(null)))}(i.localStore,e);s!==null?(n==="pending"?await Cl(i.remoteStore):n==="acknowledged"||n==="rejected"?(g_(i,e,r||null),m_(i,e),function(a,l){te(te(a).mutationQueue).On(l)}(i.localStore,e)):ee(),await bs(i,s)):$("SyncEngine","Cannot apply mutation batch with id: "+e)}async function EW(t,e){const n=te(t);if(em(n),v_(n),e===!0&&n.Qa!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await F1(n,r.toArray());n.Qa=!0,await Qv(n.remoteStore,!0);for(const s of i)Zp(n.remoteStore,s)}else if(e===!1&&n.Qa!==!1){const r=[];let i=Promise.resolve();n.Ma.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(fl(n,o),ul(n.localStore,o,!0))),dl(n.remoteStore,o)}),await i,await F1(n,r),function(o){const a=te(o);a.Na.forEach((l,c)=>{dl(a.remoteStore,c)}),a.La.pr(),a.Na=new Map,a.Oa=new Me(X.comparator)}(n),n.Qa=!1,await Qv(n.remoteStore,!1)}}async function F1(t,e,n){const r=te(t),i=[],s=[];for(const o of e){let a;const l=r.Ma.get(o);if(l&&l.length!==0){a=await $f(r.localStore,bn(l[0]));for(const c of l){const u=r.Fa.get(c),h=await wW(r,u);h.snapshot&&s.push(h.snapshot)}}else{const c=await jN(r.localStore,o);a=await $f(r.localStore,c),await p_(r,tD(c),o,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(s),i}function tD(t){return Wk(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function TW(t){return function(n){return te(te(n).persistence).Qi()}(te(t).localStore)}async function bW(t,e,n,r){const i=te(t);if(i.Qa)return void $("SyncEngine","Ignoring unexpected query state notification.");const s=i.Ma.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=await FN(i.localStore,Gk(s[0])),a=rd.createSynthesizedRemoteEventForCurrentChange(e,n==="current",ct.EMPTY_BYTE_STRING);await bs(i,o,a);break}case"rejected":await ul(i.localStore,e,!0),fl(i,e,r);break;default:ee()}}async function SW(t,e,n){const r=em(t);if(r.Qa){for(const i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){$("SyncEngine","Adding an already active target "+i);continue}const s=await jN(r.localStore,i),o=await $f(r.localStore,s);await p_(r,tD(s),o.targetId,!1,o.resumeToken),Zp(r.remoteStore,o)}for(const i of n)r.Ma.has(i)&&await ul(r.localStore,i,!1).then(()=>{dl(r.remoteStore,i),fl(r,i)}).catch(xs)}}function em(t){const e=te(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=ZN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=vW.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=fW.bind(null,e),e.Ca.d_=nW.bind(null,e.eventManager),e.Ca.$a=rW.bind(null,e.eventManager),e}function v_(t){const e=te(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=pW.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=mW.bind(null,e),e}class Su{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Xp(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return LN(this.persistence,new ON,e.initialUser,this.serializer)}Ga(e){return new NN(Yp.Zr,this.serializer)}Wa(e){return new $N}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Su.provider={build:()=>new Su};class nD extends Su{constructor(e,n,r){super(),this.Ja=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await v_(this.Ja.syncEngine),await Cl(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return LN(this.persistence,new ON,e.initialUser,this.serializer)}ja(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new f9(r,e.asyncQueue,n)}Ha(e,n){const r=new Gz(n,this.persistence);return new Hz(e.asyncQueue,r)}Ga(e){const n=DN(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?sn.withCacheSize(this.cacheSizeBytes):sn.DEFAULT;return new n_(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,BN(),Wh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new $N}}class IW extends nD{constructor(e,n){super(e,n,!1),this.Ja=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.Ja.syncEngine;this.sharedClientState instanceof jg&&(this.sharedClientState.syncEngine={no:xW.bind(null,n),ro:bW.bind(null,n),io:SW.bind(null,n),Qi:TW.bind(null,n),eo:_W.bind(null,n)},await this.sharedClientState.start()),await this.persistence.yi(async r=>{await EW(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Wa(e){const n=BN();if(!jg.D(n))throw new H(U.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=DN(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new jg(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class Iu{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>j1(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=yW.bind(null,this.syncEngine),await Qv(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new tW}()}createDatastore(e){const n=Xp(e.databaseInfo.databaseId),r=function(s){return new j9(s)}(e.databaseInfo);return function(s,o,a,l){return new $9(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new z9(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>j1(this.syncEngine,n,0),function(){return D1.D()?new D1:new L9}())}createSyncEngine(e,n){return function(i,s,o,a,l,c,u){const h=new aW(i,s,o,a,l,c);return u&&(h.Qa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=te(i);$("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await sd(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Iu.provider={build:()=>new Iu};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):at("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CW{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Tt.UNAUTHENTICATED,this.clientId=_k.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{$("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>($("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Pr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=c_(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Ug(t,e){t.asyncQueue.verifyOperationInProgress(),$("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await VN(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function U1(t,e){t.asyncQueue.verifyOperationInProgress();const n=await PW(t);$("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>O1(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>O1(e.remoteStore,i)),t._onlineComponents=e}async function PW(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){$("FirestoreClient","Using user provided OfflineComponentProvider");try{await Ug(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===U.FAILED_PRECONDITION||i.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;os("Error using user provided cache. Falling back to memory cache: "+n),await Ug(t,new Su)}}else $("FirestoreClient","Using default OfflineComponentProvider"),await Ug(t,new Su);return t._offlineComponents}async function rD(t){return t._onlineComponents||(t._uninitializedComponentsProvider?($("FirestoreClient","Using user provided OnlineComponentProvider"),await U1(t,t._uninitializedComponentsProvider._online)):($("FirestoreClient","Using default OnlineComponentProvider"),await U1(t,new Iu))),t._onlineComponents}function AW(t){return rD(t).then(e=>e.syncEngine)}async function qf(t){const e=await rD(t),n=e.eventManager;return n.onListen=lW.bind(null,e.syncEngine),n.onUnlisten=uW.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=cW.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=dW.bind(null,e.syncEngine),n}function RW(t,e,n={}){const r=new Pr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const u=new w_({next:f=>{u.Za(),o.enqueueAndForget(()=>d_(s,h));const p=f.docs.has(a);!p&&f.fromCache?c.reject(new H(U.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&f.fromCache&&l&&l.source==="server"?c.reject(new H(U.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new f_(Zu(a.path),u,{includeMetadataChanges:!0,_a:!0});return u_(s,h)}(await qf(t),t.asyncQueue,e,n,r)),r.promise}function kW(t,e,n={}){const r=new Pr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const u=new w_({next:f=>{u.Za(),o.enqueueAndForget(()=>d_(s,h)),f.fromCache&&l.source==="server"?c.reject(new H(U.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new f_(a,u,{includeMetadataChanges:!0,_a:!0});return u_(s,h)}(await qf(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iD(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $1=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sD(t,e,n){if(!n)throw new H(U.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function NW(t,e,n,r){if(e===!0&&r===!0)throw new H(U.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function B1(t){if(!X.isDocumentKey(t))throw new H(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function z1(t){if(X.isDocumentKey(t))throw new H(U.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function tm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ee()}function Ft(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new H(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=tm(t);throw new H(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function DW(t,e){if(e<=0)throw new H(U.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new H(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new H(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}NW("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=iD((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new H(U.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new H(U.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new H(U.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class nm{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new W1({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new H(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new H(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new W1(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Lz;switch(r.type){case"firstParty":return new Fz(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new H(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=$1.get(n);r&&($("ComponentProvider","Removing Datastore"),$1.delete(n),r.terminate())}(this),Promise.resolve()}}function OW(t,e,n,r={}){var i;const s=(t=Ft(t,nm))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&os("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Tt.MOCK_USER;else{a=bR(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new H(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Tt(c)}t._authCredentials=new Vz(new wk(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new gi(this.firestore,e,this._query)}}class Ut{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new es(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ut(this.firestore,e,this._key)}}class es extends gi{constructor(e,n,r){super(e,n,Zu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ut(this.firestore,null,new X(e))}withConverter(e){return new es(this.firestore,e,this._path)}}function Nn(t,e,...n){if(t=ke(t),sD("collection","path",e),t instanceof nm){const r=Ie.fromString(e,...n);return z1(r),new es(t,null,r)}{if(!(t instanceof Ut||t instanceof es))throw new H(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ie.fromString(e,...n));return z1(r),new es(t.firestore,null,r)}}function Oe(t,e,...n){if(t=ke(t),arguments.length===1&&(e=_k.newId()),sD("doc","path",e),t instanceof nm){const r=Ie.fromString(e,...n);return B1(r),new Ut(t,null,new X(r))}{if(!(t instanceof Ut||t instanceof es))throw new H(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ie.fromString(e,...n));return B1(r),new Ut(t.firestore,t instanceof es?t.converter:null,new X(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new zN(this,"async_queue_retry"),this.Vu=()=>{const r=Wh();r&&$("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Wh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Wh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Pr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Es(e))throw e;$("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw at("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=l_.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&ee()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function H1(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LW=-1;class lr extends nm{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new q1,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new q1(e),this._firestoreClient=void 0,await e}}}function VW(t,e){const n=typeof t=="object"?t:jp(),r=typeof t=="string"?t:e||"(default)",i=vs(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=xR("firestore");s&&OW(i,...s)}return i}function od(t){if(t._terminated)throw new H(U.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||oD(t),t._firestoreClient}function oD(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,c,u){return new p6(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,iD(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new CW(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}function MW(t,e){os("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return aD(t,Iu.provider,{build:r=>new nD(r,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function jW(t){os("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();aD(t,Iu.provider,{build:n=>new IW(n,e.cacheSizeBytes)})}function aD(t,e,n){if((t=Ft(t,lr))._firestoreClient||t._terminated)throw new H(U.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new H(U.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},oD(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new pl(ct.fromBase64String(e))}catch(n){throw new H(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new pl(ct.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new H(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new He(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new H(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new H(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return he(this._lat,e._lat)||he(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FW=/^__.*__$/;class UW{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new mi(e,this.data,this.fieldMask,n,this.fieldTransforms):new Il(e,this.data,n,this.fieldTransforms)}}class lD{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new mi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function cD(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ee()}}class rm{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new rm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Hf(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(cD(this.Cu)&&FW.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class $W{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Xp(e)}Qu(e,n,r,i=!1){return new rm({Cu:e,methodName:n,qu:r,path:He.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ld(t){const e=t._freezeSettings(),n=Xp(t._databaseId);return new $W(t._databaseId,!!e.ignoreUndefinedProperties,n)}function E_(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);C_("Data must be an object, but it was:",o,r);const a=fD(r,o);let l,c;if(s.merge)l=new cn(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const h of s.mergeFields){const f=Jv(e,h,n);if(!o.contains(f))throw new H(U.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);mD(u,f)||u.push(f)}l=new cn(u),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new UW(new jt(a),l,c)}class im extends $o{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof im}}function uD(t,e,n){return new rm({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class T_ extends $o{_toFieldTransform(e){return new td(e.path,new al)}isEqual(e){return e instanceof T_}}class b_ extends $o{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=uD(this,e,!0),r=this.Ku.map(s=>Bo(s,n)),i=new wo(r);return new td(e.path,i)}isEqual(e){return e instanceof b_&&ho(this.Ku,e.Ku)}}class S_ extends $o{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=uD(this,e,!0),r=this.Ku.map(s=>Bo(s,n)),i=new _o(r);return new td(e.path,i)}isEqual(e){return e instanceof S_&&ho(this.Ku,e.Ku)}}class I_ extends $o{constructor(e,n){super(e),this.$u=n}_toFieldTransform(e){const n=new ll(e.serializer,Zk(e.serializer,this.$u));return new td(e.path,n)}isEqual(e){return e instanceof I_&&this.$u===e.$u}}function dD(t,e,n,r){const i=t.Qu(1,e,n);C_("Data must be an object, but it was:",i,r);const s=[],o=jt.empty();Fo(r,(l,c)=>{const u=P_(e,l,n);c=ke(c);const h=i.Nu(u);if(c instanceof im)s.push(u);else{const f=Bo(c,h);f!=null&&(s.push(u),o.set(u,f))}});const a=new cn(s);return new lD(o,a,i.fieldTransforms)}function hD(t,e,n,r,i,s){const o=t.Qu(1,e,n),a=[Jv(e,r,n)],l=[i];if(s.length%2!=0)throw new H(U.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)a.push(Jv(e,s[f])),l.push(s[f+1]);const c=[],u=jt.empty();for(let f=a.length-1;f>=0;--f)if(!mD(c,a[f])){const p=a[f];let g=l[f];g=ke(g);const v=o.Nu(p);if(g instanceof im)c.push(p);else{const w=Bo(g,v);w!=null&&(c.push(p),u.set(p,w))}}const h=new cn(c);return new lD(u,h,o.fieldTransforms)}function BW(t,e,n,r=!1){return Bo(n,t.Qu(r?4:3,e))}function Bo(t,e){if(pD(t=ke(t)))return C_("Unsupported field value:",e,t),fD(t,e);if(t instanceof $o)return function(r,i){if(!cD(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=Bo(a,i.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=ke(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Zk(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Qe.fromDate(r);return{timestampValue:cl(i.serializer,s)}}if(r instanceof Qe){const s=new Qe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:cl(i.serializer,s)}}if(r instanceof __)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof pl)return{bytesValue:uN(i.serializer,r._byteString)};if(r instanceof Ut){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Jw(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof x_)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return Gw(a.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${tm(r)}`)}(t,e)}function fD(t,e){const n={};return Nk(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Fo(t,(r,i)=>{const s=Bo(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function pD(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Qe||t instanceof __||t instanceof pl||t instanceof Ut||t instanceof $o||t instanceof x_)}function C_(t,e,n){if(!pD(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=tm(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Jv(t,e,n){if((e=ke(e))instanceof ad)return e._internalPath;if(typeof e=="string")return P_(t,e);throw Hf("Field path arguments must be of type string or ",t,!1,void 0,n)}const zW=new RegExp("[~\\*/\\[\\]]");function P_(t,e,n){if(e.search(zW)>=0)throw Hf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ad(...e.split("."))._internalPath}catch{throw Hf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Hf(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new H(U.INVALID_ARGUMENT,a+t+l)}function mD(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ut(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new WW(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(sm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class WW extends gD{data(){return super.data()}}function sm(t,e){return typeof e=="string"?P_(t,e):e instanceof ad?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yD(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new H(U.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class A_{}class R_ extends A_{}function $n(t,e,...n){let r=[];e instanceof A_&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof k_).length,a=s.filter(l=>l instanceof om).length;if(o>1||o>0&&a>0)throw new H(U.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class om extends R_{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new om(e,n,r)}_apply(e){const n=this._parse(e);return vD(e._query,n),new gi(e.firestore,e.converter,Fv(e._query,n))}_parse(e){const n=ld(e.firestore);return function(s,o,a,l,c,u,h){let f;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new H(U.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){K1(h,u);const p=[];for(const g of h)p.push(G1(l,s,g));f={arrayValue:{values:p}}}else f=G1(l,s,h)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||K1(h,u),f=BW(a,o,h,u==="in"||u==="not-in");return _e.create(c,u,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Yt(t,e,n){const r=e,i=sm("where",t);return om._create(i,r,n)}class k_ extends A_{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new k_(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Ae.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)vD(o,l),o=Fv(o,l)}(e._query,n),new gi(e.firestore,e.converter,Fv(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class N_ extends R_{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new N_(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new H(U.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new H(U.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new bu(s,o)}(e._query,this._field,this._direction);return new gi(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Sl(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function qW(t,e="asc"){const n=e,r=sm("orderBy",t);return N_._create(r,n)}class D_ extends R_{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new D_(e,n,r)}_apply(e){return new gi(e.firestore,e.converter,Lf(e._query,this._limit,this._limitType))}}function Wa(t){return DW("limit",t),D_._create("limit",t,"F")}function G1(t,e,n){if(typeof(n=ke(n))=="string"){if(n==="")throw new H(U.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!qk(e)&&n.indexOf("/")!==-1)throw new H(U.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ie.fromString(n));if(!X.isDocumentKey(r))throw new H(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Eu(t,new X(r))}if(n instanceof Ut)return Eu(t,n._key);throw new H(U.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${tm(n)}.`)}function K1(t,e){if(!Array.isArray(t)||t.length===0)throw new H(U.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function vD(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new H(U.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new H(U.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class HW{convertValue(e,n="none"){switch(yo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Be(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(as(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ee()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Fo(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Be(o.doubleValue));return new x_(s)}convertGeoPoint(e){return new __(Be(e.latitude),Be(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Ww(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(_u(e));default:return null}}convertTimestamp(e){const n=li(e);return new Qe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ie.fromString(e);ne(_N(r));const i=new go(r.get(1),r.get(3)),s=new X(r.popFirst(5));return i.isEqual(n)||at(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O_(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class wD extends gD{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new qh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(sm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class qh extends wD{data(e={}){return super.data(e)}}class _D{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new bc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new qh(this._firestore,this._userDataWriter,r.key,r,new bc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new H(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new qh(i._firestore,i._userDataWriter,a.doc.key,a.doc,new bc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new qh(i._firestore,i._userDataWriter,a.doc.key,a.doc,new bc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:GW(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function GW(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ee()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ir(t){t=Ft(t,Ut);const e=Ft(t.firestore,lr);return RW(od(e),t._key).then(n=>ED(e,t,n))}class L_ extends HW{constructor(e){super(),this.firestore=e}convertBytes(e){return new pl(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ut(this.firestore,null,n)}}function bo(t){t=Ft(t,gi);const e=Ft(t.firestore,lr),n=od(e),r=new L_(e);return yD(t._query),kW(n,t._query).then(i=>new _D(e,r,t,i))}function ya(t,e,n){t=Ft(t,Ut);const r=Ft(t.firestore,lr),i=O_(t.converter,e,n);return ud(r,[E_(ld(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,gt.none())])}function Nr(t,e,n,...r){t=Ft(t,Ut);const i=Ft(t.firestore,lr),s=ld(i);let o;return o=typeof(e=ke(e))=="string"||e instanceof ad?hD(s,"updateDoc",t._key,e,n,r):dD(s,"updateDoc",t._key,e),ud(i,[o.toMutation(t._key,gt.exists(!0))])}function xD(t){return ud(Ft(t.firestore,lr),[new nd(t._key,gt.none())])}function cd(t,e){const n=Ft(t.firestore,lr),r=Oe(t),i=O_(t.converter,e);return ud(n,[E_(ld(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,gt.exists(!1))]).then(()=>r)}function am(t,...e){var n,r,i;t=ke(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||H1(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(H1(e[o])){const h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[o+2]=(i=h.complete)===null||i===void 0?void 0:i.bind(h)}let l,c,u;if(t instanceof Ut)c=Ft(t.firestore,lr),u=Zu(t._key.path),l={next:h=>{e[o]&&e[o](ED(c,t,h))},error:e[o+1],complete:e[o+2]};else{const h=Ft(t,gi);c=Ft(h.firestore,lr),u=h._query;const f=new L_(c);l={next:p=>{e[o]&&e[o](new _D(c,f,h,p))},error:e[o+1],complete:e[o+2]},yD(t._query)}return function(f,p,g,v){const w=new w_(v),E=new f_(p,w,g);return f.asyncQueue.enqueueAndForget(async()=>u_(await qf(f),E)),()=>{w.Za(),f.asyncQueue.enqueueAndForget(async()=>d_(await qf(f),E))}}(od(c),u,a,l)}function ud(t,e){return function(r,i){const s=new Pr;return r.asyncQueue.enqueueAndForget(async()=>hW(await AW(r),i,s)),s.promise}(od(t),e)}function ED(t,e,n){const r=n.docs.get(e._key),i=new L_(t);return new wD(t,i,e._key,r,new bc(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KW{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=ld(e)}set(e,n,r){this._verifyNotCommitted();const i=$g(e,this._firestore),s=O_(i.converter,n,r),o=E_(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,gt.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=$g(e,this._firestore);let o;return o=typeof(n=ke(n))=="string"||n instanceof ad?hD(this._dataReader,"WriteBatch.update",s._key,n,r,i):dD(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,gt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=$g(e,this._firestore);return this._mutations=this._mutations.concat(new nd(n._key,gt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new H(U.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function $g(t,e){if((t=ke(t)).firestore!==e)throw new H(U.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function Kr(){return new T_("serverTimestamp")}function QW(...t){return new b_("arrayUnion",t)}function YW(...t){return new S_("arrayRemove",t)}function xn(t){return new I_("increment",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TD(t){return od(t=Ft(t,lr)),new KW(t,e=>ud(t,e))}(function(e,n=!0){(function(i){bl=i})(jo),ar(new Wn("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new lr(new Mz(r.getProvider("auth-internal")),new $z(r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new H(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new go(c.options.projectId,u)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),fn(Ub,"4.7.3",e),fn(Ub,"4.7.3","esm2017")})();var XW="firebase",JW="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fn(XW,JW,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bD="firebasestorage.googleapis.com",SD="storageBucket",ZW=2*60*1e3,eq=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it extends Gn{constructor(e,n,r=0){super(Bg(e),`Firebase Storage: ${n} (${Bg(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,it.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Bg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var rt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(rt||(rt={}));function Bg(t){return"storage/"+t}function V_(){const t="An unknown error occurred, please check the error payload for server response.";return new it(rt.UNKNOWN,t)}function tq(t){return new it(rt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function nq(t){return new it(rt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function rq(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new it(rt.UNAUTHENTICATED,t)}function iq(){return new it(rt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function sq(t){return new it(rt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function oq(){return new it(rt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function aq(){return new it(rt.CANCELED,"User canceled the upload/download.")}function lq(t){return new it(rt.INVALID_URL,"Invalid URL '"+t+"'.")}function cq(t){return new it(rt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function uq(){return new it(rt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+SD+"' property when initializing the app?")}function dq(){return new it(rt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function hq(){return new it(rt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function fq(t){return new it(rt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Zv(t){return new it(rt.INVALID_ARGUMENT,t)}function ID(){return new it(rt.APP_DELETED,"The Firebase app was deleted.")}function pq(t){return new it(rt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Bc(t,e){return new it(rt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function ac(t){throw new it(rt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=En.makeFromUrl(e,n)}catch{return new En(e,"")}if(r.path==="")return r;throw cq(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(C){C.path.charAt(C.path.length-1)==="/"&&(C.path_=C.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function c(C){C.path_=decodeURIComponent(C.path)}const u="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",p=new RegExp(`^https?://${h}/${u}/b/${i}/o${f}`,"i"),g={bucket:1,path:3},v=n===bD?"(?:storage.googleapis.com|storage.cloud.google.com)":n,w="([^?#]*)",E=new RegExp(`^https?://${v}/${i}/${w}`,"i"),b=[{regex:a,indices:l,postModify:s},{regex:p,indices:g,postModify:c},{regex:E,indices:{bucket:1,path:2},postModify:c}];for(let C=0;C<b.length;C++){const N=b[C],D=N.regex.exec(e);if(D){const I=D[N.indices.bucket];let S=D[N.indices.path];S||(S=""),r=new En(I,S),N.postModify(r);break}}if(r==null)throw lq(e);return r}}class mq{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gq(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let c=!1;function u(...w){c||(c=!0,e.apply(null,w))}function h(w){i=setTimeout(()=>{i=null,t(p,l())},w)}function f(){s&&clearTimeout(s)}function p(w,...E){if(c){f();return}if(w){f(),u.call(null,w,...E);return}if(l()||o){f(),u.call(null,w,...E);return}r<64&&(r*=2);let b;a===1?(a=2,b=0):b=(r+Math.random())*1e3,h(b)}let g=!1;function v(w){g||(g=!0,f(),!c&&(i!==null?(w||(a=2),clearTimeout(i),h(0)):w||(a=1)))}return h(0),s=setTimeout(()=>{o=!0,v(!0)},n),v}function yq(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vq(t){return t!==void 0}function wq(t){return typeof t=="object"&&!Array.isArray(t)}function M_(t){return typeof t=="string"||t instanceof String}function Q1(t){return j_()&&t instanceof Blob}function j_(){return typeof Blob<"u"}function Y1(t,e,n,r){if(r<e)throw Zv(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Zv(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lm(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function CD(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var so;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(so||(so={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _q(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xq{constructor(e,n,r,i,s,o,a,l,c,u,h,f=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=h,this.retry=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((p,g)=>{this.resolve_=p,this.reject_=g,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new ch(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===so.NO_ERROR,l=s.getStatus();if(!a||_q(l,this.additionalRetryCodes_)&&this.retry){const u=s.getErrorCode()===so.ABORT;r(!1,new ch(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new ch(c,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());vq(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=V_();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?ID():aq();o(l)}else{const l=oq();o(l)}};this.canceled_?n(!1,new ch(!1,null,!0)):this.backoffId_=gq(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&yq(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class ch{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function Eq(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function Tq(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function bq(t,e){e&&(t["X-Firebase-GMPID"]=e)}function Sq(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function Iq(t,e,n,r,i,s,o=!0){const a=CD(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return bq(c,e),Eq(c,n),Tq(c,s),Sq(c,r),new xq(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cq(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Pq(...t){const e=Cq();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(j_())return new Blob(t);throw new it(rt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Aq(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rq(t){if(typeof atob>"u")throw fq("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class zg{constructor(e,n){this.data=e,this.contentType=n||null}}function kq(t,e){switch(t){case Tr.RAW:return new zg(PD(e));case Tr.BASE64:case Tr.BASE64URL:return new zg(AD(t,e));case Tr.DATA_URL:return new zg(Dq(e),Oq(e))}throw V_()}function PD(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function Nq(t){let e;try{e=decodeURIComponent(t)}catch{throw Bc(Tr.DATA_URL,"Malformed data URL.")}return PD(e)}function AD(t,e){switch(t){case Tr.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw Bc(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Tr.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw Bc(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=Rq(e)}catch(i){throw i.message.includes("polyfill")?i:Bc(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class RD{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Bc(Tr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=Lq(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function Dq(t){const e=new RD(t);return e.base64?AD(Tr.BASE64,e.rest):Nq(e.rest)}function Oq(t){return new RD(t).contentType}function Lq(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(e,n){let r=0,i="";Q1(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(Q1(this.data_)){const r=this.data_,i=Aq(r,e,n);return i===null?null:new ji(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new ji(r,!0)}}static getBlob(...e){if(j_()){const n=e.map(r=>r instanceof ji?r.data_:r);return new ji(Pq.apply(null,n))}else{const n=e.map(o=>M_(o)?kq(Tr.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new ji(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kD(t){let e;try{e=JSON.parse(t)}catch{return null}return wq(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vq(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function Mq(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function ND(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jq(t,e){return e}class Ht{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||jq}}let uh=null;function Fq(t){return!M_(t)||t.length<2?t:ND(t)}function DD(){if(uh)return uh;const t=[];t.push(new Ht("bucket")),t.push(new Ht("generation")),t.push(new Ht("metageneration")),t.push(new Ht("name","fullPath",!0));function e(s,o){return Fq(o)}const n=new Ht("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new Ht("size");return i.xform=r,t.push(i),t.push(new Ht("timeCreated")),t.push(new Ht("updated")),t.push(new Ht("md5Hash",null,!0)),t.push(new Ht("cacheControl",null,!0)),t.push(new Ht("contentDisposition",null,!0)),t.push(new Ht("contentEncoding",null,!0)),t.push(new Ht("contentLanguage",null,!0)),t.push(new Ht("contentType",null,!0)),t.push(new Ht("metadata","customMetadata",!0)),uh=t,uh}function Uq(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new En(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function $q(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return Uq(r,t),r}function OD(t,e,n){const r=kD(e);return r===null?null:$q(t,r,n)}function Bq(t,e,n,r){const i=kD(e);if(i===null||!M_(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(c=>{const u=t.bucket,h=t.fullPath,f="/b/"+o(u)+"/o/"+o(h),p=lm(f,n,r),g=CD({alt:"media",token:c});return p+g})[0]}function zq(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class F_{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LD(t){if(!t)throw V_()}function Wq(t,e){function n(r,i){const s=OD(t,i,e);return LD(s!==null),s}return n}function qq(t,e){function n(r,i){const s=OD(t,i,e);return LD(s!==null),Bq(s,i,t.host,t._protocol)}return n}function VD(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=iq():i=rq():n.getStatus()===402?i=nq(t.bucket):n.getStatus()===403?i=sq(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function MD(t){const e=VD(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=tq(t.path)),s.serverResponse=i.serverResponse,s}return n}function Hq(t,e,n){const r=e.fullServerUrl(),i=lm(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new F_(i,s,qq(t,n),o);return a.errorHandler=MD(e),a}function Gq(t,e){const n=e.fullServerUrl(),r=lm(n,t.host,t._protocol),i="DELETE",s=t.maxOperationRetryTime;function o(l,c){}const a=new F_(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=MD(e),a}function Kq(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function Qq(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=Kq(null,e)),r}function Yq(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let b="";for(let C=0;C<2;C++)b=b+Math.random().toString().slice(2);return b}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=Qq(e,r,i),u=zq(c,n),h="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,f=`\r
--`+l+"--",p=ji.getBlob(h,r,f);if(p===null)throw dq();const g={name:c.fullPath},v=lm(s,t.host,t._protocol),w="POST",E=t.maxUploadRetryTime,x=new F_(v,w,Wq(t,n),E);return x.urlParams=g,x.headers=o,x.body=p.uploadData(),x.errorHandler=VD(e),x}class Xq{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=so.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=so.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=so.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw ac("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ac("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ac("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw ac("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ac("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Jq extends Xq{initXhr(){this.xhr_.responseType="text"}}function U_(){return new Jq}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e,n){this._service=e,n instanceof En?this._location=n:this._location=En.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new So(e,n)}get root(){const e=new En(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return ND(this._location.path)}get storage(){return this._service}get parent(){const e=Vq(this._location.path);if(e===null)return null;const n=new En(this._location.bucket,e);return new So(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw pq(e)}}function Zq(t,e,n){t._throwIfRoot("uploadBytes");const r=Yq(t.storage,t._location,DD(),new ji(e,!0),n);return t.storage.makeRequestWithTokens(r,U_).then(i=>({metadata:i,ref:t}))}function eH(t){t._throwIfRoot("getDownloadURL");const e=Hq(t.storage,t._location,DD());return t.storage.makeRequestWithTokens(e,U_).then(n=>{if(n===null)throw hq();return n})}function tH(t){t._throwIfRoot("deleteObject");const e=Gq(t.storage,t._location);return t.storage.makeRequestWithTokens(e,U_)}function nH(t,e){const n=Mq(t._location.path,e),r=new En(t._location.bucket,n);return new So(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rH(t){return/^[A-Za-z]+:\/\//.test(t)}function iH(t,e){return new So(t,e)}function jD(t,e){if(t instanceof $_){const n=t;if(n._bucket==null)throw uq();const r=new So(n,n._bucket);return e!=null?jD(r,e):r}else return e!==void 0?nH(t,e):t}function sH(t,e){if(e&&rH(e)){if(t instanceof $_)return iH(t,e);throw Zv("To use ref(service, url), the first argument must be a Storage instance.")}else return jD(t,e)}function X1(t,e){const n=e==null?void 0:e[SD];return n==null?null:En.makeFromBucketSpec(n,t)}function oH(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:bR(i,t.app.options.projectId))}class $_{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=bD,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=ZW,this._maxUploadRetryTime=eq,this._requests=new Set,i!=null?this._bucket=En.makeFromBucketSpec(i,this._host):this._bucket=X1(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=En.makeFromBucketSpec(this._url,e):this._bucket=X1(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Y1("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Y1("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new So(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new mq(ID());{const o=Iq(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const J1="@firebase/storage",Z1="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FD="storage";function UD(t,e,n){return t=ke(t),Zq(t,e,n)}function B_(t){return t=ke(t),eH(t)}function aH(t){return t=ke(t),tH(t)}function cm(t,e){return t=ke(t),sH(t,e)}function lH(t=jp(),e){t=ke(t);const r=vs(t,FD).getImmediate({identifier:e}),i=xR("storage");return i&&cH(r,...i),r}function cH(t,e,n,r={}){oH(t,e,n,r)}function uH(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new $_(n,r,i,e,jo)}function dH(){ar(new Wn(FD,uH,"PUBLIC").setMultipleInstances(!0)),fn(J1,Z1,""),fn(J1,Z1,"esm2017")}dH();const $D="@firebase/installations",z_="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BD=1e4,zD=`w:${z_}`,WD="FIS_v2",hH="https://firebaseinstallations.googleapis.com/v1",fH=60*60*1e3,pH="installations",mH="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gH={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Io=new Mo(pH,mH,gH);function qD(t){return t instanceof Gn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HD({projectId:t}){return`${hH}/projects/${t}/installations`}function GD(t){return{token:t.token,requestStatus:2,expiresIn:vH(t.expiresIn),creationTime:Date.now()}}async function KD(t,e){const r=(await e.json()).error;return Io.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function QD({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function yH(t,{refreshToken:e}){const n=QD(t);return n.append("Authorization",wH(e)),n}async function YD(t){const e=await t();return e.status>=500&&e.status<600?t():e}function vH(t){return Number(t.replace("s","000"))}function wH(t){return`${WD} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _H({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=HD(t),i=QD(t),s=e.getImmediate({optional:!0});if(s){const c=await s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const o={fid:n,authVersion:WD,appId:t.appId,sdkVersion:zD},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await YD(()=>fetch(r,a));if(l.ok){const c=await l.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:GD(c.authToken)}}else throw await KD("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XD(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xH(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EH=/^[cdef][\w-]{21}$/,e0="";function TH(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=bH(t);return EH.test(n)?n:e0}catch{return e0}}function bH(t){return xH(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function um(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JD=new Map;function ZD(t,e){const n=um(t);eO(n,e),SH(n,e)}function eO(t,e){const n=JD.get(t);if(n)for(const r of n)r(e)}function SH(t,e){const n=IH();n&&n.postMessage({key:t,fid:e}),CH()}let Js=null;function IH(){return!Js&&"BroadcastChannel"in self&&(Js=new BroadcastChannel("[Firebase] FID Change"),Js.onmessage=t=>{eO(t.data.key,t.data.fid)}),Js}function CH(){JD.size===0&&Js&&(Js.close(),Js=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PH="firebase-installations-database",AH=1,Co="firebase-installations-store";let Wg=null;function W_(){return Wg||(Wg=RR(PH,AH,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Co)}}})),Wg}async function Gf(t,e){const n=um(t),i=(await W_()).transaction(Co,"readwrite"),s=i.objectStore(Co),o=await s.get(n);return await s.put(e,n),await i.done,(!o||o.fid!==e.fid)&&ZD(t,e.fid),e}async function tO(t){const e=um(t),r=(await W_()).transaction(Co,"readwrite");await r.objectStore(Co).delete(e),await r.done}async function dm(t,e){const n=um(t),i=(await W_()).transaction(Co,"readwrite"),s=i.objectStore(Co),o=await s.get(n),a=e(o);return a===void 0?await s.delete(n):await s.put(a,n),await i.done,a&&(!o||o.fid!==a.fid)&&ZD(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q_(t){let e;const n=await dm(t.appConfig,r=>{const i=RH(r),s=kH(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===e0?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function RH(t){const e=t||{fid:TH(),registrationStatus:0};return nO(e)}function kH(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(Io.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=NH(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:DH(t)}:{installationEntry:e}}async function NH(t,e){try{const n=await _H(t,e);return Gf(t.appConfig,n)}catch(n){throw qD(n)&&n.customData.serverCode===409?await tO(t.appConfig):await Gf(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function DH(t){let e=await eS(t.appConfig);for(;e.registrationStatus===1;)await XD(100),e=await eS(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await q_(t);return r||n}return e}function eS(t){return dm(t,e=>{if(!e)throw Io.create("installation-not-found");return nO(e)})}function nO(t){return OH(t)?{fid:t.fid,registrationStatus:0}:t}function OH(t){return t.registrationStatus===1&&t.registrationTime+BD<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LH({appConfig:t,heartbeatServiceProvider:e},n){const r=VH(t,n),i=yH(t,n),s=e.getImmediate({optional:!0});if(s){const c=await s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const o={installation:{sdkVersion:zD,appId:t.appId}},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await YD(()=>fetch(r,a));if(l.ok){const c=await l.json();return GD(c)}else throw await KD("Generate Auth Token",l)}function VH(t,{fid:e}){return`${HD(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H_(t,e=!1){let n;const r=await dm(t.appConfig,s=>{if(!rO(s))throw Io.create("not-registered");const o=s.authToken;if(!e&&FH(o))return s;if(o.requestStatus===1)return n=MH(t,e),s;{if(!navigator.onLine)throw Io.create("app-offline");const a=$H(s);return n=jH(t,a),a}});return n?await n:r.authToken}async function MH(t,e){let n=await tS(t.appConfig);for(;n.authToken.requestStatus===1;)await XD(100),n=await tS(t.appConfig);const r=n.authToken;return r.requestStatus===0?H_(t,e):r}function tS(t){return dm(t,e=>{if(!rO(e))throw Io.create("not-registered");const n=e.authToken;return BH(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function jH(t,e){try{const n=await LH(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await Gf(t.appConfig,r),n}catch(n){if(qD(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await tO(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Gf(t.appConfig,r)}throw n}}function rO(t){return t!==void 0&&t.registrationStatus===2}function FH(t){return t.requestStatus===2&&!UH(t)}function UH(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+fH}function $H(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function BH(t){return t.requestStatus===1&&t.requestTime+BD<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zH(t){const e=t,{installationEntry:n,registrationPromise:r}=await q_(e);return r?r.catch(console.error):H_(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WH(t,e=!1){const n=t;return await qH(n),(await H_(n,e)).token}async function qH(t){const{registrationPromise:e}=await q_(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HH(t){if(!t||!t.options)throw qg("App Configuration");if(!t.name)throw qg("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw qg(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function qg(t){return Io.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iO="installations",GH="installations-internal",KH=t=>{const e=t.getProvider("app").getImmediate(),n=HH(e),r=vs(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},QH=t=>{const e=t.getProvider("app").getImmediate(),n=vs(e,iO).getImmediate();return{getId:()=>zH(n),getToken:i=>WH(n,i)}};function YH(){ar(new Wn(iO,KH,"PUBLIC")),ar(new Wn(GH,QH,"PRIVATE"))}YH();fn($D,z_);fn($D,z_,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kf="analytics",XH="firebase_id",JH="origin",ZH=60*1e3,e8="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",G_="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pn=new Mp("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t8={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Sn=new Mo("analytics","Analytics",t8);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n8(t){if(!t.startsWith(G_)){const e=Sn.create("invalid-gtag-resource",{gtagURL:t});return pn.warn(e.message),""}return t}function sO(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function r8(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function i8(t,e){const n=r8("firebase-js-sdk-policy",{createScriptURL:n8}),r=document.createElement("script"),i=`${G_}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function s8(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function o8(t,e,n,r,i,s){const o=r[i];try{if(o)await e[o];else{const l=(await sO(n)).find(c=>c.measurementId===i);l&&await e[l.appId]}}catch(a){pn.error(a)}t("config",i,s)}async function a8(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const a=await sO(n);for(const l of o){const c=a.find(h=>h.measurementId===l),u=c&&e[c.appId];if(u)s.push(u);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",r,i||{})}catch(s){pn.error(s)}}function l8(t,e,n,r){async function i(s,...o){try{if(s==="event"){const[a,l]=o;await a8(t,e,n,a,l)}else if(s==="config"){const[a,l]=o;await o8(t,e,n,r,a,l)}else if(s==="consent"){const[a,l]=o;t("consent",a,l)}else if(s==="get"){const[a,l,c]=o;t("get",a,l,c)}else if(s==="set"){const[a]=o;t("set",a)}else t(s,...o)}catch(a){pn.error(a)}}return i}function c8(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=l8(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}function u8(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(G_)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d8=30,h8=1e3;class f8{constructor(e={},n=h8){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const oO=new f8;function p8(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function m8(t){var e;const{appId:n,apiKey:r}=t,i={method:"GET",headers:p8(r)},s=e8.replace("{app-id}",n),o=await fetch(s,i);if(o.status!==200&&o.status!==304){let a="";try{const l=await o.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw Sn.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function g8(t,e=oO,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw Sn.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw Sn.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new w8;return setTimeout(async()=>{a.abort()},n!==void 0?n:ZH),aO({appId:r,apiKey:i,measurementId:s},o,a,e)}async function aO(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=oO){var s;const{appId:o,measurementId:a}=t;try{await y8(r,e)}catch(l){if(a)return pn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:a};throw l}try{const l=await m8(t);return i.deleteThrottleMetadata(o),l}catch(l){const c=l;if(!v8(c)){if(i.deleteThrottleMetadata(o),a)return pn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:a};throw l}const u=Number((s=c==null?void 0:c.customData)===null||s===void 0?void 0:s.httpStatus)===503?db(n,i.intervalMillis,d8):db(n,i.intervalMillis),h={throttleEndTimeMillis:Date.now()+u,backoffCount:n+1};return i.setThrottleMetadata(o,h),pn.debug(`Calling attemptFetch again in ${u} millis`),aO(t,h,r,i)}}function y8(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(Sn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function v8(t){if(!(t instanceof Gn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class w8{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function _8(t,e,n,r,i){if(i&&i.global){t("event",n,r);return}else{const s=await e,o=Object.assign(Object.assign({},r),{send_to:s});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x8(){if(Cw())try{await CR()}catch(t){return pn.warn(Sn.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return pn.warn(Sn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function E8(t,e,n,r,i,s,o){var a;const l=g8(t);l.then(p=>{n[p.measurementId]=p.appId,t.options.measurementId&&p.measurementId!==t.options.measurementId&&pn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${p.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(p=>pn.error(p)),e.push(l);const c=x8().then(p=>{if(p)return r.getId()}),[u,h]=await Promise.all([l,c]);u8(s)||i8(s,u.measurementId),i("js",new Date);const f=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return f[JH]="firebase",f.update=!0,h!=null&&(f[XH]=h),i("config",u.measurementId,f),u.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T8{constructor(e){this.app=e}_delete(){return delete zc[this.app.options.appId],Promise.resolve()}}let zc={},nS=[];const rS={};let Hg="dataLayer",b8="gtag",iS,lO,sS=!1;function S8(){const t=[];if(SR()&&t.push("This is a browser extension environment."),tB()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=Sn.create("invalid-analytics-context",{errorInfo:e});pn.warn(n.message)}}function I8(t,e,n){S8();const r=t.options.appId;if(!r)throw Sn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)pn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Sn.create("no-api-key");if(zc[r]!=null)throw Sn.create("already-exists",{id:r});if(!sS){s8(Hg);const{wrappedGtag:s,gtagCore:o}=c8(zc,nS,rS,Hg,b8);lO=s,iS=o,sS=!0}return zc[r]=E8(t,nS,rS,e,iS,Hg,n),new T8(t)}function C8(t=jp()){t=ke(t);const e=vs(t,Kf);return e.isInitialized()?e.getImmediate():P8(t)}function P8(t,e={}){const n=vs(t,Kf);if(n.isInitialized()){const i=n.getImmediate();if(ho(e,n.getOptions()))return i;throw Sn.create("already-initialized")}return n.initialize({options:e})}function A8(t,e,n,r){t=ke(t),_8(lO,zc[t.app.options.appId],e,n,r).catch(i=>pn.error(i))}const oS="@firebase/analytics",aS="0.10.8";function R8(){ar(new Wn(Kf,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return I8(r,i,n)},"PUBLIC")),ar(new Wn("analytics-internal",t,"PRIVATE")),fn(oS,aS),fn(oS,aS,"esm2017");function t(e){try{const n=e.getProvider(Kf).getImmediate();return{logEvent:(r,i,s)=>A8(n,r,i,s)}}catch(n){throw Sn.create("interop-component-reg-failed",{reason:n})}}}R8();const k8={apiKey:"AIzaSyC_JYqkizXOltYMMgqp5sMJIvbYYcK09yE",authDomain:"smartcloset-ac08a.firebaseapp.com",projectId:"smartcloset-ac08a",storageBucket:"smartcloset-ac08a.firebasestorage.app",messagingSenderId:"368150102391",appId:"1:368150102391:web:85c6eccda8ba10f5ec6172",measurementId:"G-K5W1D08SQE"};let ia,mr,fe,dd,N8;const D8=async()=>{try{if(!ia){ia=kR(k8),mr=Dz(ia),fe=VW(ia),dd=lH(ia),N8=typeof window<"u"?C8(ia):null;try{await jW(fe)}catch(t){console.warn("Multi-tab persistence failed, falling back to single-tab persistence:",t);try{await MW(fe,{cacheSizeBytes:LW})}catch(e){e.code==="failed-precondition"?console.warn("Multiple tabs open, persistence can only be enabled in one tab at a time."):e.code==="unimplemented"&&console.warn("The current browser doesn't support persistence")}}}}catch(t){throw console.error("Error initializing Firebase:",t),t}};D8().catch(console.error);const cO=_.createContext({}),yi=()=>_.useContext(cO),O8=({children:t})=>{const[e,n]=_.useState(null),[r,i]=_.useState(!0),{toast:s}=Hn(),o=async p=>{if(!p){n(null);return}try{const g=await ir(Oe(fe,"users",p.uid));if(g.exists()){const v=g.data();n({...p,...v,hasCompletedQuestionnaire:v.hasCompletedQuestionnaire||!1})}else await ya(Oe(fe,"users",p.uid),{username:p.displayName||"Usuario",email:p.email,photoURL:p.photoURL,hasCompletedQuestionnaire:!1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),n({...p,hasCompletedQuestionnaire:!1})}catch(g){console.error("Error fetching user data:",g),n(p)}};_.useEffect(()=>{const p=x5(mr,async g=>{try{await o(g)}catch(v){console.error("Error in auth state change:",v)}finally{i(!1)}});return()=>p()},[]);const a=async(p,g,v)=>{try{const{user:w}=await g5(mr,p,g);return await Dg(w,{displayName:v}),await ya(Oe(fe,"users",w.uid),{username:v,email:p,hasCompletedQuestionnaire:!1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),await ya(Oe(fe,"userStats",w.uid),{totalPosts:0,totalLikes:0,totalComments:0,totalShares:0}),s({title:"Cuenta creada",description:"¡Bienvenido a Dresso!"}),w}catch(w){throw s({title:"Error al crear cuenta",description:w.message,variant:"destructive"}),w}},l=async(p,g)=>{try{const v=await y5(mr,p,g);return s({title:"Sesión iniciada",description:"¡Bienvenido de nuevo!"}),v}catch(v){throw s({title:"Error al iniciar sesión",description:v.message,variant:"destructive"}),v}},c=async()=>{try{const p=new $r,{user:g}=await B5(mr,p);return(await ir(Oe(fe,"users",g.uid))).exists()||(await ya(Oe(fe,"users",g.uid),{username:g.displayName,email:g.email,photoURL:g.photoURL,hasCompletedQuestionnaire:!1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),await ya(Oe(fe,"userStats",g.uid),{totalPosts:0,totalLikes:0,totalComments:0,totalShares:0})),s({title:"Sesión iniciada con Google",description:"¡Bienvenido!"}),g}catch(p){throw s({title:"Error al iniciar sesión con Google",description:p.message,variant:"destructive"}),p}},u=async p=>{try{await Dg(mr.currentUser,{displayName:p}),await Nr(Oe(fe,"users",mr.currentUser.uid),{username:p,updatedAt:new Date().toISOString()}),n(g=>({...g,displayName:p,username:p})),s({title:"Nombre de usuario actualizado",description:"Tu nombre de usuario se ha actualizado correctamente"})}catch(g){throw s({title:"Error al actualizar nombre de usuario",description:g.message,variant:"destructive"}),g}},h=async p=>{try{return await Dg(mr.currentUser,{photoURL:p}),await Nr(Oe(fe,"users",mr.currentUser.uid),{photoURL:p,updatedAt:new Date().toISOString()}),n(g=>({...g,photoURL:p})),p}catch(g){throw console.error("Error updating profile image:",g),g}},f=async()=>{try{await E5(mr),s({title:"Sesión cerrada",description:"¡Hasta pronto!"})}catch(p){throw s({title:"Error al cerrar sesión",description:p.message,variant:"destructive"}),p}};return m.jsx(cO.Provider,{value:{user:e,signup:a,login:l,loginWithGoogle:c,logout:f,updateUsername:u,updateProfileImage:h,updateUserState:o},children:!r&&t})},uO=_.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),hm=_.createContext({}),fm=_.createContext(null),pm=typeof document<"u",K_=pm?_.useLayoutEffect:_.useEffect,dO=_.createContext({strict:!1}),Q_=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),L8="framerAppearId",hO="data-"+Q_(L8);function V8(t,e,n,r){const{visualElement:i}=_.useContext(hm),s=_.useContext(dO),o=_.useContext(fm),a=_.useContext(uO).reducedMotion,l=_.useRef();r=r||s.renderer,!l.current&&r&&(l.current=r(t,{visualState:e,parent:i,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const c=l.current;_.useInsertionEffect(()=>{c&&c.update(n,o)});const u=_.useRef(!!(n[hO]&&!window.HandoffComplete));return K_(()=>{c&&(c.render(),u.current&&c.animationState&&c.animationState.animateChanges())}),_.useEffect(()=>{c&&(c.updateFeatures(),!u.current&&c.animationState&&c.animationState.animateChanges(),u.current&&(u.current=!1,window.HandoffComplete=!0))}),c}function Ra(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function M8(t,e,n){return _.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Ra(n)&&(n.current=r))},[e])}function Cu(t){return typeof t=="string"||Array.isArray(t)}function mm(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const Y_=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],X_=["initial",...Y_];function gm(t){return mm(t.animate)||X_.some(e=>Cu(t[e]))}function fO(t){return!!(gm(t)||t.variants)}function j8(t,e){if(gm(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Cu(n)?n:void 0,animate:Cu(r)?r:void 0}}return t.inherit!==!1?e:{}}function F8(t){const{initial:e,animate:n}=j8(t,_.useContext(hm));return _.useMemo(()=>({initial:e,animate:n}),[lS(e),lS(n)])}function lS(t){return Array.isArray(t)?t.join(" "):t}const cS={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Pu={};for(const t in cS)Pu[t]={isEnabled:e=>cS[t].some(n=>!!e[n])};function U8(t){for(const e in t)Pu[e]={...Pu[e],...t[e]}}const J_=_.createContext({}),pO=_.createContext({}),$8=Symbol.for("motionComponentSymbol");function B8({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){t&&U8(t);function s(a,l){let c;const u={..._.useContext(uO),...a,layoutId:z8(a)},{isStatic:h}=u,f=F8(a),p=r(a,h);if(!h&&pm){f.visualElement=V8(i,p,u,e);const g=_.useContext(pO),v=_.useContext(dO).strict;f.visualElement&&(c=f.visualElement.loadFeatures(u,v,t,g))}return _.createElement(hm.Provider,{value:f},c&&f.visualElement?_.createElement(c,{visualElement:f.visualElement,...u}):null,n(i,a,M8(p,f.visualElement,l),p,h,f.visualElement))}const o=_.forwardRef(s);return o[$8]=i,o}function z8({layoutId:t}){const e=_.useContext(J_).id;return e&&t!==void 0?e+"-"+t:t}function W8(t){function e(r,i={}){return B8(t(r,i))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(r,i)=>(n.has(i)||n.set(i,e(i)),n.get(i))})}const q8=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Z_(t){return typeof t!="string"||t.includes("-")?!1:!!(q8.indexOf(t)>-1||/[A-Z]/.test(t))}const Qf={};function H8(t){Object.assign(Qf,t)}const hd=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],zo=new Set(hd);function mO(t,{layout:e,layoutId:n}){return zo.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Qf[t]||t==="opacity")}const mn=t=>!!(t&&t.getVelocity),G8={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},K8=hd.length;function Q8(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},r,i){let s="";for(let o=0;o<K8;o++){const a=hd[o];if(t[a]!==void 0){const l=G8[a]||a;s+=`${l}(${t[a]}) `}}return e&&!t.z&&(s+="translateZ(0)"),s=s.trim(),i?s=i(t,r?"":s):n&&r&&(s="none"),s}const gO=t=>e=>typeof e=="string"&&e.startsWith(t),yO=gO("--"),t0=gO("var(--"),Y8=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,X8=(t,e)=>e&&typeof t=="number"?e.transform(t):t,us=(t,e,n)=>Math.min(Math.max(n,t),e),Wo={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Wc={...Wo,transform:t=>us(0,1,t)},dh={...Wo,default:1},qc=t=>Math.round(t*1e5)/1e5,ym=/(-)?([\d]*\.?[\d])+/g,vO=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,J8=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function fd(t){return typeof t=="string"}const pd=t=>({test:e=>fd(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Ci=pd("deg"),Ar=pd("%"),ae=pd("px"),Z8=pd("vh"),eG=pd("vw"),uS={...Ar,parse:t=>Ar.parse(t)/100,transform:t=>Ar.transform(t*100)},dS={...Wo,transform:Math.round},wO={borderWidth:ae,borderTopWidth:ae,borderRightWidth:ae,borderBottomWidth:ae,borderLeftWidth:ae,borderRadius:ae,radius:ae,borderTopLeftRadius:ae,borderTopRightRadius:ae,borderBottomRightRadius:ae,borderBottomLeftRadius:ae,width:ae,maxWidth:ae,height:ae,maxHeight:ae,size:ae,top:ae,right:ae,bottom:ae,left:ae,padding:ae,paddingTop:ae,paddingRight:ae,paddingBottom:ae,paddingLeft:ae,margin:ae,marginTop:ae,marginRight:ae,marginBottom:ae,marginLeft:ae,rotate:Ci,rotateX:Ci,rotateY:Ci,rotateZ:Ci,scale:dh,scaleX:dh,scaleY:dh,scaleZ:dh,skew:Ci,skewX:Ci,skewY:Ci,distance:ae,translateX:ae,translateY:ae,translateZ:ae,x:ae,y:ae,z:ae,perspective:ae,transformPerspective:ae,opacity:Wc,originX:uS,originY:uS,originZ:ae,zIndex:dS,fillOpacity:Wc,strokeOpacity:Wc,numOctaves:dS};function ex(t,e,n,r){const{style:i,vars:s,transform:o,transformOrigin:a}=t;let l=!1,c=!1,u=!0;for(const h in e){const f=e[h];if(yO(h)){s[h]=f;continue}const p=wO[h],g=X8(f,p);if(zo.has(h)){if(l=!0,o[h]=g,!u)continue;f!==(p.default||0)&&(u=!1)}else h.startsWith("origin")?(c=!0,a[h]=g):i[h]=g}if(e.transform||(l||r?i.transform=Q8(t.transform,n,u,r):i.transform&&(i.transform="none")),c){const{originX:h="50%",originY:f="50%",originZ:p=0}=a;i.transformOrigin=`${h} ${f} ${p}`}}const tx=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function _O(t,e,n){for(const r in e)!mn(e[r])&&!mO(r,n)&&(t[r]=e[r])}function tG({transformTemplate:t},e,n){return _.useMemo(()=>{const r=tx();return ex(r,e,{enableHardwareAcceleration:!n},t),Object.assign({},r.vars,r.style)},[e])}function nG(t,e,n){const r=t.style||{},i={};return _O(i,r,t),Object.assign(i,tG(t,e,n)),t.transformValues?t.transformValues(i):i}function rG(t,e,n){const r={},i=nG(t,e,n);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=i,r}const iG=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Yf(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||iG.has(t)}let xO=t=>!Yf(t);function sG(t){t&&(xO=e=>e.startsWith("on")?!Yf(e):t(e))}try{sG(require("@emotion/is-prop-valid").default)}catch{}function oG(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(xO(i)||n===!0&&Yf(i)||!e&&!Yf(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function hS(t,e,n){return typeof t=="string"?t:ae.transform(e+n*t)}function aG(t,e,n){const r=hS(e,t.x,t.width),i=hS(n,t.y,t.height);return`${r} ${i}`}const lG={offset:"stroke-dashoffset",array:"stroke-dasharray"},cG={offset:"strokeDashoffset",array:"strokeDasharray"};function uG(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?lG:cG;t[s.offset]=ae.transform(-r);const o=ae.transform(e),a=ae.transform(n);t[s.array]=`${o} ${a}`}function nx(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},u,h,f){if(ex(t,c,u,f),h){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:p,style:g,dimensions:v}=t;p.transform&&(v&&(g.transform=p.transform),delete p.transform),v&&(i!==void 0||s!==void 0||g.transform)&&(g.transformOrigin=aG(v,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(p.x=e),n!==void 0&&(p.y=n),r!==void 0&&(p.scale=r),o!==void 0&&uG(p,o,a,l,!1)}const EO=()=>({...tx(),attrs:{}}),rx=t=>typeof t=="string"&&t.toLowerCase()==="svg";function dG(t,e,n,r){const i=_.useMemo(()=>{const s=EO();return nx(s,e,{enableHardwareAcceleration:!1},rx(r),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};_O(s,t.style,t),i.style={...s,...i.style}}return i}function hG(t=!1){return(n,r,i,{latestValues:s},o)=>{const l=(Z_(n)?dG:rG)(r,s,o,n),u={...oG(r,typeof n=="string",t),...l,ref:i},{children:h}=r,f=_.useMemo(()=>mn(h)?h.get():h,[h]);return _.createElement(n,{...u,children:f})}}function TO(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}const bO=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function SO(t,e,n,r){TO(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(bO.has(i)?i:Q_(i),e.attrs[i])}function ix(t,e){const{style:n}=t,r={};for(const i in n)(mn(n[i])||e.style&&mn(e.style[i])||mO(i,t))&&(r[i]=n[i]);return r}function IO(t,e){const n=ix(t,e);for(const r in t)if(mn(t[r])||mn(e[r])){const i=hd.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[i]=t[r]}return n}function sx(t,e,n,r={},i={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,i)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,i)),e}function CO(t){const e=_.useRef(null);return e.current===null&&(e.current=t()),e.current}const Xf=t=>Array.isArray(t),fG=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),pG=t=>Xf(t)?t[t.length-1]||0:t;function Hh(t){const e=mn(t)?t.get():t;return fG(e)?e.toValue():e}function mG({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},r,i,s){const o={latestValues:gG(r,i,s,t),renderState:e()};return n&&(o.mount=a=>n(r,a,o)),o}const PO=t=>(e,n)=>{const r=_.useContext(hm),i=_.useContext(fm),s=()=>mG(t,e,r,i);return n?s():CO(s)};function gG(t,e,n,r){const i={},s=r(t,{});for(const f in s)i[f]=Hh(s[f]);let{initial:o,animate:a}=t;const l=gm(t),c=fO(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let u=n?n.initial===!1:!1;u=u||o===!1;const h=u?a:o;return h&&typeof h!="boolean"&&!mm(h)&&(Array.isArray(h)?h:[h]).forEach(p=>{const g=sx(t,p);if(!g)return;const{transitionEnd:v,transition:w,...E}=g;for(const x in E){let b=E[x];if(Array.isArray(b)){const C=u?b.length-1:0;b=b[C]}b!==null&&(i[x]=b)}for(const x in v)i[x]=v[x]}),i}const nt=t=>t;class fS{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const n=this.order.indexOf(e);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function yG(t){let e=new fS,n=new fS,r=0,i=!1,s=!1;const o=new WeakSet,a={schedule:(l,c=!1,u=!1)=>{const h=u&&i,f=h?e:n;return c&&o.add(l),f.add(l)&&h&&i&&(r=e.order.length),l},cancel:l=>{n.remove(l),o.delete(l)},process:l=>{if(i){s=!0;return}if(i=!0,[e,n]=[n,e],n.clear(),r=e.order.length,r)for(let c=0;c<r;c++){const u=e.order[c];u(l),o.has(u)&&(a.schedule(u),t())}i=!1,s&&(s=!1,a.process(l))}};return a}const hh=["prepare","read","update","preRender","render","postRender"],vG=40;function wG(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=hh.reduce((h,f)=>(h[f]=yG(()=>n=!0),h),{}),o=h=>s[h].process(i),a=()=>{const h=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(h-i.timestamp,vG),1),i.timestamp=h,i.isProcessing=!0,hh.forEach(o),i.isProcessing=!1,n&&e&&(r=!1,t(a))},l=()=>{n=!0,r=!0,i.isProcessing||t(a)};return{schedule:hh.reduce((h,f)=>{const p=s[f];return h[f]=(g,v=!1,w=!1)=>(n||l(),p.schedule(g,v,w)),h},{}),cancel:h=>hh.forEach(f=>s[f].cancel(h)),state:i,steps:s}}const{schedule:Ve,cancel:ci,state:Vt,steps:Gg}=wG(typeof requestAnimationFrame<"u"?requestAnimationFrame:nt,!0),_G={useVisualState:PO({scrapeMotionValuesFromProps:IO,createRenderState:EO,onMount:(t,e,{renderState:n,latestValues:r})=>{Ve.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),Ve.render(()=>{nx(n,r,{enableHardwareAcceleration:!1},rx(e.tagName),t.transformTemplate),SO(e,n)})}})},xG={useVisualState:PO({scrapeMotionValuesFromProps:ix,createRenderState:tx})};function EG(t,{forwardMotionProps:e=!1},n,r){return{...Z_(t)?_G:xG,preloadedFeatures:n,useRender:hG(e),createVisualElement:r,Component:t}}function Qr(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const AO=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function vm(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const TG=t=>e=>AO(e)&&t(e,vm(e));function Jr(t,e,n,r){return Qr(t,e,TG(n),r)}const bG=(t,e)=>n=>e(t(n)),ts=(...t)=>t.reduce(bG);function RO(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const pS=RO("dragHorizontal"),mS=RO("dragVertical");function kO(t){let e=!1;if(t==="y")e=mS();else if(t==="x")e=pS();else{const n=pS(),r=mS();n&&r?e=()=>{n(),r()}:(n&&n(),r&&r())}return e}function NO(){const t=kO(!0);return t?(t(),!1):!0}class Ss{constructor(e){this.isMounted=!1,this.node=e}update(){}}function gS(t,e){const n="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End"),i=(s,o)=>{if(s.pointerType==="touch"||NO())return;const a=t.getProps();t.animationState&&a.whileHover&&t.animationState.setActive("whileHover",e),a[r]&&Ve.update(()=>a[r](s,o))};return Jr(t.current,n,i,{passive:!t.getProps()[r]})}class SG extends Ss{mount(){this.unmount=ts(gS(this.node,!0),gS(this.node,!1))}unmount(){}}class IG extends Ss{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ts(Qr(this.node.current,"focus",()=>this.onFocus()),Qr(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const DO=(t,e)=>e?t===e?!0:DO(t,e.parentElement):!1;function Kg(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,vm(n))}class CG extends Ss{constructor(){super(...arguments),this.removeStartListeners=nt,this.removeEndListeners=nt,this.removeAccessibleListeners=nt,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),s=Jr(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:u,globalTapTarget:h}=this.node.getProps();Ve.update(()=>{!h&&!DO(this.node.current,a.target)?u&&u(a,l):c&&c(a,l)})},{passive:!(r.onTap||r.onPointerUp)}),o=Jr(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=ts(s,o),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||Kg("up",(l,c)=>{const{onTap:u}=this.node.getProps();u&&Ve.update(()=>u(l,c))})};this.removeEndListeners(),this.removeEndListeners=Qr(this.node.current,"keyup",o),Kg("down",(a,l)=>{this.startPress(a,l)})},n=Qr(this.node.current,"keydown",e),r=()=>{this.isPressing&&Kg("cancel",(s,o)=>this.cancelPress(s,o))},i=Qr(this.node.current,"blur",r);this.removeAccessibleListeners=ts(n,i)}}startPress(e,n){this.isPressing=!0;const{onTapStart:r,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&Ve.update(()=>r(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!NO()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&Ve.update(()=>r(e,n))}mount(){const e=this.node.getProps(),n=Jr(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=Qr(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=ts(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const n0=new WeakMap,Qg=new WeakMap,PG=t=>{const e=n0.get(t.target);e&&e(t)},AG=t=>{t.forEach(PG)};function RG({root:t,...e}){const n=t||document;Qg.has(n)||Qg.set(n,{});const r=Qg.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(AG,{root:t,...e})),r[i]}function kG(t,e,n){const r=RG(e);return n0.set(t,n),r.observe(t),()=>{n0.delete(t),r.unobserve(t)}}const NG={some:0,all:1};class DG extends Ss{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:NG[i]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:h}=this.node.getProps(),f=c?u:h;f&&f(l)};return kG(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(OG(e,n))&&this.startObserver()}unmount(){}}function OG({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const LG={inView:{Feature:DG},tap:{Feature:CG},focus:{Feature:IG},hover:{Feature:SG}};function OO(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function VG(t){const e={};return t.values.forEach((n,r)=>e[r]=n.get()),e}function MG(t){const e={};return t.values.forEach((n,r)=>e[r]=n.getVelocity()),e}function wm(t,e,n){const r=t.getProps();return sx(r,e,n!==void 0?n:r.custom,VG(t),MG(t))}let jG=nt,ox=nt;const ns=t=>t*1e3,Zr=t=>t/1e3,FG={current:!1},LO=t=>Array.isArray(t)&&typeof t[0]=="number";function VO(t){return!!(!t||typeof t=="string"&&MO[t]||LO(t)||Array.isArray(t)&&t.every(VO))}const Sc=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,MO={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Sc([0,.65,.55,1]),circOut:Sc([.55,0,1,.45]),backIn:Sc([.31,.01,.66,-.59]),backOut:Sc([.33,1.53,.69,.99])};function jO(t){if(t)return LO(t)?Sc(t):Array.isArray(t)?t.map(jO):MO[t]}function UG(t,e,n,{delay:r=0,duration:i,repeat:s=0,repeatType:o="loop",ease:a,times:l}={}){const c={[e]:n};l&&(c.offset=l);const u=jO(a);return Array.isArray(u)&&(c.easing=u),t.animate(c,{delay:r,duration:i,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}function $G(t,{repeat:e,repeatType:n="loop"}){const r=e&&n!=="loop"&&e%2===1?0:t.length-1;return t[r]}const FO=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,BG=1e-7,zG=12;function WG(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=FO(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>BG&&++a<zG);return o}function md(t,e,n,r){if(t===e&&n===r)return nt;const i=s=>WG(s,0,1,t,n);return s=>s===0||s===1?s:FO(i(s),e,r)}const qG=md(.42,0,1,1),HG=md(0,0,.58,1),UO=md(.42,0,.58,1),GG=t=>Array.isArray(t)&&typeof t[0]!="number",$O=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,BO=t=>e=>1-t(1-e),ax=t=>1-Math.sin(Math.acos(t)),zO=BO(ax),KG=$O(ax),WO=md(.33,1.53,.69,.99),lx=BO(WO),QG=$O(lx),YG=t=>(t*=2)<1?.5*lx(t):.5*(2-Math.pow(2,-10*(t-1))),XG={linear:nt,easeIn:qG,easeInOut:UO,easeOut:HG,circIn:ax,circInOut:KG,circOut:zO,backIn:lx,backInOut:QG,backOut:WO,anticipate:YG},yS=t=>{if(Array.isArray(t)){ox(t.length===4);const[e,n,r,i]=t;return md(e,n,r,i)}else if(typeof t=="string")return XG[t];return t},cx=(t,e)=>n=>!!(fd(n)&&J8.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),qO=(t,e,n)=>r=>{if(!fd(r))return r;const[i,s,o,a]=r.match(ym);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},JG=t=>us(0,255,t),Yg={...Wo,transform:t=>Math.round(JG(t))},Zs={test:cx("rgb","red"),parse:qO("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Yg.transform(t)+", "+Yg.transform(e)+", "+Yg.transform(n)+", "+qc(Wc.transform(r))+")"};function ZG(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const r0={test:cx("#"),parse:ZG,transform:Zs.transform},ka={test:cx("hsl","hue"),parse:qO("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Ar.transform(qc(e))+", "+Ar.transform(qc(n))+", "+qc(Wc.transform(r))+")"},Kt={test:t=>Zs.test(t)||r0.test(t)||ka.test(t),parse:t=>Zs.test(t)?Zs.parse(t):ka.test(t)?ka.parse(t):r0.parse(t),transform:t=>fd(t)?t:t.hasOwnProperty("red")?Zs.transform(t):ka.transform(t)},Ge=(t,e,n)=>-n*t+n*e+t;function Xg(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function eK({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=Xg(l,a,t+1/3),s=Xg(l,a,t),o=Xg(l,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}const Jg=(t,e,n)=>{const r=t*t;return Math.sqrt(Math.max(0,n*(e*e-r)+r))},tK=[r0,Zs,ka],nK=t=>tK.find(e=>e.test(t));function vS(t){const e=nK(t);let n=e.parse(t);return e===ka&&(n=eK(n)),n}const HO=(t,e)=>{const n=vS(t),r=vS(e),i={...n};return s=>(i.red=Jg(n.red,r.red,s),i.green=Jg(n.green,r.green,s),i.blue=Jg(n.blue,r.blue,s),i.alpha=Ge(n.alpha,r.alpha,s),Zs.transform(i))};function rK(t){var e,n;return isNaN(t)&&fd(t)&&(((e=t.match(ym))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(vO))===null||n===void 0?void 0:n.length)||0)>0}const GO={regex:Y8,countKey:"Vars",token:"${v}",parse:nt},KO={regex:vO,countKey:"Colors",token:"${c}",parse:Kt.parse},QO={regex:ym,countKey:"Numbers",token:"${n}",parse:Wo.parse};function Zg(t,{regex:e,countKey:n,token:r,parse:i}){const s=t.tokenised.match(e);s&&(t["num"+n]=s.length,t.tokenised=t.tokenised.replace(e,r),t.values.push(...s.map(i)))}function Jf(t){const e=t.toString(),n={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&Zg(n,GO),Zg(n,KO),Zg(n,QO),n}function YO(t){return Jf(t).values}function XO(t){const{values:e,numColors:n,numVars:r,tokenised:i}=Jf(t),s=e.length;return o=>{let a=i;for(let l=0;l<s;l++)l<r?a=a.replace(GO.token,o[l]):l<r+n?a=a.replace(KO.token,Kt.transform(o[l])):a=a.replace(QO.token,qc(o[l]));return a}}const iK=t=>typeof t=="number"?0:t;function sK(t){const e=YO(t);return XO(t)(e.map(iK))}const ds={test:rK,parse:YO,createTransformer:XO,getAnimatableNone:sK},JO=(t,e)=>n=>`${n>0?e:t}`;function ZO(t,e){return typeof t=="number"?n=>Ge(t,e,n):Kt.test(t)?HO(t,e):t.startsWith("var(")?JO(t,e):t2(t,e)}const e2=(t,e)=>{const n=[...t],r=n.length,i=t.map((s,o)=>ZO(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}},oK=(t,e)=>{const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=ZO(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}},t2=(t,e)=>{const n=ds.createTransformer(e),r=Jf(t),i=Jf(e);return r.numVars===i.numVars&&r.numColors===i.numColors&&r.numNumbers>=i.numNumbers?ts(e2(r.values,i.values),n):JO(t,e)},Au=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},wS=(t,e)=>n=>Ge(t,e,n);function aK(t){return typeof t=="number"?wS:typeof t=="string"?Kt.test(t)?HO:t2:Array.isArray(t)?e2:typeof t=="object"?oK:wS}function lK(t,e,n){const r=[],i=n||aK(t[0]),s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||nt:e;a=ts(l,a)}r.push(a)}return r}function n2(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(ox(s===e.length),s===1)return()=>e[0];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=lK(e,r,i),a=o.length,l=c=>{let u=0;if(a>1)for(;u<t.length-2&&!(c<t[u+1]);u++);const h=Au(t[u],t[u+1],c);return o[u](h)};return n?c=>l(us(t[0],t[s-1],c)):l}function cK(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Au(0,e,r);t.push(Ge(n,1,i))}}function uK(t){const e=[0];return cK(e,t.length-1),e}function dK(t,e){return t.map(n=>n*e)}function hK(t,e){return t.map(()=>e||UO).splice(0,t.length-1)}function Zf({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=GG(r)?r.map(yS):yS(r),s={done:!1,value:e[0]},o=dK(n&&n.length===e.length?n:uK(e),t),a=n2(o,e,{ease:Array.isArray(i)?i:hK(e,i)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}function r2(t,e){return e?t*(1e3/e):0}const fK=5;function i2(t,e,n){const r=Math.max(e-fK,0);return r2(n-t(r),e-r)}const ey=.001,pK=.01,_S=10,mK=.05,gK=1;function yK({duration:t=800,bounce:e=.25,velocity:n=0,mass:r=1}){let i,s;jG(t<=ns(_S));let o=1-e;o=us(mK,gK,o),t=us(pK,_S,Zr(t)),o<1?(i=c=>{const u=c*o,h=u*t,f=u-n,p=i0(c,o),g=Math.exp(-h);return ey-f/p*g},s=c=>{const h=c*o*t,f=h*n+n,p=Math.pow(o,2)*Math.pow(c,2)*t,g=Math.exp(-h),v=i0(Math.pow(c,2),o);return(-i(c)+ey>0?-1:1)*((f-p)*g)/v}):(i=c=>{const u=Math.exp(-c*t),h=(c-n)*t+1;return-ey+u*h},s=c=>{const u=Math.exp(-c*t),h=(n-c)*(t*t);return u*h});const a=5/t,l=wK(i,s,a);if(t=ns(t),isNaN(l))return{stiffness:100,damping:10,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const vK=12;function wK(t,e,n){let r=n;for(let i=1;i<vK;i++)r=r-t(r)/e(r);return r}function i0(t,e){return t*Math.sqrt(1-e*e)}const _K=["duration","bounce"],xK=["stiffness","damping","mass"];function xS(t,e){return e.some(n=>t[n]!==void 0)}function EK(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!xS(t,xK)&&xS(t,_K)){const n=yK(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}function s2({keyframes:t,restDelta:e,restSpeed:n,...r}){const i=t[0],s=t[t.length-1],o={done:!1,value:i},{stiffness:a,damping:l,mass:c,duration:u,velocity:h,isResolvedFromDuration:f}=EK({...r,velocity:-Zr(r.velocity||0)}),p=h||0,g=l/(2*Math.sqrt(a*c)),v=s-i,w=Zr(Math.sqrt(a/c)),E=Math.abs(v)<5;n||(n=E?.01:2),e||(e=E?.005:.5);let x;if(g<1){const b=i0(w,g);x=C=>{const N=Math.exp(-g*w*C);return s-N*((p+g*w*v)/b*Math.sin(b*C)+v*Math.cos(b*C))}}else if(g===1)x=b=>s-Math.exp(-w*b)*(v+(p+w*v)*b);else{const b=w*Math.sqrt(g*g-1);x=C=>{const N=Math.exp(-g*w*C),D=Math.min(b*C,300);return s-N*((p+g*w*v)*Math.sinh(D)+b*v*Math.cosh(D))/b}}return{calculatedDuration:f&&u||null,next:b=>{const C=x(b);if(f)o.done=b>=u;else{let N=p;b!==0&&(g<1?N=i2(x,b,C):N=0);const D=Math.abs(N)<=n,I=Math.abs(s-C)<=e;o.done=D&&I}return o.value=o.done?s:C,o}}}function ES({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:u}){const h=t[0],f={done:!1,value:h},p=S=>a!==void 0&&S<a||l!==void 0&&S>l,g=S=>a===void 0?l:l===void 0||Math.abs(a-S)<Math.abs(l-S)?a:l;let v=n*e;const w=h+v,E=o===void 0?w:o(w);E!==w&&(v=E-h);const x=S=>-v*Math.exp(-S/r),b=S=>E+x(S),C=S=>{const A=x(S),R=b(S);f.done=Math.abs(A)<=c,f.value=f.done?E:R};let N,D;const I=S=>{p(f.value)&&(N=S,D=s2({keyframes:[f.value,g(f.value)],velocity:i2(b,S,f.value),damping:i,stiffness:s,restDelta:c,restSpeed:u}))};return I(0),{calculatedDuration:null,next:S=>{let A=!1;return!D&&N===void 0&&(A=!0,C(S),I(S)),N!==void 0&&S>N?D.next(S-N):(!A&&C(S),f)}}}const TK=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Ve.update(e,!0),stop:()=>ci(e),now:()=>Vt.isProcessing?Vt.timestamp:performance.now()}},TS=2e4;function bS(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<TS;)e+=n,r=t.next(e);return e>=TS?1/0:e}const bK={decay:ES,inertia:ES,tween:Zf,keyframes:Zf,spring:s2};function ep({autoplay:t=!0,delay:e=0,driver:n=TK,keyframes:r,type:i="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:a="loop",onPlay:l,onStop:c,onComplete:u,onUpdate:h,...f}){let p=1,g=!1,v,w;const E=()=>{w=new Promise(J=>{v=J})};E();let x;const b=bK[i]||Zf;let C;b!==Zf&&typeof r[0]!="number"&&(C=n2([0,100],r,{clamp:!1}),r=[0,100]);const N=b({...f,keyframes:r});let D;a==="mirror"&&(D=b({...f,keyframes:[...r].reverse(),velocity:-(f.velocity||0)}));let I="idle",S=null,A=null,R=null;N.calculatedDuration===null&&s&&(N.calculatedDuration=bS(N));const{calculatedDuration:O}=N;let L=1/0,k=1/0;O!==null&&(L=O+o,k=L*(s+1)-o);let B=0;const Q=J=>{if(A===null)return;p>0&&(A=Math.min(A,J)),p<0&&(A=Math.min(J-k/p,A)),S!==null?B=S:B=Math.round(J-A)*p;const ue=B-e*(p>=0?1:-1),ce=p>=0?ue<0:ue>k;B=Math.max(ue,0),I==="finished"&&S===null&&(B=k);let q=B,ie=N;if(s){const hr=Math.min(B,k)/L;let On=Math.floor(hr),zt=hr%1;!zt&&hr>=1&&(zt=1),zt===1&&On--,On=Math.min(On,s+1),!!(On%2)&&(a==="reverse"?(zt=1-zt,o&&(zt-=o/L)):a==="mirror"&&(ie=D)),q=us(0,1,zt)*L}const Te=ce?{done:!1,value:r[0]}:ie.next(q);C&&(Te.value=C(Te.value));let{done:st}=Te;!ce&&O!==null&&(st=p>=0?B>=k:B<=0);const Dn=S===null&&(I==="finished"||I==="running"&&st);return h&&h(Te.value),Dn&&F(),Te},K=()=>{x&&x.stop(),x=void 0},re=()=>{I="idle",K(),v(),E(),A=R=null},F=()=>{I="finished",u&&u(),K(),v()},z=()=>{if(g)return;x||(x=n(Q));const J=x.now();l&&l(),S!==null?A=J-S:(!A||I==="finished")&&(A=J),I==="finished"&&E(),R=A,S=null,I="running",x.start()};t&&z();const Y={then(J,ue){return w.then(J,ue)},get time(){return Zr(B)},set time(J){J=ns(J),B=J,S!==null||!x||p===0?S=J:A=x.now()-J/p},get duration(){const J=N.calculatedDuration===null?bS(N):N.calculatedDuration;return Zr(J)},get speed(){return p},set speed(J){J===p||!x||(p=J,Y.time=Zr(B))},get state(){return I},play:z,pause:()=>{I="paused",S=B},stop:()=>{g=!0,I!=="idle"&&(I="idle",c&&c(),re())},cancel:()=>{R!==null&&Q(R),re()},complete:()=>{I="finished"},sample:J=>(A=0,Q(J))};return Y}function SK(t){let e;return()=>(e===void 0&&(e=t()),e)}const IK=SK(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),CK=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),fh=10,PK=2e4,AK=(t,e)=>e.type==="spring"||t==="backgroundColor"||!VO(e.ease);function RK(t,e,{onUpdate:n,onComplete:r,...i}){if(!(IK()&&CK.has(e)&&!i.repeatDelay&&i.repeatType!=="mirror"&&i.damping!==0&&i.type!=="inertia"))return!1;let o=!1,a,l,c=!1;const u=()=>{l=new Promise(b=>{a=b})};u();let{keyframes:h,duration:f=300,ease:p,times:g}=i;if(AK(e,i)){const b=ep({...i,repeat:0,delay:0});let C={done:!1,value:h[0]};const N=[];let D=0;for(;!C.done&&D<PK;)C=b.sample(D),N.push(C.value),D+=fh;g=void 0,h=N,f=D-fh,p="linear"}const v=UG(t.owner.current,e,h,{...i,duration:f,ease:p,times:g}),w=()=>{c=!1,v.cancel()},E=()=>{c=!0,Ve.update(w),a(),u()};return v.onfinish=()=>{c||(t.set($G(h,i)),r&&r(),E())},{then(b,C){return l.then(b,C)},attachTimeline(b){return v.timeline=b,v.onfinish=null,nt},get time(){return Zr(v.currentTime||0)},set time(b){v.currentTime=ns(b)},get speed(){return v.playbackRate},set speed(b){v.playbackRate=b},get duration(){return Zr(f)},play:()=>{o||(v.play(),ci(w))},pause:()=>v.pause(),stop:()=>{if(o=!0,v.playState==="idle")return;const{currentTime:b}=v;if(b){const C=ep({...i,autoplay:!1});t.setWithVelocity(C.sample(b-fh).value,C.sample(b).value,fh)}E()},complete:()=>{c||v.finish()},cancel:E}}function kK({keyframes:t,delay:e,onUpdate:n,onComplete:r}){const i=()=>(n&&n(t[t.length-1]),r&&r(),{time:0,speed:1,duration:0,play:nt,pause:nt,stop:nt,then:s=>(s(),Promise.resolve()),cancel:nt,complete:nt});return e?ep({keyframes:[0,1],duration:0,delay:e,onComplete:i}):i()}const NK={type:"spring",stiffness:500,damping:25,restSpeed:10},DK=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),OK={type:"keyframes",duration:.8},LK={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},VK=(t,{keyframes:e})=>e.length>2?OK:zo.has(t)?t.startsWith("scale")?DK(e[1]):NK:LK,s0=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(ds.test(e)||e==="0")&&!e.startsWith("url(")),MK=new Set(["brightness","contrast","saturate","opacity"]);function jK(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(ym)||[];if(!r)return t;const i=n.replace(r,"");let s=MK.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const FK=/([a-z-]*)\(.*?\)/g,o0={...ds,getAnimatableNone:t=>{const e=t.match(FK);return e?e.map(jK).join(" "):t}},UK={...wO,color:Kt,backgroundColor:Kt,outlineColor:Kt,fill:Kt,stroke:Kt,borderColor:Kt,borderTopColor:Kt,borderRightColor:Kt,borderBottomColor:Kt,borderLeftColor:Kt,filter:o0,WebkitFilter:o0},ux=t=>UK[t];function o2(t,e){let n=ux(t);return n!==o0&&(n=ds),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const a2=t=>/^0[^.\s]+$/.test(t);function $K(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||a2(t)}function BK(t,e,n,r){const i=s0(e,n);let s;Array.isArray(n)?s=[...n]:s=[null,n];const o=r.from!==void 0?r.from:t.get();let a;const l=[];for(let c=0;c<s.length;c++)s[c]===null&&(s[c]=c===0?o:s[c-1]),$K(s[c])&&l.push(c),typeof s[c]=="string"&&s[c]!=="none"&&s[c]!=="0"&&(a=s[c]);if(i&&l.length&&a)for(let c=0;c<l.length;c++){const u=l[c];s[u]=o2(e,a)}return s}function zK({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}function dx(t,e){return t[e]||t.default||t}const WK={skipAnimations:!1},hx=(t,e,n,r={})=>i=>{const s=dx(r,t)||{},o=s.delay||r.delay||0;let{elapsed:a=0}=r;a=a-ns(o);const l=BK(e,t,n,s),c=l[0],u=l[l.length-1],h=s0(t,c),f=s0(t,u);let p={keyframes:l,velocity:e.getVelocity(),ease:"easeOut",...s,delay:-a,onUpdate:g=>{e.set(g),s.onUpdate&&s.onUpdate(g)},onComplete:()=>{i(),s.onComplete&&s.onComplete()}};if(zK(s)||(p={...p,...VK(t,p)}),p.duration&&(p.duration=ns(p.duration)),p.repeatDelay&&(p.repeatDelay=ns(p.repeatDelay)),!h||!f||FG.current||s.type===!1||WK.skipAnimations)return kK(p);if(!r.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const g=RK(e,t,p);if(g)return g}return ep(p)};function tp(t){return!!(mn(t)&&t.add)}const l2=t=>/^\-?\d*\.?\d+$/.test(t);function fx(t,e){t.indexOf(e)===-1&&t.push(e)}function px(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class mx{constructor(){this.subscriptions=[]}add(e){return fx(this.subscriptions,e),()=>px(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const qK=t=>!isNaN(parseFloat(t));class HK{constructor(e,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,i=!0)=>{this.prev=this.current,this.current=r;const{delta:s,timestamp:o}=Vt;this.lastUpdated!==o&&(this.timeDelta=s,this.lastUpdated=o,Ve.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Ve.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=qK(this.current),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new mx);const r=this.events[e].add(n);return e==="change"?()=>{r(),Ve.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?r2(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ml(t,e){return new HK(t,e)}const c2=t=>e=>e.test(t),GK={test:t=>t==="auto",parse:t=>t},u2=[Wo,ae,Ar,Ci,eG,Z8,GK],lc=t=>u2.find(c2(t)),KK=[...u2,Kt,ds],QK=t=>KK.find(c2(t));function YK(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,ml(n))}function XK(t,e){const n=wm(t,e);let{transitionEnd:r={},transition:i={},...s}=n?t.makeTargetAnimatable(n,!1):{};s={...s,...r};for(const o in s){const a=pG(s[o]);YK(t,o,a)}}function JK(t,e,n){var r,i;const s=Object.keys(e).filter(a=>!t.hasValue(a)),o=s.length;if(o)for(let a=0;a<o;a++){const l=s[a],c=e[l];let u=null;Array.isArray(c)&&(u=c[0]),u===null&&(u=(i=(r=n[l])!==null&&r!==void 0?r:t.readValue(l))!==null&&i!==void 0?i:e[l]),u!=null&&(typeof u=="string"&&(l2(u)||a2(u))?u=parseFloat(u):!QK(u)&&ds.test(c)&&(u=o2(l,c)),t.addValue(l,ml(u,{owner:t})),n[l]===void 0&&(n[l]=u),u!==null&&t.setBaseTarget(l,u))}}function ZK(t,e){return e?(e[t]||e.default||e).from:void 0}function e7(t,e,n){const r={};for(const i in t){const s=ZK(i,e);if(s!==void 0)r[i]=s;else{const o=n.getValue(i);o&&(r[i]=o.get())}}return r}function t7({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function n7(t,e){const n=t.get();if(Array.isArray(e)){for(let r=0;r<e.length;r++)if(e[r]!==n)return!0}else return n!==e}function d2(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:o,...a}=t.makeTargetAnimatable(e);const l=t.getValue("willChange");r&&(s=r);const c=[],u=i&&t.animationState&&t.animationState.getState()[i];for(const h in a){const f=t.getValue(h),p=a[h];if(!f||p===void 0||u&&t7(u,h))continue;const g={delay:n,elapsed:0,...dx(s||{},h)};if(window.HandoffAppearAnimations){const E=t.getProps()[hO];if(E){const x=window.HandoffAppearAnimations(E,h,f,Ve);x!==null&&(g.elapsed=x,g.isHandoff=!0)}}let v=!g.isHandoff&&!n7(f,p);if(g.type==="spring"&&(f.getVelocity()||g.velocity)&&(v=!1),f.animation&&(v=!1),v)continue;f.start(hx(h,f,p,t.shouldReduceMotion&&zo.has(h)?{type:!1}:g));const w=f.animation;tp(l)&&(l.add(h),w.then(()=>l.remove(h))),c.push(w)}return o&&Promise.all(c).then(()=>{o&&XK(t,o)}),c}function a0(t,e,n={}){const r=wm(t,e,n.custom);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(d2(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(l=0)=>{const{delayChildren:c=0,staggerChildren:u,staggerDirection:h}=i;return r7(t,e,c+l,u,h,n)}:()=>Promise.resolve(),{when:a}=i;if(a){const[l,c]=a==="beforeChildren"?[s,o]:[o,s];return l().then(()=>c())}else return Promise.all([s(),o(n.delay)])}function r7(t,e,n=0,r=0,i=1,s){const o=[],a=(t.variantChildren.size-1)*r,l=i===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(t.variantChildren).sort(i7).forEach((c,u)=>{c.notify("AnimationStart",e),o.push(a0(c,e,{...s,delay:n+l(u)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function i7(t,e){return t.sortNodePosition(e)}function s7(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>a0(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=a0(t,e,n);else{const i=typeof e=="function"?wm(t,e,n.custom):e;r=Promise.all(d2(t,i,n))}return r.then(()=>t.notify("AnimationComplete",e))}const o7=[...Y_].reverse(),a7=Y_.length;function l7(t){return e=>Promise.all(e.map(({animation:n,options:r})=>s7(t,n,r)))}function c7(t){let e=l7(t);const n=d7();let r=!0;const i=(l,c)=>{const u=wm(t,c);if(u){const{transition:h,transitionEnd:f,...p}=u;l={...l,...p,...f}}return l};function s(l){e=l(t)}function o(l,c){const u=t.getProps(),h=t.getVariantContext(!0)||{},f=[],p=new Set;let g={},v=1/0;for(let E=0;E<a7;E++){const x=o7[E],b=n[x],C=u[x]!==void 0?u[x]:h[x],N=Cu(C),D=x===c?b.isActive:null;D===!1&&(v=E);let I=C===h[x]&&C!==u[x]&&N;if(I&&r&&t.manuallyAnimateOnMount&&(I=!1),b.protectedKeys={...g},!b.isActive&&D===null||!C&&!b.prevProp||mm(C)||typeof C=="boolean")continue;let A=u7(b.prevProp,C)||x===c&&b.isActive&&!I&&N||E>v&&N,R=!1;const O=Array.isArray(C)?C:[C];let L=O.reduce(i,{});D===!1&&(L={});const{prevResolvedValues:k={}}=b,B={...k,...L},Q=K=>{A=!0,p.has(K)&&(R=!0,p.delete(K)),b.needsAnimating[K]=!0};for(const K in B){const re=L[K],F=k[K];if(g.hasOwnProperty(K))continue;let z=!1;Xf(re)&&Xf(F)?z=!OO(re,F):z=re!==F,z?re!==void 0?Q(K):p.add(K):re!==void 0&&p.has(K)?Q(K):b.protectedKeys[K]=!0}b.prevProp=C,b.prevResolvedValues=L,b.isActive&&(g={...g,...L}),r&&t.blockInitialAnimation&&(A=!1),A&&(!I||R)&&f.push(...O.map(K=>({animation:K,options:{type:x,...l}})))}if(p.size){const E={};p.forEach(x=>{const b=t.getBaseTarget(x);b!==void 0&&(E[x]=b)}),f.push({animation:E})}let w=!!f.length;return r&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(w=!1),r=!1,w?e(f):Promise.resolve()}function a(l,c,u){var h;if(n[l].isActive===c)return Promise.resolve();(h=t.variantChildren)===null||h===void 0||h.forEach(p=>{var g;return(g=p.animationState)===null||g===void 0?void 0:g.setActive(l,c)}),n[l].isActive=c;const f=o(u,l);for(const p in n)n[p].protectedKeys={};return f}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n}}function u7(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!OO(e,t):!1}function Ds(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function d7(){return{animate:Ds(!0),whileInView:Ds(),whileHover:Ds(),whileTap:Ds(),whileDrag:Ds(),whileFocus:Ds(),exit:Ds()}}class h7 extends Ss{constructor(e){super(e),e.animationState||(e.animationState=c7(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),mm(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let f7=0;class p7 extends Ss{constructor(){super(...arguments),this.id=f7++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n,custom:r}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const s=this.node.animationState.setActive("exit",!e,{custom:r??this.node.getProps().custom});n&&!e&&s.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const m7={animation:{Feature:h7},exit:{Feature:p7}},SS=(t,e)=>Math.abs(t-e);function g7(t,e){const n=SS(t.x,e.x),r=SS(t.y,e.y);return Math.sqrt(n**2+r**2)}class h2{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=ny(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,p=g7(h.offset,{x:0,y:0})>=3;if(!f&&!p)return;const{point:g}=h,{timestamp:v}=Vt;this.history.push({...g,timestamp:v});const{onStart:w,onMove:E}=this.handlers;f||(w&&w(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),E&&E(this.lastMoveEvent,h)},this.handlePointerMove=(h,f)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=ty(f,this.transformPagePoint),Ve.update(this.updatePoint,!0)},this.handlePointerUp=(h,f)=>{this.end();const{onEnd:p,onSessionEnd:g,resumeAnimation:v}=this.handlers;if(this.dragSnapToOrigin&&v&&v(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=ny(h.type==="pointercancel"?this.lastMoveEventInfo:ty(f,this.transformPagePoint),this.history);this.startEvent&&p&&p(h,w),g&&g(h,w)},!AO(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const o=vm(e),a=ty(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=Vt;this.history=[{...l,timestamp:c}];const{onSessionStart:u}=n;u&&u(e,ny(a,this.history)),this.removeListeners=ts(Jr(this.contextWindow,"pointermove",this.handlePointerMove),Jr(this.contextWindow,"pointerup",this.handlePointerUp),Jr(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ci(this.updatePoint)}}function ty(t,e){return e?{point:e(t.point)}:t}function IS(t,e){return{x:t.x-e.x,y:t.y-e.y}}function ny({point:t},e){return{point:t,delta:IS(t,f2(e)),offset:IS(t,y7(e)),velocity:v7(e,.1)}}function y7(t){return t[0]}function f2(t){return t[t.length-1]}function v7(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=f2(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>ns(e)));)n--;if(!r)return{x:0,y:0};const s=Zr(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function An(t){return t.max-t.min}function l0(t,e=0,n=.01){return Math.abs(t-e)<=n}function CS(t,e,n,r=.5){t.origin=r,t.originPoint=Ge(e.min,e.max,t.origin),t.scale=An(n)/An(e),(l0(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=Ge(n.min,n.max,t.origin)-t.originPoint,(l0(t.translate)||isNaN(t.translate))&&(t.translate=0)}function Hc(t,e,n,r){CS(t.x,e.x,n.x,r?r.originX:void 0),CS(t.y,e.y,n.y,r?r.originY:void 0)}function PS(t,e,n){t.min=n.min+e.min,t.max=t.min+An(e)}function w7(t,e,n){PS(t.x,e.x,n.x),PS(t.y,e.y,n.y)}function AS(t,e,n){t.min=e.min-n.min,t.max=t.min+An(e)}function Gc(t,e,n){AS(t.x,e.x,n.x),AS(t.y,e.y,n.y)}function _7(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Ge(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Ge(n,t,r.max):Math.min(t,n)),t}function RS(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function x7(t,{top:e,left:n,bottom:r,right:i}){return{x:RS(t.x,n,i),y:RS(t.y,e,r)}}function kS(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function E7(t,e){return{x:kS(t.x,e.x),y:kS(t.y,e.y)}}function T7(t,e){let n=.5;const r=An(t),i=An(e);return i>r?n=Au(e.min,e.max-r,t.min):r>i&&(n=Au(t.min,t.max-i,e.min)),us(0,1,n)}function b7(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const c0=.35;function S7(t=c0){return t===!1?t=0:t===!0&&(t=c0),{x:NS(t,"left","right"),y:NS(t,"top","bottom")}}function NS(t,e,n){return{min:DS(t,e),max:DS(t,n)}}function DS(t,e){return typeof t=="number"?t:t[e]||0}const OS=()=>({translate:0,scale:1,origin:0,originPoint:0}),Na=()=>({x:OS(),y:OS()}),LS=()=>({min:0,max:0}),dt=()=>({x:LS(),y:LS()});function Vn(t){return[t("x"),t("y")]}function p2({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function I7({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function C7(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function ry(t){return t===void 0||t===1}function u0({scale:t,scaleX:e,scaleY:n}){return!ry(t)||!ry(e)||!ry(n)}function js(t){return u0(t)||m2(t)||t.z||t.rotate||t.rotateX||t.rotateY}function m2(t){return VS(t.x)||VS(t.y)}function VS(t){return t&&t!=="0%"}function np(t,e,n){const r=t-n,i=e*r;return n+i}function MS(t,e,n,r,i){return i!==void 0&&(t=np(t,i,r)),np(t,n,r)+e}function d0(t,e=0,n=1,r,i){t.min=MS(t.min,e,n,r,i),t.max=MS(t.max,e,n,r,i)}function g2(t,{x:e,y:n}){d0(t.x,e.translate,e.scale,e.originPoint),d0(t.y,n.translate,n.scale,n.originPoint)}function P7(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const l=s.instance;l&&l.style&&l.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Da(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,g2(t,o)),r&&js(s.latestValues)&&Da(t,s.latestValues))}e.x=jS(e.x),e.y=jS(e.y)}function jS(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function ki(t,e){t.min=t.min+e,t.max=t.max+e}function FS(t,e,[n,r,i]){const s=e[i]!==void 0?e[i]:.5,o=Ge(t.min,t.max,s);d0(t,e[n],e[r],o,e.scale)}const A7=["x","scaleX","originX"],R7=["y","scaleY","originY"];function Da(t,e){FS(t.x,e,A7),FS(t.y,e,R7)}function y2(t,e){return p2(C7(t.getBoundingClientRect(),e))}function k7(t,e,n){const r=y2(t,n),{scroll:i}=e;return i&&(ki(r.x,i.offset.x),ki(r.y,i.offset.y)),r}const v2=({current:t})=>t?t.ownerDocument.defaultView:null,N7=new WeakMap;class D7{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=dt(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=u=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(vm(u,"page").point)},s=(u,h)=>{const{drag:f,dragPropagation:p,onDragStart:g}=this.getProps();if(f&&!p&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=kO(f),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Vn(w=>{let E=this.getAxisMotionValue(w).get()||0;if(Ar.test(E)){const{projection:x}=this.visualElement;if(x&&x.layout){const b=x.layout.layoutBox[w];b&&(E=An(b)*(parseFloat(E)/100))}}this.originPoint[w]=E}),g&&Ve.update(()=>g(u,h),!1,!0);const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},o=(u,h)=>{const{dragPropagation:f,dragDirectionLock:p,onDirectionLock:g,onDrag:v}=this.getProps();if(!f&&!this.openGlobalLock)return;const{offset:w}=h;if(p&&this.currentDirection===null){this.currentDirection=O7(w),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",h.point,w),this.updateAxis("y",h.point,w),this.visualElement.render(),v&&v(u,h)},a=(u,h)=>this.stop(u,h),l=()=>Vn(u=>{var h;return this.getAnimationState(u)==="paused"&&((h=this.getAxisMotionValue(u).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new h2(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:v2(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&Ve.update(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!ph(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=_7(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;n&&Ra(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=x7(i.layoutBox,n):this.constraints=!1,this.elastic=S7(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Vn(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=b7(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Ra(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=k7(r,i.root,this.visualElement.getTransformPagePoint());let o=E7(i.layout.layoutBox,s);if(n){const a=n(I7(o));this.hasMutatedConstraints=!!a,a&&(o=p2(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=Vn(u=>{if(!ph(u,n,this.currentDirection))return;let h=l&&l[u]||{};o&&(h={min:0,max:0});const f=i?200:1e6,p=i?40:1e7,g={type:"inertia",velocity:r?e[u]:0,bounceStiffness:f,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...s,...h};return this.startAxisValueAnimation(u,g)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return r.start(hx(e,r,0,n))}stopAnimation(){Vn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Vn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Vn(n=>{const{drag:r}=this.getProps();if(!ph(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-Ge(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Ra(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Vn(o=>{const a=this.getAxisMotionValue(o);if(a){const l=a.get();i[o]=T7({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Vn(o=>{if(!ph(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(Ge(l,c,i[o]))})}addListeners(){if(!this.visualElement.current)return;N7.set(this.visualElement,this);const e=this.visualElement.current,n=Jr(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Ra(l)&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),r();const o=Qr(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Vn(u=>{const h=this.getAxisMotionValue(u);h&&(this.originPoint[u]+=l[u].translate,h.set(h.get()+l[u].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=c0,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function ph(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function O7(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class L7 extends Ss{constructor(e){super(e),this.removeGroupControls=nt,this.removeListeners=nt,this.controls=new D7(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||nt}unmount(){this.removeGroupControls(),this.removeListeners()}}const US=t=>(e,n)=>{t&&Ve.update(()=>t(e,n))};class V7 extends Ss{constructor(){super(...arguments),this.removePointerDownListener=nt}onPointerDown(e){this.session=new h2(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:v2(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:US(e),onStart:US(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&Ve.update(()=>i(s,o))}}}mount(){this.removePointerDownListener=Jr(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function M7(){const t=_.useContext(fm);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,i=_.useId();return _.useEffect(()=>r(i),[]),!e&&n?[!1,()=>n&&n(i)]:[!0]}const Gh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function $S(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const cc={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(ae.test(t))t=parseFloat(t);else return t;const n=$S(t,e.target.x),r=$S(t,e.target.y);return`${n}% ${r}%`}},j7={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=ds.parse(t);if(i.length>5)return r;const s=ds.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const c=Ge(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=c),typeof i[3+o]=="number"&&(i[3+o]/=c),s(i)}};class F7 extends qe.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;H8(U7),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Gh.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,o=r.projection;return o&&(o.isPresent=s,i||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Ve.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function w2(t){const[e,n]=M7(),r=_.useContext(J_);return qe.createElement(F7,{...t,layoutGroup:r,switchLayoutGroup:_.useContext(pO),isPresent:e,safeToRemove:n})}const U7={borderRadius:{...cc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:cc,borderTopRightRadius:cc,borderBottomLeftRadius:cc,borderBottomRightRadius:cc,boxShadow:j7},_2=["TopLeft","TopRight","BottomLeft","BottomRight"],$7=_2.length,BS=t=>typeof t=="string"?parseFloat(t):t,zS=t=>typeof t=="number"||ae.test(t);function B7(t,e,n,r,i,s){i?(t.opacity=Ge(0,n.opacity!==void 0?n.opacity:1,z7(r)),t.opacityExit=Ge(e.opacity!==void 0?e.opacity:1,0,W7(r))):s&&(t.opacity=Ge(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<$7;o++){const a=`border${_2[o]}Radius`;let l=WS(e,a),c=WS(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||zS(l)===zS(c)?(t[a]=Math.max(Ge(BS(l),BS(c),r),0),(Ar.test(c)||Ar.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=Ge(e.rotate||0,n.rotate||0,r))}function WS(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const z7=x2(0,.5,zO),W7=x2(.5,.95,nt);function x2(t,e,n){return r=>r<t?0:r>e?1:n(Au(t,e,r))}function qS(t,e){t.min=e.min,t.max=e.max}function Ln(t,e){qS(t.x,e.x),qS(t.y,e.y)}function HS(t,e,n,r,i){return t-=e,t=np(t,1/n,r),i!==void 0&&(t=np(t,1/i,r)),t}function q7(t,e=0,n=1,r=.5,i,s=t,o=t){if(Ar.test(e)&&(e=parseFloat(e),e=Ge(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Ge(s.min,s.max,r);t===s&&(a-=e),t.min=HS(t.min,e,n,a,i),t.max=HS(t.max,e,n,a,i)}function GS(t,e,[n,r,i],s,o){q7(t,e[n],e[r],e[i],e.scale,s,o)}const H7=["x","scaleX","originX"],G7=["y","scaleY","originY"];function KS(t,e,n,r){GS(t.x,e,H7,n?n.x:void 0,r?r.x:void 0),GS(t.y,e,G7,n?n.y:void 0,r?r.y:void 0)}function QS(t){return t.translate===0&&t.scale===1}function E2(t){return QS(t.x)&&QS(t.y)}function K7(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function T2(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function YS(t){return An(t.x)/An(t.y)}class Q7{constructor(){this.members=[]}add(e){fx(this.members,e),e.scheduleRender()}remove(e){if(px(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function XS(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y;if((i||s)&&(r=`translate3d(${i}px, ${s}px, 0) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:l,rotateX:c,rotateY:u}=n;l&&(r+=`rotate(${l}deg) `),c&&(r+=`rotateX(${c}deg) `),u&&(r+=`rotateY(${u}deg) `)}const o=t.x.scale*e.x,a=t.y.scale*e.y;return(o!==1||a!==1)&&(r+=`scale(${o}, ${a})`),r||"none"}const Y7=(t,e)=>t.depth-e.depth;class X7{constructor(){this.children=[],this.isDirty=!1}add(e){fx(this.children,e),this.isDirty=!0}remove(e){px(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Y7),this.isDirty=!1,this.children.forEach(e)}}function J7(t,e){const n=performance.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(ci(r),t(s-e))};return Ve.read(r,!0),()=>ci(r)}function Z7(t){window.MotionDebug&&window.MotionDebug.record(t)}function eQ(t){return t instanceof SVGElement&&t.tagName!=="svg"}function tQ(t,e,n){const r=mn(t)?t:ml(t);return r.start(hx("",r,e,n)),r.animation}const JS=["","X","Y","Z"],nQ={visibility:"hidden"},ZS=1e3;let rQ=0;const Fs={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function b2({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=rQ++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Fs.totalNodes=Fs.resolvedTargetDeltas=Fs.recalculatedProjection=0,this.nodes.forEach(oQ),this.nodes.forEach(dQ),this.nodes.forEach(hQ),this.nodes.forEach(aQ),Z7(Fs)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new X7)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new mx),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=eQ(o),this.instance=o;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),t){let h;const f=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=J7(f,250),Gh.hasAnimatedSinceResize&&(Gh.hasAnimatedSinceResize=!1,this.nodes.forEach(tI))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f,hasRelativeTargetChanged:p,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||u.getDefaultTransition()||yQ,{onLayoutAnimationStart:w,onLayoutAnimationComplete:E}=u.getProps(),x=!this.targetLayout||!T2(this.targetLayout,g)||p,b=!f&&p;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||b||f&&(x||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,b);const C={...dx(v,"layout"),onPlay:w,onComplete:E};(u.shouldReduceMotion||this.options.layoutRoot)&&(C.delay=0,C.type=!1),this.startAnimation(C)}else f||tI(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,ci(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(fQ),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const h=this.path[u];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(eI);return}this.isUpdating||this.nodes.forEach(cQ),this.isUpdating=!1,this.nodes.forEach(uQ),this.nodes.forEach(iQ),this.nodes.forEach(sQ),this.clearAllSnapshots();const a=performance.now();Vt.delta=us(0,1e3/60,a-Vt.timestamp),Vt.timestamp=a,Vt.isProcessing=!0,Gg.update.process(Vt),Gg.preRender.process(Vt),Gg.render.process(Vt),Vt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(lQ),this.sharedNodes.forEach(pQ)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ve.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ve.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=dt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!E2(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;o&&(a||js(this.latestValues)||u)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),vQ(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return dt();const a=o.measureViewportBox(),{scroll:l}=this.root;return l&&(ki(a.x,l.offset.x),ki(a.y,l.offset.y)),a}removeElementScroll(o){const a=dt();Ln(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l],{scroll:u,options:h}=c;if(c!==this.root&&u&&h.layoutScroll){if(u.isRoot){Ln(a,o);const{scroll:f}=this.root;f&&(ki(a.x,-f.offset.x),ki(a.y,-f.offset.y))}ki(a.x,u.offset.x),ki(a.y,u.offset.y)}}return a}applyTransform(o,a=!1){const l=dt();Ln(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&Da(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),js(u.latestValues)&&Da(l,u.latestValues)}return js(this.latestValues)&&Da(l,this.latestValues),l}removeTransform(o){const a=dt();Ln(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!js(c.latestValues))continue;u0(c.latestValues)&&c.updateSnapshot();const u=dt(),h=c.measurePageBox();Ln(u,h),KS(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return js(this.latestValues)&&KS(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Vt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:h,layoutId:f}=this.options;if(!(!this.layout||!(h||f))){if(this.resolvedRelativeTargetAt=Vt.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=dt(),this.relativeTargetOrigin=dt(),Gc(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),Ln(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=dt(),this.targetWithTransforms=dt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),w7(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ln(this.target,this.layout.layoutBox),g2(this.target,this.targetDelta)):Ln(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=dt(),this.relativeTargetOrigin=dt(),Gc(this.relativeTargetOrigin,this.target,p.target),Ln(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Fs.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||u0(this.parent.latestValues)||m2(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Vt.timestamp&&(c=!1),c)return;const{layout:u,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||h))return;Ln(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,p=this.treeScale.y;P7(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:g}=a;if(!g){this.projectionTransform&&(this.projectionDelta=Na(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Na(),this.projectionDeltaWithTransform=Na());const v=this.projectionTransform;Hc(this.projectionDelta,this.layoutCorrected,g,this.latestValues),this.projectionTransform=XS(this.projectionDelta,this.treeScale),(this.projectionTransform!==v||this.treeScale.x!==f||this.treeScale.y!==p)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g)),Fs.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},h=Na();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=dt(),p=l?l.source:void 0,g=this.layout?this.layout.source:void 0,v=p!==g,w=this.getStack(),E=!w||w.members.length<=1,x=!!(v&&!E&&this.options.crossfade===!0&&!this.path.some(gQ));this.animationProgress=0;let b;this.mixTargetDelta=C=>{const N=C/1e3;nI(h.x,o.x,N),nI(h.y,o.y,N),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Gc(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),mQ(this.relativeTarget,this.relativeTargetOrigin,f,N),b&&K7(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=dt()),Ln(b,this.relativeTarget)),v&&(this.animationValues=u,B7(u,c,this.latestValues,N,x,E)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=N},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(ci(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ve.update(()=>{Gh.hasAnimatedSinceResize=!0,this.currentAnimation=tQ(0,ZS,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(ZS),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:u}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&S2(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||dt();const h=An(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+h;const f=An(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+f}Ln(a,l),Da(a,u),Hc(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new Q7),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.rotate||l.rotateX||l.rotateY||l.rotateZ)&&(a=!0),!a)return;const c={};for(let u=0;u<JS.length;u++){const h="rotate"+JS[u];l[h]&&(c[h]=l[h],o.setStaticValue(h,0))}o.render();for(const u in c)o.setStaticValue(u,c[u]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return nQ;const c={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=Hh(o==null?void 0:o.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const v={};return this.options.layoutId&&(v.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,v.pointerEvents=Hh(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!js(this.latestValues)&&(v.transform=u?u({},""):"none",this.hasProjected=!1),v}const f=h.animationValues||h.latestValues;this.applyTransformsToTarget(),c.transform=XS(this.projectionDeltaWithTransform,this.treeScale,f),u&&(c.transform=u(f,c.transform));const{x:p,y:g}=this.projectionDelta;c.transformOrigin=`${p.origin*100}% ${g.origin*100}% 0`,h.animationValues?c.opacity=h===this?(l=(a=f.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:c.opacity=h===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const v in Qf){if(f[v]===void 0)continue;const{correct:w,applyTo:E}=Qf[v],x=c.transform==="none"?f[v]:w(f[v],h);if(E){const b=E.length;for(let C=0;C<b;C++)c[E[C]]=x}else c[v]=x}return this.options.layoutId&&(c.pointerEvents=h===this?Hh(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(eI),this.root.sharedNodes.clear()}}}function iQ(t){t.updateLayout()}function sQ(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=n.source!==t.layout.source;s==="size"?Vn(h=>{const f=o?n.measuredBox[h]:n.layoutBox[h],p=An(f);f.min=r[h].min,f.max=f.min+p}):S2(s,n.layoutBox,r)&&Vn(h=>{const f=o?n.measuredBox[h]:n.layoutBox[h],p=An(r[h]);f.max=f.min+p,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+p)});const a=Na();Hc(a,r,n.layoutBox);const l=Na();o?Hc(l,t.applyTransform(i,!0),n.measuredBox):Hc(l,r,n.layoutBox);const c=!E2(a);let u=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:p}=h;if(f&&p){const g=dt();Gc(g,n.layoutBox,f.layoutBox);const v=dt();Gc(v,r,p.layoutBox),T2(g,v)||(u=!0),h.options.layoutRoot&&(t.relativeTarget=v,t.relativeTargetOrigin=g,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:u})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function oQ(t){Fs.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function aQ(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function lQ(t){t.clearSnapshot()}function eI(t){t.clearMeasurements()}function cQ(t){t.isLayoutDirty=!1}function uQ(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function tI(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function dQ(t){t.resolveTargetDelta()}function hQ(t){t.calcProjection()}function fQ(t){t.resetRotation()}function pQ(t){t.removeLeadSnapshot()}function nI(t,e,n){t.translate=Ge(e.translate,0,n),t.scale=Ge(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function rI(t,e,n,r){t.min=Ge(e.min,n.min,r),t.max=Ge(e.max,n.max,r)}function mQ(t,e,n,r){rI(t.x,e.x,n.x,r),rI(t.y,e.y,n.y,r)}function gQ(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const yQ={duration:.45,ease:[.4,0,.1,1]},iI=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),sI=iI("applewebkit/")&&!iI("chrome/")?Math.round:nt;function oI(t){t.min=sI(t.min),t.max=sI(t.max)}function vQ(t){oI(t.x),oI(t.y)}function S2(t,e,n){return t==="position"||t==="preserve-aspect"&&!l0(YS(e),YS(n),.2)}const wQ=b2({attachResizeListener:(t,e)=>Qr(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),iy={current:void 0},I2=b2({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!iy.current){const t=new wQ({});t.mount(window),t.setOptions({layoutScroll:!0}),iy.current=t}return iy.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),_Q={pan:{Feature:V7},drag:{Feature:L7,ProjectionNode:I2,MeasureLayout:w2}},xQ=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function EQ(t){const e=xQ.exec(t);if(!e)return[,];const[,n,r]=e;return[n,r]}function h0(t,e,n=1){const[r,i]=EQ(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return l2(o)?parseFloat(o):o}else return t0(i)?h0(i,e,n+1):i}function TQ(t,{...e},n){const r=t.current;if(!(r instanceof Element))return{target:e,transitionEnd:n};n&&(n={...n}),t.values.forEach(i=>{const s=i.get();if(!t0(s))return;const o=h0(s,r);o&&i.set(o)});for(const i in e){const s=e[i];if(!t0(s))continue;const o=h0(s,r);o&&(e[i]=o,n||(n={}),n[i]===void 0&&(n[i]=s))}return{target:e,transitionEnd:n}}const bQ=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),C2=t=>bQ.has(t),SQ=t=>Object.keys(t).some(C2),aI=t=>t===Wo||t===ae,lI=(t,e)=>parseFloat(t.split(", ")[e]),cI=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/);if(i)return lI(i[1],e);{const s=r.match(/^matrix\((.+)\)$/);return s?lI(s[1],t):0}},IQ=new Set(["x","y","z"]),CQ=hd.filter(t=>!IQ.has(t));function PQ(t){const e=[];return CQ.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e.length&&t.render(),e}const gl={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:cI(4,13),y:cI(5,14)};gl.translateX=gl.x;gl.translateY=gl.y;const AQ=(t,e,n)=>{const r=e.measureViewportBox(),i=e.current,s=getComputedStyle(i),{display:o}=s,a={};o==="none"&&e.setStaticValue("display",t.display||"block"),n.forEach(c=>{a[c]=gl[c](r,s)}),e.render();const l=e.measureViewportBox();return n.forEach(c=>{const u=e.getValue(c);u&&u.jump(a[c]),t[c]=gl[c](l,s)}),t},RQ=(t,e,n={},r={})=>{e={...e},r={...r};const i=Object.keys(e).filter(C2);let s=[],o=!1;const a=[];if(i.forEach(l=>{const c=t.getValue(l);if(!t.hasValue(l))return;let u=n[l],h=lc(u);const f=e[l];let p;if(Xf(f)){const g=f.length,v=f[0]===null?1:0;u=f[v],h=lc(u);for(let w=v;w<g&&f[w]!==null;w++)p?ox(lc(f[w])===p):p=lc(f[w])}else p=lc(f);if(h!==p)if(aI(h)&&aI(p)){const g=c.get();typeof g=="string"&&c.set(parseFloat(g)),typeof f=="string"?e[l]=parseFloat(f):Array.isArray(f)&&p===ae&&(e[l]=f.map(parseFloat))}else h!=null&&h.transform&&(p!=null&&p.transform)&&(u===0||f===0)?u===0?c.set(p.transform(u)):e[l]=h.transform(f):(o||(s=PQ(t),o=!0),a.push(l),r[l]=r[l]!==void 0?r[l]:e[l],c.jump(f))}),a.length){const l=a.indexOf("height")>=0?window.pageYOffset:null,c=AQ(e,t,a);return s.length&&s.forEach(([u,h])=>{t.getValue(u).set(h)}),t.render(),pm&&l!==null&&window.scrollTo({top:l}),{target:c,transitionEnd:r}}else return{target:e,transitionEnd:r}};function kQ(t,e,n,r){return SQ(e)?RQ(t,e,n,r):{target:e,transitionEnd:r}}const NQ=(t,e,n,r)=>{const i=TQ(t,e,r);return e=i.target,r=i.transitionEnd,kQ(t,e,n,r)},f0={current:null},P2={current:!1};function DQ(){if(P2.current=!0,!!pm)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>f0.current=t.matches;t.addListener(e),e()}else f0.current=!1}function OQ(t,e,n){const{willChange:r}=e;for(const i in e){const s=e[i],o=n[i];if(mn(s))t.addValue(i,s),tp(r)&&r.add(i);else if(mn(o))t.addValue(i,ml(s,{owner:t})),tp(r)&&r.remove(i);else if(o!==s)if(t.hasValue(i)){const a=t.getValue(i);!a.hasAnimated&&a.set(s)}else{const a=t.getStaticValue(i);t.addValue(i,ml(a!==void 0?a:s,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const uI=new WeakMap,A2=Object.keys(Pu),LQ=A2.length,dI=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],VQ=X_.length;class MQ{constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Ve.render(this.render,!1,!0);const{latestValues:a,renderState:l}=s;this.latestValues=a,this.baseTarget={...a},this.initialValues=n.initial?{...a}:{},this.renderState=l,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.isControllingVariants=gm(n),this.isVariantNode=fO(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:c,...u}=this.scrapeMotionValuesFromProps(n,{});for(const h in u){const f=u[h];a[h]!==void 0&&mn(f)&&(f.set(a[h],!1),tp(c)&&c.add(h))}}scrapeMotionValuesFromProps(e,n){return{}}mount(e){this.current=e,uI.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),P2.current||DQ(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:f0.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){uI.delete(this.current),this.projection&&this.projection.unmount(),ci(this.notifyUpdate),ci(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,n){const r=zo.has(e),i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Ve.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{i(),s()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...n},r,i,s){let o,a;for(let l=0;l<LQ;l++){const c=A2[l],{isEnabled:u,Feature:h,ProjectionNode:f,MeasureLayout:p}=Pu[c];f&&(o=f),u(n)&&(!this.features[c]&&h&&(this.features[c]=new h(this)),p&&(a=p))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:l,layout:c,drag:u,dragConstraints:h,layoutScroll:f,layoutRoot:p}=n;this.projection.setOptions({layoutId:l,layout:c,alwaysMeasureLayout:!!u||h&&Ra(h),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof c=="string"?c:"both",initialPromotionConfig:s,layoutScroll:f,layoutRoot:p})}return a}updateFeatures(){for(const e in this.features){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):dt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}makeTargetAnimatable(e,n=!0){return this.makeTargetAnimatableFromInstance(e,this.props,n)}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<dI.length;r++){const i=dI[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s=e["on"+i];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=OQ(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<VQ;r++){const i=X_[r],s=this.props[i];(Cu(s)||s===!1)&&(n[i]=s)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){n!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,n)),this.values.set(e,n),this.latestValues[e]=n.get()}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=ml(n,{owner:this}),this.addValue(e,r)),r}readValue(e){var n;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props,i=typeof r=="string"||typeof r=="object"?(n=sx(this.props,r))===null||n===void 0?void 0:n[e]:void 0;if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!mn(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new mx),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class R2 extends MQ{sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:n,...r},{transformValues:i},s){let o=e7(r,e||{},this);if(i&&(n&&(n=i(n)),r&&(r=i(r)),o&&(o=i(o))),s){JK(this,r,o);const a=NQ(this,r,o,n);n=a.transitionEnd,r=a.target}return{transition:e,transitionEnd:n,...r}}}function jQ(t){return window.getComputedStyle(t)}class FQ extends R2{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,n){if(zo.has(n)){const r=ux(n);return r&&r.default||0}else{const r=jQ(e),i=(yO(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return y2(e,n)}build(e,n,r,i){ex(e,n,r,i.transformTemplate)}scrapeMotionValuesFromProps(e,n){return ix(e,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;mn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,r,i){TO(e,n,r,i)}}class UQ extends R2{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(zo.has(n)){const r=ux(n);return r&&r.default||0}return n=bO.has(n)?n:Q_(n),e.getAttribute(n)}measureInstanceViewportBox(){return dt()}scrapeMotionValuesFromProps(e,n){return IO(e,n)}build(e,n,r,i){nx(e,n,r,this.isSVGTag,i.transformTemplate)}renderInstance(e,n,r,i){SO(e,n,r,i)}mount(e){this.isSVGTag=rx(e.tagName),super.mount(e)}}const $Q=(t,e)=>Z_(t)?new UQ(e,{enableHardwareAcceleration:!1}):new FQ(e,{enableHardwareAcceleration:!0}),BQ={layout:{ProjectionNode:I2,MeasureLayout:w2}},zQ={...m7,...LG,..._Q,...BQ},xe=W8((t,e)=>EG(t,e,zQ,$Q));function k2(){const t=_.useRef(!1);return K_(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function WQ(){const t=k2(),[e,n]=_.useState(0),r=_.useCallback(()=>{t.current&&n(e+1)},[e]);return[_.useCallback(()=>Ve.postRender(r),[r]),e]}class qQ extends _.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function HQ({children:t,isPresent:e}){const n=_.useId(),r=_.useRef(null),i=_.useRef({width:0,height:0,top:0,left:0});return _.useInsertionEffect(()=>{const{width:s,height:o,top:a,left:l}=i.current;if(e||!r.current||!s||!o)return;r.current.dataset.motionPopId=n;const c=document.createElement("style");return document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${s}px !important;
            height: ${o}px !important;
            top: ${a}px !important;
            left: ${l}px !important;
          }
        `),()=>{document.head.removeChild(c)}},[e]),_.createElement(qQ,{isPresent:e,childRef:r,sizeRef:i},_.cloneElement(t,{ref:r}))}const sy=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o})=>{const a=CO(GQ),l=_.useId(),c=_.useMemo(()=>({id:l,initial:e,isPresent:n,custom:i,onExitComplete:u=>{a.set(u,!0);for(const h of a.values())if(!h)return;r&&r()},register:u=>(a.set(u,!1),()=>a.delete(u))}),s?void 0:[n]);return _.useMemo(()=>{a.forEach((u,h)=>a.set(h,!1))},[n]),_.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(t=_.createElement(HQ,{isPresent:n},t)),_.createElement(fm.Provider,{value:c},t)};function GQ(){return new Map}function KQ(t){return _.useEffect(()=>()=>t(),[])}const Us=t=>t.key||"";function QQ(t,e){t.forEach(n=>{const r=Us(n);e.set(r,n)})}function YQ(t){const e=[];return _.Children.forEach(t,n=>{_.isValidElement(n)&&e.push(n)}),e}const N2=({children:t,custom:e,initial:n=!0,onExitComplete:r,exitBeforeEnter:i,presenceAffectsLayout:s=!0,mode:o="sync"})=>{const a=_.useContext(J_).forceRender||WQ()[0],l=k2(),c=YQ(t);let u=c;const h=_.useRef(new Map).current,f=_.useRef(u),p=_.useRef(new Map).current,g=_.useRef(!0);if(K_(()=>{g.current=!1,QQ(c,p),f.current=u}),KQ(()=>{g.current=!0,p.clear(),h.clear()}),g.current)return _.createElement(_.Fragment,null,u.map(x=>_.createElement(sy,{key:Us(x),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:s,mode:o},x)));u=[...u];const v=f.current.map(Us),w=c.map(Us),E=v.length;for(let x=0;x<E;x++){const b=v[x];w.indexOf(b)===-1&&!h.has(b)&&h.set(b,void 0)}return o==="wait"&&h.size&&(u=[]),h.forEach((x,b)=>{if(w.indexOf(b)!==-1)return;const C=p.get(b);if(!C)return;const N=v.indexOf(b);let D=x;if(!D){const I=()=>{h.delete(b);const S=Array.from(p.keys()).filter(A=>!w.includes(A));if(S.forEach(A=>p.delete(A)),f.current=c.filter(A=>{const R=Us(A);return R===b||S.includes(R)}),!h.size){if(l.current===!1)return;a(),r&&r()}};D=_.createElement(sy,{key:Us(C),isPresent:!1,onExitComplete:I,custom:e,presenceAffectsLayout:s,mode:o},C),h.set(b,D)}u.splice(N,0,D)}),u=u.map(x=>{const b=x.key;return h.has(b)?x:_.createElement(sy,{key:Us(x),isPresent:!0,presenceAffectsLayout:s,mode:o},x)}),_.createElement(_.Fragment,null,h.size?u:u.map(x=>_.cloneElement(x)))},XQ=Tw("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 touch-manipulation",{variants:{variant:{default:"bg-[#1a1a1a] text-white hover:bg-[#333333] active:bg-[#000000] transition-all duration-200",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-[#1a1a1a] bg-background hover:bg-[#1a1a1a]/10 text-[#1a1a1a]",secondary:"bg-[#94a3b8] text-white hover:bg-[#64748b] active:bg-[#475569]",ghost:"hover:bg-[#1a1a1a]/10 hover:text-[#1a1a1a]",link:"text-[#1a1a1a] underline-offset-4 hover:underline"},size:{default:"h-11 px-4 py-2",sm:"h-10 rounded-md px-3",lg:"h-12 rounded-md px-8",icon:"h-11 w-11"}},defaultVariants:{variant:"default",size:"default"}}),oe=qe.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...i},s)=>{const o=r?n4:"button";return m.jsx(o,{className:yt(XQ({variant:e,size:n,className:t})),ref:s,...i})});oe.displayName="Button";const en=qe.forwardRef(({className:t,type:e,...n},r)=>m.jsx("input",{type:e,className:yt("flex h-11 w-full rounded-md border border-input bg-background px-4 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 touch-manipulation",t),ref:r,...n}));en.displayName="Input";var JQ="Label",D2=_.forwardRef((t,e)=>m.jsx(Ce.label,{...t,ref:e,onMouseDown:n=>{var i;n.target.closest("button, input, select, textarea")||((i=t.onMouseDown)==null||i.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));D2.displayName=JQ;var O2=D2;const ZQ=Tw("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Ze=_.forwardRef(({className:t,...e},n)=>m.jsx(O2,{ref:n,className:yt(ZQ(),t),...e}));Ze.displayName=O2.displayName;const eY=({isLogin:t=!1})=>{const{t:e}=wt(),{signup:n,login:r,loginWithGoogle:i}=yi(),{toast:s}=Hn(),[o,a]=_.useState(!1),[l,c]=_.useState({email:"",password:"",username:""}),u=async f=>{f.preventDefault(),a(!0);try{t?(await r(l.email,l.password),s({title:e("auth.success.loginSuccess"),description:e("auth.success.loginSuccess")})):(await n(l.email,l.password,l.username),s({title:e("auth.success.accountCreated"),description:e("auth.success.accountCreated")}))}catch(p){s({title:e("auth.errors.default"),description:p.message,variant:"destructive"})}finally{a(!1)}},h=async()=>{try{await i(),s({title:e("auth.success.googleSuccess"),description:e("auth.success.googleSuccess")})}catch(f){s({title:e("auth.errors.default"),description:f.message,variant:"destructive"})}};return m.jsxs(xe.form,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},onSubmit:u,className:"space-y-4",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ze,{htmlFor:"email",children:e("auth.login.emailLabel")}),m.jsx(en,{id:"email",type:"email",placeholder:e("auth.login.emailPlaceholder"),value:l.email,onChange:f=>c({...l,email:f.target.value}),required:!0})]}),!t&&m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ze,{htmlFor:"username",children:e("auth.register.usernameLabel")}),m.jsx(en,{id:"username",type:"text",placeholder:e("auth.register.usernamePlaceholder"),value:l.username,onChange:f=>c({...l,username:f.target.value}),required:!0})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ze,{htmlFor:"password",children:e("auth.login.passwordLabel")}),m.jsx(en,{id:"password",type:"password",placeholder:e("auth.login.passwordPlaceholder"),value:l.password,onChange:f=>c({...l,password:f.target.value}),required:!0})]}),m.jsx(oe,{type:"submit",className:"w-full",disabled:o,children:e(t?"auth.login.submit":"auth.register.submit")}),m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute inset-0 flex items-center",children:m.jsx("span",{className:"w-full border-t"})}),m.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:m.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:e("auth.login.googleButton")})})]}),m.jsxs(oe,{type:"button",variant:"outline",className:"w-full",onClick:h,children:[m.jsx("img",{src:"https://www.google.com/favicon.ico",alt:"Google",className:"w-4 h-4 mr-2"}),e("auth.login.googleButton")]})]})},tY=()=>{wt();const[t,e]=_.useState(!0);return m.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gradient-to-b from-[#f5f5f5] to-[#e5e5e5]",children:m.jsxs(xe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-md w-full space-y-8 bg-white/80 backdrop-blur-sm p-8 rounded-2xl shadow-xl",children:[m.jsxs("div",{className:"text-center",children:[m.jsx(xe.h1,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"text-4xl font-bold text-gray-900 mb-2",children:"SmartCloset"}),m.jsx(xe.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"text-lg text-gray-600",children:"Tu asistente de moda inteligente"})]}),m.jsx(eY,{isLogin:t}),m.jsx("div",{className:"text-center",children:m.jsxs(oe,{variant:"link",onClick:()=>e(!t),className:"text-sm",children:[t?"¿No tienes una cuenta?":"¿Ya tienes una cuenta?",m.jsx("span",{className:"font-semibold ml-1",children:t?"Regístrate aquí":"Inicia sesión aquí"})]})}),m.jsx(xe.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},className:"mt-8",children:m.jsx("img",{className:"w-full h-64 object-cover rounded-xl",alt:"Fashion inspiration",src:"https://images.unsplash.com/photo-1485207757730-cc317afde269"})})]})})};function L2(t){const e=_.useRef({value:t,previous:t});return _.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}function gx(t){const[e,n]=_.useState(void 0);return si(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var _m="Checkbox",[nY,ore]=fi(_m),[rY,yx]=nY(_m);function iY(t){const{__scopeCheckbox:e,checked:n,children:r,defaultChecked:i,disabled:s,form:o,name:a,onCheckedChange:l,required:c,value:u="on",internal_do_not_use_render:h}=t,[f,p]=El({prop:n,defaultProp:i??!1,onChange:l,caller:_m}),[g,v]=_.useState(null),[w,E]=_.useState(null),x=_.useRef(!1),b=g?!!o||!!g.closest("form"):!0,C={checked:f,disabled:s,setChecked:p,control:g,setControl:v,name:a,form:o,value:u,hasConsumerStoppedPropagationRef:x,required:c,defaultChecked:rs(i)?!1:i,isFormControl:b,bubbleInput:w,setBubbleInput:E};return m.jsx(rY,{scope:e,...C,children:sY(h)?h(C):r})}var V2="CheckboxTrigger",M2=_.forwardRef(({__scopeCheckbox:t,onKeyDown:e,onClick:n,...r},i)=>{const{control:s,value:o,disabled:a,checked:l,required:c,setControl:u,setChecked:h,hasConsumerStoppedPropagationRef:f,isFormControl:p,bubbleInput:g}=yx(V2,t),v=lt(i,u),w=_.useRef(l);return _.useEffect(()=>{const E=s==null?void 0:s.form;if(E){const x=()=>h(w.current);return E.addEventListener("reset",x),()=>E.removeEventListener("reset",x)}},[s,h]),m.jsx(Ce.button,{type:"button",role:"checkbox","aria-checked":rs(l)?"mixed":l,"aria-required":c,"data-state":B2(l),"data-disabled":a?"":void 0,disabled:a,value:o,...r,ref:v,onKeyDown:me(e,E=>{E.key==="Enter"&&E.preventDefault()}),onClick:me(n,E=>{h(x=>rs(x)?!0:!x),g&&p&&(f.current=E.isPropagationStopped(),f.current||E.stopPropagation())})})});M2.displayName=V2;var vx=_.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:r,checked:i,defaultChecked:s,required:o,disabled:a,value:l,onCheckedChange:c,form:u,...h}=t;return m.jsx(iY,{__scopeCheckbox:n,checked:i,defaultChecked:s,disabled:a,required:o,onCheckedChange:c,name:r,form:u,value:l,internal_do_not_use_render:({isFormControl:f})=>m.jsxs(m.Fragment,{children:[m.jsx(M2,{...h,ref:e,__scopeCheckbox:n}),f&&m.jsx($2,{__scopeCheckbox:n})]})})});vx.displayName=_m;var j2="CheckboxIndicator",F2=_.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:r,...i}=t,s=yx(j2,n);return m.jsx(ys,{present:r||rs(s.checked)||s.checked===!0,children:m.jsx(Ce.span,{"data-state":B2(s.checked),"data-disabled":s.disabled?"":void 0,...i,ref:e,style:{pointerEvents:"none",...t.style}})})});F2.displayName=j2;var U2="CheckboxBubbleInput",$2=_.forwardRef(({__scopeCheckbox:t,...e},n)=>{const{control:r,hasConsumerStoppedPropagationRef:i,checked:s,defaultChecked:o,required:a,disabled:l,name:c,value:u,form:h,bubbleInput:f,setBubbleInput:p}=yx(U2,t),g=lt(n,p),v=L2(s),w=gx(r);_.useEffect(()=>{const x=f;if(!x)return;const b=window.HTMLInputElement.prototype,N=Object.getOwnPropertyDescriptor(b,"checked").set,D=!i.current;if(v!==s&&N){const I=new Event("click",{bubbles:D});x.indeterminate=rs(s),N.call(x,rs(s)?!1:s),x.dispatchEvent(I)}},[f,v,s,i]);const E=_.useRef(rs(s)?!1:s);return m.jsx(Ce.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??E.current,required:a,disabled:l,name:c,value:u,form:h,...e,tabIndex:-1,ref:g,style:{...e.style,...w,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});$2.displayName=U2;function sY(t){return typeof t=="function"}function rs(t){return t==="indeterminate"}function B2(t){return rs(t)?"indeterminate":t?"checked":"unchecked"}const p0=_.forwardRef(({className:t,...e},n)=>m.jsx(vx,{ref:n,className:yt("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...e,children:m.jsx(F2,{className:yt("flex items-center justify-center text-current"),children:m.jsx(X4,{className:"h-4 w-4"})})}));p0.displayName=vx.displayName;var oY=S0[" useId ".trim().toString()]||(()=>{}),aY=0;function Kh(t){const[e,n]=_.useState(oY());return si(()=>{t||n(r=>r??String(aY++))},[t]),t||(e?`radix-${e}`:"")}var lY=_.createContext(void 0);function z2(t){const e=_.useContext(lY);return t||e||"ltr"}var oy="rovingFocusGroup.onEntryFocus",cY={bubbles:!1,cancelable:!0},gd="RovingFocusGroup",[m0,W2,uY]=LA(gd),[dY,q2]=fi(gd,[uY]),[hY,fY]=dY(gd),H2=_.forwardRef((t,e)=>m.jsx(m0.Provider,{scope:t.__scopeRovingFocusGroup,children:m.jsx(m0.Slot,{scope:t.__scopeRovingFocusGroup,children:m.jsx(pY,{...t,ref:e})})}));H2.displayName=gd;var pY=_.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...h}=t,f=_.useRef(null),p=lt(e,f),g=z2(s),[v,w]=El({prop:o,defaultProp:a??null,onChange:l,caller:gd}),[E,x]=_.useState(!1),b=or(c),C=W2(n),N=_.useRef(!1),[D,I]=_.useState(0);return _.useEffect(()=>{const S=f.current;if(S)return S.addEventListener(oy,b),()=>S.removeEventListener(oy,b)},[b]),m.jsx(hY,{scope:n,orientation:r,dir:g,loop:i,currentTabStopId:v,onItemFocus:_.useCallback(S=>w(S),[w]),onItemShiftTab:_.useCallback(()=>x(!0),[]),onFocusableItemAdd:_.useCallback(()=>I(S=>S+1),[]),onFocusableItemRemove:_.useCallback(()=>I(S=>S-1),[]),children:m.jsx(Ce.div,{tabIndex:E||D===0?-1:0,"data-orientation":r,...h,ref:p,style:{outline:"none",...t.style},onMouseDown:me(t.onMouseDown,()=>{N.current=!0}),onFocus:me(t.onFocus,S=>{const A=!N.current;if(S.target===S.currentTarget&&A&&!E){const R=new CustomEvent(oy,cY);if(S.currentTarget.dispatchEvent(R),!R.defaultPrevented){const O=C().filter(K=>K.focusable),L=O.find(K=>K.active),k=O.find(K=>K.id===v),Q=[L,k,...O].filter(Boolean).map(K=>K.ref.current);Q2(Q,u)}}N.current=!1}),onBlur:me(t.onBlur,()=>x(!1))})})}),G2="RovingFocusGroupItem",K2=_.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:s,children:o,...a}=t,l=Kh(),c=s||l,u=fY(G2,n),h=u.currentTabStopId===c,f=W2(n),{onFocusableItemAdd:p,onFocusableItemRemove:g,currentTabStopId:v}=u;return _.useEffect(()=>{if(r)return p(),()=>g()},[r,p,g]),m.jsx(m0.ItemSlot,{scope:n,id:c,focusable:r,active:i,children:m.jsx(Ce.span,{tabIndex:h?0:-1,"data-orientation":u.orientation,...a,ref:e,onMouseDown:me(t.onMouseDown,w=>{r?u.onItemFocus(c):w.preventDefault()}),onFocus:me(t.onFocus,()=>u.onItemFocus(c)),onKeyDown:me(t.onKeyDown,w=>{if(w.key==="Tab"&&w.shiftKey){u.onItemShiftTab();return}if(w.target!==w.currentTarget)return;const E=yY(w,u.orientation,u.dir);if(E!==void 0){if(w.metaKey||w.ctrlKey||w.altKey||w.shiftKey)return;w.preventDefault();let b=f().filter(C=>C.focusable).map(C=>C.ref.current);if(E==="last")b.reverse();else if(E==="prev"||E==="next"){E==="prev"&&b.reverse();const C=b.indexOf(w.currentTarget);b=u.loop?vY(b,C+1):b.slice(C+1)}setTimeout(()=>Q2(b))}}),children:typeof o=="function"?o({isCurrentTabStop:h,hasTabStop:v!=null}):o})})});K2.displayName=G2;var mY={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function gY(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function yY(t,e,n){const r=gY(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return mY[r]}function Q2(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function vY(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var wY=H2,_Y=K2,wx="Radio",[xY,Y2]=fi(wx),[EY,TY]=xY(wx),X2=_.forwardRef((t,e)=>{const{__scopeRadio:n,name:r,checked:i=!1,required:s,disabled:o,value:a="on",onCheck:l,form:c,...u}=t,[h,f]=_.useState(null),p=lt(e,w=>f(w)),g=_.useRef(!1),v=h?c||!!h.closest("form"):!0;return m.jsxs(EY,{scope:n,checked:i,disabled:o,children:[m.jsx(Ce.button,{type:"button",role:"radio","aria-checked":i,"data-state":tL(i),"data-disabled":o?"":void 0,disabled:o,value:a,...u,ref:p,onClick:me(t.onClick,w=>{i||l==null||l(),v&&(g.current=w.isPropagationStopped(),g.current||w.stopPropagation())})}),v&&m.jsx(eL,{control:h,bubbles:!g.current,name:r,value:a,checked:i,required:s,disabled:o,form:c,style:{transform:"translateX(-100%)"}})]})});X2.displayName=wx;var J2="RadioIndicator",Z2=_.forwardRef((t,e)=>{const{__scopeRadio:n,forceMount:r,...i}=t,s=TY(J2,n);return m.jsx(ys,{present:r||s.checked,children:m.jsx(Ce.span,{"data-state":tL(s.checked),"data-disabled":s.disabled?"":void 0,...i,ref:e})})});Z2.displayName=J2;var bY="RadioBubbleInput",eL=_.forwardRef(({__scopeRadio:t,control:e,checked:n,bubbles:r=!0,...i},s)=>{const o=_.useRef(null),a=lt(o,s),l=L2(n),c=gx(e);return _.useEffect(()=>{const u=o.current;if(!u)return;const h=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(h,"checked").set;if(l!==n&&p){const g=new Event("click",{bubbles:r});p.call(u,n),u.dispatchEvent(g)}},[l,n,r]),m.jsx(Ce.input,{type:"radio","aria-hidden":!0,defaultChecked:n,...i,tabIndex:-1,ref:a,style:{...i.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});eL.displayName=bY;function tL(t){return t?"checked":"unchecked"}var SY=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],xm="RadioGroup",[IY,are]=fi(xm,[q2,Y2]),nL=q2(),rL=Y2(),[CY,PY]=IY(xm),iL=_.forwardRef((t,e)=>{const{__scopeRadioGroup:n,name:r,defaultValue:i,value:s,required:o=!1,disabled:a=!1,orientation:l,dir:c,loop:u=!0,onValueChange:h,...f}=t,p=nL(n),g=z2(c),[v,w]=El({prop:s,defaultProp:i??null,onChange:h,caller:xm});return m.jsx(CY,{scope:n,name:r,required:o,disabled:a,value:v,onValueChange:w,children:m.jsx(wY,{asChild:!0,...p,orientation:l,dir:g,loop:u,children:m.jsx(Ce.div,{role:"radiogroup","aria-required":o,"aria-orientation":l,"data-disabled":a?"":void 0,dir:g,...f,ref:e})})})});iL.displayName=xm;var sL="RadioGroupItem",oL=_.forwardRef((t,e)=>{const{__scopeRadioGroup:n,disabled:r,...i}=t,s=PY(sL,n),o=s.disabled||r,a=nL(n),l=rL(n),c=_.useRef(null),u=lt(e,c),h=s.value===i.value,f=_.useRef(!1);return _.useEffect(()=>{const p=v=>{SY.includes(v.key)&&(f.current=!0)},g=()=>f.current=!1;return document.addEventListener("keydown",p),document.addEventListener("keyup",g),()=>{document.removeEventListener("keydown",p),document.removeEventListener("keyup",g)}},[]),m.jsx(_Y,{asChild:!0,...a,focusable:!o,active:h,children:m.jsx(X2,{disabled:o,required:s.required,checked:h,...l,...i,name:s.name,ref:u,onCheck:()=>s.onValueChange(i.value),onKeyDown:me(p=>{p.key==="Enter"&&p.preventDefault()}),onFocus:me(i.onFocus,()=>{var p;f.current&&((p=c.current)==null||p.click())})})})});oL.displayName=sL;var AY="RadioGroupIndicator",aL=_.forwardRef((t,e)=>{const{__scopeRadioGroup:n,...r}=t,i=rL(n);return m.jsx(Z2,{...i,...r,ref:e})});aL.displayName=AY;var lL=iL,cL=oL,RY=aL;const uL=_.forwardRef(({className:t,...e},n)=>m.jsx(lL,{className:yt("grid gap-2",t),...e,ref:n}));uL.displayName=lL.displayName;const Qh=_.forwardRef(({className:t,...e},n)=>m.jsx(cL,{ref:n,className:yt("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...e,children:m.jsx(RY,{className:"flex items-center justify-center",children:m.jsx(J4,{className:"h-2.5 w-2.5 fill-current text-current"})})}));Qh.displayName=cL.displayName;const kY=()=>{const{t,i18n:e}=wt();Bu();const{user:n}=yi(),[r,i]=_.useState(1),[s,o]=_.useState({language:"",gender:"",skinTone:"",hairColor:"",height:"",weight:"",styles:[],occasions:[],favoriteColors:[],dislikedColors:[]}),a=[{id:"casual",label:t("questionnaire.styles.casual")},{id:"elegant",label:t("questionnaire.styles.elegant")},{id:"urban",label:t("questionnaire.styles.urban")},{id:"formal",label:t("questionnaire.styles.formal")},{id:"sporty",label:t("questionnaire.styles.sporty")},{id:"bohemian",label:t("questionnaire.styles.bohemian")},{id:"vintage",label:t("questionnaire.styles.vintage")},{id:"minimalist",label:t("questionnaire.styles.minimalist")}],l=[{id:"work",label:t("questionnaire.occasionTypes.work")},{id:"casual",label:t("questionnaire.occasionTypes.casual")},{id:"party",label:t("questionnaire.occasionTypes.party")},{id:"formal",label:t("questionnaire.occasionTypes.formal")},{id:"date",label:t("questionnaire.occasionTypes.date")},{id:"sport",label:t("questionnaire.occasionTypes.sport")}],c=[{value:"very-light",color:"#f6ede4"},{value:"light",color:"#f3e0d2"},{value:"medium-light",color:"#e8c5a8"},{value:"medium",color:"#d3a98c"},{value:"medium-dark",color:"#b07b59"},{value:"dark",color:"#8b593e"},{value:"very-dark",color:"#613d30"}],u=[{value:"black",color:"#000000"},{value:"dark-brown",color:"#3b2417"},{value:"brown",color:"#6a4e42"},{value:"light-brown",color:"#977961"},{value:"blonde",color:"#deb887"},{value:"red",color:"#a52a2a"}],h=g=>{o({...s,language:g}),e.changeLanguage(g)},f=(g,v)=>{o({...s,[g]:v})},p=async()=>{if(r<4)i(r+1);else try{localStorage.setItem("userStyle",JSON.stringify(s));const g=Oe(fe,"users",n.uid);await Nr(g,{style:s,hasCompletedQuestionnaire:!0,updatedAt:new Date().toISOString()}),window.location.href="/wardrobe"}catch(g){console.error("Error saving questionnaire data:",g)}};return m.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:m.jsxs(xe.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.5},className:"max-w-lg w-full space-y-8 bg-white/80 backdrop-blur-sm p-8 rounded-2xl shadow-xl",children:[m.jsx("div",{className:"text-center",children:m.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:t("questionnaire.title")})}),r===1&&m.jsxs(xe.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-6",children:[m.jsxs("div",{className:"space-y-4",children:[m.jsx(Ze,{children:t("questionnaire.language.title")}),m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs(oe,{variant:s.language==="en"?"default":"outline",onClick:()=>h("en"),className:"w-full",children:["🇬🇧 ",t("questionnaire.language.en")]}),m.jsxs(oe,{variant:s.language==="es"?"default":"outline",onClick:()=>h("es"),className:"w-full",children:["🇪🇸 ",t("questionnaire.language.es")]})]})]}),m.jsxs("div",{className:"space-y-4",children:[m.jsx(Ze,{children:t("questionnaire.gender.title")}),m.jsxs(uL,{value:s.gender,onValueChange:g=>f("gender",g),className:"grid grid-cols-3 gap-4",children:[m.jsxs("div",{children:[m.jsx(Qh,{value:"male",id:"male"}),m.jsx(Ze,{htmlFor:"male",className:"whitespace-nowrap",children:t("questionnaire.gender.male")})]}),m.jsxs("div",{children:[m.jsx(Qh,{value:"female",id:"female"}),m.jsx(Ze,{htmlFor:"female",className:"whitespace-nowrap",children:t("questionnaire.gender.female")})]}),m.jsxs("div",{children:[m.jsx(Qh,{value:"other",id:"other"}),m.jsx(Ze,{htmlFor:"other",className:"whitespace-nowrap",children:t("questionnaire.gender.other")})]})]})]}),m.jsx(oe,{onClick:p,className:"w-full bg-gradient-to-r from-purple-600 to-indigo-600",children:t("questionnaire.next")})]}),r===2&&m.jsxs(xe.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-6",children:[m.jsxs("div",{className:"space-y-4",children:[m.jsx(Ze,{children:t("questionnaire.skinTone")}),m.jsx("div",{className:"grid grid-cols-4 gap-4",children:c.map(g=>m.jsx("button",{onClick:()=>f("skinTone",g.value),className:`w-12 h-12 rounded-full border-4 ${s.skinTone===g.value?"border-purple-600":"border-transparent"}`,style:{backgroundColor:g.color}},g.value))})]}),m.jsxs("div",{className:"space-y-4",children:[m.jsx(Ze,{children:t("questionnaire.hairColor")}),m.jsx("div",{className:"grid grid-cols-4 gap-4",children:u.map(g=>m.jsx("button",{onClick:()=>f("hairColor",g.value),className:`w-12 h-12 rounded-full border-4 ${s.hairColor===g.value?"border-purple-600":"border-transparent"}`,style:{backgroundColor:g.color}},g.value))})]}),m.jsxs("div",{className:"flex space-x-4",children:[m.jsx(oe,{variant:"outline",onClick:()=>i(1),className:"w-full",children:t("questionnaire.back")}),m.jsx(oe,{onClick:p,className:"w-full bg-gradient-to-r from-purple-600 to-indigo-600",children:t("questionnaire.next")})]})]}),r===3&&m.jsxs(xe.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-6",children:[m.jsxs("div",{children:[m.jsx(Ze,{children:t("questionnaire.height")}),m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx(en,{type:"number",value:s.height,onChange:g=>f("height",g.target.value),placeholder:"170"}),m.jsx("span",{className:"text-sm text-gray-500",children:t("questionnaire.cm")})]})]}),m.jsxs("div",{children:[m.jsx(Ze,{children:t("questionnaire.weight")}),m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx(en,{type:"number",value:s.weight,onChange:g=>f("weight",g.target.value),placeholder:"70"}),m.jsx("span",{className:"text-sm text-gray-500",children:t("questionnaire.kg")})]})]}),m.jsxs("div",{className:"flex space-x-4",children:[m.jsx(oe,{variant:"outline",onClick:()=>i(2),className:"w-full",children:t("questionnaire.back")}),m.jsx(oe,{onClick:p,className:"w-full bg-gradient-to-r from-purple-600 to-indigo-600",children:t("questionnaire.next")})]})]}),r===4&&m.jsxs(xe.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-6",children:[m.jsxs("div",{children:[m.jsx(Ze,{children:t("questionnaire.stylePreference")}),m.jsx("div",{className:"grid grid-cols-2 gap-4 mt-2",children:a.map(g=>m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx(p0,{id:g.id,checked:s.styles.includes(g.id),onCheckedChange:v=>{v?f("styles",[...s.styles,g.id]):f("styles",s.styles.filter(w=>w!==g.id))}}),m.jsx("label",{htmlFor:g.id,className:"text-sm font-medium",children:g.label})]},g.id))})]}),m.jsxs("div",{children:[m.jsx(Ze,{children:t("questionnaire.occasions")}),m.jsx("div",{className:"grid grid-cols-2 gap-4 mt-2",children:l.map(g=>m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx(p0,{id:g.id,checked:s.occasions.includes(g.id),onCheckedChange:v=>{v?f("occasions",[...s.occasions,g.id]):f("occasions",s.occasions.filter(w=>w!==g.id))}}),m.jsx("label",{htmlFor:g.id,className:"text-sm font-medium",children:g.label})]},g.id))})]}),m.jsxs("div",{className:"flex space-x-4",children:[m.jsx(oe,{variant:"outline",onClick:()=>i(3),className:"w-full",children:t("questionnaire.back")}),m.jsx(oe,{onClick:p,className:"w-full bg-gradient-to-r from-purple-600 to-indigo-600",children:t("questionnaire.complete")})]})]})]})})};var ay="focusScope.autoFocusOnMount",ly="focusScope.autoFocusOnUnmount",hI={bubbles:!1,cancelable:!0},NY="FocusScope",dL=_.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...o}=t,[a,l]=_.useState(null),c=or(i),u=or(s),h=_.useRef(null),f=lt(e,v=>l(v)),p=_.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;_.useEffect(()=>{if(r){let v=function(b){if(p.paused||!a)return;const C=b.target;a.contains(C)?h.current=C:Pi(h.current,{select:!0})},w=function(b){if(p.paused||!a)return;const C=b.relatedTarget;C!==null&&(a.contains(C)||Pi(h.current,{select:!0}))},E=function(b){if(document.activeElement===document.body)for(const N of b)N.removedNodes.length>0&&Pi(a)};document.addEventListener("focusin",v),document.addEventListener("focusout",w);const x=new MutationObserver(E);return a&&x.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",w),x.disconnect()}}},[r,a,p.paused]),_.useEffect(()=>{if(a){pI.add(p);const v=document.activeElement;if(!a.contains(v)){const E=new CustomEvent(ay,hI);a.addEventListener(ay,c),a.dispatchEvent(E),E.defaultPrevented||(DY(jY(hL(a)),{select:!0}),document.activeElement===v&&Pi(a))}return()=>{a.removeEventListener(ay,c),setTimeout(()=>{const E=new CustomEvent(ly,hI);a.addEventListener(ly,u),a.dispatchEvent(E),E.defaultPrevented||Pi(v??document.body,{select:!0}),a.removeEventListener(ly,u),pI.remove(p)},0)}}},[a,c,u,p]);const g=_.useCallback(v=>{if(!n&&!r||p.paused)return;const w=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,E=document.activeElement;if(w&&E){const x=v.currentTarget,[b,C]=OY(x);b&&C?!v.shiftKey&&E===C?(v.preventDefault(),n&&Pi(b,{select:!0})):v.shiftKey&&E===b&&(v.preventDefault(),n&&Pi(C,{select:!0})):E===x&&v.preventDefault()}},[n,r,p.paused]);return m.jsx(Ce.div,{tabIndex:-1,...o,ref:f,onKeyDown:g})});dL.displayName=NY;function DY(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Pi(r,{select:e}),document.activeElement!==n)return}function OY(t){const e=hL(t),n=fI(e,t),r=fI(e.reverse(),t);return[n,r]}function hL(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function fI(t,e){for(const n of t)if(!LY(n,{upTo:e}))return n}function LY(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function VY(t){return t instanceof HTMLInputElement&&"select"in t}function Pi(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&VY(t)&&e&&t.select()}}var pI=MY();function MY(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=mI(t,e),t.unshift(e)},remove(e){var n;t=mI(t,e),(n=t[0])==null||n.resume()}}}function mI(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function jY(t){return t.filter(e=>e.tagName!=="A")}var cy=0;function FY(){_.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??gI()),document.body.insertAdjacentElement("beforeend",t[1]??gI()),cy++,()=>{cy===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),cy--}},[])}function gI(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Yh="right-scroll-bar-position",Xh="width-before-scroll-bar",UY="with-scroll-bars-hidden",$Y="--removed-body-scroll-bar-size";function uy(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function BY(t,e){var n=_.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var zY=typeof window<"u"?_.useLayoutEffect:_.useEffect,yI=new WeakMap;function WY(t,e){var n=BY(e||null,function(r){return t.forEach(function(i){return uy(i,r)})});return zY(function(){var r=yI.get(n);if(r){var i=new Set(r),s=new Set(t),o=n.current;i.forEach(function(a){s.has(a)||uy(a,null)}),s.forEach(function(a){i.has(a)||uy(a,o)})}yI.set(n,t)},[t]),n}function qY(t){return t}function HY(t,e){e===void 0&&(e=qY);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var o=e(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var l=function(){var u=o;o=[],u.forEach(s)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),n}}}};return i}function GY(t){t===void 0&&(t={});var e=HY(null);return e.options=vr({async:!0,ssr:!1},t),e}var fL=function(t){var e=t.sideCar,n=Gu(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return _.createElement(r,vr({},n))};fL.isSideCarExport=!0;function KY(t,e){return t.useMedium(e),fL}var pL=GY(),dy=function(){},Em=_.forwardRef(function(t,e){var n=_.useRef(null),r=_.useState({onScrollCapture:dy,onWheelCapture:dy,onTouchMoveCapture:dy}),i=r[0],s=r[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,h=t.shards,f=t.sideCar,p=t.noIsolation,g=t.inert,v=t.allowPinchZoom,w=t.as,E=w===void 0?"div":w,x=t.gapMode,b=Gu(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),C=f,N=WY([n,e]),D=vr(vr({},b),i);return _.createElement(_.Fragment,null,u&&_.createElement(C,{sideCar:pL,removeScrollBar:c,shards:h,noIsolation:p,inert:g,setCallbacks:s,allowPinchZoom:!!v,lockRef:n,gapMode:x}),o?_.cloneElement(_.Children.only(a),vr(vr({},D),{ref:N})):_.createElement(E,vr({},D,{className:l,ref:N}),a))});Em.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Em.classNames={fullWidth:Xh,zeroRight:Yh};var vI,QY=function(){if(vI)return vI;if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function YY(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=QY();return e&&t.setAttribute("nonce",e),t}function XY(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function JY(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var ZY=function(){var t=0,e=null;return{add:function(n){t==0&&(e=YY())&&(XY(e,n),JY(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},eX=function(){var t=ZY();return function(e,n){_.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},mL=function(){var t=eX(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},tX={left:0,top:0,right:0,gap:0},hy=function(t){return parseInt(t||"",10)||0},nX=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[hy(n),hy(r),hy(i)]},rX=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return tX;var e=nX(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},iX=mL(),qa="data-scroll-locked",sX=function(t,e,n,r){var i=t.left,s=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(UY,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(qa,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Yh,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Xh,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Yh," .").concat(Yh,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Xh," .").concat(Xh,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(qa,`] {
    `).concat($Y,": ").concat(a,`px;
  }
`)},wI=function(){var t=parseInt(document.body.getAttribute(qa)||"0",10);return isFinite(t)?t:0},oX=function(){_.useEffect(function(){return document.body.setAttribute(qa,(wI()+1).toString()),function(){var t=wI()-1;t<=0?document.body.removeAttribute(qa):document.body.setAttribute(qa,t.toString())}},[])},aX=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r;oX();var s=_.useMemo(function(){return rX(i)},[i]);return _.createElement(iX,{styles:sX(s,!e,i,n?"":"!important")})},g0=!1;if(typeof window<"u")try{var mh=Object.defineProperty({},"passive",{get:function(){return g0=!0,!0}});window.addEventListener("test",mh,mh),window.removeEventListener("test",mh,mh)}catch{g0=!1}var sa=g0?{passive:!1}:!1,lX=function(t){return t.tagName==="TEXTAREA"},gL=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!lX(t)&&n[e]==="visible")},cX=function(t){return gL(t,"overflowY")},uX=function(t){return gL(t,"overflowX")},_I=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=yL(t,r);if(i){var s=vL(t,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},dX=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},hX=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},yL=function(t,e){return t==="v"?cX(e):uX(e)},vL=function(t,e){return t==="v"?dX(e):hX(e)},fX=function(t,e){return t==="h"&&e==="rtl"?-1:1},pX=function(t,e,n,r,i){var s=fX(t,window.getComputedStyle(e).direction),o=s*r,a=n.target,l=e.contains(a),c=!1,u=o>0,h=0,f=0;do{var p=vL(t,a),g=p[0],v=p[1],w=p[2],E=v-w-s*g;(g||E)&&yL(t,a)&&(h+=E,f+=g),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&(i&&Math.abs(h)<1||!i&&o>h)||!u&&(i&&Math.abs(f)<1||!i&&-o>f))&&(c=!0),c},gh=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},xI=function(t){return[t.deltaX,t.deltaY]},EI=function(t){return t&&"current"in t?t.current:t},mX=function(t,e){return t[0]===e[0]&&t[1]===e[1]},gX=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},yX=0,oa=[];function vX(t){var e=_.useRef([]),n=_.useRef([0,0]),r=_.useRef(),i=_.useState(yX++)[0],s=_.useState(mL)[0],o=_.useRef(t);_.useEffect(function(){o.current=t},[t]),_.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var v=w3([t.lockRef.current],(t.shards||[]).map(EI),!0).filter(Boolean);return v.forEach(function(w){return w.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),v.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var a=_.useCallback(function(v,w){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!o.current.allowPinchZoom;var E=gh(v),x=n.current,b="deltaX"in v?v.deltaX:x[0]-E[0],C="deltaY"in v?v.deltaY:x[1]-E[1],N,D=v.target,I=Math.abs(b)>Math.abs(C)?"h":"v";if("touches"in v&&I==="h"&&D.type==="range")return!1;var S=_I(I,D);if(!S)return!0;if(S?N=I:(N=I==="v"?"h":"v",S=_I(I,D)),!S)return!1;if(!r.current&&"changedTouches"in v&&(b||C)&&(r.current=N),!N)return!0;var A=r.current||N;return pX(A,w,v,A==="h"?b:C,!0)},[]),l=_.useCallback(function(v){var w=v;if(!(!oa.length||oa[oa.length-1]!==s)){var E="deltaY"in w?xI(w):gh(w),x=e.current.filter(function(N){return N.name===w.type&&(N.target===w.target||w.target===N.shadowParent)&&mX(N.delta,E)})[0];if(x&&x.should){w.cancelable&&w.preventDefault();return}if(!x){var b=(o.current.shards||[]).map(EI).filter(Boolean).filter(function(N){return N.contains(w.target)}),C=b.length>0?a(w,b[0]):!o.current.noIsolation;C&&w.cancelable&&w.preventDefault()}}},[]),c=_.useCallback(function(v,w,E,x){var b={name:v,delta:w,target:E,should:x,shadowParent:wX(E)};e.current.push(b),setTimeout(function(){e.current=e.current.filter(function(C){return C!==b})},1)},[]),u=_.useCallback(function(v){n.current=gh(v),r.current=void 0},[]),h=_.useCallback(function(v){c(v.type,xI(v),v.target,a(v,t.lockRef.current))},[]),f=_.useCallback(function(v){c(v.type,gh(v),v.target,a(v,t.lockRef.current))},[]);_.useEffect(function(){return oa.push(s),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",l,sa),document.addEventListener("touchmove",l,sa),document.addEventListener("touchstart",u,sa),function(){oa=oa.filter(function(v){return v!==s}),document.removeEventListener("wheel",l,sa),document.removeEventListener("touchmove",l,sa),document.removeEventListener("touchstart",u,sa)}},[]);var p=t.removeScrollBar,g=t.inert;return _.createElement(_.Fragment,null,g?_.createElement(s,{styles:gX(i)}):null,p?_.createElement(aX,{gapMode:t.gapMode}):null)}function wX(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const _X=KY(pL,vX);var wL=_.forwardRef(function(t,e){return _.createElement(Em,vr({},t,{ref:e,sideCar:_X}))});wL.classNames=Em.classNames;const xX=wL;var EX=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},aa=new WeakMap,yh=new WeakMap,vh={},fy=0,_L=function(t){return t&&(t.host||_L(t.parentNode))},TX=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=_L(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},bX=function(t,e,n,r){var i=TX(e,Array.isArray(t)?t:[t]);vh[n]||(vh[n]=new WeakMap);var s=vh[n],o=[],a=new Set,l=new Set(i),c=function(h){!h||a.has(h)||(a.add(h),c(h.parentNode))};i.forEach(c);var u=function(h){!h||l.has(h)||Array.prototype.forEach.call(h.children,function(f){if(a.has(f))u(f);else try{var p=f.getAttribute(r),g=p!==null&&p!=="false",v=(aa.get(f)||0)+1,w=(s.get(f)||0)+1;aa.set(f,v),s.set(f,w),o.push(f),v===1&&g&&yh.set(f,!0),w===1&&f.setAttribute(n,"true"),g||f.setAttribute(r,"true")}catch(E){console.error("aria-hidden: cannot operate on ",f,E)}})};return u(e),a.clear(),fy++,function(){o.forEach(function(h){var f=aa.get(h)-1,p=s.get(h)-1;aa.set(h,f),s.set(h,p),f||(yh.has(h)||h.removeAttribute(r),yh.delete(h)),p||h.removeAttribute(n)}),fy--,fy||(aa=new WeakMap,aa=new WeakMap,yh=new WeakMap,vh={})}},SX=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=e||EX(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),bX(r,i,n,"aria-hidden")):function(){return null}},Tm="Dialog",[xL,lre]=fi(Tm),[IX,dr]=xL(Tm),EL=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:o=!0}=t,a=_.useRef(null),l=_.useRef(null),[c,u]=El({prop:r,defaultProp:i??!1,onChange:s,caller:Tm});return m.jsx(IX,{scope:e,triggerRef:a,contentRef:l,contentId:Kh(),titleId:Kh(),descriptionId:Kh(),open:c,onOpenChange:u,onOpenToggle:_.useCallback(()=>u(h=>!h),[u]),modal:o,children:n})};EL.displayName=Tm;var TL="DialogTrigger",CX=_.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=dr(TL,n),s=lt(e,i.triggerRef);return m.jsx(Ce.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":Ex(i.open),...r,ref:s,onClick:me(t.onClick,i.onOpenToggle)})});CX.displayName=TL;var _x="DialogPortal",[PX,bL]=xL(_x,{forceMount:void 0}),SL=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:i}=t,s=dr(_x,e);return m.jsx(PX,{scope:e,forceMount:n,children:_.Children.map(r,o=>m.jsx(ys,{present:n||s.open,children:m.jsx(vw,{asChild:!0,container:i,children:o})}))})};SL.displayName=_x;var rp="DialogOverlay",IL=_.forwardRef((t,e)=>{const n=bL(rp,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=dr(rp,t.__scopeDialog);return s.modal?m.jsx(ys,{present:r||s.open,children:m.jsx(RX,{...i,ref:e})}):null});IL.displayName=rp;var AX=pu("DialogOverlay.RemoveScroll"),RX=_.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=dr(rp,n);return m.jsx(xX,{as:AX,allowPinchZoom:!0,shards:[i.contentRef],children:m.jsx(Ce.div,{"data-state":Ex(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Po="DialogContent",CL=_.forwardRef((t,e)=>{const n=bL(Po,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=dr(Po,t.__scopeDialog);return m.jsx(ys,{present:r||s.open,children:s.modal?m.jsx(kX,{...i,ref:e}):m.jsx(NX,{...i,ref:e})})});CL.displayName=Po;var kX=_.forwardRef((t,e)=>{const n=dr(Po,t.__scopeDialog),r=_.useRef(null),i=lt(e,n.contentRef,r);return _.useEffect(()=>{const s=r.current;if(s)return SX(s)},[]),m.jsx(PL,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:me(t.onCloseAutoFocus,s=>{var o;s.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:me(t.onPointerDownOutside,s=>{const o=s.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&s.preventDefault()}),onFocusOutside:me(t.onFocusOutside,s=>s.preventDefault())})}),NX=_.forwardRef((t,e)=>{const n=dr(Po,t.__scopeDialog),r=_.useRef(!1),i=_.useRef(!1);return m.jsx(PL,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,s),s.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=s.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),PL=_.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,...o}=t,a=dr(Po,n),l=_.useRef(null),c=lt(e,l);return FY(),m.jsxs(m.Fragment,{children:[m.jsx(dL,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:m.jsx(Op,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":Ex(a.open),...o,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),m.jsxs(m.Fragment,{children:[m.jsx(DX,{titleId:a.titleId}),m.jsx(LX,{contentRef:l,descriptionId:a.descriptionId})]})]})}),xx="DialogTitle",AL=_.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=dr(xx,n);return m.jsx(Ce.h2,{id:i.titleId,...r,ref:e})});AL.displayName=xx;var RL="DialogDescription",kL=_.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=dr(RL,n);return m.jsx(Ce.p,{id:i.descriptionId,...r,ref:e})});kL.displayName=RL;var NL="DialogClose",DL=_.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=dr(NL,n);return m.jsx(Ce.button,{type:"button",...r,ref:e,onClick:me(t.onClick,()=>i.onOpenChange(!1))})});DL.displayName=NL;function Ex(t){return t?"open":"closed"}var OL="DialogTitleWarning",[cre,LL]=e4(OL,{contentName:Po,titleName:xx,docsSlug:"dialog"}),DX=({titleId:t})=>{const e=LL(OL),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return _.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},OX="DialogDescriptionWarning",LX=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${LL(OX).contentName}}.`;return _.useEffect(()=>{var s;const i=(s=t.current)==null?void 0:s.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},VX=EL,MX=SL,VL=IL,ML=CL,jL=AL,FL=kL,jX=DL;const Al=VX,FX=MX,UL=qe.forwardRef(({className:t,...e},n)=>m.jsx(VL,{ref:n,className:yt("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));UL.displayName=VL.displayName;const qo=qe.forwardRef(({className:t,children:e,...n},r)=>m.jsxs(FX,{children:[m.jsx(UL,{}),m.jsxs(ML,{ref:r,className:yt("fixed left-[50%] top-[50%] z-50 grid w-[95vw] max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg sm:w-full",t),...n,children:[e,m.jsxs(jX,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[m.jsx(qu,{className:"h-5 w-5"}),m.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));qo.displayName=ML.displayName;const Ho=({className:t,...e})=>m.jsx("div",{className:yt("flex flex-col space-y-2 text-center sm:text-left",t),...e});Ho.displayName="DialogHeader";const Go=qe.forwardRef(({className:t,...e},n)=>m.jsx(jL,{ref:n,className:yt("text-lg font-semibold leading-none tracking-tight",t),...e}));Go.displayName=jL.displayName;const UX=qe.forwardRef(({className:t,...e},n)=>m.jsx(FL,{ref:n,className:yt("text-sm text-muted-foreground",t),...e}));UX.displayName=FL.displayName;const Tx=({onFileSelect:t,isAnalyzing:e=!1,preview:n=null})=>{const{t:r}=wt(),{toast:i}=Hn(),[s,o]=_.useState(!1),a=_.useCallback(async h=>{var p;const f=(p=h.target.files)==null?void 0:p[0];if(f){if(!f.type.startsWith("image/")){i({title:r("upload.error"),description:r("upload.imageOnly"),variant:"destructive"});return}t(f)}},[t,r,i]),l=_.useCallback(h=>{h.preventDefault(),h.stopPropagation(),o(!1);const f=h.dataTransfer.files[0];f&&a({target:{files:[f]}})},[a]),c=_.useCallback(h=>{h.preventDefault(),h.stopPropagation(),o(!0)},[]),u=_.useCallback(h=>{h.preventDefault(),h.stopPropagation(),o(!1)},[]);return m.jsx("div",{className:`relative border-2 border-dashed rounded-lg p-8 text-center transition-colors ${s?"border-purple-500 bg-purple-50":"border-gray-300"}`,onDragEnter:c,onDragOver:c,onDragLeave:u,onDrop:l,children:n?m.jsxs("div",{className:"relative",children:[m.jsx("img",{src:n,alt:"Preview",className:"max-h-64 mx-auto rounded-lg"}),m.jsx(oe,{variant:"destructive",size:"icon",className:"absolute top-2 right-2",onClick:()=>t(null),children:m.jsx(qu,{className:"w-4 h-4"})}),e&&m.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50 rounded-lg",children:m.jsx(Sw,{className:"w-8 h-8 text-white animate-spin"})})]}):m.jsxs("div",{children:[m.jsx(tl,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),m.jsxs("p",{className:"text-gray-600",children:[r("upload.dragDrop")," ",m.jsxs("label",{className:"text-purple-600 hover:text-purple-700 cursor-pointer",children:[r("upload.browse"),m.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:a})]})]})]})})},$X="AIzaSyDMWs4cZPX9xHBwJvQcScmPQlFa-tat2BQ",BX=`https://vision.googleapis.com/v1/images:annotate?key=${$X}`,zX=async t=>{try{const n={requests:[{image:{content:(await WX(t)).split(",")[1]},features:[{type:"LABEL_DETECTION",maxResults:10},{type:"IMAGE_PROPERTIES"},{type:"OBJECT_LOCALIZATION"}]}]},r=await fetch(BX,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!r.ok)throw new Error("Failed to analyze image");const i=await r.json();return qX(i)}catch(e){return console.error("Image analysis error:",e),pR({title:"Error analyzing image",description:e.message,variant:"destructive"}),null}},WX=t=>new Promise((e,n)=>{const r=new FileReader;r.readAsDataURL(t),r.onload=()=>e(r.result),r.onerror=i=>n(i)}),qX=t=>{var c,u,h;const e=t.responses[0],n=e.labelAnnotations||[],r=((u=(c=e.imagePropertiesAnnotation)==null?void 0:c.dominantColors)==null?void 0:u.colors)||[],i=e.localizedObjectAnnotations||[],s=[...i.filter(f=>HX(f.name)).map(f=>f.name),...n.filter(f=>GX(f.description)).map(f=>f.description)],o=KX(n),a=r.length>0?TI(r[0].color):"unknown color",l=QX(s[0],a,o,i,n);return{type:s[0]||"clothing item",color:a,style:o,confidence:((h=n[0])==null?void 0:h.score)||0,description:l,tags:[...new Set([...s,o,a])],details:{objects:i.map(f=>({name:f.name,confidence:f.score})),colors:r.slice(0,3).map(f=>({name:TI(f.color),percentage:f.score*100}))}}},HX=t=>["Shirt","Pants","Dress","Jacket","Coat","Sweater","Skirt","Blouse","T-shirt","Jeans","Shorts","Suit","Blazer","Hoodie","Shoes","Boots","Sneakers"].includes(t),GX=t=>["shirt","pants","dress","jacket","coat","sweater","skirt","blouse","t-shirt","jeans","shorts","suit","blazer","hoodie","shoes","boots","sneakers"].some(n=>t.toLowerCase().includes(n)),KX=t=>{const e={formal:["formal","business","suit","elegant","professional"],casual:["casual","everyday","relaxed","t-shirt","jeans","comfortable"],sporty:["athletic","sport","active","workout","running"],bohemian:["boho","ethnic","pattern","artistic","floral"],streetwear:["urban","street","hip hop","trendy","modern"]},n={};return t.forEach(r=>{for(const[i,s]of Object.entries(e))s.some(o=>r.description.toLowerCase().includes(o))&&(n[i]=(n[i]||0)+r.score)}),Object.keys(n).length===0?"casual":Object.entries(n).reduce((r,i)=>r[1]>i[1]?r:i)[0]},TI=t=>{const{red:e,green:n,blue:r}=t,i=[{name:"black",rgb:[0,0,0]},{name:"white",rgb:[255,255,255]},{name:"red",rgb:[255,0,0]},{name:"navy",rgb:[0,0,128]},{name:"blue",rgb:[0,0,255]},{name:"yellow",rgb:[255,255,0]},{name:"purple",rgb:[128,0,128]},{name:"orange",rgb:[255,165,0]},{name:"brown",rgb:[165,42,42]},{name:"pink",rgb:[255,192,203]},{name:"gray",rgb:[128,128,128]},{name:"beige",rgb:[245,245,220]},{name:"burgundy",rgb:[128,0,32]},{name:"olive",rgb:[128,128,0]},{name:"teal",rgb:[0,128,128]}];let s=1/0,o="unknown";return i.forEach(({name:a,rgb:l})=>{const c=Math.sqrt(Math.pow(e-l[0],2)+Math.pow(n-l[1],2)+Math.pow(r-l[2],2));c<s&&(s=c,o=a)}),o},QX=(t,e,n,r,i)=>{const s=i.filter(h=>h.description.includes("pattern")||h.description.includes("print")).map(h=>h.description),o=i.filter(h=>["cotton","leather","denim","silk","wool","linen"].some(f=>h.description.toLowerCase().includes(f))).map(h=>h.description),a=[];s.length>0&&a.push(s[0]),o.length>0&&a.push(o[0]);const l=`${YX(e)} ${t||"item"}`,c=n?`, ${n} style`:"",u=a.length>0?`, ${a.join(", ")}`:"";return`${l}${c}${u}`},YX=t=>t.charAt(0).toUpperCase()+t.slice(1),XX=({onUpload:t})=>{const{t:e}=wt(),{toast:n}=Hn(),[r,i]=_.useState(null),[s,o]=_.useState(null),[a,l]=_.useState(!1),[c,u]=_.useState(null),h=_.useCallback(async p=>{if(!p){i(null),o(null),u(null);return}i(p);const g=new FileReader;g.onloadend=()=>{o(g.result)},g.readAsDataURL(p),l(!0);try{const v=await zX(p);u(v),n({title:e("upload.analyzed"),description:v.description})}catch(v){n({title:e("upload.analysisFailed"),description:v.message,variant:"destructive"})}finally{l(!1)}},[e,n]),f=()=>{!r||!c||t(r,c)};return m.jsxs("div",{className:"space-y-4",children:[m.jsx(Tx,{onFileSelect:h,isAnalyzing:a,preview:s}),c&&m.jsxs(xe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white/80 backdrop-blur-sm rounded-lg p-4 space-y-2",children:[m.jsx("h3",{className:"font-semibold",children:e("analysis.results")}),m.jsx("p",{children:c.description}),m.jsx("div",{className:"flex flex-wrap gap-2",children:c.tags.map((p,g)=>m.jsx("span",{className:"text-xs bg-purple-100 text-purple-600 px-2 py-1 rounded-full",children:p},g))})]}),s&&m.jsxs(oe,{className:"w-full",onClick:f,disabled:a,children:[m.jsx(tl,{className:"w-4 h-4 mr-2"}),e("upload.submit")]})]})},JX=({onUpload:t})=>{const{t:e}=wt(),[n,r]=_.useState(null),[i,s]=_.useState(null),[o,a]=_.useState([]),l=_.useCallback(p=>{if(!p){r(null),s(null);return}r(p);const g=new FileReader;g.onloadend=()=>{s(g.result)},g.readAsDataURL(p)},[]),c=()=>{a([...o,{type:"",url:""}])},u=(p,g,v)=>{const w=[...o];w[p][g]=v,a(w)},h=p=>{a(o.filter((g,v)=>v!==p))},f=()=>{n&&t(n,o)};return m.jsxs("div",{className:"space-y-4",children:[m.jsx(Tx,{onFileSelect:l,preview:i}),i&&m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("h3",{className:"font-semibold",children:e("upload.addLinks")}),m.jsxs(oe,{onClick:c,size:"sm",children:[m.jsx(s$,{className:"w-4 h-4 mr-2"}),e("upload.addLink")]})]}),o.map((p,g)=>m.jsxs(xe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex gap-4 items-start",children:[m.jsxs("div",{className:"flex-1",children:[m.jsx(Ze,{children:e("upload.itemType")}),m.jsx(en,{value:p.type,onChange:v=>u(g,"type",v.target.value),placeholder:e("upload.itemTypePlaceholder")})]}),m.jsxs("div",{className:"flex-1",children:[m.jsx(Ze,{children:e("upload.link")}),m.jsx(en,{value:p.url,onChange:v=>u(g,"url",v.target.value),placeholder:"https://"})]}),m.jsx(oe,{variant:"destructive",size:"icon",className:"mt-6",onClick:()=>h(g),children:m.jsx(qu,{className:"w-4 h-4"})})]},g)),m.jsxs(oe,{className:"w-full",onClick:f,children:[m.jsx(tl,{className:"w-4 h-4 mr-2"}),e("upload.submit")]})]})]})},$L=({isOpen:t,onClose:e,onUpload:n,allowLinks:r,isWardrobe:i=!1})=>{const{t:s}=wt();return m.jsx(N2,{children:t&&m.jsx(Al,{open:t,onOpenChange:e,children:m.jsxs(qo,{className:"sm:max-w-[425px]",children:[m.jsx(Ho,{children:m.jsx(Go,{children:s(i?"wardrobe.uploadTitle":"community.uploadTitle")})}),i?m.jsx(XX,{onUpload:(o,a)=>{n(o,a),e()}}):m.jsx(JX,{onUpload:(o,a)=>{n(o,a),e()}})]})})})},ZX=({item:t,onDelete:e})=>m.jsxs(xe.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white/80 backdrop-blur-sm rounded-xl overflow-hidden shadow-lg",children:[m.jsxs("div",{className:"relative",children:[m.jsx("img",{src:t.image,alt:t.description,className:"w-full h-48 object-cover"}),m.jsx("div",{className:"absolute top-2 right-2",children:m.jsx(oe,{size:"icon",variant:"outline",className:"bg-white/80",onClick:()=>e(t.id),children:m.jsx(g$,{className:"w-4 h-4"})})})]}),m.jsxs("div",{className:"p-4",children:[m.jsx("h3",{className:"font-semibold",children:t.type}),m.jsx("p",{className:"text-sm text-gray-600",children:t.description}),t.tags&&m.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:t.tags.map((n,r)=>m.jsx("span",{className:"text-xs bg-purple-100 text-purple-600 px-2 py-1 rounded-full",children:n},r))})]})]}),eJ=({items:t,onDelete:e})=>m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map((n,r)=>m.jsx(xe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:r*.1},children:m.jsx(ZX,{item:n,onDelete:e})},n.id))}),tJ=()=>{const{t}=wt(),{toast:e}=Hn(),[n,r]=_.useState(!1),[i,s]=_.useState([]);_.useEffect(()=>{const l=localStorage.getItem("wardrobeItems");l&&s(JSON.parse(l))},[]);const o=(l,c)=>{const u=new FileReader;u.onloadend=()=>{const h={id:Date.now(),image:u.result,type:(c==null?void 0:c.type)||"Unknown item",description:(c==null?void 0:c.description)||"",tags:(c==null?void 0:c.tags)||[],color:(c==null?void 0:c.color)||"",style:(c==null?void 0:c.style)||"",isPrivate:!0},f=[...i,h];s(f),localStorage.setItem("wardrobeItems",JSON.stringify(f)),e({title:t("wardrobe.itemAdded"),description:t("wardrobe.itemAnalyzed")})},u.readAsDataURL(l)},a=l=>{const c=i.filter(u=>u.id!==l);s(c),localStorage.setItem("wardrobeItems",JSON.stringify(c)),e({title:t("wardrobe.itemDeleted"),description:t("wardrobe.itemRemovedFromWardrobe")})};return m.jsxs("div",{className:"min-h-screen p-6",children:[m.jsxs(xe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-6xl mx-auto",children:[m.jsxs("div",{className:"flex justify-between items-center mb-8",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:t("wardrobe.title")}),m.jsx("p",{className:"text-gray-600 mt-2",children:t("wardrobe.privateDescription")})]}),m.jsxs(oe,{onClick:()=>r(!0),children:[m.jsx(tl,{className:"w-4 h-4 mr-2"}),t("wardrobe.uploadNew")]})]}),i.length===0?m.jsx(xe.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5},className:"bg-white/80 backdrop-blur-sm rounded-xl p-6 shadow-lg text-center",children:m.jsxs("div",{className:"text-center",children:[m.jsx(m$,{className:"w-12 h-12 mx-auto text-[#6366f1] mb-4"}),m.jsx("h3",{className:"text-xl font-semibold mb-2",children:t("wardrobe.empty")}),m.jsx("p",{className:"text-gray-600 mb-4",children:t("wardrobe.addFirstItem")}),m.jsxs(oe,{onClick:()=>r(!0),children:[m.jsx(tl,{className:"w-4 h-4 mr-2"}),t("wardrobe.startUploading")]})]})}):m.jsx(eJ,{items:i,onDelete:a})]}),m.jsx($L,{isOpen:n,onClose:()=>r(!1),onUpload:o,allowLinks:!1,isWardrobe:!0})]})},Je={TOP:"top",BOTTOM:"bottom",DRESS:"dress",OUTERWEAR:"outerwear",SHOES:"shoes",ACCESSORIES:"accessories"},BL=t=>t?["camisa","blusa","camiseta","top","jersey","sudadera","polo","shirt","blouse","t-shirt","sweater","hoodie","tank top"].some(n=>t.toLowerCase().includes(n)):!1,zL=t=>t?["pantalón","falda","jeans","shorts","bermuda","leggings","vaqueros","pants","skirt","trousers"].some(n=>t.toLowerCase().includes(n)):!1,WL=t=>t?["zapatos","zapatillas","botas","sandalias","tacones","deportivas","shoes","sneakers","boots","sandals","heels","flats","trainers"].some(n=>t.toLowerCase().includes(n)):!1,nJ=t=>{if(!Array.isArray(t)||t.length===0||t.length<1)return null;const e={top:!1,bottom:!1,shoes:!1};if(t.forEach(r=>{BL(r.type)?e.top=!0:zL(r.type)?e.bottom=!0:WL(r.type)&&(e.shoes=!0)}),t.length>=2){if(e.top&&e.shoes&&!e.bottom)return Je.BOTTOM;if(e.bottom&&e.shoes&&!e.top)return Je.TOP;if(e.top&&e.bottom&&!e.shoes)return Je.SHOES}if(e.top&&!e.bottom&&!e.shoes)return Je.BOTTOM;if(e.bottom&&!e.top&&!e.shoes||e.shoes&&!e.top&&!e.bottom)return Je.TOP;const n=t.some(r=>r.type&&r.type.toLowerCase().includes("vestido")||r.type.toLowerCase().includes("dress"));if(n&&!e.shoes)return Je.SHOES;if(n||e.top&&e.bottom&&e.shoes)return Je.ACCESSORIES;if(t.length===1){if(e.top)return Je.BOTTOM;if(e.bottom||e.shoes)return Je.TOP}return null},rJ="AIzaSyBabZdKyDyDtG6C9q2D0jvtYClTs1sM-EA",bI="https://dresso-app.onrender.com/api",iJ="ES",sJ=parseInt("3",10)||3,SI=async t=>{if(!t||t.trim()==="")throw new Error("La consulta de búsqueda está vacía.");let e;const n=!bI.includes("googleapis.com");n?e=`${bI}?q=${encodeURIComponent(t)}`:e=`https://shoppingcontent.googleapis.com/content/v2.1/products?key=${rJ}&maxResults=${sJ}&country=${iJ}&q=${encodeURIComponent(t)}`;try{const r=await fetch(e,{method:"GET",headers:{"Content-Type":"application/json"}});if(!r.ok)throw new Error(`Error en la API (${r.status})`);const i=await r.json(),s=n?i.items||[]:i.resources||i.items||[];if(!Array.isArray(s))throw new Error("Respuesta de la API no válida.");return s.filter(o=>{var u,h;const a=o==null?void 0:o.title,l=(o==null?void 0:o.image)||(o==null?void 0:o.imageLink)||((h=(u=o==null?void 0:o.images)==null?void 0:u[0])==null?void 0:h.link),c=o==null?void 0:o.link;return a&&l&&c}).map(o=>{var a,l,c,u,h,f,p,g;return{id:o.id||String(Date.now()+Math.random()),title:o.title,price:{value:((a=o.price)==null?void 0:a.value)||((c=(l=o.prices)==null?void 0:l[0])==null?void 0:c.value)||"0",currency:((u=o.price)==null?void 0:u.currency)||((f=(h=o.prices)==null?void 0:h[0])==null?void 0:f.currency)||"EUR"},image:n?o.image:o.imageLink||((g=(p=o.images)==null?void 0:p[0])==null?void 0:g.link),link:o.link,displayLink:o.displayLink||new URL(o.link).hostname}})}catch(r){throw r.message.includes("fetch")||r.message.includes("conectar")?new Error("No se pudo conectar con el servidor. Intenta más tarde."):r}},II=(t,e,n=!1)=>{const r=[];n?r.push("accesorio"):t&&r.push(t);const i=["casual","sporty","formal","elegant","bohemio","moderno","vintage","minimalista","urbano","trabajo","fiesta"],s=e.flatMap(c=>{var u;return c.style||((u=c.tags)==null?void 0:u.filter(h=>i.includes(h==null?void 0:h.toLowerCase())))||[]}),o=s.length>0?s.reduce((c,u,h,f)=>f.filter(p=>p===c).length>=f.filter(p=>p===u).length?c:u):"casual";r.push(o);const a=e.map(c=>c.color).filter(Boolean);return a.length>0&&r.push(a[0]),r.filter(Boolean).join(" ").trim().replace(/\s+/g," ")||"ropa tendencia mujer"},oJ=t=>{if(!t||!t.type)return"";let e=t.type.toLowerCase();return t.color&&(e+=` ${t.color.toLowerCase()}`),t.name&&(e=t.name.toLowerCase()),e},aJ=(t,e,n)=>{if(!Array.isArray(t)||t.length===0)return`Este ${e||"artículo"} podría complementar tu estilo actual.`;const r=t.map(oJ).filter(Boolean);let i=`Este ${e||(n?n.toLowerCase():"artículo")}`;const s={[Je.BOTTOM]:"pantalón",[Je.TOP]:"prenda superior",[Je.SHOES]:"calzado",[Je.DRESS]:"vestido",[Je.OUTERWEAR]:"abrigo",[Je.ACCESSORIES]:"accesorio"};if(!e&&n&&s[n]?i=`Este ${s[n]}`:!e&&n&&(i=`Este ${n.toLowerCase()}`),r.length===0)return`${i} es una gran adición a tu guardarropa.`;let o="complementa tu look con ";if(r.length===1)o+=r[0];else{const a=r.pop();o+=`${r.join(", ")} y ${a}`}return`${i} ${o}.`},lJ=async t=>{try{if(!Array.isArray(t))throw console.warn("generateOutfitSuggestions: Wardrobe items is not an array:",t),new Error("Datos del armario no válidos. Por favor, revisa tu armario.");const e=t.filter(l=>l&&l.type&&(l.id||l.imageUrl));if(e.length===0){const l=II(null,[],!1),c=await SI(l);if(!Array.isArray(c))throw new Error("No se pudieron obtener recomendaciones generales.");return c.map(u=>({...u,imageLink:u.image,matchReason:`Descubre esta tendencia: ${u.title||"un artículo de moda"}.`}))}const n=nJ(e);let r=e,i=!1;n?(r=e.filter(l=>l.type?(BL(l.type)?Je.TOP:zL(l.type)?Je.BOTTOM:WL(l.type)?Je.SHOES:null)!==n:!1),r.length===0&&(r=e)):(i=!0,r=e);const s=n||(i?Je.ACCESSORIES:null),o=II(s,r,i);if(!o)throw console.warn("generateOutfitSuggestions: Failed to build search query.",{actualMissingTypeForQuery:s,baseItemsForSuggestion:r,isFallbackSearch:i}),new Error("No pudimos crear una búsqueda con tus prendas. Intenta añadir más variedad a tu armario.");const a=await SI(o);if(!Array.isArray(a))throw console.warn("generateOutfitSuggestions: Invalid products response from searchProducts:",a),new Error("No se pudieron obtener productos en este momento. Intenta más tarde.");return a.length===0?[]:a.map(l=>({...l,imageLink:l.image,matchReason:aJ(r,l.title,s)}))}catch(e){throw console.error("Error in generateOutfitSuggestions:",e),e.message.includes("Failed to fetch")||e.message.includes("NetworkError")?new Error("Error de conexión. Verifica tu internet e intenta de nuevo."):e}},cJ=()=>{const{t}=wt();Hn();const[e,n]=_.useState([]),[r,i]=_.useState(!0),[s,o]=_.useState(null),[a,l]=_.useState(!1);return _.useEffect(()=>{(async()=>{try{i(!0),o(null),l(!1);const u=localStorage.getItem("wardrobeItems");let h=[];if(u)try{h=JSON.parse(u),Array.isArray(h)||(h=[],console.warn("Wardrobe items in localStorage was not an array."))}catch(p){console.error("Error parsing wardrobe items from localStorage:",p),h=[]}if(h.length<1){l(!0),o(t("outfits.errors.notEnoughItems")),n([]),i(!1);return}const f=await lJ(h);if(!Array.isArray(f)){console.error("La respuesta de generateOutfitSuggestions no es una lista válida:",f),o(t("outfits.errors.apiConnection")),n([]),i(!1);return}if(f.length===0){l(!0),o(t("outfits.errors.noProductsStyle")),n([]),i(!1);return}n(f)}catch(u){console.error("Error loading recommendations:",u),u.message&&u.message.toLowerCase().includes("failed to fetch")?o(t("outfits.errors.apiConnection")):u.message&&u.message.includes("No pudimos crear una búsqueda")?(o(u.message),l(!0)):o(u.message||t("outfits.errors.unknownError")),n([])}finally{i(!1)}})()},[t]),r?m.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-purple-100 via-pink-100 to-blue-100 p-4",children:m.jsx(Sw,{className:"w-16 h-16 animate-spin text-purple-700"})}):m.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-100 via-pink-100 to-blue-100 p-4 md:p-8",children:m.jsxs(xe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"max-w-7xl mx-auto",children:[m.jsxs("div",{className:"text-center mb-10 md:mb-16",children:[m.jsx("h1",{className:"text-5xl md:text-6xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-purple-700 to-pink-600 mb-3",children:t("outfits.title")}),m.jsx("p",{className:"text-xl text-gray-700",children:t("outfits.subtitle")})]}),s&&!e.length?m.jsxs(xe.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5},className:"bg-white/95 backdrop-blur-lg rounded-2xl p-8 md:p-12 text-center shadow-2xl border border-gray-200",children:[a?m.jsx(i$,{className:"w-16 h-16 text-blue-500 mx-auto mb-5"}):m.jsx(G4,{className:"w-16 h-16 text-red-500 mx-auto mb-5"}),m.jsx("h3",{className:"text-2xl md:text-3xl font-semibold text-gray-800 mb-4",children:t(a?"outfits.errors.noResultsTitle":"outfits.errors.oops")}),m.jsx("p",{className:"text-gray-600 text-lg mb-8",children:s}),m.jsx(oe,{variant:"default",className:"bg-[#1a1a1a] text-white hover:bg-[#333333] active:bg-[#000000] py-3 px-8 text-lg",onClick:()=>window.location.reload(),children:t("outfits.tryAgain")})]}):m.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-3 gap-8 md:gap-10",children:e.map((c,u)=>{var h;return m.jsxs(xe.div,{initial:{opacity:0,y:50,scale:.9},animate:{opacity:1,y:0,scale:1},transition:{delay:u*.1,duration:.6,type:"spring",stiffness:90},className:"bg-white/95 backdrop-blur-lg rounded-2xl overflow-hidden shadow-2xl flex flex-col group hover:shadow-purple-200/50 transition-all duration-300 border border-gray-200",children:[m.jsxs("div",{className:"relative aspect-[3/4] w-full overflow-hidden",children:[m.jsx("img",{className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300 ease-in-out",alt:c.title||"Producto recomendado",src:"https://images.unsplash.com/photo-1619853650725-25296cc83ddb"}),m.jsxs("div",{className:"absolute top-4 right-4 flex flex-col space-y-3",children:[m.jsx(oe,{size:"icon",variant:"outline",className:"bg-white/80 hover:bg-white backdrop-blur-sm rounded-full w-11 h-11 shadow-md",children:m.jsx(bw,{className:"w-5 h-5 text-pink-500"})}),m.jsx(oe,{size:"icon",variant:"outline",className:"bg-white/80 hover:bg-white backdrop-blur-sm rounded-full w-11 h-11 shadow-md",children:m.jsx(Iw,{className:"w-5 h-5 text-purple-600"})})]})]}),m.jsxs("div",{className:"p-5 md:p-6 flex flex-col flex-grow",children:[m.jsx("h3",{className:"font-semibold text-xl text-gray-800 mb-1.5 truncate",title:c.title,children:c.title||t("outfits.productNameDefault")}),m.jsx("p",{className:"text-purple-700 font-medium text-lg mb-2.5",children:(h=c.price)!=null&&h.value&&parseFloat(c.price.value)>0?`${parseFloat(c.price.value).toFixed(2)} ${c.price.currency||"EUR"}`:t("outfits.consultPrice")}),m.jsx("p",{className:"text-sm text-gray-600 mt-1 mb-4 flex-grow min-h-[40px]",children:c.matchReason||t("outfits.defaultMatchReason")}),m.jsxs(oe,{className:"w-full mt-auto bg-[#1a1a1a] hover:bg-[#333333] active:bg-[#000000] text-white font-semibold py-3 rounded-lg shadow-lg hover:shadow-xl transition-all duration-300 ease-in-out transform hover:-translate-y-0.5",onClick:()=>{c.link&&window.open(c.link,"_blank","noopener,noreferrer")},disabled:!c.link,children:[m.jsx(aR,{className:"w-5 h-5 mr-2.5"}),t("outfits.buyNow")]})]})]},c.id||u)})})]})})},uJ=({likes:t,comments:e,onLike:n,onComment:r,onShare:i,isLiked:s})=>(wt(),m.jsxs("div",{className:"flex items-center space-x-4",children:[m.jsxs(oe,{variant:"ghost",className:`text-gray-600 ${s?"text-red-500":""}`,onClick:n,children:[m.jsx(xe.div,{whileTap:{scale:.9},animate:{scale:s?[1,1.2,1]:1},children:m.jsx(bw,{className:`w-5 h-5 mr-2 ${s?"fill-current":""}`})}),t]}),m.jsxs(oe,{variant:"ghost",className:"text-gray-600",onClick:r,children:[m.jsx(Wu,{className:"w-5 h-5 mr-2"}),e]}),m.jsx(oe,{variant:"ghost",className:"text-gray-600 ml-auto",onClick:i,children:m.jsx(Iw,{className:"w-5 h-5"})})]})),dJ=({comments:t=[],onAddComment:e})=>{const{t:n}=wt(),[r,i]=_.useState(""),s=o=>{o.preventDefault(),r.trim()&&(e(r),i(""))};return m.jsxs("div",{className:"space-y-4",children:[m.jsx(N2,{children:t.map((o,a)=>m.jsxs(xe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"flex items-start space-x-3 p-3 bg-gray-50 rounded-lg",children:[m.jsx("img",{src:o.user.avatar,alt:o.user.name,className:"w-8 h-8 rounded-full object-cover"}),m.jsxs("div",{children:[m.jsx("span",{className:"font-semibold text-sm",children:o.user.name}),m.jsx("p",{className:"text-gray-600 text-sm",children:o.text}),m.jsx("span",{className:"text-xs text-gray-400",children:o.timestamp})]})]},o.id))}),m.jsxs("form",{onSubmit:s,className:"flex space-x-2",children:[m.jsx(en,{value:r,onChange:o=>i(o.target.value),placeholder:n("post.commentPlaceholder"),className:"flex-1"}),m.jsx(oe,{type:"submit",disabled:!r.trim(),children:m.jsx(oR,{className:"w-4 h-4"})})]})]})},hJ=({isOpen:t,onClose:e,post:n})=>{const{toast:r}=Hn(),{t:i}=wt(),s=[{name:"WhatsApp",icon:Wu,action:()=>{window.open(`https://wa.me/?text=${encodeURIComponent(window.location.href)}`,"_blank")}},{name:"Facebook",icon:f$,action:()=>{window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(window.location.href)}`,"_blank")}},{name:"Email",icon:a$,action:()=>{window.location.href=`mailto:?subject=${encodeURIComponent("Check out this outfit!")}&body=${encodeURIComponent(window.location.href)}`}},{name:"Copy Link",icon:Z4,action:()=>{navigator.clipboard.writeText(window.location.href),r({title:i("share.linkCopied"),description:i("share.linkCopiedDesc")})}}];return m.jsx(Al,{open:t,onOpenChange:e,children:m.jsxs(qo,{className:"sm:max-w-[425px]",children:[m.jsx(Ho,{children:m.jsx(Go,{children:i("share.title")})}),m.jsx("div",{className:"grid grid-cols-2 gap-4 p-4",children:s.map((o,a)=>{const l=o.icon;return m.jsx(xe.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:m.jsxs(oe,{variant:"outline",className:"w-full h-20 flex flex-col items-center justify-center gap-2",onClick:()=>{o.action(),e()},children:[m.jsx(l,{className:"h-6 w-6"}),m.jsx("span",{className:"text-sm",children:o.name})]})},o.name)})})]})})},fJ=["top","right","bottom","left"],hs=Math.min,vn=Math.max,ip=Math.round,wh=Math.floor,Rr=t=>({x:t,y:t}),pJ={left:"right",right:"left",bottom:"top",top:"bottom"},mJ={start:"end",end:"start"};function y0(t,e,n){return vn(t,hs(e,n))}function ui(t,e){return typeof t=="function"?t(e):t}function di(t){return t.split("-")[0]}function Rl(t){return t.split("-")[1]}function bx(t){return t==="x"?"y":"x"}function Sx(t){return t==="y"?"height":"width"}function ei(t){return["top","bottom"].includes(di(t))?"y":"x"}function Ix(t){return bx(ei(t))}function gJ(t,e,n){n===void 0&&(n=!1);const r=Rl(t),i=Ix(t),s=Sx(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=sp(o)),[o,sp(o)]}function yJ(t){const e=sp(t);return[v0(t),e,v0(e)]}function v0(t){return t.replace(/start|end/g,e=>mJ[e])}function vJ(t,e,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:r:e?r:i;case"left":case"right":return e?s:o;default:return[]}}function wJ(t,e,n,r){const i=Rl(t);let s=vJ(di(t),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(v0)))),s}function sp(t){return t.replace(/left|right|bottom|top/g,e=>pJ[e])}function _J(t){return{top:0,right:0,bottom:0,left:0,...t}}function qL(t){return typeof t!="number"?_J(t):{top:t,right:t,bottom:t,left:t}}function op(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function CI(t,e,n){let{reference:r,floating:i}=t;const s=ei(e),o=Ix(e),a=Sx(o),l=di(e),c=s==="y",u=r.x+r.width/2-i.width/2,h=r.y+r.height/2-i.height/2,f=r[a]/2-i[a]/2;let p;switch(l){case"top":p={x:u,y:r.y-i.height};break;case"bottom":p={x:u,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:h};break;case"left":p={x:r.x-i.width,y:h};break;default:p={x:r.x,y:r.y}}switch(Rl(e)){case"start":p[o]-=f*(n&&c?-1:1);break;case"end":p[o]+=f*(n&&c?-1:1);break}return p}const xJ=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:u,y:h}=CI(c,r,l),f=r,p={},g=0;for(let v=0;v<a.length;v++){const{name:w,fn:E}=a[v],{x,y:b,data:C,reset:N}=await E({x:u,y:h,initialPlacement:r,placement:f,strategy:i,middlewareData:p,rects:c,platform:o,elements:{reference:t,floating:e}});u=x??u,h=b??h,p={...p,[w]:{...p[w],...C}},N&&g<=50&&(g++,typeof N=="object"&&(N.placement&&(f=N.placement),N.rects&&(c=N.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):N.rects),{x:u,y:h}=CI(c,f,l)),v=-1)}return{x:u,y:h,placement:f,strategy:i,middlewareData:p}};async function Ru(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:h="floating",altBoundary:f=!1,padding:p=0}=ui(e,t),g=qL(p),w=a[f?h==="floating"?"reference":"floating":h],E=op(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(w)))==null||n?w:w.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),x=h==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,b=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),C=await(s.isElement==null?void 0:s.isElement(b))?await(s.getScale==null?void 0:s.getScale(b))||{x:1,y:1}:{x:1,y:1},N=op(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:x,offsetParent:b,strategy:l}):x);return{top:(E.top-N.top+g.top)/C.y,bottom:(N.bottom-E.bottom+g.bottom)/C.y,left:(E.left-N.left+g.left)/C.x,right:(N.right-E.right+g.right)/C.x}}const EJ=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=ui(t,e)||{};if(c==null)return{};const h=qL(u),f={x:n,y:r},p=Ix(i),g=Sx(p),v=await o.getDimensions(c),w=p==="y",E=w?"top":"left",x=w?"bottom":"right",b=w?"clientHeight":"clientWidth",C=s.reference[g]+s.reference[p]-f[p]-s.floating[g],N=f[p]-s.reference[p],D=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let I=D?D[b]:0;(!I||!await(o.isElement==null?void 0:o.isElement(D)))&&(I=a.floating[b]||s.floating[g]);const S=C/2-N/2,A=I/2-v[g]/2-1,R=hs(h[E],A),O=hs(h[x],A),L=R,k=I-v[g]-O,B=I/2-v[g]/2+S,Q=y0(L,B,k),K=!l.arrow&&Rl(i)!=null&&B!==Q&&s.reference[g]/2-(B<L?R:O)-v[g]/2<0,re=K?B<L?B-L:B-k:0;return{[p]:f[p]+re,data:{[p]:Q,centerOffset:B-Q-re,...K&&{alignmentOffset:re}},reset:K}}}),TJ=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:v=!0,...w}=ui(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const E=di(i),x=ei(a),b=di(a)===a,C=await(l.isRTL==null?void 0:l.isRTL(c.floating)),N=f||(b||!v?[sp(a)]:yJ(a)),D=g!=="none";!f&&D&&N.push(...wJ(a,v,g,C));const I=[a,...N],S=await Ru(e,w),A=[];let R=((r=s.flip)==null?void 0:r.overflows)||[];if(u&&A.push(S[E]),h){const Q=gJ(i,o,C);A.push(S[Q[0]],S[Q[1]])}if(R=[...R,{placement:i,overflows:A}],!A.every(Q=>Q<=0)){var O,L;const Q=(((O=s.flip)==null?void 0:O.index)||0)+1,K=I[Q];if(K){var k;const F=h==="alignment"?x!==ei(K):!1,z=((k=R[0])==null?void 0:k.overflows[0])>0;if(!F||z)return{data:{index:Q,overflows:R},reset:{placement:K}}}let re=(L=R.filter(F=>F.overflows[0]<=0).sort((F,z)=>F.overflows[1]-z.overflows[1])[0])==null?void 0:L.placement;if(!re)switch(p){case"bestFit":{var B;const F=(B=R.filter(z=>{if(D){const Y=ei(z.placement);return Y===x||Y==="y"}return!0}).map(z=>[z.placement,z.overflows.filter(Y=>Y>0).reduce((Y,J)=>Y+J,0)]).sort((z,Y)=>z[1]-Y[1])[0])==null?void 0:B[0];F&&(re=F);break}case"initialPlacement":re=a;break}if(i!==re)return{reset:{placement:re}}}return{}}}};function PI(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function AI(t){return fJ.some(e=>t[e]>=0)}const bJ=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=ui(t,e);switch(r){case"referenceHidden":{const s=await Ru(e,{...i,elementContext:"reference"}),o=PI(s,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:AI(o)}}}case"escaped":{const s=await Ru(e,{...i,altBoundary:!0}),o=PI(s,n.floating);return{data:{escapedOffsets:o,escaped:AI(o)}}}default:return{}}}}};async function SJ(t,e){const{placement:n,platform:r,elements:i}=t,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=di(n),a=Rl(n),l=ei(n)==="y",c=["left","top"].includes(o)?-1:1,u=s&&l?-1:1,h=ui(e,t);let{mainAxis:f,crossAxis:p,alignmentAxis:g}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof g=="number"&&(p=a==="end"?g*-1:g),l?{x:p*u,y:f*c}:{x:f*c,y:p*u}}const IJ=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=e,l=await SJ(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},CJ=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:w=>{let{x:E,y:x}=w;return{x:E,y:x}}},...l}=ui(t,e),c={x:n,y:r},u=await Ru(e,l),h=ei(di(i)),f=bx(h);let p=c[f],g=c[h];if(s){const w=f==="y"?"top":"left",E=f==="y"?"bottom":"right",x=p+u[w],b=p-u[E];p=y0(x,p,b)}if(o){const w=h==="y"?"top":"left",E=h==="y"?"bottom":"right",x=g+u[w],b=g-u[E];g=y0(x,g,b)}const v=a.fn({...e,[f]:p,[h]:g});return{...v,data:{x:v.x-n,y:v.y-r,enabled:{[f]:s,[h]:o}}}}}},PJ=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=ui(t,e),u={x:n,y:r},h=ei(i),f=bx(h);let p=u[f],g=u[h];const v=ui(a,e),w=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(l){const b=f==="y"?"height":"width",C=s.reference[f]-s.floating[b]+w.mainAxis,N=s.reference[f]+s.reference[b]-w.mainAxis;p<C?p=C:p>N&&(p=N)}if(c){var E,x;const b=f==="y"?"width":"height",C=["top","left"].includes(di(i)),N=s.reference[h]-s.floating[b]+(C&&((E=o.offset)==null?void 0:E[h])||0)+(C?0:w.crossAxis),D=s.reference[h]+s.reference[b]+(C?0:((x=o.offset)==null?void 0:x[h])||0)-(C?w.crossAxis:0);g<N?g=N:g>D&&(g=D)}return{[f]:p,[h]:g}}}},AJ=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:s,platform:o,elements:a}=e,{apply:l=()=>{},...c}=ui(t,e),u=await Ru(e,c),h=di(i),f=Rl(i),p=ei(i)==="y",{width:g,height:v}=s.floating;let w,E;h==="top"||h==="bottom"?(w=h,E=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(E=h,w=f==="end"?"top":"bottom");const x=v-u.top-u.bottom,b=g-u.left-u.right,C=hs(v-u[w],x),N=hs(g-u[E],b),D=!e.middlewareData.shift;let I=C,S=N;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(S=b),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(I=x),D&&!f){const R=vn(u.left,0),O=vn(u.right,0),L=vn(u.top,0),k=vn(u.bottom,0);p?S=g-2*(R!==0||O!==0?R+O:vn(u.left,u.right)):I=v-2*(L!==0||k!==0?L+k:vn(u.top,u.bottom))}await l({...e,availableWidth:S,availableHeight:I});const A=await o.getDimensions(a.floating);return g!==A.width||v!==A.height?{reset:{rects:!0}}:{}}}};function bm(){return typeof window<"u"}function kl(t){return HL(t)?(t.nodeName||"").toLowerCase():"#document"}function In(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Or(t){var e;return(e=(HL(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function HL(t){return bm()?t instanceof Node||t instanceof In(t).Node:!1}function cr(t){return bm()?t instanceof Element||t instanceof In(t).Element:!1}function Dr(t){return bm()?t instanceof HTMLElement||t instanceof In(t).HTMLElement:!1}function RI(t){return!bm()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof In(t).ShadowRoot}function yd(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=ur(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function RJ(t){return["table","td","th"].includes(kl(t))}function Sm(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function Cx(t){const e=Px(),n=cr(t)?ur(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function kJ(t){let e=fs(t);for(;Dr(e)&&!yl(e);){if(Cx(e))return e;if(Sm(e))return null;e=fs(e)}return null}function Px(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function yl(t){return["html","body","#document"].includes(kl(t))}function ur(t){return In(t).getComputedStyle(t)}function Im(t){return cr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function fs(t){if(kl(t)==="html")return t;const e=t.assignedSlot||t.parentNode||RI(t)&&t.host||Or(t);return RI(e)?e.host:e}function GL(t){const e=fs(t);return yl(e)?t.ownerDocument?t.ownerDocument.body:t.body:Dr(e)&&yd(e)?e:GL(e)}function ku(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=GL(t),s=i===((r=t.ownerDocument)==null?void 0:r.body),o=In(i);if(s){const a=w0(o);return e.concat(o,o.visualViewport||[],yd(i)?i:[],a&&n?ku(a):[])}return e.concat(i,ku(i,[],n))}function w0(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function KL(t){const e=ur(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Dr(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:r,a=ip(n)!==s||ip(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function Ax(t){return cr(t)?t:t.contextElement}function Ha(t){const e=Ax(t);if(!Dr(e))return Rr(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=KL(e);let o=(s?ip(n.width):n.width)/r,a=(s?ip(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const NJ=Rr(0);function QL(t){const e=In(t);return!Px()||!e.visualViewport?NJ:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function DJ(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==In(t)?!1:e}function Ao(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=Ax(t);let o=Rr(1);e&&(r?cr(r)&&(o=Ha(r)):o=Ha(t));const a=DJ(s,n,r)?QL(s):Rr(0);let l=(i.left+a.x)/o.x,c=(i.top+a.y)/o.y,u=i.width/o.x,h=i.height/o.y;if(s){const f=In(s),p=r&&cr(r)?In(r):r;let g=f,v=w0(g);for(;v&&r&&p!==g;){const w=Ha(v),E=v.getBoundingClientRect(),x=ur(v),b=E.left+(v.clientLeft+parseFloat(x.paddingLeft))*w.x,C=E.top+(v.clientTop+parseFloat(x.paddingTop))*w.y;l*=w.x,c*=w.y,u*=w.x,h*=w.y,l+=b,c+=C,g=In(v),v=w0(g)}}return op({width:u,height:h,x:l,y:c})}function Rx(t,e){const n=Im(t).scrollLeft;return e?e.left+n:Ao(Or(t)).left+n}function YL(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),i=r.left+e.scrollLeft-(n?0:Rx(t,r)),s=r.top+e.scrollTop;return{x:i,y:s}}function OJ(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const s=i==="fixed",o=Or(r),a=e?Sm(e.floating):!1;if(r===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},c=Rr(1);const u=Rr(0),h=Dr(r);if((h||!h&&!s)&&((kl(r)!=="body"||yd(o))&&(l=Im(r)),Dr(r))){const p=Ao(r);c=Ha(r),u.x=p.x+r.clientLeft,u.y=p.y+r.clientTop}const f=o&&!h&&!s?YL(o,l,!0):Rr(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+f.x,y:n.y*c.y-l.scrollTop*c.y+u.y+f.y}}function LJ(t){return Array.from(t.getClientRects())}function VJ(t){const e=Or(t),n=Im(t),r=t.ownerDocument.body,i=vn(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=vn(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Rx(t);const a=-n.scrollTop;return ur(r).direction==="rtl"&&(o+=vn(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function MJ(t,e){const n=In(t),r=Or(t),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const c=Px();(!c||c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a,y:l}}function jJ(t,e){const n=Ao(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=Dr(t)?Ha(t):Rr(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,l=i*s.x,c=r*s.y;return{width:o,height:a,x:l,y:c}}function kI(t,e,n){let r;if(e==="viewport")r=MJ(t,n);else if(e==="document")r=VJ(Or(t));else if(cr(e))r=jJ(e,n);else{const i=QL(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return op(r)}function XL(t,e){const n=fs(t);return n===e||!cr(n)||yl(n)?!1:ur(n).position==="fixed"||XL(n,e)}function FJ(t,e){const n=e.get(t);if(n)return n;let r=ku(t,[],!1).filter(a=>cr(a)&&kl(a)!=="body"),i=null;const s=ur(t).position==="fixed";let o=s?fs(t):t;for(;cr(o)&&!yl(o);){const a=ur(o),l=Cx(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||yd(o)&&!l&&XL(t,o))?r=r.filter(u=>u!==o):i=a,o=fs(o)}return e.set(t,r),r}function UJ(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?Sm(e)?[]:FJ(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,u)=>{const h=kI(e,u,i);return c.top=vn(h.top,c.top),c.right=hs(h.right,c.right),c.bottom=hs(h.bottom,c.bottom),c.left=vn(h.left,c.left),c},kI(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function $J(t){const{width:e,height:n}=KL(t);return{width:e,height:n}}function BJ(t,e,n){const r=Dr(e),i=Or(e),s=n==="fixed",o=Ao(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=Rr(0);function c(){l.x=Rx(i)}if(r||!r&&!s)if((kl(e)!=="body"||yd(i))&&(a=Im(e)),r){const p=Ao(e,!0,s,e);l.x=p.x+e.clientLeft,l.y=p.y+e.clientTop}else i&&c();s&&!r&&i&&c();const u=i&&!r&&!s?YL(i,a):Rr(0),h=o.left+a.scrollLeft-l.x-u.x,f=o.top+a.scrollTop-l.y-u.y;return{x:h,y:f,width:o.width,height:o.height}}function py(t){return ur(t).position==="static"}function NI(t,e){if(!Dr(t)||ur(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Or(t)===n&&(n=n.ownerDocument.body),n}function JL(t,e){const n=In(t);if(Sm(t))return n;if(!Dr(t)){let i=fs(t);for(;i&&!yl(i);){if(cr(i)&&!py(i))return i;i=fs(i)}return n}let r=NI(t,e);for(;r&&RJ(r)&&py(r);)r=NI(r,e);return r&&yl(r)&&py(r)&&!Cx(r)?n:r||kJ(t)||n}const zJ=async function(t){const e=this.getOffsetParent||JL,n=this.getDimensions,r=await n(t.floating);return{reference:BJ(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function WJ(t){return ur(t).direction==="rtl"}const qJ={convertOffsetParentRelativeRectToViewportRelativeRect:OJ,getDocumentElement:Or,getClippingRect:UJ,getOffsetParent:JL,getElementRects:zJ,getClientRects:LJ,getDimensions:$J,getScale:Ha,isElement:cr,isRTL:WJ};function ZL(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function HJ(t,e){let n=null,r;const i=Or(t);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const c=t.getBoundingClientRect(),{left:u,top:h,width:f,height:p}=c;if(a||e(),!f||!p)return;const g=wh(h),v=wh(i.clientWidth-(u+f)),w=wh(i.clientHeight-(h+p)),E=wh(u),b={rootMargin:-g+"px "+-v+"px "+-w+"px "+-E+"px",threshold:vn(0,hs(1,l))||1};let C=!0;function N(D){const I=D[0].intersectionRatio;if(I!==l){if(!C)return o();I?o(!1,I):r=setTimeout(()=>{o(!1,1e-7)},1e3)}I===1&&!ZL(c,t.getBoundingClientRect())&&o(),C=!1}try{n=new IntersectionObserver(N,{...b,root:i.ownerDocument})}catch{n=new IntersectionObserver(N,b)}n.observe(t)}return o(!0),s}function GJ(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=Ax(t),u=i||s?[...c?ku(c):[],...ku(e)]:[];u.forEach(E=>{i&&E.addEventListener("scroll",n,{passive:!0}),s&&E.addEventListener("resize",n)});const h=c&&a?HJ(c,n):null;let f=-1,p=null;o&&(p=new ResizeObserver(E=>{let[x]=E;x&&x.target===c&&p&&(p.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var b;(b=p)==null||b.observe(e)})),n()}),c&&!l&&p.observe(c),p.observe(e));let g,v=l?Ao(t):null;l&&w();function w(){const E=Ao(t);v&&!ZL(v,E)&&n(),v=E,g=requestAnimationFrame(w)}return n(),()=>{var E;u.forEach(x=>{i&&x.removeEventListener("scroll",n),s&&x.removeEventListener("resize",n)}),h==null||h(),(E=p)==null||E.disconnect(),p=null,l&&cancelAnimationFrame(g)}}const KJ=IJ,QJ=CJ,YJ=TJ,XJ=AJ,JJ=bJ,DI=EJ,ZJ=PJ,eZ=(t,e,n)=>{const r=new Map,i={platform:qJ,...n},s={...i.platform,_c:r};return xJ(t,e,{...i,platform:s})};var Jh=typeof document<"u"?_.useLayoutEffect:_.useEffect;function ap(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!ap(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&t.$$typeof)&&!ap(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function eV(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function OI(t,e){const n=eV(t);return Math.round(e*n)/n}function my(t){const e=_.useRef(t);return Jh(()=>{e.current=t}),e}function tZ(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[u,h]=_.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,p]=_.useState(r);ap(f,r)||p(r);const[g,v]=_.useState(null),[w,E]=_.useState(null),x=_.useCallback(F=>{F!==D.current&&(D.current=F,v(F))},[]),b=_.useCallback(F=>{F!==I.current&&(I.current=F,E(F))},[]),C=s||g,N=o||w,D=_.useRef(null),I=_.useRef(null),S=_.useRef(u),A=l!=null,R=my(l),O=my(i),L=my(c),k=_.useCallback(()=>{if(!D.current||!I.current)return;const F={placement:e,strategy:n,middleware:f};O.current&&(F.platform=O.current),eZ(D.current,I.current,F).then(z=>{const Y={...z,isPositioned:L.current!==!1};B.current&&!ap(S.current,Y)&&(S.current=Y,ju.flushSync(()=>{h(Y)}))})},[f,e,n,O,L]);Jh(()=>{c===!1&&S.current.isPositioned&&(S.current.isPositioned=!1,h(F=>({...F,isPositioned:!1})))},[c]);const B=_.useRef(!1);Jh(()=>(B.current=!0,()=>{B.current=!1}),[]),Jh(()=>{if(C&&(D.current=C),N&&(I.current=N),C&&N){if(R.current)return R.current(C,N,k);k()}},[C,N,k,R,A]);const Q=_.useMemo(()=>({reference:D,floating:I,setReference:x,setFloating:b}),[x,b]),K=_.useMemo(()=>({reference:C,floating:N}),[C,N]),re=_.useMemo(()=>{const F={position:n,left:0,top:0};if(!K.floating)return F;const z=OI(K.floating,u.x),Y=OI(K.floating,u.y);return a?{...F,transform:"translate("+z+"px, "+Y+"px)",...eV(K.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:z,top:Y}},[n,a,K.floating,u.x,u.y]);return _.useMemo(()=>({...u,update:k,refs:Q,elements:K,floatingStyles:re}),[u,k,Q,K,re])}const nZ=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?DI({element:r.current,padding:i}).fn(n):{}:r?DI({element:r,padding:i}).fn(n):{}}}},rZ=(t,e)=>({...KJ(t),options:[t,e]}),iZ=(t,e)=>({...QJ(t),options:[t,e]}),sZ=(t,e)=>({...ZJ(t),options:[t,e]}),oZ=(t,e)=>({...YJ(t),options:[t,e]}),aZ=(t,e)=>({...XJ(t),options:[t,e]}),lZ=(t,e)=>({...JJ(t),options:[t,e]}),cZ=(t,e)=>({...nZ(t),options:[t,e]});var uZ="Arrow",tV=_.forwardRef((t,e)=>{const{children:n,width:r=10,height:i=5,...s}=t;return m.jsx(Ce.svg,{...s,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:m.jsx("polygon",{points:"0,0 30,0 15,10"})})});tV.displayName=uZ;var dZ=tV,kx="Popper",[nV,rV]=fi(kx),[hZ,iV]=nV(kx),sV=t=>{const{__scopePopper:e,children:n}=t,[r,i]=_.useState(null);return m.jsx(hZ,{scope:e,anchor:r,onAnchorChange:i,children:n})};sV.displayName=kx;var oV="PopperAnchor",aV=_.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,s=iV(oV,n),o=_.useRef(null),a=lt(e,o);return _.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:m.jsx(Ce.div,{...i,ref:a})});aV.displayName=oV;var Nx="PopperContent",[fZ,pZ]=nV(Nx),lV=_.forwardRef((t,e)=>{var st,Dn,hr,On,zt,Is;const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:h="partial",hideWhenDetached:f=!1,updatePositionStrategy:p="optimized",onPlaced:g,...v}=t,w=iV(Nx,n),[E,x]=_.useState(null),b=lt(e,Vr=>x(Vr)),[C,N]=_.useState(null),D=gx(C),I=(D==null?void 0:D.width)??0,S=(D==null?void 0:D.height)??0,A=r+(s!=="center"?"-"+s:""),R=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},O=Array.isArray(c)?c:[c],L=O.length>0,k={padding:R,boundary:O.filter(gZ),altBoundary:L},{refs:B,floatingStyles:Q,placement:K,isPositioned:re,middlewareData:F}=tZ({strategy:"fixed",placement:A,whileElementsMounted:(...Vr)=>GJ(...Vr,{animationFrame:p==="always"}),elements:{reference:w.anchor},middleware:[rZ({mainAxis:i+S,alignmentAxis:o}),l&&iZ({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?sZ():void 0,...k}),l&&oZ({...k}),aZ({...k,apply:({elements:Vr,rects:Ko,availableWidth:Nl,availableHeight:vd})=>{const{width:wd,height:km}=Ko.reference,Cs=Vr.floating.style;Cs.setProperty("--radix-popper-available-width",`${Nl}px`),Cs.setProperty("--radix-popper-available-height",`${vd}px`),Cs.setProperty("--radix-popper-anchor-width",`${wd}px`),Cs.setProperty("--radix-popper-anchor-height",`${km}px`)}}),C&&cZ({element:C,padding:a}),yZ({arrowWidth:I,arrowHeight:S}),f&&lZ({strategy:"referenceHidden",...k})]}),[z,Y]=dV(K),J=or(g);si(()=>{re&&(J==null||J())},[re,J]);const ue=(st=F.arrow)==null?void 0:st.x,ce=(Dn=F.arrow)==null?void 0:Dn.y,q=((hr=F.arrow)==null?void 0:hr.centerOffset)!==0,[ie,Te]=_.useState();return si(()=>{E&&Te(window.getComputedStyle(E).zIndex)},[E]),m.jsx("div",{ref:B.setFloating,"data-radix-popper-content-wrapper":"",style:{...Q,transform:re?Q.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ie,"--radix-popper-transform-origin":[(On=F.transformOrigin)==null?void 0:On.x,(zt=F.transformOrigin)==null?void 0:zt.y].join(" "),...((Is=F.hide)==null?void 0:Is.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:m.jsx(fZ,{scope:n,placedSide:z,onArrowChange:N,arrowX:ue,arrowY:ce,shouldHideArrow:q,children:m.jsx(Ce.div,{"data-side":z,"data-align":Y,...v,ref:b,style:{...v.style,animation:re?void 0:"none"}})})})});lV.displayName=Nx;var cV="PopperArrow",mZ={top:"bottom",right:"left",bottom:"top",left:"right"},uV=_.forwardRef(function(e,n){const{__scopePopper:r,...i}=e,s=pZ(cV,r),o=mZ[s.placedSide];return m.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:m.jsx(dZ,{...i,ref:n,style:{...i.style,display:"block"}})})});uV.displayName=cV;function gZ(t){return t!==null}var yZ=t=>({name:"transformOrigin",options:t,fn(e){var w,E,x;const{placement:n,rects:r,middlewareData:i}=e,o=((w=i.arrow)==null?void 0:w.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[c,u]=dV(n),h={start:"0%",center:"50%",end:"100%"}[u],f=(((E=i.arrow)==null?void 0:E.x)??0)+a/2,p=(((x=i.arrow)==null?void 0:x.y)??0)+l/2;let g="",v="";return c==="bottom"?(g=o?h:`${f}px`,v=`${-l}px`):c==="top"?(g=o?h:`${f}px`,v=`${r.floating.height+l}px`):c==="right"?(g=`${-l}px`,v=o?h:`${p}px`):c==="left"&&(g=`${r.floating.width+l}px`,v=o?h:`${p}px`),{data:{x:g,y:v}}}});function dV(t){const[e,n="center"]=t.split("-");return[e,n]}var vZ=sV,wZ=aV,_Z=lV,xZ=uV,gy,Cm="HoverCard",[hV,ure]=fi(Cm,[rV]),Pm=rV(),[EZ,Dx]=hV(Cm),fV=t=>{const{__scopeHoverCard:e,children:n,open:r,defaultOpen:i,onOpenChange:s,openDelay:o=700,closeDelay:a=300}=t,l=Pm(e),c=_.useRef(0),u=_.useRef(0),h=_.useRef(!1),f=_.useRef(!1),[p,g]=El({prop:r,defaultProp:i??!1,onChange:s,caller:Cm}),v=_.useCallback(()=>{clearTimeout(u.current),c.current=window.setTimeout(()=>g(!0),o)},[o,g]),w=_.useCallback(()=>{clearTimeout(c.current),!h.current&&!f.current&&(u.current=window.setTimeout(()=>g(!1),a))},[a,g]),E=_.useCallback(()=>g(!1),[g]);return _.useEffect(()=>()=>{clearTimeout(c.current),clearTimeout(u.current)},[]),m.jsx(EZ,{scope:e,open:p,onOpenChange:g,onOpen:v,onClose:w,onDismiss:E,hasSelectionRef:h,isPointerDownOnContentRef:f,children:m.jsx(vZ,{...l,children:n})})};fV.displayName=Cm;var pV="HoverCardTrigger",mV=_.forwardRef((t,e)=>{const{__scopeHoverCard:n,...r}=t,i=Dx(pV,n),s=Pm(n);return m.jsx(wZ,{asChild:!0,...s,children:m.jsx(Ce.a,{"data-state":i.open?"open":"closed",...r,ref:e,onPointerEnter:me(t.onPointerEnter,cp(i.onOpen)),onPointerLeave:me(t.onPointerLeave,cp(i.onClose)),onFocus:me(t.onFocus,i.onOpen),onBlur:me(t.onBlur,i.onClose),onTouchStart:me(t.onTouchStart,o=>o.preventDefault())})})});mV.displayName=pV;var TZ="HoverCardPortal",[dre,bZ]=hV(TZ,{forceMount:void 0}),lp="HoverCardContent",gV=_.forwardRef((t,e)=>{const n=bZ(lp,t.__scopeHoverCard),{forceMount:r=n.forceMount,...i}=t,s=Dx(lp,t.__scopeHoverCard);return m.jsx(ys,{present:r||s.open,children:m.jsx(SZ,{"data-state":s.open?"open":"closed",...i,onPointerEnter:me(t.onPointerEnter,cp(s.onOpen)),onPointerLeave:me(t.onPointerLeave,cp(s.onClose)),ref:e})})});gV.displayName=lp;var SZ=_.forwardRef((t,e)=>{const{__scopeHoverCard:n,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,...a}=t,l=Dx(lp,n),c=Pm(n),u=_.useRef(null),h=lt(e,u),[f,p]=_.useState(!1);return _.useEffect(()=>{if(f){const g=document.body;return gy=g.style.userSelect||g.style.webkitUserSelect,g.style.userSelect="none",g.style.webkitUserSelect="none",()=>{g.style.userSelect=gy,g.style.webkitUserSelect=gy}}},[f]),_.useEffect(()=>{if(u.current){const g=()=>{p(!1),l.isPointerDownOnContentRef.current=!1,setTimeout(()=>{var w;((w=document.getSelection())==null?void 0:w.toString())!==""&&(l.hasSelectionRef.current=!0)})};return document.addEventListener("pointerup",g),()=>{document.removeEventListener("pointerup",g),l.hasSelectionRef.current=!1,l.isPointerDownOnContentRef.current=!1}}},[l.isPointerDownOnContentRef,l.hasSelectionRef]),_.useEffect(()=>{u.current&&PZ(u.current).forEach(v=>v.setAttribute("tabindex","-1"))}),m.jsx(Op,{asChild:!0,disableOutsidePointerEvents:!1,onInteractOutside:o,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:me(s,g=>{g.preventDefault()}),onDismiss:l.onDismiss,children:m.jsx(_Z,{...c,...a,onPointerDown:me(a.onPointerDown,g=>{g.currentTarget.contains(g.target)&&p(!0),l.hasSelectionRef.current=!1,l.isPointerDownOnContentRef.current=!0}),ref:h,style:{...a.style,userSelect:f?"text":void 0,WebkitUserSelect:f?"text":void 0,"--radix-hover-card-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-hover-card-content-available-width":"var(--radix-popper-available-width)","--radix-hover-card-content-available-height":"var(--radix-popper-available-height)","--radix-hover-card-trigger-width":"var(--radix-popper-anchor-width)","--radix-hover-card-trigger-height":"var(--radix-popper-anchor-height)"}})})}),IZ="HoverCardArrow",CZ=_.forwardRef((t,e)=>{const{__scopeHoverCard:n,...r}=t,i=Pm(n);return m.jsx(xZ,{...i,...r,ref:e})});CZ.displayName=IZ;function cp(t){return e=>e.pointerType==="touch"?void 0:t()}function PZ(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP});for(;n.nextNode();)e.push(n.currentNode);return e}var AZ=fV,RZ=mV,yV=gV;const vV=AZ,wV=RZ,Ox=_.forwardRef(({className:t,align:e="center",sideOffset:n=4,...r},i)=>m.jsx(yV,{ref:i,align:e,sideOffset:n,className:yt("z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r}));Ox.displayName=yV.displayName;const kZ=({src:t,hotspots:e=[],onHotspotsChange:n,isEditing:r=!1})=>{const[i,s]=_.useState(!1),[o,a]=_.useState({x:0,y:0,name:"",url:""});_.useState({});const l=_.useRef(null),[c,u]=_.useState({width:0,height:0});_.useEffect(()=>{l.current&&u({width:l.current.offsetWidth,height:l.current.offsetHeight})},[t]);const h=g=>{if(!r)return;const v=g.currentTarget.getBoundingClientRect(),w=(g.clientX-v.left)/v.width*100,E=(g.clientY-v.top)/v.height*100;a({x:w,y:E,name:"",url:""}),s(!0)},f=async()=>{var g;if(!(!o.name||!o.url))try{const w=await(await fetch(`https://api.microlink.io/?url=${encodeURIComponent(o.url)}`,{headers:{"x-api-key":"UVxepPIMvtaiES8LvlNhGWznmbX3GRp6gUVH6b73"}})).json(),E=[...e,{...o,preview:{title:w.data.title,description:w.data.description,image:(g=w.data.image)==null?void 0:g.url,domain:new URL(o.url).hostname}}];n(E),s(!1)}catch(v){console.error("Error fetching link preview:",v);const w=[...e,o];n(w),s(!1)}},p=g=>{const v=e.filter((w,E)=>E!==g);n(v)};return m.jsxs("div",{className:"relative",children:[m.jsx("img",{ref:l,src:t,alt:"Imagen del outfit",className:"w-full rounded-lg",onClick:h}),e.map((g,v)=>{var w,E;return m.jsxs(vV,{children:[m.jsx(wV,{asChild:!0,children:m.jsx(xe.div,{initial:{scale:0},animate:{scale:1},className:"absolute",style:{left:`${g.x}%`,top:`${g.y}%`,transform:"translate(-50%, -50%)"},children:m.jsx("div",{className:"w-6 h-6 bg-purple-500 rounded-full flex items-center justify-center cursor-pointer shadow-lg",children:r?m.jsx(oe,{variant:"ghost",size:"icon",className:"h-4 w-4 absolute -top-2 -right-2",onClick:x=>{x.stopPropagation(),p(v)},children:m.jsx(qu,{className:"h-3 w-3"})}):m.jsx(u$,{className:"w-4 h-4 text-white"})})})}),m.jsx(Ox,{className:"w-80",children:m.jsxs("div",{className:"space-y-2",children:[m.jsx("h4",{className:"font-semibold",children:g.name}),((w=g.preview)==null?void 0:w.image)&&m.jsx("img",{src:g.preview.image,alt:g.name,className:"w-full h-32 object-cover rounded-md"}),((E=g.preview)==null?void 0:E.title)&&m.jsx("p",{className:"text-sm text-gray-600",children:g.preview.title}),m.jsx(oe,{variant:"outline",className:"w-full",onClick:()=>window.open(g.url,"_blank"),children:"Ver producto"})]})})]},v)}),m.jsx(Al,{open:i,onOpenChange:s,children:m.jsxs(qo,{children:[m.jsx(Ho,{children:m.jsx(Go,{children:"Añadir enlace a prenda"})}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx(Ze,{children:"Nombre de la prenda"}),m.jsx(en,{value:o.name,onChange:g=>a({...o,name:g.target.value}),placeholder:"Ej: Camisa de rayas"})]}),m.jsxs("div",{children:[m.jsx(Ze,{children:"URL del producto"}),m.jsx(en,{value:o.url,onChange:g=>a({...o,url:g.target.value}),placeholder:"https://"})]}),m.jsx(oe,{onClick:f,className:"w-full",children:"Añadir enlace"})]})]})})]})},_V=({post:t,onLike:e,onComment:n,onShare:r,onDelete:i,onHotspotsChange:s})=>{var w,E,x,b,C,N;const[o,a]=_.useState(!1),[l,c]=_.useState(!1),[u,h]=_.useState(t.image||t.imageUrl);_.useEffect(()=>{(async()=>{try{if(t.imageUrl){h(t.imageUrl);return}if(t.storagePath){const I=cm(dd,t.storagePath),S=await B_(I);h(S)}}catch(I){console.error("Error loading image:",I)}})()},[t.imageUrl,t.storagePath]);const f=((w=t.user)==null?void 0:w.photoURL)||((E=t.user)==null?void 0:E.avatar)||"/default-avatar.png",p=()=>{c(!0)},g=t.comments||[],v=t.commentsCount||g.length||0;return m.jsxs(xe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl overflow-hidden shadow-[0_2px_10px_rgba(0,0,0,0.08)] border border-gray-100",children:[m.jsxs("div",{className:"p-4 flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center space-x-3",children:[m.jsx("img",{src:f,alt:((x=t.user)==null?void 0:x.name)||((b=t.user)==null?void 0:b.username)||"Usuario",className:"w-10 h-10 rounded-full object-cover border border-gray-200"}),m.jsx("span",{className:"font-semibold text-gray-900",children:((C=t.user)==null?void 0:C.name)||((N=t.user)==null?void 0:N.username)||"Usuario"})]}),t.canDelete&&m.jsx("button",{onClick:()=>i(t.id),className:"text-gray-500 hover:text-red-500 transition-colors",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})})]}),m.jsx("div",{className:"relative",children:u&&m.jsx(kZ,{src:u,hotspots:t.hotspots||[],onHotspotsChange:D=>s(t.id,D),isEditing:t.canDelete})}),m.jsxs("div",{className:"p-4",children:[m.jsx(uJ,{likes:t.likes||0,comments:v,isLiked:t.isLiked||!1,onLike:()=>e(t.id),onComment:()=>a(!o),onShare:p}),m.jsx("p",{className:"text-gray-800 mt-4",children:t.description}),o&&m.jsx("div",{className:"mt-4",children:m.jsx(dJ,{comments:g,onAddComment:D=>n(t.id,D)})})]}),m.jsx(hJ,{isOpen:l,onClose:()=>c(!1),post:t})]})},Ro=async(t,e)=>{try{const n=Oe(fe,"userStats",t);(await ir(n)).exists()?await Nr(n,e):await cd(Nn(fe,"userStats"),{userId:t,totalPosts:0,totalLikes:0,totalComments:0,totalShares:0,...e})}catch(n){throw console.error("Error updating user stats:",n),n}},NZ=(t,e)=>{const n=Oe(fe,"userStats",t);return am(n,r=>{r.exists()?e(r.data()):e({totalPosts:0,totalLikes:0,totalComments:0,totalShares:0})})},xV=async t=>{var n;const e=t.data();return{id:t.id,...e,image:e.imageUrl,createdAt:(n=e.createdAt)==null?void 0:n.toDate()}},DZ=async(t,e)=>{try{console.log("Starting community post upload...",{file:t,postData:e});const n=cm(dd,`community/${Date.now()}_${t.name}`);console.log("Uploading image to storage...");const r=await UD(n,t);console.log("Image uploaded, getting download URL...");const i=await B_(r.ref);console.log("Download URL obtained:",i);const s=Nn(fe,"posts"),o=await cd(s,{imageUrl:i,storagePath:r.ref.fullPath,userId:e.user.id,user:e.user,description:e.description||"",hotspots:e.hotspots||[],likes:0,comments:[],shares:0,createdAt:Kr()});return console.log("Post data saved to Firestore"),await Ro(e.user.id,{totalPosts:xn(1)}),{id:o.id,image:i,...e}}catch(n){throw console.error("Error uploading community post:",n),n}},EV=async(t,e)=>{var n;try{const r=Oe(fe,"posts",t),s=(await ir(r)).data();if(await xD(r),s.storagePath){const o=cm(dd,s.storagePath);await aH(o)}await Ro(e,{totalPosts:xn(-1),totalLikes:xn(-(s.likes||0)),totalComments:xn(-(((n=s.comments)==null?void 0:n.length)||0)),totalShares:xn(-(s.shares||0))})}catch(r){throw console.error("Error deleting community post:",r),r}},OZ=async(t,e,n)=>{try{const r=Oe(fe,"posts",t),i=Nn(fe,"likes"),s=$n(i,Yt("postId","==",t),Yt("userId","==",e)),o=await bo(s);return o.empty?(await cd(i,{postId:t,userId:e,authorId:n,createdAt:Kr()}),await Nr(r,{likes:xn(1)}),await Ro(n,{totalLikes:xn(1)}),!0):(await xD(o.docs[0].ref),await Nr(r,{likes:xn(-1)}),await Ro(n,{totalLikes:xn(-1)}),!1)}catch(r){throw console.error("Error updating like:",r),r}},LZ=async(t,e,n)=>{try{const r=Oe(fe,"posts",t),i=Nn(fe,"comments"),s=await cd(i,{postId:t,userId:e.user.id,authorId:n,text:e.text,createdAt:Kr()});return await Nr(r,{commentsCount:xn(1)}),await Ro(n,{totalComments:xn(1)}),{id:s.id,...e}}catch(r){throw console.error("Error adding comment:",r),r}},VZ=async(t,e)=>{try{const n=Oe(fe,"posts",t);await Nr(n,{shares:xn(1)}),await Ro(e,{totalShares:xn(1)})}catch(n){throw console.error("Error updating shares:",n),n}},MZ=async t=>{try{const e=Nn(fe,"posts"),n=$n(e,Yt("userId","==",t),Wa(50)),r=await bo(n);return(await Promise.all(r.docs.map(xV))).sort((s,o)=>o.createdAt-s.createdAt)}catch(e){throw console.error("Error fetching user posts:",e),e}},jZ=(t,e)=>{const n=Nn(fe,"posts"),r=$n(n,Wa(50));return am(r,async i=>{try{const s=await Promise.all(i.docs.map(async o=>{const a=await xV(o);return{...a,canDelete:a.userId===t}}));e(s.sort((o,a)=>a.createdAt-o.createdAt))}catch(s){console.error("Error processing posts:",s)}})},uc=async t=>{try{const e=Nn(fe,"posts"),n=$n(e,Yt("userId","==",t)),r=await bo(n);let i=0,s=0,o=0;r.docs.forEach(l=>{const c=l.data();i+=c.likes||0,s+=c.commentsCount||0,o+=c.shares||0});const a={totalPosts:r.size,totalLikes:i,totalComments:s,totalShares:o};return await Ro(t,a),a}catch(e){throw console.error("Error calculating user stats:",e),e}},FZ=()=>{const{t}=wt(),{toast:e}=Hn(),{user:n}=yi(),[r,i]=_.useState(!1),[s,o]=_.useState([]),[a,l]=_.useState(!1);_.useEffect(()=>{const g=jZ(n.uid,v=>{o(v)});return()=>g()},[n.uid]);const c=async(g,v)=>{l(!0);try{const w={user:{id:n.uid,name:n.displayName||"Usuario",avatar:n.photoURL},description:"",hotspots:[]};await DZ(g,w),await uc(n.uid),e({title:t("community.postAdded"),description:t("community.postVisible")})}catch(w){console.error("Error uploading post:",w),e({title:"Error",description:"No se pudo subir la publicación",variant:"destructive"})}finally{l(!1),i(!1)}},u=async g=>{try{const v=s.find(w=>w.id===g);if(!v)return;await OZ(g,n.uid,v.userId),await uc(v.userId)}catch(v){console.error("Error liking post:",v),e({title:"Error",description:"No se pudo actualizar el me gusta",variant:"destructive"})}},h=async(g,v)=>{try{const w=s.find(x=>x.id===g);if(!w)return;const E={user:{id:n.uid,name:n.displayName||"Usuario",avatar:n.photoURL},text:v};await LZ(g,E,w.userId),await uc(w.userId)}catch(w){console.error("Error adding comment:",w),e({title:"Error",description:"No se pudo añadir el comentario",variant:"destructive"})}},f=async g=>{try{const v=s.find(w=>w.id===g);if(!v)return;await VZ(g,v.userId),await uc(v.userId)}catch(v){console.error("Error sharing post:",v),e({title:"Error",description:"No se pudo compartir la publicación",variant:"destructive"})}},p=async g=>{try{await EV(g,n.uid),await uc(n.uid),e({title:t("community.postDeleted"),description:t("community.postDeletedDesc")})}catch(v){console.error("Error deleting post:",v),e({title:"Error",description:"No se pudo eliminar la publicación",variant:"destructive"})}};return m.jsxs("div",{className:"min-h-screen bg-[#E8EBEF] p-6",children:[m.jsxs(xe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-2xl mx-auto",children:[m.jsxs("div",{className:"flex flex-col items-center mb-8",children:[m.jsx("h1",{className:"text-4xl font-playfair font-bold text-[#1a1a1a] tracking-wide mb-2",children:"Dresso"}),m.jsx("div",{className:"w-16 h-0.5 bg-[#1a1a1a] mb-4"}),m.jsx("div",{className:"flex items-center justify-end w-full",children:m.jsxs(oe,{className:"bg-[#1a1a1a] hover:bg-[#333333] text-white",onClick:()=>i(!0),disabled:a,children:[m.jsx(tl,{className:"w-4 h-4 mr-2"}),a?"Subiendo...":t("community.upload")]})})]}),m.jsxs("div",{className:"space-y-6",children:[s.map(g=>m.jsx(_V,{post:g,onLike:u,onComment:h,onShare:f,onDelete:p},g.id)),s.length===0&&m.jsx("p",{className:"text-center text-gray-500 py-8",children:"No hay publicaciones todavía"})]})]}),m.jsx($L,{isOpen:r,onClose:()=>i(!1),onUpload:c,allowLinks:!0})]})},UZ=async t=>{var e;try{const n=Nn(fe,"users"),i=(e=(await bo($n(n,Yt("uid","==",t)))).docs[0])==null?void 0:e.data();if(!(i!=null&&i.style))return[];const s=$n(n,Yt("hasCompletedQuestionnaire","==",!0),Yt("uid","!=",t),Wa(50)),o=await bo(s),a=[];return o.docs.forEach(l=>{var u,h;const c=l.data();if(c.uid!==t&&c.style){const f=$Z(i,c);f>0&&a.push({id:c.uid,displayName:c.username||"Usuario",photoURL:c.photoURL,matchReason:BZ(f,i,c),matchScore:f,favoriteStyle:((h=(u=c.style)==null?void 0:u.styles)==null?void 0:h[0])||null,style:c.style||{}})}}),a.sort((l,c)=>c.matchScore-l.matchScore).slice(0,20)}catch(n){return console.error("Error getting user recommendations:",n),[]}},$Z=(t,e)=>{var c,u,h,f,p,g,v,w,E,x;let n=0;const r=new Set(((c=t.style)==null?void 0:c.styles)||[]),i=new Set(((u=e.style)==null?void 0:u.styles)||[]),s=[...r].filter(b=>i.has(b));n+=s.length*3;const o=new Set(((h=t.style)==null?void 0:h.occasions)||[]),a=new Set(((f=e.style)==null?void 0:f.occasions)||[]),l=[...o].filter(b=>a.has(b));return n+=l.length*2,((p=t.style)==null?void 0:p.skinTone)===((g=e.style)==null?void 0:g.skinTone)&&(n+=1),((v=t.style)==null?void 0:v.hairColor)===((w=e.style)==null?void 0:w.hairColor)&&(n+=1),Math.abs(((E=t.style)==null?void 0:E.height)-((x=e.style)==null?void 0:x.height))<=5&&(n+=1),n},BZ=(t,e,n)=>{var o,a,l,c,u,h;const r=[],i=(((o=e.style)==null?void 0:o.styles)||[]).filter(f=>{var p;return(((p=n.style)==null?void 0:p.styles)||[]).includes(f)});i.length>0&&r.push(`Comparte tu estilo ${i[0].toLowerCase()}`);const s=(((a=e.style)==null?void 0:a.occasions)||[]).filter(f=>{var p;return(((p=n.style)==null?void 0:p.occasions)||[]).includes(f)});return s.length>0&&r.push(`Viste para ${s[0].toLowerCase()}`),((l=e.style)==null?void 0:l.skinTone)===((c=n.style)==null?void 0:c.skinTone)&&r.push("Tono de piel similar"),((u=e.style)==null?void 0:u.hairColor)===((h=n.style)==null?void 0:h.hairColor)&&r.push("Color de cabello similar"),r[0]||"Podría interesarte su estilo"},zZ=async t=>{try{const e=Nn(fe,"users"),n=t.toLowerCase(),r=[$n(e,Yt("username",">=",n),Yt("username","<=",n+""),Wa(5)),$n(e,Yt("email",">=",n),Yt("email","<=",n+""),Wa(5)),$n(e,Yt("style.styles","array-contains-any",[n]),Wa(5))],i=await Promise.all(r.map(o=>bo(o))),s=new Map;return i.forEach(o=>{o.docs.forEach(a=>{var c,u;const l=a.data();s.has(l.uid)||s.set(l.uid,{id:l.uid,displayName:l.username||"Usuario",photoURL:l.photoURL,email:l.email,favoriteStyle:((u=(c=l.style)==null?void 0:c.styles)==null?void 0:u[0])||null,style:l.style||{}})})}),Array.from(s.values())}catch(e){throw console.error("Error searching users:",e),e}},up=(t,e)=>{const n=[t,e].sort();return`${n[0]}_${n[1]}`},WZ=async(t,e,n)=>{var r;try{const i=up(t,e),s=Oe(fe,"chats",i),o=Nn(fe,`chats/${i}/messages`),a=await ir(s);a.exists()?await Nr(s,{lastMessage:n,lastUpdated:Kr(),[`unreadCount.${e}`]:(((r=a.data().unreadCount)==null?void 0:r[e])||0)+1}):await ya(s,{participants:[t,e],createdAt:Kr(),lastMessage:n,lastUpdated:Kr(),unreadCount:{[e]:1,[t]:0}}),await cd(o,{senderId:t,receiverId:e,text:n,timestamp:Kr(),reactions:[],status:"sent"})}catch(i){throw console.error("Error sending message:",i),new Error("No se pudo enviar el mensaje. Por favor, inténtalo de nuevo.")}},qZ=(t,e)=>{try{const n=Nn(fe,`chats/${t}/messages`),r=$n(n,qW("timestamp","asc"));return am(r,i=>{const s=i.docs.map(o=>{var a;return{id:o.id,...o.data(),timestamp:((a=o.data().timestamp)==null?void 0:a.toDate())||new Date}});e(s)},i=>{console.error("Error in messages subscription:",i),e([])})}catch(n){return console.error("Error subscribing to messages:",n),e([]),()=>{}}},HZ=(t,e)=>{try{const n=Nn(fe,"chats"),r=$n(n,Yt("participants","array-contains",t));return am(r,i=>{const s=i.docs.map(o=>{var a;return{id:o.id,...o.data(),lastUpdated:((a=o.data().lastUpdated)==null?void 0:a.toDate())||new Date}}).sort((o,a)=>a.lastUpdated-o.lastUpdated);e(s)},i=>{console.error("Error in chats subscription:",i),e([])})}catch(n){return console.error("Error subscribing to user chats:",n),e([]),()=>{}}},GZ=async(t,e,n,r,i)=>{var s;try{const o=Oe(fe,`chats/${t}/messages/${e}`),a=await ir(o);if(!a.exists())throw new Error("Message not found");const l={userId:n,userName:r,emoji:i},c=(s=a.data().reactions)==null?void 0:s.some(u=>u.userId===n&&u.emoji===i);await Nr(o,{reactions:c?YW(l):QW(l)})}catch(o){throw console.error("Error toggling reaction:",o),o}},KZ=async(t,e)=>{try{const n=up(t,e),r=Oe(fe,"chats",n);return(await ir(r)).exists()}catch(n){throw console.error("Error checking existing chat:",n),n}},QZ=async(t,e)=>{try{const n=`${t}_${e}`,r=Oe(fe,"friendships",n);if((await ir(r)).exists())return{success:!0,message:"Ya es tu contacto"};const s=await ir(Oe(fe,"users",e));if(!s.exists())throw new Error("Usuario no encontrado");const o=s.data(),a=await ir(Oe(fe,"users",t));if(!a.exists())throw new Error("Error de autenticación");const l=a.data(),c=TD(fe);c.set(r,{users:[t,e],createdAt:Kr(),status:"active",friend:{id:e,displayName:o.username||"Usuario",photoURL:o.photoURL,style:o.style}});const u=`${e}_${t}`,h=Oe(fe,"friendships",u);return c.set(h,{users:[e,t],createdAt:Kr(),status:"active",friend:{id:t,displayName:l.username||"Usuario",photoURL:l.photoURL,style:l.style}}),await c.commit(),{success:!0,message:"Contacto añadido correctamente"}}catch(n){throw console.error("Error adding friend:",n),new Error("No se pudo añadir el contacto. Por favor, inténtalo de nuevo.")}},YZ=async(t,e)=>{const n=TD(fe);try{const r=`${t}_${e}`,i=`${e}_${t}`;return n.delete(Oe(fe,"friendships",r)),n.delete(Oe(fe,"friendships",i)),await n.commit(),{success:!0,message:"Contacto eliminado correctamente"}}catch(r){throw console.error("Error removing friend:",r),new Error("No se pudo eliminar el contacto")}},XZ=async t=>{try{const e=Nn(fe,"friendships"),n=$n(e,Yt("users","array-contains",t),Yt("status","==","active"));return(await bo(n)).docs.map(i=>({id:i.id,...i.data()}))}catch(e){throw console.error("Error getting friends:",e),new Error("No se pudieron cargar los contactos")}},LI=async(t,e)=>{try{const n=`${t}_${e}`,r=await ir(Oe(fe,"friendships",n));return r.exists()&&r.data().status==="active"}catch(n){return console.error("Error checking friendship:",n),!1}};function ko(t){"@babel/helpers - typeof";return ko=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ko(t)}function No(t){if(t===null||t===!0||t===!1)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function rn(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function Lr(t){rn(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||ko(t)==="object"&&e==="[object Date]"?new Date(t.getTime()):typeof t=="number"||e==="[object Number]"?new Date(t):((typeof t=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function JZ(t,e){rn(2,arguments);var n=Lr(t).getTime(),r=No(e);return new Date(n+r)}var ZZ={};function Am(){return ZZ}function eee(t){var e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),t.getTime()-e.getTime()}function tee(t){return rn(1,arguments),t instanceof Date||ko(t)==="object"&&Object.prototype.toString.call(t)==="[object Date]"}function nee(t){if(rn(1,arguments),!tee(t)&&typeof t!="number")return!1;var e=Lr(t);return!isNaN(Number(e))}function ree(t,e){rn(2,arguments);var n=No(e);return JZ(t,-n)}var iee=864e5;function see(t){rn(1,arguments);var e=Lr(t),n=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var r=e.getTime(),i=n-r;return Math.floor(i/iee)+1}function dp(t){rn(1,arguments);var e=1,n=Lr(t),r=n.getUTCDay(),i=(r<e?7:0)+r-e;return n.setUTCDate(n.getUTCDate()-i),n.setUTCHours(0,0,0,0),n}function TV(t){rn(1,arguments);var e=Lr(t),n=e.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var i=dp(r),s=new Date(0);s.setUTCFullYear(n,0,4),s.setUTCHours(0,0,0,0);var o=dp(s);return e.getTime()>=i.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function oee(t){rn(1,arguments);var e=TV(t),n=new Date(0);n.setUTCFullYear(e,0,4),n.setUTCHours(0,0,0,0);var r=dp(n);return r}var aee=6048e5;function lee(t){rn(1,arguments);var e=Lr(t),n=dp(e).getTime()-oee(e).getTime();return Math.round(n/aee)+1}function hp(t,e){var n,r,i,s,o,a,l,c;rn(1,arguments);var u=Am(),h=No((n=(r=(i=(s=e==null?void 0:e.weekStartsOn)!==null&&s!==void 0?s:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.weekStartsOn)!==null&&i!==void 0?i:u.weekStartsOn)!==null&&r!==void 0?r:(l=u.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&n!==void 0?n:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var f=Lr(t),p=f.getUTCDay(),g=(p<h?7:0)+p-h;return f.setUTCDate(f.getUTCDate()-g),f.setUTCHours(0,0,0,0),f}function bV(t,e){var n,r,i,s,o,a,l,c;rn(1,arguments);var u=Lr(t),h=u.getUTCFullYear(),f=Am(),p=No((n=(r=(i=(s=e==null?void 0:e.firstWeekContainsDate)!==null&&s!==void 0?s:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.firstWeekContainsDate)!==null&&i!==void 0?i:f.firstWeekContainsDate)!==null&&r!==void 0?r:(l=f.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(p>=1&&p<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var g=new Date(0);g.setUTCFullYear(h+1,0,p),g.setUTCHours(0,0,0,0);var v=hp(g,e),w=new Date(0);w.setUTCFullYear(h,0,p),w.setUTCHours(0,0,0,0);var E=hp(w,e);return u.getTime()>=v.getTime()?h+1:u.getTime()>=E.getTime()?h:h-1}function cee(t,e){var n,r,i,s,o,a,l,c;rn(1,arguments);var u=Am(),h=No((n=(r=(i=(s=e==null?void 0:e.firstWeekContainsDate)!==null&&s!==void 0?s:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.firstWeekContainsDate)!==null&&i!==void 0?i:u.firstWeekContainsDate)!==null&&r!==void 0?r:(l=u.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&n!==void 0?n:1),f=bV(t,e),p=new Date(0);p.setUTCFullYear(f,0,h),p.setUTCHours(0,0,0,0);var g=hp(p,e);return g}var uee=6048e5;function dee(t,e){rn(1,arguments);var n=Lr(t),r=hp(n,e).getTime()-cee(n,e).getTime();return Math.round(r/uee)+1}function Pe(t,e){for(var n=t<0?"-":"",r=Math.abs(t).toString();r.length<e;)r="0"+r;return n+r}var hee={y:function(e,n){var r=e.getUTCFullYear(),i=r>0?r:1-r;return Pe(n==="yy"?i%100:i,n.length)},M:function(e,n){var r=e.getUTCMonth();return n==="M"?String(r+1):Pe(r+1,2)},d:function(e,n){return Pe(e.getUTCDate(),n.length)},a:function(e,n){var r=e.getUTCHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h:function(e,n){return Pe(e.getUTCHours()%12||12,n.length)},H:function(e,n){return Pe(e.getUTCHours(),n.length)},m:function(e,n){return Pe(e.getUTCMinutes(),n.length)},s:function(e,n){return Pe(e.getUTCSeconds(),n.length)},S:function(e,n){var r=n.length,i=e.getUTCMilliseconds(),s=Math.floor(i*Math.pow(10,r-3));return Pe(s,n.length)}};const Ii=hee;var la={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},fee={G:function(e,n,r){var i=e.getUTCFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return r.era(i,{width:"abbreviated"});case"GGGGG":return r.era(i,{width:"narrow"});case"GGGG":default:return r.era(i,{width:"wide"})}},y:function(e,n,r){if(n==="yo"){var i=e.getUTCFullYear(),s=i>0?i:1-i;return r.ordinalNumber(s,{unit:"year"})}return Ii.y(e,n)},Y:function(e,n,r,i){var s=bV(e,i),o=s>0?s:1-s;if(n==="YY"){var a=o%100;return Pe(a,2)}return n==="Yo"?r.ordinalNumber(o,{unit:"year"}):Pe(o,n.length)},R:function(e,n){var r=TV(e);return Pe(r,n.length)},u:function(e,n){var r=e.getUTCFullYear();return Pe(r,n.length)},Q:function(e,n,r){var i=Math.ceil((e.getUTCMonth()+1)/3);switch(n){case"Q":return String(i);case"QQ":return Pe(i,2);case"Qo":return r.ordinalNumber(i,{unit:"quarter"});case"QQQ":return r.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(i,{width:"wide",context:"formatting"})}},q:function(e,n,r){var i=Math.ceil((e.getUTCMonth()+1)/3);switch(n){case"q":return String(i);case"qq":return Pe(i,2);case"qo":return r.ordinalNumber(i,{unit:"quarter"});case"qqq":return r.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(i,{width:"wide",context:"standalone"})}},M:function(e,n,r){var i=e.getUTCMonth();switch(n){case"M":case"MM":return Ii.M(e,n);case"Mo":return r.ordinalNumber(i+1,{unit:"month"});case"MMM":return r.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(i,{width:"wide",context:"formatting"})}},L:function(e,n,r){var i=e.getUTCMonth();switch(n){case"L":return String(i+1);case"LL":return Pe(i+1,2);case"Lo":return r.ordinalNumber(i+1,{unit:"month"});case"LLL":return r.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(i,{width:"wide",context:"standalone"})}},w:function(e,n,r,i){var s=dee(e,i);return n==="wo"?r.ordinalNumber(s,{unit:"week"}):Pe(s,n.length)},I:function(e,n,r){var i=lee(e);return n==="Io"?r.ordinalNumber(i,{unit:"week"}):Pe(i,n.length)},d:function(e,n,r){return n==="do"?r.ordinalNumber(e.getUTCDate(),{unit:"date"}):Ii.d(e,n)},D:function(e,n,r){var i=see(e);return n==="Do"?r.ordinalNumber(i,{unit:"dayOfYear"}):Pe(i,n.length)},E:function(e,n,r){var i=e.getUTCDay();switch(n){case"E":case"EE":case"EEE":return r.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(i,{width:"short",context:"formatting"});case"EEEE":default:return r.day(i,{width:"wide",context:"formatting"})}},e:function(e,n,r,i){var s=e.getUTCDay(),o=(s-i.weekStartsOn+8)%7||7;switch(n){case"e":return String(o);case"ee":return Pe(o,2);case"eo":return r.ordinalNumber(o,{unit:"day"});case"eee":return r.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(s,{width:"short",context:"formatting"});case"eeee":default:return r.day(s,{width:"wide",context:"formatting"})}},c:function(e,n,r,i){var s=e.getUTCDay(),o=(s-i.weekStartsOn+8)%7||7;switch(n){case"c":return String(o);case"cc":return Pe(o,n.length);case"co":return r.ordinalNumber(o,{unit:"day"});case"ccc":return r.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(s,{width:"narrow",context:"standalone"});case"cccccc":return r.day(s,{width:"short",context:"standalone"});case"cccc":default:return r.day(s,{width:"wide",context:"standalone"})}},i:function(e,n,r){var i=e.getUTCDay(),s=i===0?7:i;switch(n){case"i":return String(s);case"ii":return Pe(s,n.length);case"io":return r.ordinalNumber(s,{unit:"day"});case"iii":return r.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(i,{width:"short",context:"formatting"});case"iiii":default:return r.day(i,{width:"wide",context:"formatting"})}},a:function(e,n,r){var i=e.getUTCHours(),s=i/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,n,r){var i=e.getUTCHours(),s;switch(i===12?s=la.noon:i===0?s=la.midnight:s=i/12>=1?"pm":"am",n){case"b":case"bb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,n,r){var i=e.getUTCHours(),s;switch(i>=17?s=la.evening:i>=12?s=la.afternoon:i>=4?s=la.morning:s=la.night,n){case"B":case"BB":case"BBB":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,n,r){if(n==="ho"){var i=e.getUTCHours()%12;return i===0&&(i=12),r.ordinalNumber(i,{unit:"hour"})}return Ii.h(e,n)},H:function(e,n,r){return n==="Ho"?r.ordinalNumber(e.getUTCHours(),{unit:"hour"}):Ii.H(e,n)},K:function(e,n,r){var i=e.getUTCHours()%12;return n==="Ko"?r.ordinalNumber(i,{unit:"hour"}):Pe(i,n.length)},k:function(e,n,r){var i=e.getUTCHours();return i===0&&(i=24),n==="ko"?r.ordinalNumber(i,{unit:"hour"}):Pe(i,n.length)},m:function(e,n,r){return n==="mo"?r.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):Ii.m(e,n)},s:function(e,n,r){return n==="so"?r.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):Ii.s(e,n)},S:function(e,n){return Ii.S(e,n)},X:function(e,n,r,i){var s=i._originalDate||e,o=s.getTimezoneOffset();if(o===0)return"Z";switch(n){case"X":return MI(o);case"XXXX":case"XX":return $s(o);case"XXXXX":case"XXX":default:return $s(o,":")}},x:function(e,n,r,i){var s=i._originalDate||e,o=s.getTimezoneOffset();switch(n){case"x":return MI(o);case"xxxx":case"xx":return $s(o);case"xxxxx":case"xxx":default:return $s(o,":")}},O:function(e,n,r,i){var s=i._originalDate||e,o=s.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+VI(o,":");case"OOOO":default:return"GMT"+$s(o,":")}},z:function(e,n,r,i){var s=i._originalDate||e,o=s.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+VI(o,":");case"zzzz":default:return"GMT"+$s(o,":")}},t:function(e,n,r,i){var s=i._originalDate||e,o=Math.floor(s.getTime()/1e3);return Pe(o,n.length)},T:function(e,n,r,i){var s=i._originalDate||e,o=s.getTime();return Pe(o,n.length)}};function VI(t,e){var n=t>0?"-":"+",r=Math.abs(t),i=Math.floor(r/60),s=r%60;if(s===0)return n+String(i);var o=e||"";return n+String(i)+o+Pe(s,2)}function MI(t,e){if(t%60===0){var n=t>0?"-":"+";return n+Pe(Math.abs(t)/60,2)}return $s(t,e)}function $s(t,e){var n=e||"",r=t>0?"-":"+",i=Math.abs(t),s=Pe(Math.floor(i/60),2),o=Pe(i%60,2);return r+s+n+o}const pee=fee;var jI=function(e,n){switch(e){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},SV=function(e,n){switch(e){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},mee=function(e,n){var r=e.match(/(P+)(p+)?/)||[],i=r[1],s=r[2];if(!s)return jI(e,n);var o;switch(i){case"P":o=n.dateTime({width:"short"});break;case"PP":o=n.dateTime({width:"medium"});break;case"PPP":o=n.dateTime({width:"long"});break;case"PPPP":default:o=n.dateTime({width:"full"});break}return o.replace("{{date}}",jI(i,n)).replace("{{time}}",SV(s,n))},gee={p:SV,P:mee};const yee=gee;var vee=["D","DD"],wee=["YY","YYYY"];function _ee(t){return vee.indexOf(t)!==-1}function xee(t){return wee.indexOf(t)!==-1}function FI(t,e,n){if(t==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var Eee={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Tee=function(e,n,r){var i,s=Eee[e];return typeof s=="string"?i=s:n===1?i=s.one:i=s.other.replace("{{count}}",n.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+i:i+" ago":i};const bee=Tee;function Ga(t){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.width?String(e.width):t.defaultWidth,r=t.formats[n]||t.formats[t.defaultWidth];return r}}var See={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Iee={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Cee={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Pee={date:Ga({formats:See,defaultWidth:"full"}),time:Ga({formats:Iee,defaultWidth:"full"}),dateTime:Ga({formats:Cee,defaultWidth:"full"})};const Aee=Pee;var Ree={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},kee=function(e,n,r,i){return Ree[e]};const Nee=kee;function wr(t){return function(e,n){var r=n!=null&&n.context?String(n.context):"standalone",i;if(r==="formatting"&&t.formattingValues){var s=t.defaultFormattingWidth||t.defaultWidth,o=n!=null&&n.width?String(n.width):s;i=t.formattingValues[o]||t.formattingValues[s]}else{var a=t.defaultWidth,l=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[l]||t.values[a]}var c=t.argumentCallback?t.argumentCallback(e):e;return i[c]}}var Dee={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Oee={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Lee={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Vee={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Mee={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},jee={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Fee=function(e,n){var r=Number(e),i=r%100;if(i>20||i<10)switch(i%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},Uee={ordinalNumber:Fee,era:wr({values:Dee,defaultWidth:"wide"}),quarter:wr({values:Oee,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:wr({values:Lee,defaultWidth:"wide"}),day:wr({values:Vee,defaultWidth:"wide"}),dayPeriod:wr({values:Mee,defaultWidth:"wide",formattingValues:jee,defaultFormattingWidth:"wide"})};const $ee=Uee;function _r(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;var o=s[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?zee(a,function(h){return h.test(o)}):Bee(a,function(h){return h.test(o)}),c;c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;var u=e.slice(o.length);return{value:c,rest:u}}}function Bee(t,e){for(var n in t)if(t.hasOwnProperty(n)&&e(t[n]))return n}function zee(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return n}function IV(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.match(t.matchPattern);if(!r)return null;var i=r[0],s=e.match(t.parsePattern);if(!s)return null;var o=t.valueCallback?t.valueCallback(s[0]):s[0];o=n.valueCallback?n.valueCallback(o):o;var a=e.slice(i.length);return{value:o,rest:a}}}var Wee=/^(\d+)(th|st|nd|rd)?/i,qee=/\d+/i,Hee={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Gee={any:[/^b/i,/^(a|c)/i]},Kee={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Qee={any:[/1/i,/2/i,/3/i,/4/i]},Yee={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Xee={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Jee={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Zee={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},ete={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},tte={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},nte={ordinalNumber:IV({matchPattern:Wee,parsePattern:qee,valueCallback:function(e){return parseInt(e,10)}}),era:_r({matchPatterns:Hee,defaultMatchWidth:"wide",parsePatterns:Gee,defaultParseWidth:"any"}),quarter:_r({matchPatterns:Kee,defaultMatchWidth:"wide",parsePatterns:Qee,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:_r({matchPatterns:Yee,defaultMatchWidth:"wide",parsePatterns:Xee,defaultParseWidth:"any"}),day:_r({matchPatterns:Jee,defaultMatchWidth:"wide",parsePatterns:Zee,defaultParseWidth:"any"}),dayPeriod:_r({matchPatterns:ete,defaultMatchWidth:"any",parsePatterns:tte,defaultParseWidth:"any"})};const rte=nte;var ite={code:"en-US",formatDistance:bee,formatLong:Aee,formatRelative:Nee,localize:$ee,match:rte,options:{weekStartsOn:0,firstWeekContainsDate:1}};const ste=ite;var ote=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,ate=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,lte=/^'([^]*?)'?$/,cte=/''/g,ute=/[a-zA-Z]/;function dte(t,e,n){var r,i,s,o,a,l,c,u,h,f,p,g,v,w,E,x,b,C;rn(2,arguments);var N=String(e),D=Am(),I=(r=(i=n==null?void 0:n.locale)!==null&&i!==void 0?i:D.locale)!==null&&r!==void 0?r:ste,S=No((s=(o=(a=(l=n==null?void 0:n.firstWeekContainsDate)!==null&&l!==void 0?l:n==null||(c=n.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&a!==void 0?a:D.firstWeekContainsDate)!==null&&o!==void 0?o:(h=D.locale)===null||h===void 0||(f=h.options)===null||f===void 0?void 0:f.firstWeekContainsDate)!==null&&s!==void 0?s:1);if(!(S>=1&&S<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var A=No((p=(g=(v=(w=n==null?void 0:n.weekStartsOn)!==null&&w!==void 0?w:n==null||(E=n.locale)===null||E===void 0||(x=E.options)===null||x===void 0?void 0:x.weekStartsOn)!==null&&v!==void 0?v:D.weekStartsOn)!==null&&g!==void 0?g:(b=D.locale)===null||b===void 0||(C=b.options)===null||C===void 0?void 0:C.weekStartsOn)!==null&&p!==void 0?p:0);if(!(A>=0&&A<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!I.localize)throw new RangeError("locale must contain localize property");if(!I.formatLong)throw new RangeError("locale must contain formatLong property");var R=Lr(t);if(!nee(R))throw new RangeError("Invalid time value");var O=eee(R),L=ree(R,O),k={firstWeekContainsDate:S,weekStartsOn:A,locale:I,_originalDate:R},B=N.match(ate).map(function(Q){var K=Q[0];if(K==="p"||K==="P"){var re=yee[K];return re(Q,I.formatLong)}return Q}).join("").match(ote).map(function(Q){if(Q==="''")return"'";var K=Q[0];if(K==="'")return hte(Q);var re=pee[K];if(re)return!(n!=null&&n.useAdditionalWeekYearTokens)&&xee(Q)&&FI(Q,e,String(t)),!(n!=null&&n.useAdditionalDayOfYearTokens)&&_ee(Q)&&FI(Q,e,String(t)),re(L,Q,I.localize,k);if(K.match(ute))throw new RangeError("Format string contains an unescaped latin alphabet character `"+K+"`");return Q}).join("");return B}function hte(t){var e=t.match(lte);return e?e[1].replace(cte,"'"):t}function fte(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pte(t,e){if(ko(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ko(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function mte(t){var e=pte(t,"string");return ko(e)=="symbol"?e:e+""}function UI(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,mte(r.key),r)}}function gte(t,e,n){return e&&UI(t.prototype,e),n&&UI(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var yte={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 día",other:"{{count}} días"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 año",other:"alrededor de {{count}} años"},xYears:{one:"1 año",other:"{{count}} años"},overXYears:{one:"más de 1 año",other:"más de {{count}} años"},almostXYears:{one:"casi 1 año",other:"casi {{count}} años"}},vte=function(e,n,r){var i,s=yte[e];return typeof s=="string"?i=s:n===1?i=s.one:i=s.other.replace("{{count}}",n.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"en "+i:"hace "+i:i};const wte=vte;var _te={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},xte={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},Ete={full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Tte={date:Ga({formats:_te,defaultWidth:"full"}),time:Ga({formats:xte,defaultWidth:"full"}),dateTime:Ga({formats:Ete,defaultWidth:"full"})};const bte=Tte;var Ste={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'mañana a la' p",nextWeek:"eeee 'a la' p",other:"P"},Ite={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'mañana a las' p",nextWeek:"eeee 'a las' p",other:"P"},Cte=function(e,n,r,i){return n.getUTCHours()!==1?Ite[e]:Ste[e]};const Pte=Cte;var Ate={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","después de cristo"]},Rte={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1º trimestre","2º trimestre","3º trimestre","4º trimestre"]},kte={narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},Nte={narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","sá"],abbreviated:["dom","lun","mar","mié","jue","vie","sáb"],wide:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"]},Dte={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"}},Ote={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},Lte=function(e,n){var r=Number(e);return r+"º"},Vte={ordinalNumber:Lte,era:wr({values:Ate,defaultWidth:"wide"}),quarter:wr({values:Rte,defaultWidth:"wide",argumentCallback:function(e){return Number(e)-1}}),month:wr({values:kte,defaultWidth:"wide"}),day:wr({values:Nte,defaultWidth:"wide"}),dayPeriod:wr({values:Dte,defaultWidth:"wide",formattingValues:Ote,defaultFormattingWidth:"wide"})};const Mte=Vte;var jte=/^(\d+)(º)?/i,Fte=/\d+/i,Ute={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[uú]n|despu[eé]s de cristo|era com[uú]n)/i},$te={any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[uú]n)/i,/^(despu[eé]s de cristo|era com[uú]n)/i]},Bte={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](º)? trimestre/i},zte={any:[/1/i,/2/i,/3/i,/4/i]},Wte={narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},qte={narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},Hte={narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[áa])/i,abbreviated:/^(dom|lun|mar|mi[ée]|jue|vie|s[áa]b)/i,wide:/^(domingo|lunes|martes|mi[ée]rcoles|jueves|viernes|s[áa]bado)/i},Gte={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},Kte={narrow:/^(a|p|mn|md|(de la|a las) (mañana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (mañana|tarde|noche))/i},Qte={any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/mañana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},Yte={ordinalNumber:IV({matchPattern:jte,parsePattern:Fte,valueCallback:function(e){return parseInt(e,10)}}),era:_r({matchPatterns:Ute,defaultMatchWidth:"wide",parsePatterns:$te,defaultParseWidth:"any"}),quarter:_r({matchPatterns:Bte,defaultMatchWidth:"wide",parsePatterns:zte,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:_r({matchPatterns:Wte,defaultMatchWidth:"wide",parsePatterns:qte,defaultParseWidth:"any"}),day:_r({matchPatterns:Hte,defaultMatchWidth:"wide",parsePatterns:Gte,defaultParseWidth:"any"}),dayPeriod:_r({matchPatterns:Kte,defaultMatchWidth:"any",parsePatterns:Qte,defaultParseWidth:"any"})};const Xte=Yte;var Jte={code:"es",formatDistance:wte,formatLong:bte,formatRelative:Pte,localize:Mte,match:Xte,options:{weekStartsOn:1,firstWeekContainsDate:1}};const Zte=Jte,ene=({message:t,setMessage:e,onSubmit:n})=>{const r=_.useRef(null);_.useEffect(()=>{r.current&&r.current.focus()},[]);const i=o=>{o.preventDefault(),t.trim()&&n(t)},s=o=>{e(o.target.value)};return m.jsx("form",{onSubmit:i,className:"p-4 border-t border-gray-200",children:m.jsxs("div",{className:"flex space-x-2",children:[m.jsx(en,{ref:r,value:t,onChange:s,placeholder:"Escribe un mensaje...",className:"flex-1",autoComplete:"off"}),m.jsx(oe,{type:"submit",disabled:!t.trim(),children:m.jsx(oR,{className:"w-4 h-4"})})]})})},$I=["❤️","😂","😮","😢","👏","🔥"],tne=({message:t,onReact:e,currentUserId:n})=>{const r=o=>{var a;return(a=t.reactions)==null?void 0:a.some(l=>l.emoji===o&&l.userId===n)},i=o=>{var a;return((a=t.reactions)==null?void 0:a.filter(l=>l.emoji===o).length)||0},s=o=>{var a;return(a=t.reactions)==null?void 0:a.filter(l=>l.emoji===o).map(l=>l.userName).join(", ")};return m.jsxs("div",{className:"relative group",children:[m.jsx(xe.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"absolute bottom-full left-0 mb-2 hidden group-hover:flex bg-white rounded-full shadow-lg p-1 space-x-1",children:$I.map(o=>m.jsx("button",{onClick:()=>e(o),className:"hover:bg-gray-100 rounded-full p-1 transition-colors",children:m.jsx("span",{className:"text-xl",children:o})},o))}),t.reactions&&t.reactions.length>0&&m.jsx("div",{className:"flex space-x-1 mt-1",children:$I.map(o=>{const a=i(o);return a===0?null:m.jsxs(vV,{children:[m.jsx(wV,{asChild:!0,children:m.jsxs("button",{onClick:()=>e(o),className:`flex items-center space-x-1 text-sm rounded-full px-2 py-1 ${r(o)?"bg-gray-200":"bg-gray-100"} hover:bg-gray-200 transition-colors`,children:[m.jsx("span",{children:o}),m.jsx("span",{children:a})]})}),m.jsx(Ox,{className:"w-auto p-2",children:m.jsx("p",{className:"text-sm",children:s(o)})})]},o)})})]})},nne=({user:t,isOpen:e,onClose:n})=>{var i,s,o;const r=Bu();return t?m.jsx(Al,{open:e,onOpenChange:n,children:m.jsxs(qo,{className:"sm:max-w-[425px] bg-[#1a1a1a] text-white",children:[m.jsx(Ho,{children:m.jsxs(Go,{className:"text-white",children:["Perfil de ",t.displayName]})}),m.jsxs("div",{className:"mt-4 space-y-6",children:[m.jsxs("div",{className:"flex flex-col items-center",children:[m.jsx("div",{className:"w-24 h-24 rounded-full overflow-hidden bg-gray-800 mb-4",children:t.photoURL?m.jsx("img",{src:t.photoURL,alt:t.displayName,className:"w-full h-full object-cover"}):m.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-700",children:(i=t.displayName)==null?void 0:i.charAt(0).toUpperCase()})}),m.jsx("h3",{className:"text-xl font-semibold",children:t.displayName}),m.jsx("p",{className:"text-gray-400",children:t.email})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4 bg-gray-800 rounded-lg",children:[m.jsxs("div",{className:"text-center",children:[m.jsx("p",{className:"text-2xl font-bold",children:((s=t.stats)==null?void 0:s.totalPosts)||0}),m.jsx("p",{className:"text-sm text-gray-400",children:"Publicaciones"})]}),m.jsxs("div",{className:"text-center",children:[m.jsx("p",{className:"text-2xl font-bold",children:((o=t.stats)==null?void 0:o.totalLikes)||0}),m.jsx("p",{className:"text-sm text-gray-400",children:"Me gusta"})]})]}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs(oe,{variant:"outline",className:"w-full border-gray-600 text-white hover:bg-gray-800",onClick:()=>r(`/profile/${t.id}`),children:[m.jsx(lR,{className:"w-4 h-4 mr-2"}),"Ver perfil completo"]}),m.jsxs(oe,{variant:"outline",className:"w-full border-gray-600 text-white hover:bg-gray-800",children:[m.jsx(sR,{className:"w-4 h-4 mr-2"}),"Silenciar chat"]}),m.jsxs(oe,{variant:"destructive",className:"w-full",children:[m.jsx(Q4,{className:"w-4 h-4 mr-2"}),"Bloquear usuario"]})]})]})]})}):null},rne=({selectedUser:t,messages:e,message:n,setMessage:r,handleSendMessage:i,handleBack:s,handleReaction:o,showProfile:a,setShowProfile:l,isMobileView:c,currentUserId:u,messagesEndRef:h})=>{var f;return m.jsxs("div",{className:"bg-white rounded-xl shadow-md overflow-hidden h-full flex flex-col",children:[m.jsxs("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center space-x-4",children:[c&&m.jsx(oe,{variant:"ghost",size:"icon",onClick:s,className:"mr-2",children:m.jsx(K4,{className:"w-5 h-5"})}),t&&m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden bg-gray-200",children:t.photoURL?m.jsx("img",{src:t.photoURL,alt:t.displayName,className:"w-full h-full object-cover"}):m.jsx("div",{className:"w-full h-full flex items-center justify-center bg-[#1a1a1a] text-white",children:(f=t.displayName)==null?void 0:f.charAt(0).toUpperCase()})}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-semibold text-[#1a1a1a]",children:t.displayName}),m.jsx("p",{className:"text-sm text-gray-500",children:"En línea"})]})]})]}),m.jsx(oe,{variant:"ghost",size:"icon",onClick:()=>l(!0),children:m.jsx(l$,{className:"w-5 h-5"})})]}),m.jsx("div",{className:"flex-1 p-4 bg-gray-50 overflow-y-auto",children:e.length>0?m.jsxs("div",{className:"space-y-4",children:[e.map(p=>{const g=p.senderId===u;return m.jsx("div",{className:`flex ${g?"justify-end":"justify-start"}`,children:m.jsxs("div",{className:`max-w-[70%] rounded-lg p-3 ${g?"bg-[#1a1a1a] text-white":"bg-white border border-gray-200"}`,children:[m.jsx("p",{className:"text-sm",children:p.text}),p.timestamp&&m.jsx("p",{className:`text-xs mt-1 ${g?"text-gray-300":"text-gray-500"}`,children:dte(p.timestamp,"HH:mm",{locale:Zte})}),m.jsx(tne,{message:p,onReact:v=>o(p.id,v),currentUserId:u})]})},p.id)}),m.jsx("div",{ref:h})]}):m.jsxs("div",{className:"text-center text-gray-500 py-4",children:["Inicia una conversación con ",t==null?void 0:t.displayName]})}),m.jsx(ene,{message:n,setMessage:r,onSubmit:i}),m.jsx(nne,{user:t,isOpen:a,onClose:()=>l(!1)})]})},ine=()=>{wt();const{user:t}=yi(),{toast:e}=Hn(),[n,r]=_.useState([]),[i,s]=_.useState([]),[o,a]=_.useState(!0),[l,c]=_.useState(null),[u,h]=_.useState(window.innerWidth<768),[f,p]=_.useState(!1),[g,v]=_.useState(""),[w,E]=_.useState([]),[x,b]=_.useState(!1),[C,N]=_.useState(""),[D,I]=_.useState([]),[S,A]=_.useState(!1),[R,O]=_.useState({}),L=_.useRef(null),[k,B]=_.useState(null),Q=_.useRef(null),K=()=>{var q;(q=L.current)==null||q.scrollIntoView({behavior:"smooth"})};_.useEffect(()=>{K()},[w]),_.useEffect(()=>{const q=()=>{h(window.innerWidth<768)};return window.addEventListener("resize",q),()=>window.removeEventListener("resize",q)},[]),_.useEffect(()=>{(async()=>{try{const ie=await XZ(t.uid);s(ie.map(Te=>Te.friend))}catch(ie){console.error("Error loading friends:",ie)}})()},[t.uid]),_.useEffect(()=>{(async()=>{try{const ie=await UZ(t.uid);r(ie)}catch(ie){console.error("Error loading recommendations:",ie)}finally{a(!1)}})()},[t.uid]),_.useEffect(()=>{if(l){const q=up(t.uid,l.id),ie=qZ(q,Te=>{E(Te)});B(()=>ie),LI(t.uid,l.id).then(Te=>{O(st=>({...st,[l.id]:Te}))})}return()=>{k&&k()}},[l,t.uid]),_.useEffect(()=>(Q.current&&clearTimeout(Q.current),C.trim()?(A(!0),Q.current=setTimeout(async()=>{try{const ie=(await zZ(C.trim())).filter(Dn=>Dn.id!==t.uid),Te=await Promise.all(ie.map(Dn=>LI(t.uid,Dn.id))),st={};ie.forEach((Dn,hr)=>{st[Dn.id]=Te[hr]}),O(st),I(ie)}catch(q){console.error("Error searching users:",q),e({title:"Error",description:"No se pudieron cargar los resultados de búsqueda",variant:"destructive"})}finally{A(!1)}},300)):(I([]),A(!1)),()=>{Q.current&&clearTimeout(Q.current)}),[C,t.uid,e]);const re=async q=>{try{await QZ(t.uid,q.id),O(ie=>({...ie,[q.id]:!0})),s(ie=>[...ie,q]),e({title:"¡Nuevo contacto!",description:`${q.displayName} ha sido añadido a tus contactos`})}catch(ie){console.error("Error adding friend:",ie),e({title:"Error",description:"No se pudo añadir el contacto",variant:"destructive"})}},F=async q=>{try{await YZ(t.uid,q),O(ie=>({...ie,[q]:!1})),s(ie=>ie.filter(Te=>Te.id!==q)),e({title:"Contacto eliminado",description:"El contacto ha sido eliminado de tu lista"})}catch(ie){console.error("Error removing friend:",ie),e({title:"Error",description:"No se pudo eliminar el contacto",variant:"destructive"})}},z=async q=>{try{const ie=await KZ(t.uid,q.id);c(q),u&&p(!0),N(""),I([])}catch(ie){console.error("Error selecting user:",ie),e({title:"Error",description:"No se pudo iniciar el chat",variant:"destructive"})}},Y=()=>{p(!1),c(null)},J=async q=>{if(!(!q.trim()||!l))try{await WZ(t.uid,l.id,q.trim()),v("")}catch(ie){console.error("Error sending message:",ie),e({title:"Error",description:"No se pudo enviar el mensaje",variant:"destructive"})}},ue=async(q,ie)=>{if(l)try{const Te=up(t.uid,l.id);await GZ(Te,q,t.uid,t.displayName,ie)}catch(Te){console.error("Error adding reaction:",Te),e({title:"Error",description:"No se pudo añadir la reacción",variant:"destructive"})}},ce=()=>m.jsxs("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:[m.jsx("div",{className:"p-4 border-b border-gray-200",children:m.jsxs("div",{className:"space-y-4",children:[m.jsx("h2",{className:"text-xl font-semibold text-[#1a1a1a]",children:"Contactos"}),m.jsxs("div",{className:"relative",children:[m.jsx(en,{value:C,onChange:q=>N(q.target.value),placeholder:"Buscar usuarios por nombre o estilo...",className:"pl-10"}),m.jsx(d$,{className:"w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"})]})]})}),m.jsxs("div",{className:"divide-y divide-gray-200 max-h-[calc(100vh-280px)] overflow-y-auto",children:[S?m.jsx("div",{className:"p-4 text-center text-gray-500",children:"Buscando usuarios..."}):C?D.length>0?D.map(q=>{var ie;return m.jsxs("div",{className:"p-4 hover:bg-gray-50 cursor-pointer transition-colors flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center space-x-4",onClick:()=>z(q),children:[m.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden bg-gray-200",children:q.photoURL?m.jsx("img",{src:q.photoURL,alt:q.displayName,className:"w-full h-full object-cover"}):m.jsx("div",{className:"w-full h-full flex items-center justify-center bg-[#1a1a1a] text-white",children:(ie=q.displayName)==null?void 0:ie.charAt(0).toUpperCase()})}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-semibold text-[#1a1a1a]",children:q.displayName}),q.favoriteStyle&&m.jsxs("p",{className:"text-sm text-gray-500",children:["Estilo: ",q.favoriteStyle]})]})]}),m.jsx(oe,{variant:"ghost",size:"icon",className:`text-gray-500 hover:text-[#1a1a1a] ${R[q.id]?"bg-gray-100":""}`,onClick:()=>R[q.id]?F(q.id):re(q),children:R[q.id]?m.jsx(sb,{className:"w-5 h-5"}):m.jsx(ob,{className:"w-5 h-5"})})]},q.id)}):m.jsx("div",{className:"p-4 text-center text-gray-500",children:"No se encontraron usuarios"}):m.jsxs(m.Fragment,{children:[i.length>0&&m.jsxs("div",{className:"p-4 bg-gray-50",children:[m.jsx("h3",{className:"font-semibold text-gray-600 mb-2",children:"Mis Contactos"}),m.jsx("div",{className:"space-y-2",children:i.map(q=>{var ie;return m.jsx("div",{onClick:()=>z(q),className:`p-2 rounded-lg hover:bg-gray-100 cursor-pointer transition-colors ${(l==null?void 0:l.id)===q.id?"bg-gray-100":""}`,children:m.jsxs("div",{className:"flex items-center space-x-3",children:[m.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden bg-gray-200",children:q.photoURL?m.jsx("img",{src:q.photoURL,alt:q.displayName,className:"w-full h-full object-cover"}):m.jsx("div",{className:"w-full h-full flex items-center justify-center bg-[#1a1a1a] text-white",children:(ie=q.displayName)==null?void 0:ie.charAt(0).toUpperCase()})}),m.jsx("div",{children:m.jsx("h4",{className:"font-medium text-[#1a1a1a]",children:q.displayName})})]})},q.id)})})]}),m.jsxs("div",{className:"p-4",children:[m.jsx("h3",{className:"font-semibold text-gray-600 mb-2",children:"Sugerencias"}),n.map(q=>{var ie;return m.jsx("div",{className:`p-4 hover:bg-gray-50 cursor-pointer transition-colors ${(l==null?void 0:l.id)===q.id?"bg-gray-50":""}`,children:m.jsxs("div",{className:"flex items-center justify-between",onClick:()=>z(q),children:[m.jsxs("div",{className:"flex items-center space-x-4",children:[m.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden bg-gray-200",children:q.photoURL?m.jsx("img",{src:q.photoURL,alt:q.displayName,className:"w-full h-full object-cover"}):m.jsx("div",{className:"w-full h-full flex items-center justify-center bg-[#1a1a1a] text-white",children:(ie=q.displayName)==null?void 0:ie.charAt(0).toUpperCase()})}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-semibold text-[#1a1a1a]",children:q.displayName}),m.jsx("p",{className:"text-sm text-gray-500",children:q.matchReason})]})]}),m.jsx(oe,{variant:"ghost",size:"icon",className:`text-gray-500 hover:text-[#1a1a1a] ${R[q.id]?"bg-gray-100":""}`,onClick:Te=>{Te.stopPropagation(),R[q.id]?F(q.id):re(q)},children:R[q.id]?m.jsx(sb,{className:"w-5 h-5"}):m.jsx(ob,{className:"w-5 h-5"})})]})},q.id)})]})]}),!o&&!C&&n.length===0&&i.length===0&&m.jsx("div",{className:"p-4 text-center text-gray-500",children:"No hay contactos disponibles"})]})]});return m.jsx("div",{className:"min-h-screen bg-[#E8EBEF] p-6",children:m.jsxs(xe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-6xl mx-auto",children:[m.jsxs("div",{className:"text-center mb-8",children:[m.jsx("h1",{className:"text-4xl font-playfair font-bold text-[#1a1a1a] tracking-wide mb-2",children:"DressoChat"}),m.jsx("p",{className:"text-gray-600",children:"Conecta con personas que comparten tu estilo"})]}),m.jsxs("div",{className:"grid md:grid-cols-12 gap-6 h-[calc(100vh-200px)]",children:[(!u||!f)&&m.jsx("div",{className:"md:col-span-4",children:m.jsx(ce,{})}),(!u||f)&&m.jsx("div",{className:"md:col-span-8 h-full",children:l?m.jsx(rne,{selectedUser:l,messages:w,message:g,setMessage:v,handleSendMessage:J,handleBack:Y,handleReaction:ue,showProfile:x,setShowProfile:b,isMobileView:u,currentUserId:t.uid,messagesEndRef:L}):m.jsx("div",{className:"bg-white rounded-xl shadow-md h-full flex items-center justify-center",children:m.jsxs("div",{className:"text-center text-gray-500",children:[m.jsx(Wu,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),m.jsx("p",{children:"Selecciona un contacto para comenzar a chatear"})]})})})]})]})})},sne=async(t,e)=>{try{console.log("Starting image upload...",{file:t,path:e});const n=t.name.replace(/[^a-zA-Z0-9.-]/g,"_"),r=`${Date.now()}_${n}`,i=cm(dd,`${e}/${r}`);console.log("Uploading file to storage...");const s=await UD(i,t);console.log("File uploaded successfully"),console.log("Getting download URL...");const o=await B_(s.ref);return console.log("Download URL obtained:",o),{url:o,path:s.ref.fullPath}}catch(n){throw console.error("Error in uploadImage:",n),n}},one=5*1024*1024,ane=["image/jpeg","image/png","image/jpg"],lne=({currentImage:t,userId:e,onImageUpdate:n})=>{wt();const{toast:r}=Hn(),{updateProfileImage:i}=yi(),[s,o]=_.useState(!1),[a,l]=_.useState(!1),[c,u]=_.useState(null),[h,f]=_.useState(null),p=w=>w?ane.includes(w.type)?w.size>one?(r({title:"Archivo demasiado grande",description:"La imagen no debe superar los 5MB",variant:"destructive"}),!1):!0:(r({title:"Formato no válido",description:"Por favor, selecciona una imagen en formato JPG o PNG",variant:"destructive"}),!1):!1,g=w=>{if(!w){u(null),f(null);return}if(!p(w))return;u(w);const E=new FileReader;E.onloadend=()=>f(E.result),E.readAsDataURL(w)},v=async()=>{if(!(!c||!p(c))){o(!0),console.log("Starting upload process...");try{const{url:w}=await sne(c,`profiles/${e}`);console.log("Image uploaded successfully, URL:",w),await i(w),console.log("Profile updated with new image"),n&&n(w),r({title:"Foto actualizada",description:"Tu foto de perfil se ha actualizado correctamente"}),l(!1),u(null),f(null)}catch(w){console.error("Error during upload:",w),r({title:"Error al subir la imagen",description:"Ha ocurrido un error durante la subida. Por favor, inténtalo de nuevo.",variant:"destructive"})}finally{o(!1)}}};return m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"relative group",children:[m.jsx("div",{className:"w-24 h-24 rounded-full overflow-hidden bg-[#1a1a1a] border-4 border-white shadow-lg",children:t?m.jsx("img",{src:t,alt:"Foto de perfil",className:"w-full h-full object-cover"}):m.jsx("div",{className:"w-full h-full flex items-center justify-center text-white font-medium",children:m.jsx("span",{className:"text-center",children:"Foto de perfil"})})}),m.jsx(oe,{variant:"secondary",size:"icon",className:"absolute bottom-0 right-0 opacity-0 group-hover:opacity-100 transition-opacity bg-white hover:bg-gray-100",onClick:()=>l(!0),children:m.jsx(Y4,{className:"w-4 h-4"})})]}),m.jsx(Al,{open:a,onOpenChange:l,children:m.jsxs(qo,{children:[m.jsx(Ho,{children:m.jsx(Go,{children:"Actualizar foto de perfil"})}),m.jsxs("div",{className:"space-y-4",children:[m.jsx(Tx,{onFileSelect:g,preview:h}),h&&m.jsx(oe,{className:"w-full bg-[#1a1a1a] hover:bg-[#2a2a2a] text-white",onClick:v,disabled:s,children:s?m.jsxs(m.Fragment,{children:[m.jsx(Sw,{className:"w-4 h-4 mr-2 animate-spin"}),"Subiendo..."]}):"Subir nueva imagen"})]})]})})]})},cne=()=>{const{t}=wt(),e=Bu(),{user:n,logout:r,updateUsername:i}=yi(),{toast:s}=Hn(),[o,a]=_.useState(!1),[l,c]=_.useState({displayName:(n==null?void 0:n.displayName)||"",email:(n==null?void 0:n.email)||""}),[u,h]=_.useState({totalPosts:0,totalLikes:0,totalComments:0,totalShares:0}),[f,p]=_.useState([]),[g,v]=_.useState(!1),[w,E]=_.useState(n==null?void 0:n.photoURL);_.useEffect(()=>{if(n!=null&&n.uid){const D=NZ(n.uid,S=>{h(S)});return(async()=>{try{const S=await MZ(n.uid);p(S.sort((A,R)=>R.createdAt-A.createdAt))}catch(S){console.error("Error fetching posts:",S),s({title:"Error",description:"No se pudieron cargar las publicaciones",variant:"destructive"})}})(),()=>D()}},[n==null?void 0:n.uid,s]);const x=async D=>{D.preventDefault(),v(!0);try{await i(l.displayName),a(!1),s({title:"Perfil actualizado",description:"Los cambios se han guardado correctamente"})}catch{s({title:"Error",description:"No se pudo actualizar el perfil",variant:"destructive"})}finally{v(!1)}},b=async()=>{try{await r(),e("/")}catch{s({title:"Error",description:"No se pudo cerrar la sesión",variant:"destructive"})}},C=async D=>{try{await EV(D,n.uid),p(I=>I.filter(S=>S.id!==D)),s({title:"Publicación eliminada",description:"La publicación se ha eliminado correctamente"})}catch{s({title:"Error",description:"No se pudo eliminar la publicación",variant:"destructive"})}},N=D=>{E(D)};return m.jsxs("div",{className:"min-h-screen bg-[#E8EBEF] p-6",children:[m.jsx(xe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-4xl mx-auto",children:m.jsxs("div",{className:"bg-[#1a1a1a] rounded-xl overflow-hidden shadow-lg",children:[m.jsxs("div",{className:"relative h-64",children:[m.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${w})`,filter:"brightness(0.7)"}}),m.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/30 to-black/60"}),m.jsx("div",{className:"absolute -bottom-12 left-6",children:m.jsx(lne,{currentImage:w,userId:n==null?void 0:n.uid,onImageUpdate:N})})]}),m.jsxs("div",{className:"pt-16 px-6 pb-6",children:[m.jsxs("div",{className:"flex justify-between items-start",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-2xl font-bold text-white",children:(n==null?void 0:n.displayName)||t("profile.anonymous")}),m.jsx("p",{className:"text-gray-400 font-semibold",children:n==null?void 0:n.email})]}),m.jsxs(oe,{variant:"outline",className:"border-white text-white hover:bg-white/10 font-semibold",onClick:()=>a(!0),children:[m.jsx(c$,{className:"w-4 h-4 mr-2"}),"Editar perfil"]})]}),m.jsxs("div",{className:"grid grid-cols-4 gap-4 mt-8",children:[m.jsxs(xe.div,{whileHover:{scale:1.05},className:"bg-[#2a2a2a] p-4 rounded-lg text-center",children:[m.jsx(r$,{className:"w-6 h-6 mx-auto mb-2 text-white"}),m.jsx("span",{className:"block font-semibold text-white",children:u.totalPosts}),m.jsx("span",{className:"text-sm text-gray-400",children:"Publicaciones"})]}),m.jsxs(xe.div,{whileHover:{scale:1.05},className:"bg-[#2a2a2a] p-4 rounded-lg text-center",children:[m.jsx(bw,{className:"w-6 h-6 mx-auto mb-2 text-white"}),m.jsx("span",{className:"block font-semibold text-white",children:u.totalLikes}),m.jsx("span",{className:"text-sm text-gray-400",children:"Me gusta"})]}),m.jsxs(xe.div,{whileHover:{scale:1.05},className:"bg-[#2a2a2a] p-4 rounded-lg text-center",children:[m.jsx(Wu,{className:"w-6 h-6 mx-auto mb-2 text-white"}),m.jsx("span",{className:"block font-semibold text-white",children:u.totalComments}),m.jsx("span",{className:"text-sm text-gray-400",children:"Comentarios"})]}),m.jsxs(xe.div,{whileHover:{scale:1.05},className:"bg-[#2a2a2a] p-4 rounded-lg text-center",children:[m.jsx(Iw,{className:"w-6 h-6 mx-auto mb-2 text-white"}),m.jsx("span",{className:"block font-semibold text-white",children:u.totalShares}),m.jsx("span",{className:"text-sm text-gray-400",children:"Compartidos"})]})]}),m.jsxs("div",{className:"mt-8",children:[m.jsx("h2",{className:"text-xl font-semibold mb-4 text-white",children:"Mis publicaciones"}),m.jsxs("div",{className:"space-y-6",children:[f.map(D=>m.jsx(_V,{post:{...D,user:{...D.user,avatar:w}},onDelete:C,onLike:()=>{},onComment:()=>{},onShare:()=>{}},D.id)),f.length===0&&m.jsx("p",{className:"text-center text-gray-400 py-8",children:"No tienes publicaciones todavía"})]})]}),m.jsx("div",{className:"mt-8 pt-8 border-t border-gray-700",children:m.jsxs(oe,{variant:"destructive",className:"w-full",onClick:b,children:[m.jsx(o$,{className:"w-4 h-4 mr-2"}),"Cerrar sesión"]})})]})]})}),m.jsx(Al,{open:o,onOpenChange:a,children:m.jsxs(qo,{children:[m.jsx(Ho,{children:m.jsx(Go,{children:"Editar perfil"})}),m.jsxs("form",{onSubmit:x,className:"space-y-4",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ze,{htmlFor:"displayName",children:"Nombre"}),m.jsx(en,{id:"displayName",value:l.displayName,onChange:D=>c({...l,displayName:D.target.value}),placeholder:"Tu nombre"})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ze,{htmlFor:"email",children:"Correo electrónico"}),m.jsx(en,{id:"email",value:l.email,disabled:!0,className:"bg-gray-100"}),m.jsx("p",{className:"text-sm text-gray-500",children:"El correo electrónico no se puede modificar"})]}),m.jsxs("div",{className:"flex justify-end space-x-2",children:[m.jsx(oe,{type:"button",variant:"outline",onClick:()=>a(!1),children:"Cancelar"}),m.jsx(oe,{type:"submit",disabled:g,className:"bg-[#1a1a1a] hover:bg-[#2a2a2a]",children:g?"Guardando...":"Guardar cambios"})]})]})]})})]})},une=()=>{const{t,i18n:e}=wt(),n=i=>{e.changeLanguage(i)},r=[{icon:e$,title:t("profile.language"),content:m.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[m.jsx(oe,{variant:e.language==="en"?"default":"outline",onClick:()=>n("en"),className:"w-full",children:"🇬🇧 English"}),m.jsx(oe,{variant:e.language==="es"?"default":"outline",onClick:()=>n("es"),className:"w-full",children:"🇪🇸 Español"})]})},{icon:sR,title:"Notifications",content:m.jsx("div",{className:"mt-4",children:m.jsx(oe,{variant:"outline",className:"w-full",children:"Manage Notifications"})})},{icon:p$,title:"Privacy",content:m.jsx("div",{className:"mt-4",children:m.jsx(oe,{variant:"outline",className:"w-full",children:"Privacy Settings"})})},{icon:t$,title:"Help & Support",content:m.jsx("div",{className:"mt-4",children:m.jsx(oe,{variant:"outline",className:"w-full",children:"Get Help"})})}];return m.jsx("div",{className:"min-h-screen p-6",children:m.jsxs(xe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-2xl mx-auto",children:[m.jsxs("div",{className:"mb-8",children:[m.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:t("navigation.settings")}),m.jsx("p",{className:"text-gray-600 mt-2",children:"Manage your app preferences"})]}),m.jsx("div",{className:"space-y-6",children:r.map((i,s)=>m.jsxs(xe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:s*.1},className:"bg-white/80 backdrop-blur-sm rounded-xl p-6 shadow-lg",children:[m.jsxs("div",{className:"flex items-center space-x-3",children:[m.jsx(i.icon,{className:"w-6 h-6 text-purple-600"}),m.jsx(Ze,{className:"text-lg font-semibold",children:i.title})]}),i.content]},s))})]})})},dne=()=>{const t=Bu(),e=$u(),{user:n}=yi(),{t:r}=wt(),[i,s]=_.useState(0);_.useEffect(()=>{if(!n)return;const a=HZ(n.uid,l=>{let c=0;l.forEach(u=>{var h;c+=((h=u.unreadCount)==null?void 0:h[n.uid])||0}),s(c)});return()=>a()},[n]);const o=[{path:"/wardrobe",icon:n$,label:r("navigation.wardrobe")},{path:"/outfits",icon:aR,label:r("navigation.outfits")},{path:"/chats",icon:Wu,label:"DressoChat",badge:i},{path:"/community",icon:y$,label:r("navigation.community")},{path:"/profile",icon:lR,label:r("navigation.profile")},{path:"/settings",icon:h$,label:r("navigation.settings")}];return m.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-[#1a1a1a] md:top-0 md:bottom-auto z-navigation shadow-md",children:m.jsx("div",{className:"max-w-screen-xl mx-auto px-4",children:m.jsx("div",{className:"flex justify-between items-center h-16",children:o.map(a=>{const l=e.pathname===a.path,c=a.icon;return m.jsxs(xe.button,{whileHover:{scale:1.1},whileTap:{scale:.95},onClick:()=>t(a.path),className:"relative flex flex-col items-center justify-center p-2 rounded-lg transition-colors group",children:[m.jsxs("div",{className:`flex items-center ${l?"text-white":"text-gray-400 group-hover:text-white"}`,children:[m.jsx(c,{className:"w-6 h-6"}),a.badge>0&&m.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:a.badge})]}),m.jsx("span",{className:`text-xs mt-1 font-medium transition-colors ${l?"text-white":"text-gray-300 group-hover:text-white"}`,children:a.label}),l&&m.jsx(xe.div,{layoutId:"activeTab",className:"absolute bottom-0 left-0 right-0 h-0.5 bg-white md:top-0 md:bottom-auto"})]},a.path)})})})})},de=t=>typeof t=="string",dc=()=>{let t,e;const n=new Promise((r,i)=>{t=r,e=i});return n.resolve=t,n.reject=e,n},BI=t=>t==null?"":""+t,hne=(t,e,n)=>{t.forEach(r=>{e[r]&&(n[r]=e[r])})},fne=/###/g,zI=t=>t&&t.indexOf("###")>-1?t.replace(fne,"."):t,WI=t=>!t||de(t),Kc=(t,e,n)=>{const r=de(e)?e.split("."):e;let i=0;for(;i<r.length-1;){if(WI(t))return{};const s=zI(r[i]);!t[s]&&n&&(t[s]=new n),Object.prototype.hasOwnProperty.call(t,s)?t=t[s]:t={},++i}return WI(t)?{}:{obj:t,k:zI(r[i])}},qI=(t,e,n)=>{const{obj:r,k:i}=Kc(t,e,Object);if(r!==void 0||e.length===1){r[i]=n;return}let s=e[e.length-1],o=e.slice(0,e.length-1),a=Kc(t,o,Object);for(;a.obj===void 0&&o.length;)s=`${o[o.length-1]}.${s}`,o=o.slice(0,o.length-1),a=Kc(t,o,Object),a&&a.obj&&typeof a.obj[`${a.k}.${s}`]<"u"&&(a.obj=void 0);a.obj[`${a.k}.${s}`]=n},pne=(t,e,n,r)=>{const{obj:i,k:s}=Kc(t,e,Object);i[s]=i[s]||[],i[s].push(n)},fp=(t,e)=>{const{obj:n,k:r}=Kc(t,e);if(n)return n[r]},mne=(t,e,n)=>{const r=fp(t,n);return r!==void 0?r:fp(e,n)},CV=(t,e,n)=>{for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in t?de(t[r])||t[r]instanceof String||de(e[r])||e[r]instanceof String?n&&(t[r]=e[r]):CV(t[r],e[r],n):t[r]=e[r]);return t},ca=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var gne={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const yne=t=>de(t)?t.replace(/[&<>"'\/]/g,e=>gne[e]):t;class vne{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const n=this.regExpMap.get(e);if(n!==void 0)return n;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const wne=[" ",",","?","!",";"],_ne=new vne(20),xne=(t,e,n)=>{e=e||"",n=n||"";const r=wne.filter(o=>e.indexOf(o)<0&&n.indexOf(o)<0);if(r.length===0)return!0;const i=_ne.getRegExp(`(${r.map(o=>o==="?"?"\\?":o).join("|")})`);let s=!i.test(t);if(!s){const o=t.indexOf(n);o>0&&!i.test(t.substring(0,o))&&(s=!0)}return s},_0=function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!t)return;if(t[e])return t[e];const r=e.split(n);let i=t;for(let s=0;s<r.length;){if(!i||typeof i!="object")return;let o,a="";for(let l=s;l<r.length;++l)if(l!==s&&(a+=n),a+=r[l],o=i[a],o!==void 0){if(["string","number","boolean"].indexOf(typeof o)>-1&&l<r.length-1)continue;s+=l-s+1;break}i=o}return i},pp=t=>t&&t.replace("_","-"),Ene={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){console&&console[t]&&console[t].apply(console,e)}};class mp{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,n)}init(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=n.prefix||"i18next:",this.logger=e||Ene,this.options=n,this.debug=n.debug}log(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"log","",!0)}warn(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"warn","",!0)}error(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"error","")}deprecate(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"warn","WARNING DEPRECATED: ",!0)}forward(e,n,r,i){return i&&!this.debug?null:(de(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[n](e))}create(e){return new mp(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new mp(this.logger,e)}}var br=new mp;class Rm{constructor(){this.observers={}}on(e,n){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const i=this.observers[r].get(n)||0;this.observers[r].set(n,i+1)}),this}off(e,n){if(this.observers[e]){if(!n){delete this.observers[e];return}this.observers[e].delete(n)}}emit(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(o=>{let[a,l]=o;for(let c=0;c<l;c++)a(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(o=>{let[a,l]=o;for(let c=0;c<l;c++)a.apply(a,[e,...r])})}}class HI extends Rm{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const n=this.options.ns.indexOf(e);n>-1&&this.options.ns.splice(n,1)}getResource(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,o=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let a;e.indexOf(".")>-1?a=e.split("."):(a=[e,n],r&&(Array.isArray(r)?a.push(...r):de(r)&&s?a.push(...r.split(s)):a.push(r)));const l=fp(this.data,a);return!l&&!n&&!r&&e.indexOf(".")>-1&&(e=a[0],n=a[1],r=a.slice(2).join(".")),l||!o||!de(r)?l:_0(this.data&&this.data[e]&&this.data[e][n],r,s)}addResource(e,n,r,i){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const o=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator;let a=[e,n];r&&(a=a.concat(o?r.split(o):r)),e.indexOf(".")>-1&&(a=e.split("."),i=n,n=a[1]),this.addNamespaces(n),qI(this.data,a,i),s.silent||this.emit("added",e,n,r,i)}addResources(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const s in r)(de(r[s])||Array.isArray(r[s]))&&this.addResource(e,n,s,r[s],{silent:!0});i.silent||this.emit("added",e,n,r)}addResourceBundle(e,n,r,i,s){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},a=[e,n];e.indexOf(".")>-1&&(a=e.split("."),i=r,r=n,n=a[1]),this.addNamespaces(n);let l=fp(this.data,a)||{};o.skipCopy||(r=JSON.parse(JSON.stringify(r))),i?CV(l,r,s):l={...l,...r},qI(this.data,a,l),o.silent||this.emit("added",e,n,r)}removeResourceBundle(e,n){this.hasResourceBundle(e,n)&&delete this.data[e][n],this.removeNamespaces(n),this.emit("removed",e,n)}hasResourceBundle(e,n){return this.getResource(e,n)!==void 0}getResourceBundle(e,n){return n||(n=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(e,n)}:this.getResource(e,n)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const n=this.getDataByLanguage(e);return!!(n&&Object.keys(n)||[]).find(i=>n[i]&&Object.keys(n[i]).length>0)}toJSON(){return this.data}}var PV={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,n,r,i){return t.forEach(s=>{this.processors[s]&&(e=this.processors[s].process(e,n,r,i))}),e}};const GI={};class gp extends Rm{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),hne(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=br.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const r=this.resolve(e,n);return r&&r.res!==void 0}extractFromKey(e,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const i=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let s=n.ns||this.options.defaultNS||[];const o=r&&e.indexOf(r)>-1,a=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!xne(e,r,i);if(o&&!a){const l=e.match(this.interpolator.nestingRegexp);if(l&&l.length>0)return{key:e,namespaces:de(s)?[s]:s};const c=e.split(r);(r!==i||r===i&&this.options.ns.indexOf(c[0])>-1)&&(s=c.shift()),e=c.join(i)}return{key:e,namespaces:de(s)?[s]:s}}translate(e,n,r){if(typeof n!="object"&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),typeof n=="object"&&(n={...n}),n||(n={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const i=n.returnDetails!==void 0?n.returnDetails:this.options.returnDetails,s=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,{key:o,namespaces:a}=this.extractFromKey(e[e.length-1],n),l=a[a.length-1],c=n.lng||this.language,u=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(c&&c.toLowerCase()==="cimode"){if(u){const C=n.nsSeparator||this.options.nsSeparator;return i?{res:`${l}${C}${o}`,usedKey:o,exactUsedKey:o,usedLng:c,usedNS:l,usedParams:this.getUsedParamsDetails(n)}:`${l}${C}${o}`}return i?{res:o,usedKey:o,exactUsedKey:o,usedLng:c,usedNS:l,usedParams:this.getUsedParamsDetails(n)}:o}const h=this.resolve(e,n);let f=h&&h.res;const p=h&&h.usedKey||o,g=h&&h.exactUsedKey||o,v=Object.prototype.toString.apply(f),w=["[object Number]","[object Function]","[object RegExp]"],E=n.joinArrays!==void 0?n.joinArrays:this.options.joinArrays,x=!this.i18nFormat||this.i18nFormat.handleAsObject,b=!de(f)&&typeof f!="boolean"&&typeof f!="number";if(x&&f&&b&&w.indexOf(v)<0&&!(de(E)&&Array.isArray(f))){if(!n.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const C=this.options.returnedObjectHandler?this.options.returnedObjectHandler(p,f,{...n,ns:a}):`key '${o} (${this.language})' returned an object instead of string.`;return i?(h.res=C,h.usedParams=this.getUsedParamsDetails(n),h):C}if(s){const C=Array.isArray(f),N=C?[]:{},D=C?g:p;for(const I in f)if(Object.prototype.hasOwnProperty.call(f,I)){const S=`${D}${s}${I}`;N[I]=this.translate(S,{...n,joinArrays:!1,ns:a}),N[I]===S&&(N[I]=f[I])}f=N}}else if(x&&de(E)&&Array.isArray(f))f=f.join(E),f&&(f=this.extendTranslation(f,e,n,r));else{let C=!1,N=!1;const D=n.count!==void 0&&!de(n.count),I=gp.hasDefaultValue(n),S=D?this.pluralResolver.getSuffix(c,n.count,n):"",A=n.ordinal&&D?this.pluralResolver.getSuffix(c,n.count,{ordinal:!1}):"",R=D&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),O=R&&n[`defaultValue${this.options.pluralSeparator}zero`]||n[`defaultValue${S}`]||n[`defaultValue${A}`]||n.defaultValue;!this.isValidLookup(f)&&I&&(C=!0,f=O),this.isValidLookup(f)||(N=!0,f=o);const k=(n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&N?void 0:f,B=I&&O!==f&&this.options.updateMissing;if(N||C||B){if(this.logger.log(B?"updateKey":"missingKey",c,l,o,B?O:f),s){const F=this.resolve(o,{...n,keySeparator:!1});F&&F.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let Q=[];const K=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if(this.options.saveMissingTo==="fallback"&&K&&K[0])for(let F=0;F<K.length;F++)Q.push(K[F]);else this.options.saveMissingTo==="all"?Q=this.languageUtils.toResolveHierarchy(n.lng||this.language):Q.push(n.lng||this.language);const re=(F,z,Y)=>{const J=I&&Y!==f?Y:k;this.options.missingKeyHandler?this.options.missingKeyHandler(F,l,z,J,B,n):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(F,l,z,J,B,n),this.emit("missingKey",F,l,z,f)};this.options.saveMissing&&(this.options.saveMissingPlurals&&D?Q.forEach(F=>{const z=this.pluralResolver.getSuffixes(F,n);R&&n[`defaultValue${this.options.pluralSeparator}zero`]&&z.indexOf(`${this.options.pluralSeparator}zero`)<0&&z.push(`${this.options.pluralSeparator}zero`),z.forEach(Y=>{re([F],o+Y,n[`defaultValue${Y}`]||O)})}):re(Q,o,O))}f=this.extendTranslation(f,e,n,h,r),N&&f===o&&this.options.appendNamespaceToMissingKey&&(f=`${l}:${o}`),(N||C)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?f=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${l}:${o}`:o,C?f:void 0):f=this.options.parseMissingKeyHandler(f))}return i?(h.res=f,h.usedParams=this.getUsedParamsDetails(n),h):f}extendTranslation(e,n,r,i,s){var o=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const c=de(e)&&(r&&r.interpolation&&r.interpolation.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let u;if(c){const f=e.match(this.interpolator.nestingRegexp);u=f&&f.length}let h=r.replace&&!de(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(h={...this.options.interpolation.defaultVariables,...h}),e=this.interpolator.interpolate(e,h,r.lng||this.language||i.usedLng,r),c){const f=e.match(this.interpolator.nestingRegexp),p=f&&f.length;u<p&&(r.nest=!1)}!r.lng&&this.options.compatibilityAPI!=="v1"&&i&&i.res&&(r.lng=this.language||i.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var f=arguments.length,p=new Array(f),g=0;g<f;g++)p[g]=arguments[g];return s&&s[0]===p[0]&&!r.context?(o.logger.warn(`It seems you are nesting recursively key: ${p[0]} in key: ${n[0]}`),null):o.translate(...p,n)},r)),r.interpolation&&this.interpolator.reset()}const a=r.postProcess||this.options.postProcess,l=de(a)?[a]:a;return e!=null&&l&&l.length&&r.applyPostProcessor!==!1&&(e=PV.handle(l,e,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r,i,s,o,a;return de(e)&&(e=[e]),e.forEach(l=>{if(this.isValidLookup(r))return;const c=this.extractFromKey(l,n),u=c.key;i=u;let h=c.namespaces;this.options.fallbackNS&&(h=h.concat(this.options.fallbackNS));const f=n.count!==void 0&&!de(n.count),p=f&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),g=n.context!==void 0&&(de(n.context)||typeof n.context=="number")&&n.context!=="",v=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);h.forEach(w=>{this.isValidLookup(r)||(a=w,!GI[`${v[0]}-${w}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(a)&&(GI[`${v[0]}-${w}`]=!0,this.logger.warn(`key "${i}" for languages "${v.join(", ")}" won't get resolved as namespace "${a}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),v.forEach(E=>{if(this.isValidLookup(r))return;o=E;const x=[u];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(x,u,E,w,n);else{let C;f&&(C=this.pluralResolver.getSuffix(E,n.count,n));const N=`${this.options.pluralSeparator}zero`,D=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(f&&(x.push(u+C),n.ordinal&&C.indexOf(D)===0&&x.push(u+C.replace(D,this.options.pluralSeparator)),p&&x.push(u+N)),g){const I=`${u}${this.options.contextSeparator}${n.context}`;x.push(I),f&&(x.push(I+C),n.ordinal&&C.indexOf(D)===0&&x.push(I+C.replace(D,this.options.pluralSeparator)),p&&x.push(I+N))}}let b;for(;b=x.pop();)this.isValidLookup(r)||(s=b,r=this.getResource(E,w,b,n))}))})}),{res:r,usedKey:i,exactUsedKey:s,usedLng:o,usedNS:a}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,n,r,i):this.resourceStore.getResource(e,n,r,i)}getUsedParamsDetails(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!de(e.replace);let i=r?e.replace:e;if(r&&typeof e.count<"u"&&(i.count=e.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!r){i={...i};for(const s of n)delete i[s]}return i}static hasDefaultValue(e){const n="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&n===r.substring(0,n.length)&&e[r]!==void 0)return!0;return!1}}const yy=t=>t.charAt(0).toUpperCase()+t.slice(1);class KI{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=br.create("languageUtils")}getScriptPartFromCode(e){if(e=pp(e),!e||e.indexOf("-")<0)return null;const n=e.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(e){if(e=pp(e),!e||e.indexOf("-")<0)return e;const n=e.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(e){if(de(e)&&e.indexOf("-")>-1){if(typeof Intl<"u"&&typeof Intl.getCanonicalLocales<"u")try{let i=Intl.getCanonicalLocales(e)[0];if(i&&this.options.lowerCaseLng&&(i=i.toLowerCase()),i)return i}catch{}const n=["hans","hant","latn","cyrl","cans","mong","arab"];let r=e.split("-");return this.options.lowerCaseLng?r=r.map(i=>i.toLowerCase()):r.length===2?(r[0]=r[0].toLowerCase(),r[1]=r[1].toUpperCase(),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=yy(r[1].toLowerCase()))):r.length===3&&(r[0]=r[0].toLowerCase(),r[1].length===2&&(r[1]=r[1].toUpperCase()),r[0]!=="sgn"&&r[2].length===2&&(r[2]=r[2].toUpperCase()),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=yy(r[1].toLowerCase())),n.indexOf(r[2].toLowerCase())>-1&&(r[2]=yy(r[2].toLowerCase()))),r.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let n;return e.forEach(r=>{if(n)return;const i=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(i))&&(n=i)}),!n&&this.options.supportedLngs&&e.forEach(r=>{if(n)return;const i=this.getLanguagePartFromCode(r);if(this.isSupportedCode(i))return n=i;n=this.options.supportedLngs.find(s=>{if(s===i)return s;if(!(s.indexOf("-")<0&&i.indexOf("-")<0)&&(s.indexOf("-")>0&&i.indexOf("-")<0&&s.substring(0,s.indexOf("-"))===i||s.indexOf(i)===0&&i.length>1))return s})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(e,n){if(!e)return[];if(typeof e=="function"&&(e=e(n)),de(e)&&(e=[e]),Array.isArray(e))return e;if(!n)return e.default||[];let r=e[n];return r||(r=e[this.getScriptPartFromCode(n)]),r||(r=e[this.formatLanguageCode(n)]),r||(r=e[this.getLanguagePartFromCode(n)]),r||(r=e.default),r||[]}toResolveHierarchy(e,n){const r=this.getFallbackCodes(n||this.options.fallbackLng||[],e),i=[],s=o=>{o&&(this.isSupportedCode(o)?i.push(o):this.logger.warn(`rejecting language code not found in supportedLngs: ${o}`))};return de(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&s(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&s(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&s(this.getLanguagePartFromCode(e))):de(e)&&s(this.formatLanguageCode(e)),r.forEach(o=>{i.indexOf(o)<0&&s(this.formatLanguageCode(o))}),i}}let Tne=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],bne={1:t=>+(t>1),2:t=>+(t!=1),3:t=>0,4:t=>t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2,5:t=>t==0?0:t==1?1:t==2?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5,6:t=>t==1?0:t>=2&&t<=4?1:2,7:t=>t==1?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2,8:t=>t==1?0:t==2?1:t!=8&&t!=11?2:3,9:t=>+(t>=2),10:t=>t==1?0:t==2?1:t<7?2:t<11?3:4,11:t=>t==1||t==11?0:t==2||t==12?1:t>2&&t<20?2:3,12:t=>+(t%10!=1||t%100==11),13:t=>+(t!==0),14:t=>t==1?0:t==2?1:t==3?2:3,15:t=>t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2,16:t=>t%10==1&&t%100!=11?0:t!==0?1:2,17:t=>t==1||t%10==1&&t%100!=11?0:1,18:t=>t==0?0:t==1?1:2,19:t=>t==1?0:t==0||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3,20:t=>t==1?0:t==0||t%100>0&&t%100<20?1:2,21:t=>t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0,22:t=>t==1?0:t==2?1:(t<0||t>10)&&t%10==0?2:3};const Sne=["v1","v2","v3"],Ine=["v4"],QI={zero:0,one:1,two:2,few:3,many:4,other:5},Cne=()=>{const t={};return Tne.forEach(e=>{e.lngs.forEach(n=>{t[n]={numbers:e.nr,plurals:bne[e.fc]}})}),t};class Pne{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=n,this.logger=br.create("pluralResolver"),(!this.options.compatibilityJSON||Ine.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=Cne(),this.pluralRulesCache={}}addRule(e,n){this.rules[e]=n}clearCache(){this.pluralRulesCache={}}getRule(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi()){const r=pp(e==="dev"?"en":e),i=n.ordinal?"ordinal":"cardinal",s=JSON.stringify({cleanedCode:r,type:i});if(s in this.pluralRulesCache)return this.pluralRulesCache[s];let o;try{o=new Intl.PluralRules(r,{type:i})}catch{if(!e.match(/-|_/))return;const l=this.languageUtils.getLanguagePartFromCode(e);o=this.getRule(l,n)}return this.pluralRulesCache[s]=o,o}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}needsPlural(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(e,n);return this.shouldUseIntlApi()?r&&r.resolvedOptions().pluralCategories.length>1:r&&r.numbers.length>1}getPluralFormsOfKey(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,r).map(i=>`${n}${i}`)}getSuffixes(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(e,n);return r?this.shouldUseIntlApi()?r.resolvedOptions().pluralCategories.sort((i,s)=>QI[i]-QI[s]).map(i=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${i}`):r.numbers.map(i=>this.getSuffix(e,i,n)):[]}getSuffix(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=this.getRule(e,r);return i?this.shouldUseIntlApi()?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${i.select(n)}`:this.getSuffixRetroCompatible(i,n):(this.logger.warn(`no plural rule found for: ${e}`),"")}getSuffixRetroCompatible(e,n){const r=e.noAbs?e.plurals(n):e.plurals(Math.abs(n));let i=e.numbers[r];this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1&&(i===2?i="plural":i===1&&(i=""));const s=()=>this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString();return this.options.compatibilityJSON==="v1"?i===1?"":typeof i=="number"?`_plural_${i.toString()}`:s():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1?s():this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString()}shouldUseIntlApi(){return!Sne.includes(this.options.compatibilityJSON)}}const YI=function(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=mne(t,e,n);return!s&&i&&de(n)&&(s=_0(t,n,r),s===void 0&&(s=_0(e,n,r))),s},vy=t=>t.replace(/\$/g,"$$$$");class Ane{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=br.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||(n=>n),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:n,escapeValue:r,useRawValueToEscape:i,prefix:s,prefixEscaped:o,suffix:a,suffixEscaped:l,formatSeparator:c,unescapeSuffix:u,unescapePrefix:h,nestingPrefix:f,nestingPrefixEscaped:p,nestingSuffix:g,nestingSuffixEscaped:v,nestingOptionsSeparator:w,maxReplaces:E,alwaysFormat:x}=e.interpolation;this.escape=n!==void 0?n:yne,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=i!==void 0?i:!1,this.prefix=s?ca(s):o||"{{",this.suffix=a?ca(a):l||"}}",this.formatSeparator=c||",",this.unescapePrefix=u?"":h||"-",this.unescapeSuffix=this.unescapePrefix?"":u||"",this.nestingPrefix=f?ca(f):p||ca("$t("),this.nestingSuffix=g?ca(g):v||ca(")"),this.nestingOptionsSeparator=w||",",this.maxReplaces=E||1e3,this.alwaysFormat=x!==void 0?x:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(n,r)=>n&&n.source===r?(n.lastIndex=0,n):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,n,r,i){let s,o,a;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},c=p=>{if(p.indexOf(this.formatSeparator)<0){const E=YI(n,l,p,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(E,void 0,r,{...i,...n,interpolationkey:p}):E}const g=p.split(this.formatSeparator),v=g.shift().trim(),w=g.join(this.formatSeparator).trim();return this.format(YI(n,l,v,this.options.keySeparator,this.options.ignoreJSONStructure),w,r,{...i,...n,interpolationkey:v})};this.resetRegExp();const u=i&&i.missingInterpolationHandler||this.options.missingInterpolationHandler,h=i&&i.interpolation&&i.interpolation.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:p=>vy(p)},{regex:this.regexp,safeValue:p=>this.escapeValue?vy(this.escape(p)):vy(p)}].forEach(p=>{for(a=0;s=p.regex.exec(e);){const g=s[1].trim();if(o=c(g),o===void 0)if(typeof u=="function"){const w=u(e,s,i);o=de(w)?w:""}else if(i&&Object.prototype.hasOwnProperty.call(i,g))o="";else if(h){o=s[0];continue}else this.logger.warn(`missed to pass in variable ${g} for interpolating ${e}`),o="";else!de(o)&&!this.useRawValueToEscape&&(o=BI(o));const v=p.safeValue(o);if(e=e.replace(s[0],v),h?(p.regex.lastIndex+=o.length,p.regex.lastIndex-=s[0].length):p.regex.lastIndex=0,a++,a>=this.maxReplaces)break}}),e}nest(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i,s,o;const a=(l,c)=>{const u=this.nestingOptionsSeparator;if(l.indexOf(u)<0)return l;const h=l.split(new RegExp(`${u}[ ]*{`));let f=`{${h[1]}`;l=h[0],f=this.interpolate(f,o);const p=f.match(/'/g),g=f.match(/"/g);(p&&p.length%2===0&&!g||g.length%2!==0)&&(f=f.replace(/'/g,'"'));try{o=JSON.parse(f),c&&(o={...c,...o})}catch(v){return this.logger.warn(`failed parsing options string in nesting for key ${l}`,v),`${l}${u}${f}`}return o.defaultValue&&o.defaultValue.indexOf(this.prefix)>-1&&delete o.defaultValue,l};for(;i=this.nestingRegexp.exec(e);){let l=[];o={...r},o=o.replace&&!de(o.replace)?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;let c=!1;if(i[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(i[1])){const u=i[1].split(this.formatSeparator).map(h=>h.trim());i[1]=u.shift(),l=u,c=!0}if(s=n(a.call(this,i[1].trim(),o),o),s&&i[0]===e&&!de(s))return s;de(s)||(s=BI(s)),s||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${e}`),s=""),c&&(s=l.reduce((u,h)=>this.format(u,h,r.lng,{...r,interpolationkey:i[1].trim()}),s.trim())),e=e.replace(i[0],s),this.regexp.lastIndex=0}return e}}const Rne=t=>{let e=t.toLowerCase().trim();const n={};if(t.indexOf("(")>-1){const r=t.split("(");e=r[0].toLowerCase().trim();const i=r[1].substring(0,r[1].length-1);e==="currency"&&i.indexOf(":")<0?n.currency||(n.currency=i.trim()):e==="relativetime"&&i.indexOf(":")<0?n.range||(n.range=i.trim()):i.split(";").forEach(o=>{if(o){const[a,...l]=o.split(":"),c=l.join(":").trim().replace(/^'+|'+$/g,""),u=a.trim();n[u]||(n[u]=c),c==="false"&&(n[u]=!1),c==="true"&&(n[u]=!0),isNaN(c)||(n[u]=parseInt(c,10))}})}return{formatName:e,formatOptions:n}},ua=t=>{const e={};return(n,r,i)=>{let s=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(s={...s,[i.interpolationkey]:void 0});const o=r+JSON.stringify(s);let a=e[o];return a||(a=t(pp(r),i),e[o]=a),a(n)}};class kne{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=br.create("formatter"),this.options=e,this.formats={number:ua((n,r)=>{const i=new Intl.NumberFormat(n,{...r});return s=>i.format(s)}),currency:ua((n,r)=>{const i=new Intl.NumberFormat(n,{...r,style:"currency"});return s=>i.format(s)}),datetime:ua((n,r)=>{const i=new Intl.DateTimeFormat(n,{...r});return s=>i.format(s)}),relativetime:ua((n,r)=>{const i=new Intl.RelativeTimeFormat(n,{...r});return s=>i.format(s,r.range||"day")}),list:ua((n,r)=>{const i=new Intl.ListFormat(n,{...r});return s=>i.format(s)})},this.init(e)}init(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=n.interpolation.formatSeparator||","}add(e,n){this.formats[e.toLowerCase().trim()]=n}addCached(e,n){this.formats[e.toLowerCase().trim()]=ua(n)}format(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=n.split(this.formatSeparator);if(s.length>1&&s[0].indexOf("(")>1&&s[0].indexOf(")")<0&&s.find(a=>a.indexOf(")")>-1)){const a=s.findIndex(l=>l.indexOf(")")>-1);s[0]=[s[0],...s.splice(1,a)].join(this.formatSeparator)}return s.reduce((a,l)=>{const{formatName:c,formatOptions:u}=Rne(l);if(this.formats[c]){let h=a;try{const f=i&&i.formatParams&&i.formatParams[i.interpolationkey]||{},p=f.locale||f.lng||i.locale||i.lng||r;h=this.formats[c](a,p,{...u,...i,...f})}catch(f){this.logger.warn(f)}return h}else this.logger.warn(`there was no format function for ${c}`);return a},e)}}const Nne=(t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)};class Dne extends Rm{constructor(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=i,this.logger=br.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(r,i.backend,i)}queueLoad(e,n,r,i){const s={},o={},a={},l={};return e.forEach(c=>{let u=!0;n.forEach(h=>{const f=`${c}|${h}`;!r.reload&&this.store.hasResourceBundle(c,h)?this.state[f]=2:this.state[f]<0||(this.state[f]===1?o[f]===void 0&&(o[f]=!0):(this.state[f]=1,u=!1,o[f]===void 0&&(o[f]=!0),s[f]===void 0&&(s[f]=!0),l[h]===void 0&&(l[h]=!0)))}),u||(a[c]=!0)}),(Object.keys(s).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(s),pending:Object.keys(o),toLoadLanguages:Object.keys(a),toLoadNamespaces:Object.keys(l)}}loaded(e,n,r){const i=e.split("|"),s=i[0],o=i[1];n&&this.emit("failedLoading",s,o,n),!n&&r&&this.store.addResourceBundle(s,o,r,void 0,void 0,{skipCopy:!0}),this.state[e]=n?-1:2,n&&r&&(this.state[e]=0);const a={};this.queue.forEach(l=>{pne(l.loaded,[s],o),Nne(l,e),n&&l.errors.push(n),l.pendingCount===0&&!l.done&&(Object.keys(l.loaded).forEach(c=>{a[c]||(a[c]={});const u=l.loaded[c];u.length&&u.forEach(h=>{a[c][h]===void 0&&(a[c][h]=!0)})}),l.done=!0,l.errors.length?l.callback(l.errors):l.callback())}),this.emit("loaded",a),this.queue=this.queue.filter(l=>!l.done)}read(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,o=arguments.length>5?arguments[5]:void 0;if(!e.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:n,fcName:r,tried:i,wait:s,callback:o});return}this.readingCalls++;const a=(c,u)=>{if(this.readingCalls--,this.waitingReads.length>0){const h=this.waitingReads.shift();this.read(h.lng,h.ns,h.fcName,h.tried,h.wait,h.callback)}if(c&&u&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,e,n,r,i+1,s*2,o)},s);return}o(c,u)},l=this.backend[r].bind(this.backend);if(l.length===2){try{const c=l(e,n);c&&typeof c.then=="function"?c.then(u=>a(null,u)).catch(a):a(null,c)}catch(c){a(c)}return}return l(e,n,a)}prepareLoading(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();de(e)&&(e=this.languageUtils.toResolveHierarchy(e)),de(n)&&(n=[n]);const s=this.queueLoad(e,n,r,i);if(!s.toLoad.length)return s.pending.length||i(),null;s.toLoad.forEach(o=>{this.loadOne(o)})}load(e,n,r){this.prepareLoading(e,n,{},r)}reload(e,n,r){this.prepareLoading(e,n,{reload:!0},r)}loadOne(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=e.split("|"),i=r[0],s=r[1];this.read(i,s,"read",void 0,void 0,(o,a)=>{o&&this.logger.warn(`${n}loading namespace ${s} for language ${i} failed`,o),!o&&a&&this.logger.log(`${n}loaded namespace ${s} for language ${i}`,a),this.loaded(e,o,a)})}saveMissing(e,n,r,i,s){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(n)){this.logger.warn(`did not save key "${r}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if(this.backend&&this.backend.create){const l={...o,isUpdate:s},c=this.backend.create.bind(this.backend);if(c.length<6)try{let u;c.length===5?u=c(e,n,r,i,l):u=c(e,n,r,i),u&&typeof u.then=="function"?u.then(h=>a(null,h)).catch(a):a(null,u)}catch(u){a(u)}else c(e,n,r,i,a,l)}!e||!e[0]||this.store.addResource(e[0],n,r,i)}}}const XI=()=>({debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),de(t[1])&&(e.defaultValue=t[1]),de(t[2])&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const n=t[3]||t[2];Object.keys(n).forEach(r=>{e[r]=n[r]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),JI=t=>(de(t.ns)&&(t.ns=[t.ns]),de(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),de(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs&&t.supportedLngs.indexOf("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),t),_h=()=>{},One=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(n=>{typeof t[n]=="function"&&(t[n]=t[n].bind(t))})};class Nu extends Rm{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(super(),this.options=JI(e),this.services={},this.logger=br,this.modules={external:[]},One(this),n&&!this.isInitialized&&!e.isClone){if(!this.options.initImmediate)return this.init(e,n),this;setTimeout(()=>{this.init(e,n)},0)}}init(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof n=="function"&&(r=n,n={}),!n.defaultNS&&n.defaultNS!==!1&&n.ns&&(de(n.ns)?n.defaultNS=n.ns:n.ns.indexOf("translation")<0&&(n.defaultNS=n.ns[0]));const i=XI();this.options={...i,...this.options,...JI(n)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...i.interpolation,...this.options.interpolation}),n.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=n.keySeparator),n.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=n.nsSeparator);const s=u=>u?typeof u=="function"?new u:u:null;if(!this.options.isClone){this.modules.logger?br.init(s(this.modules.logger),this.options):br.init(null,this.options);let u;this.modules.formatter?u=this.modules.formatter:typeof Intl<"u"&&(u=kne);const h=new KI(this.options);this.store=new HI(this.options.resources,this.options);const f=this.services;f.logger=br,f.resourceStore=this.store,f.languageUtils=h,f.pluralResolver=new Pne(h,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),u&&(!this.options.interpolation.format||this.options.interpolation.format===i.interpolation.format)&&(f.formatter=s(u),f.formatter.init(f,this.options),this.options.interpolation.format=f.formatter.format.bind(f.formatter)),f.interpolator=new Ane(this.options),f.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},f.backendConnector=new Dne(s(this.modules.backend),f.resourceStore,f,this.options),f.backendConnector.on("*",function(p){for(var g=arguments.length,v=new Array(g>1?g-1:0),w=1;w<g;w++)v[w-1]=arguments[w];e.emit(p,...v)}),this.modules.languageDetector&&(f.languageDetector=s(this.modules.languageDetector),f.languageDetector.init&&f.languageDetector.init(f,this.options.detection,this.options)),this.modules.i18nFormat&&(f.i18nFormat=s(this.modules.i18nFormat),f.i18nFormat.init&&f.i18nFormat.init(this)),this.translator=new gp(this.services,this.options),this.translator.on("*",function(p){for(var g=arguments.length,v=new Array(g>1?g-1:0),w=1;w<g;w++)v[w-1]=arguments[w];e.emit(p,...v)}),this.modules.external.forEach(p=>{p.init&&p.init(this)})}if(this.format=this.options.interpolation.format,r||(r=_h),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const u=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);u.length>0&&u[0]!=="dev"&&(this.options.lng=u[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(u=>{this[u]=function(){return e.store[u](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(u=>{this[u]=function(){return e.store[u](...arguments),e}});const l=dc(),c=()=>{const u=(h,f)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),l.resolve(f),r(h,f)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return u(null,this.t.bind(this));this.changeLanguage(this.options.lng,u)};return this.options.resources||!this.options.initImmediate?c():setTimeout(c,0),l}loadResources(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_h;const i=de(e)?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if(i&&i.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const s=[],o=a=>{if(!a||a==="cimode")return;this.services.languageUtils.toResolveHierarchy(a).forEach(c=>{c!=="cimode"&&s.indexOf(c)<0&&s.push(c)})};i?o(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(l=>o(l)),this.options.preload&&this.options.preload.forEach(a=>o(a)),this.services.backendConnector.load(s,this.options.ns,a=>{!a&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(a)})}else r(null)}reloadResources(e,n,r){const i=dc();return typeof e=="function"&&(r=e,e=void 0),typeof n=="function"&&(r=n,n=void 0),e||(e=this.languages),n||(n=this.options.ns),r||(r=_h),this.services.backendConnector.reload(e,n,s=>{i.resolve(),r(s)}),i}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&PV.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let n=0;n<this.languages.length;n++){const r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}}changeLanguage(e,n){var r=this;this.isLanguageChangingTo=e;const i=dc();this.emit("languageChanging",e);const s=l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},o=(l,c)=>{c?(s(c),this.translator.changeLanguage(c),this.isLanguageChangingTo=void 0,this.emit("languageChanged",c),this.logger.log("languageChanged",c)):this.isLanguageChangingTo=void 0,i.resolve(function(){return r.t(...arguments)}),n&&n(l,function(){return r.t(...arguments)})},a=l=>{!e&&!l&&this.services.languageDetector&&(l=[]);const c=de(l)?l:this.services.languageUtils.getBestMatchFromCodes(l);c&&(this.language||s(c),this.translator.language||this.translator.changeLanguage(c),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(c)),this.loadResources(c,u=>{o(u,c)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?a(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(a):this.services.languageDetector.detect(a):a(e),i}getFixedT(e,n,r){var i=this;const s=function(o,a){let l;if(typeof a!="object"){for(var c=arguments.length,u=new Array(c>2?c-2:0),h=2;h<c;h++)u[h-2]=arguments[h];l=i.options.overloadTranslationOptionHandler([o,a].concat(u))}else l={...a};l.lng=l.lng||s.lng,l.lngs=l.lngs||s.lngs,l.ns=l.ns||s.ns,l.keyPrefix!==""&&(l.keyPrefix=l.keyPrefix||r||s.keyPrefix);const f=i.options.keySeparator||".";let p;return l.keyPrefix&&Array.isArray(o)?p=o.map(g=>`${l.keyPrefix}${f}${g}`):p=l.keyPrefix?`${l.keyPrefix}${f}${o}`:o,i.t(p,l)};return de(e)?s.lng=e:s.lngs=e,s.ns=n,s.keyPrefix=r,s}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=n.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,s=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const o=(a,l)=>{const c=this.services.backendConnector.state[`${a}|${l}`];return c===-1||c===0||c===2};if(n.precheck){const a=n.precheck(this,o);if(a!==void 0)return a}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||o(r,e)&&(!i||o(s,e)))}loadNamespaces(e,n){const r=dc();return this.options.ns?(de(e)&&(e=[e]),e.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{r.resolve(),n&&n(i)}),r):(n&&n(),Promise.resolve())}loadLanguages(e,n){const r=dc();de(e)&&(e=[e]);const i=this.options.preload||[],s=e.filter(o=>i.indexOf(o)<0&&this.services.languageUtils.isSupportedCode(o));return s.length?(this.options.preload=i.concat(s),this.loadResources(o=>{r.resolve(),n&&n(o)}),r):(n&&n(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=this.services&&this.services.languageUtils||new KI(XI());return n.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return new Nu(e,n)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_h;const r=e.forkResourceStore;r&&delete e.forkResourceStore;const i={...this.options,...e,isClone:!0},s=new Nu(i);return(e.debug!==void 0||e.prefix!==void 0)&&(s.logger=s.logger.clone(e)),["store","services","language"].forEach(a=>{s[a]=this[a]}),s.services={...this.services},s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},r&&(s.store=new HI(this.store.data,i),s.services.resourceStore=s.store),s.translator=new gp(s.services,i),s.translator.on("*",function(a){for(var l=arguments.length,c=new Array(l>1?l-1:0),u=1;u<l;u++)c[u-1]=arguments[u];s.emit(a,...c)}),s.init(i,n),s.translator.options=i,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Bt=Nu.createInstance();Bt.createInstance=Nu.createInstance;Bt.createInstance;Bt.dir;Bt.init;Bt.loadResources;Bt.reloadResources;Bt.use;Bt.changeLanguage;Bt.getFixedT;Bt.t;Bt.exists;Bt.setDefaultNamespace;Bt.hasLoadedNamespace;Bt.loadNamespaces;Bt.loadLanguages;var AV=[],Lne=AV.forEach,Vne=AV.slice;function Mne(t){return Lne.call(Vne.call(arguments,1),function(e){if(e)for(var n in e)t[n]===void 0&&(t[n]=e[n])}),t}var ZI=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,jne=function(e,n,r){var i=r||{};i.path=i.path||"/";var s=encodeURIComponent(n),o="".concat(e,"=").concat(s);if(i.maxAge>0){var a=i.maxAge-0;if(Number.isNaN(a))throw new Error("maxAge should be a Number");o+="; Max-Age=".concat(Math.floor(a))}if(i.domain){if(!ZI.test(i.domain))throw new TypeError("option domain is invalid");o+="; Domain=".concat(i.domain)}if(i.path){if(!ZI.test(i.path))throw new TypeError("option path is invalid");o+="; Path=".concat(i.path)}if(i.expires){if(typeof i.expires.toUTCString!="function")throw new TypeError("option expires is invalid");o+="; Expires=".concat(i.expires.toUTCString())}if(i.httpOnly&&(o+="; HttpOnly"),i.secure&&(o+="; Secure"),i.sameSite){var l=typeof i.sameSite=="string"?i.sameSite.toLowerCase():i.sameSite;switch(l){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return o},eC={create:function(e,n,r,i){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};r&&(s.expires=new Date,s.expires.setTime(s.expires.getTime()+r*60*1e3)),i&&(s.domain=i),document.cookie=jne(e,encodeURIComponent(n),s)},read:function(e){for(var n="".concat(e,"="),r=document.cookie.split(";"),i=0;i<r.length;i++){for(var s=r[i];s.charAt(0)===" ";)s=s.substring(1,s.length);if(s.indexOf(n)===0)return s.substring(n.length,s.length)}return null},remove:function(e){this.create(e,"",-1)}},Fne={name:"cookie",lookup:function(e){var n;if(e.lookupCookie&&typeof document<"u"){var r=eC.read(e.lookupCookie);r&&(n=r)}return n},cacheUserLanguage:function(e,n){n.lookupCookie&&typeof document<"u"&&eC.create(n.lookupCookie,e,n.cookieMinutes,n.cookieDomain,n.cookieOptions)}},Une={name:"querystring",lookup:function(e){var n;if(typeof window<"u"){var r=window.location.search;!window.location.search&&window.location.hash&&window.location.hash.indexOf("?")>-1&&(r=window.location.hash.substring(window.location.hash.indexOf("?")));for(var i=r.substring(1),s=i.split("&"),o=0;o<s.length;o++){var a=s[o].indexOf("=");if(a>0){var l=s[o].substring(0,a);l===e.lookupQuerystring&&(n=s[o].substring(a+1))}}}return n}},hc=null,tC=function(){if(hc!==null)return hc;try{hc=window!=="undefined"&&window.localStorage!==null;var e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch{hc=!1}return hc},$ne={name:"localStorage",lookup:function(e){var n;if(e.lookupLocalStorage&&tC()){var r=window.localStorage.getItem(e.lookupLocalStorage);r&&(n=r)}return n},cacheUserLanguage:function(e,n){n.lookupLocalStorage&&tC()&&window.localStorage.setItem(n.lookupLocalStorage,e)}},fc=null,nC=function(){if(fc!==null)return fc;try{fc=window!=="undefined"&&window.sessionStorage!==null;var e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch{fc=!1}return fc},Bne={name:"sessionStorage",lookup:function(e){var n;if(e.lookupSessionStorage&&nC()){var r=window.sessionStorage.getItem(e.lookupSessionStorage);r&&(n=r)}return n},cacheUserLanguage:function(e,n){n.lookupSessionStorage&&nC()&&window.sessionStorage.setItem(n.lookupSessionStorage,e)}},zne={name:"navigator",lookup:function(e){var n=[];if(typeof navigator<"u"){if(navigator.languages)for(var r=0;r<navigator.languages.length;r++)n.push(navigator.languages[r]);navigator.userLanguage&&n.push(navigator.userLanguage),navigator.language&&n.push(navigator.language)}return n.length>0?n:void 0}},Wne={name:"htmlTag",lookup:function(e){var n,r=e.htmlTag||(typeof document<"u"?document.documentElement:null);return r&&typeof r.getAttribute=="function"&&(n=r.getAttribute("lang")),n}},qne={name:"path",lookup:function(e){var n;if(typeof window<"u"){var r=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(r instanceof Array)if(typeof e.lookupFromPathIndex=="number"){if(typeof r[e.lookupFromPathIndex]!="string")return;n=r[e.lookupFromPathIndex].replace("/","")}else n=r[0].replace("/","")}return n}},Hne={name:"subdomain",lookup:function(e){var n=typeof e.lookupFromSubdomainIndex=="number"?e.lookupFromSubdomainIndex+1:1,r=typeof window<"u"&&window.location&&window.location.hostname&&window.location.hostname.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(r)return r[n]}},RV=!1;try{document.cookie,RV=!0}catch{}var kV=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];RV||kV.splice(1,1);function Gne(){return{order:kV,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:function(e){return e}}}var NV=function(){function t(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};fte(this,t),this.type="languageDetector",this.detectors={},this.init(e,n)}return gte(t,[{key:"init",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=n||{languageUtils:{}},this.options=Mne(r,this.options||{},Gne()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=function(s){return s.replace("-","_")}),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=i,this.addDetector(Fne),this.addDetector(Une),this.addDetector($ne),this.addDetector(Bne),this.addDetector(zne),this.addDetector(Wne),this.addDetector(qne),this.addDetector(Hne)}},{key:"addDetector",value:function(n){return this.detectors[n.name]=n,this}},{key:"detect",value:function(n){var r=this;n||(n=this.options.order);var i=[];return n.forEach(function(s){if(r.detectors[s]){var o=r.detectors[s].lookup(r.options);o&&typeof o=="string"&&(o=[o]),o&&(i=i.concat(o))}}),i=i.map(function(s){return r.options.convertDetectedLanguage(s)}),this.services.languageUtils.getBestMatchFromCodes?i:i.length>0?i[0]:null}},{key:"cacheUserLanguage",value:function(n,r){var i=this;r||(r=this.options.caches),r&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(n)>-1||r.forEach(function(s){i.detectors[s]&&i.detectors[s].cacheUserLanguage(n,i.options)}))}}])}();NV.type="languageDetector";const Kne={navigation:{wardrobe:"My Wardrobe",outfits:"Other Outfits",community:"Community",profile:"Profile",settings:"Settings"},settings:{title:"Settings",description:"Manage your preferences",language:"Language",notifications:"Notifications",manageNotifications:"Manage notifications",privacy:"Privacy",privacySettings:"Privacy settings",help:"Help & Support",getHelp:"Get help"},outfits:{title:"Other Outfits",subtitle:"Discover outfit combinations",buyNow:"Buy Now",summerCasual:"Summer Casual",officeChic:"Office Chic",weekendStyle:"Weekend Style"},auth:{register:{title:"Create an account",emailLabel:"Email",emailPlaceholder:"your@email.com",passwordLabel:"Password",passwordPlaceholder:"Minimum 6 characters",usernameLabel:"Username",usernamePlaceholder:"How should we call you?",submit:"Sign up",googleButton:"Continue with Google",alreadyHaveAccount:"Already have an account?",loginHere:"Login here"},login:{title:"Login",emailLabel:"Email",emailPlaceholder:"your@email.com",passwordLabel:"Password",passwordPlaceholder:"Your password",submit:"Sign in",googleButton:"Sign in with Google",noAccount:"Don't have an account?",registerHere:"Register here",forgotPassword:"Forgot password?"},errors:{emailRequired:"Email is required",emailInvalid:"Email is invalid",passwordRequired:"Password is required",passwordTooShort:"Password must be at least 6 characters",usernameRequired:"Username is required",usernameTaken:"This username is already taken",emailInUse:"This email is already registered",invalidCredentials:"Invalid email or password",default:"An error occurred. Please try again"},success:{accountCreated:"Account created successfully!",loginSuccess:"Welcome back!",googleSuccess:"Google sign in completed!"}},profile:{title:"My Profile",anonymous:"User",editProfile:"Edit profile",posts:"Posts",likes:"Likes",comments:"Comments",shares:"Shares",myPosts:"My posts",postImage:"Post image",logout:"Sign out",profileImage:"Profile picture",changePhoto:"Change photo",uploadPhoto:"Upload photo",removePhoto:"Remove photo",language:"Language"},wardrobe:{title:"My Wardrobe",privateDescription:"Your private collection of clothes",uploadNew:"Upload item",analyzeAll:"Analyze all",empty:"Your wardrobe is empty",addFirstItem:"Start uploading your clothes!",startUploading:"Upload first item",itemAdded:"Item added",itemAnalyzed:"Item analyzed successfully",itemDeleted:"Item deleted",itemRemovedFromWardrobe:"The item has been removed from your wardrobe",uploadTitle:"Upload a photo of your clothes",editing:"Editing item",analysisComplete:"Analysis completed",itemsUpdated:"Items updated successfully",analysisError:"Analysis error"},community:{title:"Community",subtitle:"Share and discover outfits",upload:"Share outfit",postAdded:"Outfit shared",postVisible:"Your outfit is now visible in the community",postDeleted:"Outfit deleted",postDeletedDesc:"The outfit has been removed from the community",uploadTitle:"Upload an image to the community"},post:{commentPlaceholder:"What do you think about this outfit?",addComment:"Add comment",likes:"Likes",comments:"Comments",share:"Share"},upload:{title:"Upload image",addLinks:"Add links",addLink:"Add link",itemType:"Item type",itemTypePlaceholder:"E.g: T-shirt, Pants...",link:"Add item link",submit:"Post",analyzed:"Image analyzed",analysisFailed:"Analysis error",dragDrop:"Drag and drop your image here",or:"or",browse:"Browse files"},share:{title:"Share outfit",linkCopied:"Link copied",linkCopiedDesc:"Link has been copied to clipboard"},analysis:{results:"Analysis results",analyzing:"Analyzing image...",type:"Item type",color:"Color",style:"Style",tags:"Tags"}},Qne={navigation:{wardrobe:"Mi Armario",outfits:"Otros Outfits",community:"Comunidad",profile:"Perfil",settings:"Ajustes"},questionnaire:{title:"Antes de comenzar, cuéntanos un poco sobre ti",language:{title:"Idioma",en:"Inglés",es:"Español"},gender:{title:"Género",male:"Masculino",female:"Femenino",other:"No especificar"},skinTone:"Selecciona tu tono de piel",hairColor:"Selecciona tu color de cabello",height:"Altura",weight:"Peso",cm:"cm",kg:"kg",stylePreference:"¿Cuál es tu estilo y para qué ocasiones sueles vestirte?",occasions:"Ocasiones",styles:{casual:"Casual",elegant:"Elegante",urban:"Urbano",formal:"Formal",sporty:"Deportivo",bohemian:"Bohemio",vintage:"Vintage",minimalist:"Minimalista"},occasionTypes:{work:"Trabajo",casual:"Casual",party:"Fiesta",formal:"Formal",date:"Cita",sport:"Deporte"},next:"Continuar",back:"Volver",complete:"Finalizar cuestionario"},settings:{title:"Ajustes",description:"Gestiona tus preferencias",language:"Idioma",notifications:"Notificaciones",manageNotifications:"Gestionar notificaciones",privacy:"Privacidad",privacySettings:"Ajustes de privacidad",help:"Ayuda y soporte",getHelp:"Obtener ayuda"},outfits:{title:"Otros Outfits",subtitle:"Descubre combinaciones de ropa",buyNow:"Comprar ahora",summerCasual:"Casual de verano",officeChic:"Elegante de oficina",weekendStyle:"Estilo de fin de semana"},auth:{register:{title:"Crear una cuenta",emailLabel:"Correo electrónico",emailPlaceholder:"tu@email.com",passwordLabel:"Contraseña",passwordPlaceholder:"Mínimo 6 caracteres",usernameLabel:"Nombre de usuario",usernamePlaceholder:"¿Cómo quieres que te llamen?",submit:"Registrarse",googleButton:"Continuar con Google",alreadyHaveAccount:"¿Ya tienes una cuenta?",loginHere:"Inicia sesión aquí"},login:{title:"Iniciar sesión",emailLabel:"Correo electrónico",emailPlaceholder:"tu@email.com",passwordLabel:"Contraseña",passwordPlaceholder:"Tu contraseña",submit:"Iniciar sesión",googleButton:"Iniciar sesión con Google",noAccount:"¿No tienes una cuenta?",registerHere:"Regístrate aquí",forgotPassword:"¿Olvidaste tu contraseña?"},errors:{emailRequired:"El correo electrónico es obligatorio",emailInvalid:"El correo electrónico no es válido",passwordRequired:"La contraseña es obligatoria",passwordTooShort:"La contraseña debe tener al menos 6 caracteres",usernameRequired:"El nombre de usuario es obligatorio",usernameTaken:"Este nombre de usuario ya está en uso",emailInUse:"Este correo electrónico ya está registrado",invalidCredentials:"Correo electrónico o contraseña incorrectos",default:"Ha ocurrido un error. Por favor, inténtalo de nuevo"},success:{accountCreated:"¡Cuenta creada con éxito!",loginSuccess:"¡Bienvenido de nuevo!",googleSuccess:"¡Inicio de sesión con Google completado!"}},profile:{title:"Mi Perfil",anonymous:"Usuario",editProfile:"Editar perfil",posts:"Publicaciones",likes:"Me gusta",comments:"Comentarios",shares:"Compartidos",myPosts:"Mis publicaciones",postImage:"Imagen de publicación",logout:"Cerrar sesión",profileImage:"Foto de perfil",changePhoto:"Cambiar foto",uploadPhoto:"Subir foto",removePhoto:"Quitar foto",language:"Idioma",updateProfileImage:"Actualizar foto de perfil",uploadImage:"Subir nueva imagen",imageUpdated:"Foto actualizada",imageUpdateSuccess:"Tu foto de perfil se ha actualizado correctamente",imageUpdateError:"Error al actualizar la foto"},wardrobe:{title:"Mi Armario",privateDescription:"Tu colección privada de prendas",uploadNew:"Subir prenda",analyzeAll:"Analizar todo",empty:"Tu armario está vacío",addFirstItem:"¡Comienza a subir tus prendas!",startUploading:"Subir primera prenda",itemAdded:"Prenda añadida",itemAnalyzed:"Prenda analizada correctamente",itemDeleted:"Prenda eliminada",itemRemovedFromWardrobe:"La prenda se ha eliminado de tu armario",uploadTitle:"Sube una foto de tu ropa",editing:"Editando prenda",analysisComplete:"Análisis completado",itemsUpdated:"Prendas actualizadas correctamente",analysisError:"Error en el análisis"},community:{subtitle:"Comparte y descubre outfits",upload:"Compartir outfit",postAdded:"Outfit compartido",postVisible:"Tu outfit ya es visible en la comunidad",postDeleted:"Outfit eliminado",postDeletedDesc:"El outfit se ha eliminado de la comunidad",uploadTitle:"Sube una imagen a la comunidad"},post:{commentPlaceholder:"¿Qué opinas de este outfit?",addComment:"Añadir comentario",likes:"Me gusta",comments:"Comentarios",share:"Compartir"},upload:{title:"Subir imagen",addLinks:"Añadir enlaces",addLink:"Añadir enlace",itemType:"Tipo de prenda",itemTypePlaceholder:"Ej: Camiseta, Pantalón...",link:"Añadir enlace de la prenda",submit:"Publicar",analyzed:"Imagen analizada",analysisFailed:"Error en el análisis",dragDrop:"Arrastra y suelta tu imagen aquí",or:"o",browse:"Selecciona un archivo"},share:{title:"Compartir outfit",linkCopied:"Enlace copiado",linkCopiedDesc:"El enlace se ha copiado al portapapeles"},analysis:{results:"Resultados del análisis",analyzing:"Analizando imagen...",type:"Tipo de prenda",color:"Color",style:"Estilo",tags:"Etiquetas"}};Bt.use(NV).use(L$).init({resources:{en:{translation:Kne},es:{translation:Qne}},fallbackLng:"es",interpolation:{escapeValue:!1}});const da=({children:t})=>{const{user:e}=yi();return e?e.hasCompletedQuestionnaire?t:m.jsx(Bs,{to:"/questionnaire",replace:!0}):m.jsx(Bs,{to:"/",replace:!0})};function Yne(){wt();const{user:t}=yi(),e=$u(),n=!!(t&&t.hasCompletedQuestionnaire),r=e.pathname==="/",i=e.pathname==="/questionnaire";let s=n;return(r||i)&&(s=!1),m.jsxs("div",{className:"min-h-screen bg-[#E8EBEF]",children:[m.jsx(T$,{}),s&&m.jsx(dne,{}),m.jsx("div",{className:s?"pb-20 md:pt-20 md:pb-0":"",children:m.jsxs(xU,{children:[m.jsx(pr,{path:"/",element:t?t.hasCompletedQuestionnaire?m.jsx(Bs,{to:"/wardrobe",replace:!0}):m.jsx(Bs,{to:"/questionnaire",replace:!0}):m.jsx(tY,{})}),m.jsx(pr,{path:"/questionnaire",element:t?t.hasCompletedQuestionnaire?m.jsx(Bs,{to:"/wardrobe",replace:!0}):m.jsx(kY,{}):m.jsx(Bs,{to:"/",replace:!0})}),m.jsx(pr,{path:"/wardrobe",element:m.jsx(da,{children:m.jsx(tJ,{})})}),m.jsx(pr,{path:"/community",element:m.jsx(da,{children:m.jsx(FZ,{})})}),m.jsx(pr,{path:"/chats",element:m.jsx(da,{children:m.jsx(ine,{})})}),m.jsx(pr,{path:"/outfits",element:m.jsx(da,{children:m.jsx(cJ,{})})}),m.jsx(pr,{path:"/profile",element:m.jsx(da,{children:m.jsx(cne,{})})}),m.jsx(pr,{path:"/settings",element:m.jsx(da,{children:m.jsx(une,{})})}),m.jsx(pr,{path:"*",element:m.jsx(Bs,{to:"/",replace:!0})})]})})]})}function Xne(){return m.jsx($$,{children:m.jsx(bU,{children:m.jsx(Yne,{})})})}function Jne(){return m.jsx(O8,{children:m.jsx(Xne,{})})}wy.createRoot(document.getElementById("root")).render(m.jsx(qe.StrictMode,{children:m.jsx(Jne,{})}));
